cscope 15 $HOME/catkin_ws/src/rikibot_project/rikibot_alego/rikibot_alego_loam               0000457673
	@include/alego/imageProjection.h

1 
	~"®ego/ut™y.h
"

3 
Çme¥aû
 
	glßm


5 
usšg
 
Çme¥aû
 
	g¡d
;

7 şas 
	cImageProjeùiÚ
 : 
public
 
nod–‘
::
Nod–‘


9 
´iv©e
:

10 
ros
::
NodeHªdË
 
nh_
;

11 
	gros
::
Subsüib”
 
sub_pc_
;

12 
	gros
::
Publish”
 
pub_£gm’‹d_şoud_
;

13 
	gros
::
Publish”
 
pub_£g_šfo_
;

14 
	gros
::
Publish”
 
pub_ou›r_
;

15 
	g£nsÜ_msgs
::
PoštCloud2PŒ
 
£gm’‹d_şoud_msg_
;

16 
	gşoud_msgs
::
şoud_šfoPŒ
 
£g_šfo_msg_
;

17 
	g£nsÜ_msgs
::
PoštCloud2PŒ
 
ou›r_şoud_msg_
;

19 
	gPoštCloudT
::
PŒ
 
fuÎ_şoud_
;

20 
	gPoštCloudT
::
PŒ
 
£gm’‹d_şoud_
;

21 
	gPoštCloudT
::
PŒ
 
ou›r_şoud_
;

23 
	gEig’
::
M©rix
<, Eig’::
DyÇmic
, 
	gHÜizÚ_SCAN
> 
	g¿nge_m©_
;

24 
	gEig’
::
M©rix
<, Eig’::
DyÇmic
, 
	gHÜizÚ_SCAN
> 
	gÏb–_m©_
;

25 
	gEig’
::
M©rix
<
boŞ
, Eig’::
DyÇmic
, 
	gHÜizÚ_SCAN
> 
	gground_m©_
;

27 
	gÏb–_út_
;

28 
	gveùÜ
<
	g·œ
<, >> 
	gÃighbÜ_™”_
;

32 
	gpublic
:

33 
ImageProjeùiÚ
()

36 
vœtu®
 
ÚIn™
();

38 
	g´iv©e
:

39 
pcCB
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
);

41 
Ïb–CompÚ’ts
(
row
, 
cŞ
);

43 
publish
();

45 
	g‹m¶©e
 <
ty³Çme
 
	gPoštT
>

46 
»moveClo£dPoštCloud
(cÚ¡ 
pş
::
PoštCloud
<
PoštT
> &
şoud_š
,

47 
pş
::
PoštCloud
<
PoštT
> &
şoud_out
, 
th»s
);

51 
PLUGINLIB_EXPORT_CLASS
(
lßm
::
ImageProjeùiÚ
, 
nod–‘
::
Nod–‘
);

	@include/alego/laserMapping.h

1 
	~"ut™y.h
"

2 
	~<¡d_¤vs/Em±y.h
>

3 
	~<gt§m/geom‘ry/RÙ3.h
>

4 
	~<gt§m/geom‘ry/Po£3.h
>

5 
	~<gt§m/¦am/PriÜFaùÜ.h
>

6 
	~<gt§m/¦am/B‘w“nFaùÜ.h
>

7 
	~<gt§m/nÚlš—r/NÚlš—rFaùÜ.h
>

8 
	~<gt§m/nÚlš—r/Lev’b”gM¬qu¬dtO±imiz”.h
>

9 
	~<gt§m/nÚlš—r/M¬gš®s.h
>

10 
	~<gt§m/nÚlš—r/V®ues.h
>

11 
	~<gt§m/nÚlš—r/ISAM2.h
>

13 
Çme¥aû
 
	glßm


15 
usšg
 
Çme¥aû
 
	g¡d
;

16 
usšg
 
Çme¥aû
 
	ggt§m
;

17 şas 
	cLa£rM­pšg
 : 
public
 
nod–‘
::
Nod–‘


19 
public
:

20 
La£rM­pšg
() {}

21 ~
La£rM­pšg
() {}

22 
vœtu®
 
ÚIn™
();

24 
	g´iv©e
:

25 
ros
::
NodeHªdË
 
nh_
;

26 
	gros
::
NodeHªdË
 
²h_
;

27 
	gros
::
Subsüib”
 
sub_surf_Ï¡_
;

28 
	gros
::
Subsüib”
 
sub_cÜÃr_Ï¡_
;

29 
	gros
::
Subsüib”
 
sub_ou›r_Ï¡_
;

30 
	gros
::
Subsüib”
 
sub_Ï£r_odom_
;

32 
	gros
::
Publish”
 
pub_şoud_su¼ound_
;

33 
	gros
::
Publish”
 
pub_odom_aá_m­³d_
;

34 
	gros
::
Publish”
 
pub_keypo£s_
;

36 
	gros
::
Publish”
 
pub_hi¡Üy_keyäames_
;

37 
	gros
::
Publish”
 
pub_iı_keyäames_
;

38 
	gros
::
Publish”
 
pub_»ûÁ_keyäames_
;

40 
	gros
::
S”viûS”v”
 
¤v_§ve_m­_
;

42 
	gtf
::
T¿nsfÜmBrßdÿ¡”
 
tf_brßdÿ¡”_
;

44 
NÚlš—rFaùÜG¿ph
 
	ggtSAMg¿ph_
;

45 
V®ues
 
	gš™_e¡im©e_
;

46 
V®ues
 
	gİt_e¡im©e_
;

47 
ISAM2
 *
	gi§m_
;

48 
V®ues
 
	gi§m_cur_e¡im©e_
;

49 
	gnoi£Mod–
::
DŸgÚ®
::
sh¬ed_±r
 
´iÜ_noi£_
;

50 
	gnoi£Mod–
::
DŸgÚ®
::
sh¬ed_±r
 
odom_noi£_
;

51 
	gnoi£Mod–
::
DŸgÚ®
::
sh¬ed_±r
 
cÚ¡¿št_noi£_
;

54 
boŞ
 
	gloİ_şo£d_
;

55 
	gÏ‹¡_hi¡Üy_äame_id_
;

56 
	gşo£¡_hi¡Üy_äame_id_
;

57 
	gPoštCloudT
::
PŒ
 
Ï‹¡_keyäame_
;

58 
	gPoštCloudT
::
PŒ
 
Ã¬_hi¡Üy_keyäames_
;

60 
	g¡d
::
mu‹x
 
mtx_
;

61 
	g¡d
::
th»ad
 
loİ_th»ad_
;

62 
	g¡d
::
th»ad
 
maš_th»ad_
;

63 
	g¡d
::
th»ad
 
visu®ize_th»ad_
;

65 
	ghi¡Üy_£¬ch_¿dius_
;

66 
	ghi¡Üy_£¬ch_num_
;

67 
	ghi¡Üy_f™Ãss_scÜe_
;

68 
boŞ
 
	gloİ_şosu»_’abËd_
;

70 
	gPoštCloudT
::
PŒ
 
surf_Ï¡_
;

71 
	gPoštCloudT
::
PŒ
 
cÜÃr_Ï¡_
;

72 
	gPoštCloudT
::
PŒ
 
ou›r_Ï¡_
;

74 
	gveùÜ
<
	gPoštCloudT
::
PŒ
> 
cÜÃr_äames_
;

75 
	gveùÜ
<
	gPoštCloudT
::
PŒ
> 
surf_äames_
;

76 
	gveùÜ
<
	gPoštCloudT
::
PŒ
> 
ou›r_äames_
;

78 
	gPoštCloudT
::
PŒ
 
şoud_keypo£s_3d_
;

79 
	gpş
::
PoštCloud
<
PoštTy³Po£
>::
PŒ
 
şoud_keypo£s_6d_
;

81 
	gPoštCloudT
::
PŒ
 
cÜÃr_äom_m­_
;

82 
	gPoštCloudT
::
PŒ
 
surf_äom_m­_
;

84 
	gPoštCloudT
::
PŒ
 
cÜÃr_äom_m­_ds_
;

85 
	gPoštCloudT
::
PŒ
 
surf_äom_m­_ds_
;

87 
	gPoštCloudT
::
PŒ
 
Ï£r_cÜÃr_
;

88 
	gPoštCloudT
::
PŒ
 
Ï£r_surf_
;

89 
	gPoštCloudT
::
PŒ
 
Ï£r_ou›r_
;

90 
	gPoštCloudT
::
PŒ
 
Ï£r_surf_tÙ®_
;

91 
	gPoštCloudT
::
PŒ
 
Ï£r_cÜÃr_ds_
;

92 
	gPoštCloudT
::
PŒ
 
Ï£r_surf_ds_
;

93 
	gPoštCloudT
::
PŒ
 
Ï£r_ou›r_ds_
;

94 
	gPoštCloudT
::
PŒ
 
Ï£r_surf_tÙ®_ds_
;

95 
	gtime_Ï£r_cÜÃr_
;

96 
	gtime_Ï£r_surf_
;

97 
	gtime_Ï£r_ou›r_
;

98 
	gtime_Ï£r_odom_
;

99 
boŞ
 
	gÃw_Ï£r_cÜÃr_
;

100 
boŞ
 
	gÃw_Ï£r_surf_
;

101 
boŞ
 
	gÃw_Ï£r_ou›r_
;

102 
boŞ
 
	gÃw_Ï£r_odom_
;

104 
	gpş
::
KdT»eFLANN
<
PoštT
>::
PŒ
 
kd_cÜÃr_m­_
;

105 
	gpş
::
KdT»eFLANN
<
PoštT
>::
PŒ
 
kd_surf_m­_
;

106 
	gpş
::
KdT»eFLANN
<
PoštT
>::
PŒ
 
kd_keypo£s_
;

107 
	gveùÜ
<> 
	gpošt_idx_
;

108 
	gveùÜ
<> 
	gpošt_di¡_
;

110 
	gpş
::
Vox–Grid
<
PoštT
> 
ds_cÜÃr_
;

111 
	gpş
::
Vox–Grid
<
PoštT
> 
ds_surf_
;

112 
	gpş
::
Vox–Grid
<
PoštT
> 
ds_ou›r_
;

113 
	gpş
::
Vox–Grid
<
PoštT
> 
ds_keypo£s_
;

114 
	gpş
::
Vox–Grid
<
PoštT
> 
ds_hi¡Üy_keyäames_
;

116 
	gmš_keyäame_di¡_
;

119 
	gdeque
<
	gPoštCloudT
::
PŒ
> 
»ûÁ_cÜÃr_keyäames_
;

120 
	gdeque
<
	gPoštCloudT
::
PŒ
> 
»ûÁ_surf_keyäames_
;

121 
	gdeque
<
	gPoštCloudT
::
PŒ
> 
»ûÁ_ou›r_keyäames_
;

122 
	g»ûÁ_keyäame_£¬ch_num_
;

123 
	gÏ‹¡_äame_id_
;

124 
	gEig’
::
M©rix4d
 
cÜ»ùiÚ_
;

127 
	gPoštCloudT
::
PŒ
 
su¼ound_keypo£s_
;

128 
	gPoštCloudT
::
PŒ
 
su¼ound_keypo£s_ds_
;

129 
	gveùÜ
<> 
	gsu¼ound_exi¡_keypo£_id_
;

130 
	gveùÜ
<
	gPoštCloudT
::
PŒ
> 
su¼ound_cÜÃr_keyäames_
;

131 
	gveùÜ
<
	gPoštCloudT
::
PŒ
> 
su¼ound_surf_keyäames_
;

132 
	gveùÜ
<
	gPoštCloudT
::
PŒ
> 
su¼ound_ou›r_keyäames_
;

133 
	gsu¼ound_keyäame_£¬ch_¿dius_
;

135 
	g·¿ms_
[6];

136 
	gEig’
::
VeùÜ3d
 
t_m­2odom_
;

137 
	gEig’
::
Qu©”niÚd
 
q_m­2odom_
;

138 
	gEig’
::
VeùÜ3d
 
t_odom2Ï£r_
;

139 
	gEig’
::
Qu©”niÚd
 
q_odom2Ï£r_
;

140 
	gEig’
::
VeùÜ3d
 
t_m­2Ï£r_
;

141 
	gEig’
::
Qu©”niÚd
 
q_m­2Ï£r_
;

143 
mašLoİ
();

145 
surfLa¡HªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
);

146 
cÜÃrLa¡HªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
);

147 
ou›rLa¡HªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
);

148 
Ï£rOdomHªdËr
(cÚ¡ 
Çv_msgs
::
Odom‘ryCÚ¡PŒ
 &
msg
);

150 
ŒªsfÜmAssocŸ‹ToM­
();

151 
exŒaùSu¼oundšgKeyF¿mes
();

152 
down§m¶eCu¼’tSÿn
();

153 
sÿn2M­O±imiz©iÚ
();

154 
ŒªsfÜmUpd©e
();

155 
boŞ
 
§veKeyF¿mesAndFaùÜ
();

156 
cÜ»ùPo£s
();

157 
publish
();

159 
visu®izeGlob®M­Th»ad
();

161 
loİClosu»Th»ad
();

162 
boŞ
 
d‘eùLoİClosu»
();

163 
³rfÜmLoİClosu»
();

164 
	gPoštCloudT
::
PŒ
 
ŒªsfÜmPoštCloud
(cÚ¡ 
PoštCloudT
::
CÚ¡PŒ
 
şoud_š
, cÚ¡ 
PoštTy³Po£
 &
Œªs
)

166 
	gEig’
::
M©rix4f
 
this_ŒªsfÜm©iÚ
(
Eig’
::M©rix4f::
Id’t™y
());

167 
	gthis_ŒªsfÜm©iÚ
.
	gblock
<3, 3>(0, 0èğ(
Eig’
::
AngËAxisf
(
Œªs
.
yaw
, Eig’::
VeùÜ3f
::
Un™Z
()) *

168 
Eig’
::
AngËAxisf
(
Œªs
.
p™ch
, Eig’::
VeùÜ3f
::
Un™Y
()) *

169 
Eig’
::
AngËAxisf
(
Œªs
.
rŞl
, Eig’::
VeùÜ3f
::
Un™X
()))

170 .
toRÙ©iÚM©rix
();

171 
this_ŒªsfÜm©iÚ
(0, 3èğ
Œªs
.
x
;

172 
this_ŒªsfÜm©iÚ
(1, 3èğ
Œªs
.
y
;

173 
this_ŒªsfÜm©iÚ
(2, 3èğ
Œªs
.
z
;

174 
	gPoštCloudT
::
PŒ
 
tf_şoud
(
Ãw
 
PoštCloudT
());

175 
	gpş
::
ŒªsfÜmPoštCloud
(*
şoud_š
, *
tf_şoud
, 
this_ŒªsfÜm©iÚ
);

176  
	gtf_şoud
;

178 
	gPoštCloudT
::
PŒ
 
ŒªsfÜmPoštCloud
(cÚ¡ 
PoštCloudT
::
CÚ¡PŒ
 
şoud_š
, cÚ¡ 
PoštTy³Po£
 &
Œªs
, 
idx
)

180 
	gPoštCloudT
::
PŒ
 
tf_şoud
 = 
ŒªsfÜmPoštCloud
(
şoud_š
, 
Œªs
);

181 autØ&
	gp
 : 
tf_şoud
->
pošts
)

183 
p
.
š‹ns™y
 = 
idx
;

185  
	gtf_şoud
;

187 
poštAssocŸ‹ToM­
(cÚ¡ 
PoštT
 &
p_š
, PoštT &
p_out
)

189 
	gEig’
::
VeùÜ3d
 
out
 = 
q_m­2Ï£r_
 * 
Eig’
::VeùÜ3d(
p_š
.
x
,…_š.
y
,…_š.
z
è+ 
	gt_m­2Ï£r_
;

190 
	gp_out
.
	gx
 = 
out
.
x
();

191 
	gp_out
.
	gy
 = 
out
.
y
();

192 
	gp_out
.
	gz
 = 
out
.
z
();

193 
	gp_out
.
	gš‹ns™y
 = 
p_š
.
š‹ns™y
;

195 
boŞ
 
§veM­CB
(
¡d_¤vs
::
Em±y
::
Reque¡
 &
»q
, std_¤vs::Em±y::
Re¥Ú£
 &
»s
);

199 
PLUGINLIB_EXPORT_CLASS
(
lßm
::
La£rM­pšg
, 
nod–‘
::
Nod–‘
)

	@include/alego/laserOdometry.h

1 
	~"ut™y.h
"

3 
Çme¥aû
 
	glßm


5 
usšg
 
Çme¥aû
 
	g¡d
;

6 şas 
	cLa£rOdom‘ry
 : 
public
 
nod–‘
::
Nod–‘


8 
public
:

9 
vœtu®
 
ÚIn™
();

11 
	g´iv©e
:

12 
ros
::
NodeHªdË
 
nh_
;

13 
	gros
::
NodeHªdË
 
²h_
;

14 
	gros
::
Subsüib”
 
sub_£gm’‹d_şoud_
;

15 
	gros
::
Subsüib”
 
sub_£gm’‹d_šfo_
;

16 
	gros
::
Subsüib”
 
sub_ou›r_
;

17 
	gros
::
Subsüib”
 
sub_imu_
;

18 
	gros
::
Subsüib”
 
sub_odom_
;

19 
	gros
::
Publish”
 
pub_surf_
;

20 
	gros
::
Publish”
 
pub_surf_Ëss_
;

21 
	gros
::
Publish”
 
pub_cÜÃr_
;

22 
	gros
::
Publish”
 
pub_cÜÃr_Ëss_
;

23 
	gros
::
Publish”
 
pub_undi¡Ü‹d_pc_
;

24 
	gros
::
Publish”
 
pub_odom_
;

25 
	gros
::
Publish”
 
pub_surf_Ï¡_
;

26 
	gros
::
Publish”
 
pub_cÜÃr_Ï¡_
;

27 
	gros
::
Publish”
 
pub_ou›r_Ï¡_
;

28 
	gtf
::
T¿nsfÜmBrßdÿ¡”
 
tf_brßd_
;

30 
	gqueue
<
	g£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
> 
£g_şoud_buf_
;

31 
	gqueue
<
	gşoud_msgs
::
şoud_šfoCÚ¡PŒ
> 
£g_šfo_buf_
;

32 
	gqueue
<
	g£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
> 
ou›r_buf_
;

33 
	gqueue
<
	gÇv_msgs
::
Odom‘ryCÚ¡PŒ
> 
odom_buf_
;

34 
	gqueue
<
	g£nsÜ_msgs
::
ImuCÚ¡PŒ
> 
imu_buf_
;

36 
	gimu_±r_äÚt_
, 
	gimu_±r_Ï¡_
, 
	gimu_±r_Ï¡_™”_
;

37 
	g¡d
::
¬¿y
<, 
	gimu_queue_Ëngth
> 
	gimu_time_
;

38 
	g¡d
::
¬¿y
<, 
	gimu_queue_Ëngth
> 
	gimu_rŞl_
;

39 
	g¡d
::
¬¿y
<, 
	gimu_queue_Ëngth
> 
	gimu_p™ch_
;

40 
	g¡d
::
¬¿y
<, 
	gimu_queue_Ëngth
> 
	gimu_yaw_
;

41 
	g¡d
::
¬¿y
<, 
	gimu_queue_Ëngth
> 
	gimu_shiá_x_
;

42 
	g¡d
::
¬¿y
<, 
	gimu_queue_Ëngth
> 
	gimu_shiá_y_
;

43 
	g¡d
::
¬¿y
<, 
	gimu_queue_Ëngth
> 
	gimu_shiá_z_
;

44 
	g¡d
::
¬¿y
<, 
	gimu_queue_Ëngth
> 
	gimu_v–o_x_
;

45 
	g¡d
::
¬¿y
<, 
	gimu_queue_Ëngth
> 
	gimu_v–o_y_
;

46 
	g¡d
::
¬¿y
<, 
	gimu_queue_Ëngth
> 
	gimu_v–o_z_
;

49 
	godom_±r_äÚt_
, 
	godom_±r_Ï¡_
, 
	godom_±r_Ï¡_™”_
;

50 
	g¡d
::
¬¿y
<
Çv_msgs
::
Odom‘ryCÚ¡PŒ
, 
	godom_queue_Ëngth
> 
	godom_queue_
;

51 
	g¡d
::
¬¿y
<, 
	godom_queue_Ëngth
> 
	godom_rŞl_
;

52 
	g¡d
::
¬¿y
<, 
	godom_queue_Ëngth
> 
	godom_p™ch_
;

53 
	g¡d
::
¬¿y
<, 
	godom_queue_Ëngth
> 
	godom_yaw_
;

55 
	g¡d
::
¬¿y
<, 
N_SCAN
 * 
	gHÜizÚ_SCAN
> 
	gşoud_curv©u»_
;

56 
	g¡d
::
¬¿y
<
boŞ
, 
N_SCAN
 * 
	gHÜizÚ_SCAN
> 
	gşoud_ÃighbÜ_picked_
;

57 
	g¡d
::
¬¿y
<, 
N_SCAN
 * 
	gHÜizÚ_SCAN
> 
	gşoud_Ïb–_
;

58 
	g¡d
::
¬¿y
<, 
N_SCAN
 * 
	gHÜizÚ_SCAN
> 
	gşoud_sÜt_idx_
;

60 
boŞ
 
	gsy¡em_š™Ÿlized_
;

62 
	gPoštCloudT
::
PŒ
 
surf_Ï¡_
;

63 
	gPoštCloudT
::
PŒ
 
cÜÃr_Ï¡_
;

64 
	gPoštCloudT
::
PŒ
 
ou›r_Ï¡_
;

66 
	gpş
::
KdT»eFLANN
<
PoštT
>::
PŒ
 
kd_surf_Ï¡_
;

67 
	gpş
::
KdT»eFLANN
<
PoštT
>::
PŒ
 
kd_cÜÃr_Ï¡_
;

69 
	g·¿ms_
[6];

70 
	g·¿ms_surf_
[3];

71 
	g·¿ms_cÜÃr_
[3];

72 
	gEig’
::
VeùÜ3d
 
t_w_cur_
;

73 
	gEig’
::
M©rix3d
 
r_w_cur_
;

75 
	g¡d
::
mu‹x
 
m_buf_
;

77 
mašLoİ
();

79 
adju¡Di¡ÜtiÚ
(
PoštCloudT
::
PŒ
 
şoud
, 
sÿn_time
);

80 
ŒªsfÜmToS¹
(cÚ¡ 
PoštT
 &
pi
, PoštT &
po
);

82 
£gCloudHªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
);

83 
£gInfoHªdËr
(cÚ¡ 
şoud_msgs
::
şoud_šfoCÚ¡PŒ
 &
msg
);

84 
ou›rHªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
);

86 
imuHªdËr
(cÚ¡ 
£nsÜ_msgs
::
ImuCÚ¡PŒ
 &
msg
);

87 
odomHªdËr
(cÚ¡ 
Çv_msgs
::
Odom‘ryCÚ¡PŒ
 &
msg
);

91 
PLUGINLIB_EXPORT_CLASS
(
lßm
::
La£rOdom‘ry
, 
nod–‘
::
Nod–‘
)

	@include/alego/utility.h

1 #iâdeà
_LOAM_UTILITY_


2 
	#_LOAM_UTILITY_


	)

4 
	~<io¡»am
>

5 
	~<veùÜ
>

6 
	~<queue
>

7 
	~<deque
>

8 
	~<¡ršg
>

9 
	~<¬¿y
>

10 
	~<th»ad
>

11 
	~<chrÚo
>

12 
	~<mu‹x
>

13 
	~<memÜy
>

14 
	~<lim™s
>

15 
	~<®gÜ™hm
>

17 
	~<ros/ros.h
>

18 
	~<£nsÜ_msgs/PoštCloud2.h
>

19 
	~<£nsÜ_msgs/Imu.h
>

20 
	~<Çv_msgs/Odom‘ry.h
>

21 
	~<Çv_msgs/P©h.h
>

22 
	~<geom‘ry_msgs/Po£W™hCov¬ŸnûSm³d.h
>

23 
	~<tf/tf.h
>

24 
	~<tf/ŒªsfÜm_brßdÿ¡”.h
>

25 
	~<nod–‘/nod–‘.h
>

26 
	~<¶ugšlib/şass_li¡_maüos.h
>

28 
	~"şoud_msgs/şoud_šfo.h
"

30 
	~<pş/pošt_ty³s.h
>

31 
	~<pş/pošt_şoud.h
>

32 
	~<pş/kdŒ“/kdŒ“_æªn.h
>

33 
	~<pş/f‹rs/vox–_grid.h
>

34 
	~<pş/»gi¡¿tiÚ/iı.h
>

35 
	~<pş/io/pcd_io.h
>

36 
	~<pş/commÚ/commÚ.h
>

37 
	~<pş_cÚv”siÚs/pş_cÚv”siÚs.h
>

39 
	~<Eig’/Geom‘ry
>

40 
	~<Eig’/CÜe
>

42 
	~<û»s/û»s.h
>

43 
	~<û»s/rÙ©iÚ.h
>

45 
usšg
 
	gPoštT
 = 
pş
::
PoštXYZI
;

46 
usšg
 
	gPoštCloudT
 = 
pş
::
PoštCloud
<
PoštT
>;

48 
	#RAD2ANGLE
(
x
è((x)*180.0 / 
M_PI
)

	)

49 
	#ANGLE2RAD
(
x
è((xè/ 180.0 * 
M_PI
)

	)

51 cÚ¡ 
	gN_SCAN
 = 16;

53 cÚ¡ 
	gªg_»s_x
 = 0.18;

54 cÚ¡ 
	gªg_»s_y
 = 2.0;

55 cÚ¡ 
	gsÿn_³riod
 = 0.1;

57 cÚ¡ 
	gHÜizÚ_SCAN
 = 360.0 / 
ªg_»s_x
 + 0.5;

58 cÚ¡ 
	gªg_bÙtom
 = 15.0;

59 cÚ¡ 
	gground_sÿn_id
 = 10;

60 cÚ¡ 
	g£nsÜ_mouÁ_ªg
 = 0.;

62 cÚ¡ 
	g£g_®pha_x
 = 
ANGLE2RAD
(
ªg_»s_x
);

63 cÚ¡ 
	g£g_®pha_y
 = 
ANGLE2RAD
(
ªg_»s_y
);

65 cÚ¡ 
	g£g_th‘a
 = 1.047;

66 cÚ¡ 
	g£g_v®id_pošt_num
 = 5;

67 cÚ¡ 
	g£g_v®id_lše_num
 = 3;

70 cÚ¡ 
boŞ
 
	gu£_imu
 = 
Œue
;

71 cÚ¡ 
boŞ
 
	gu£_odom
 = 
çl£
;

72 cÚ¡ 
	gimu_queue_Ëngth
 = 200;

73 cÚ¡ 
	godom_queue_Ëngth
 = 1000;

75 cÚ¡ 
	gÃ¬e¡_ã©u»_di¡
 = 25.;

77 
	eLa£rTy³


79 
	mLSLIDAR_C16
,

80 
	mRFANS_16M


83 
La£rTy³
 
	gÏ£r_ty³
 = La£rTy³::
RFANS_16M
;

85 
	sPoštXYZIRPYT


87 
PCL_ADD_POINT4D


88 
	mPCL_ADD_INTENSITY
;

89 
	mrŞl
;

90 
	mp™ch
;

91 
	myaw
;

92 
	mtime
;

93 
	mEIGEN_MAKE_ALIGNED_OPERATOR_NEW


94 } 
	gEIGEN_ALIGN16
;

96 
POINT_CLOUD_REGISTER_POINT_STRUCT
(
PoštXYZIRPYT
,

97 (, 
x
, x)(, 
y
, y)(, 
z
, z)(, 
š‹ns™y
, iÁ’s™y)(, 
rŞl
,„Şl)(, 
p™ch
,…™ch)(, 
yaw
, yaw)(, 
time
,ime))

99 
PoštXYZIRPYT
 
	tPoštTy³Po£
;

101 şas 
	cTicToc


103 
	mpublic
:

104 
	$TicToc
()

106 
	`tic
();

108 
	$tic
()

110 
¡¬t
 = 
¡d
::
chrÚo
::
sy¡em_şock
::
	`now
();

111 
	}
}

113 
	$toc
()

115 
’d
 = 
¡d
::
chrÚo
::
sy¡em_şock
::
	`now
();

116 
¡d
::
chrÚo
::
du¿tiÚ
<> 
–­£d
 = 
’d
 - 
¡¬t
;

117  
–­£d
.
	`couÁ
() * 1000;

118 
	}
}

120 
	g´iv©e
:

121 
¡d
::
chrÚo
::
time_pošt
<¡d::chrÚo::
sy¡em_şock
> 
¡¬t
, 
	g’d
;

124 
şass
 
	gCÜÃrCo¡FunùiÚ
 : 
public
 
û»s
::
SizedCo¡FunùiÚ
<1, 6>

126 
	gpublic
:

127 
CÜÃrCo¡FunùiÚ
(
Eig’
::
VeùÜ3d
 
ı
, Eig’::VeùÜ3d 
Íj
, Eig’::VeùÜ3d 
Íl
è: 
ı_
(ı), 
Íj_
Öpj), 
Íl_
(lpl) {}

128 
vœtu®
 
boŞ
 
Ev®u©e
(cÚ¡ *cÚ¡ *
·¿m‘”s
, *
»sidu®s
, **
jacobŸns
ècÚ¡ 
	gov”ride


130 
	gEig’
::
VeùÜ3d
 
Í
 = (
Eig’
::
AngËAxisd
(
·¿m‘”s
[0][5], Eig’::VeùÜ3d::
Un™Z
()è* Eig’::AngËAxisdÕ¬am‘”s[0][4], Eig’::VeùÜ3d::
Un™Y
()è* Eig’::AngËAxisdÕ¬am‘”s[0][3], Eig’::VeùÜ3d::
Un™X
())è* 
ı_
 + Eigen::Vector3d(parameters[0][0],…arameters[0][1],…arameters[0][2]);

131 
	gk
 = 
¡d
::
sq¹
(¡d::
pow
(
Íj_
.
x
(è- 
Íl_
.x(), 2è+ std::powÖpj_.
y
(è-†¶_.y(), 2è+ std::powÖpj_.
z
() -†pl_.z(), 2));

132 
	ga
 = (
Í
.
y
(è- 
Íj_
.y()è* (Í.
z
(è- 
Íl_
.z()) - (lp.z() -†pj_.z()) * (lp.y() -†pl_.y());

133 
	gb
 = (
Í
.
z
(è- 
Íj_
.z()è* (Í.
x
(è- 
Íl_
.x()) - (lp.x() -†pj_.x()) * (lp.z() -†pl_.z());

134 
	gc
 = (
Í
.
x
(è- 
Íj_
.x()è* (Í.
y
(è- 
Íl_
.y()) - (lp.y() -†pj_.y()) * (lp.x() -†pl_.x());

135 
	gm
 = 
¡d
::
sq¹
(
a
 *‡ + 
b
 * b + 
c
 * c);

137 
	g»sidu®s
[0] = 
m
 / 
k
;

139 
	gdm_dx
 = (
b
 * (
Íl_
.
z
(è- 
Íj_
.z()è+ 
c
 * (Íj_.
y
(è-†¶_.y())è/ 
m
;

140 
	gdm_dy
 = (
a
 * (
Íj_
.
z
(è- 
Íl_
.z()è- 
c
 * (Íj_.
x
(è-†¶_.x())è/ 
m
;

141 
	gdm_dz
 = (-
a
 * (
Íj_
.
y
(è- 
Íl_
.y()è+ 
b
 * (Íj_.
x
(è-†¶_.x())è/ 
m
;

143 
	g¤
 = 
¡d
::
sš
(
·¿m‘”s
[0][3]);

144 
	gü
 = 
¡d
::
cos
(
·¿m‘”s
[0][3]);

145 
	g¥
 = 
¡d
::
sš
(
·¿m‘”s
[0][4]);

146 
	gı
 = 
¡d
::
cos
(
·¿m‘”s
[0][4]);

147 
	gsy
 = 
¡d
::
sš
(
·¿m‘”s
[0][5]);

148 
	gcy
 = 
¡d
::
cos
(
·¿m‘”s
[0][5]);

150 
	gdx_dr
 = (
cy
 * 
¥
 * 
ü
 + 
¤
 * 
sy
è* 
ı_
.
y
(è+ (sy * c¸- cy * s¸* spè* cp_.
z
();

151 
	gdy_dr
 = (-
cy
 * 
¤
 + 
sy
 * 
¥
 * 
ü
è* 
ı_
.
y
(è+ (-¤ * sy * s°- cy * crè* cp_.
z
();

152 
	gdz_dr
 = 
ı
 * 
ü
 * 
ı_
.
y
(è- c°* 
¤
 * cp_.
z
();

154 
	gdx_dp
 = -
cy
 * 
¥
 * 
ı_
.
x
(è+ cy * 
ı
 * 
¤
 * cp_.
y
(è+ cy * 
ü
 * c°* cp_.
z
();

155 
	gdy_dp
 = -
¥
 * 
sy
 * 
ı_
.
x
(è+ sy * 
ı
 * 
¤
 * cp_.
y
(è+ 
ü
 * s¸* c°* cp_.
z
();

156 
	gdz_dp
 = -
ı
 * 
ı_
.
x
(è- 
¥
 * 
¤
 * cp_.
y
(è- s°* 
ü
 * cp_.
z
();

158 
	gdx_dy
 = -
sy
 * 
ı
 * 
ı_
.
x
(è- (sy * 
¥
 * 
¤
 + 
ü
 * 
cy
è* cp_.
y
(è+ (cy * s¸- sy * c¸* spè* cp_.
z
();

159 
	gdy_dy
 = 
ı
 * 
cy
 * 
ı_
.
x
(è+ (-
sy
 * 
ü
 + cy * 
¥
 * 
¤
è* cp_.
y
(è+ (cy * c¸* s°+ sy * srè* cp_.
z
();

160 
	gdz_dy
 = 0.;

162 ià(
	gjacobŸns
 && jacobians[0])

164 
	gjacobŸns
[0][0] = 
dm_dx
 / 
k
;

165 
	gjacobŸns
[0][1] = 
dm_dy
 / 
k
;

166 
	gjacobŸns
[0][2] = 0.;

167 
	gjacobŸns
[0][3] = 0.;

168 
	gjacobŸns
[0][4] = 0.;

169 
	gjacobŸns
[0][5] = (
dm_dx
 * 
dx_dy
 + 
dm_dy
 * 
dy_dy
 + 
dm_dz
 * 
dz_dy
è/ 
k
;

175  
	gŒue
;

178 
	g´iv©e
:

179 
Eig’
::
VeùÜ3d
 
ı_
;

180 
	gEig’
::
VeùÜ3d
 
Íj_
, 
	gÍl_
;

183 
şass
 
	gSurfCo¡FunùiÚ
 : 
public
 
û»s
::
SizedCo¡FunùiÚ
<1, 6>

185 
	gpublic
:

186 
SurfCo¡FunùiÚ
(
Eig’
::
VeùÜ3d
 
ı
, Eig’::VeùÜ3d 
Íj
, Eig’::VeùÜ3d 
Íl
, Eig’::VeùÜ3d 
Ím
è: 
ı_
(ı), 
Íj_
Öpj), 
Íl_
Ö¶), 
Ím_
(lpm) {}

187 
vœtu®
 
boŞ
 
Ev®u©e
(cÚ¡ *cÚ¡ *
·¿m‘”s
, *
»sidu®s
, **
jacobŸns
ècÚ¡ 
	gov”ride


189 
	gEig’
::
VeùÜ3d
 
Í
 = (
Eig’
::
AngËAxisd
(
·¿m‘”s
[0][5], Eig’::VeùÜ3d::
Un™Z
()è* Eig’::AngËAxisdÕ¬am‘”s[0][4], Eig’::VeùÜ3d::
Un™Y
()è* Eig’::AngËAxisdÕ¬am‘”s[0][3], Eig’::VeùÜ3d::
Un™X
())è* 
ı_
 + Eigen::Vector3d(parameters[0][0],…arameters[0][1],…arameters[0][2]);

190 
	ga
 = (
Íj_
.
y
(è- 
Íl_
.y()è* (Íj_.
z
(è- 
Ím_
.z()) - (lpj_.z() -†pl_.z()) * (lpj_.y() -†pm_.y());

191 
	gb
 = (
Íj_
.
z
(è- 
Íl_
.z()è* (Íj_.
x
(è- 
Ím_
.x()) - (lpj_.x() -†pl_.x()) * (lpj_.z() -†pm_.z());

192 
	gc
 = (
Íj_
.
x
(è- 
Íl_
.x()è* (Íj_.
y
(è- 
Ím_
.y()) - (lpj_.y() -†pl_.y()) * (lpj_.x() -†pm_.x());

193 
	ga
 *ğ
a
;

194 
	gb
 *ğ
b
;

195 
	gc
 *ğ
c
;

196 
	gm
 = 
¡d
::
sq¹
(¡d::
pow
((
Í
.
x
(è- 
Íj_
.x()), 2è* 
a
 + std::pow(Öp.
y
(è-†pj_.y()), 2è* 
b
 + std::pow(Öp.
z
(è-†pj_.z()), 2è* 
c
);

197 
	gk
 = 
¡d
::
sq¹
(
a
 + 
b
 + 
c
);

199 
	g»sidu®s
[0] = 
m
 / 
k
;

201 
	gtmp
 = 
m
 * 
k
;

203 
	gdm_dx
 = ((
Í
.
x
(è- 
Íj_
.x()è* 
a
è/ 
tmp
;

204 
	gdm_dy
 = ((
Í
.
y
(è- 
Íj_
.y()è* 
b
è/ 
tmp
;

205 
	gdm_dz
 = ((
Í
.
z
(è- 
Íj_
.z()è* 
c
è/ 
tmp
;

207 
	g¤
 = 
¡d
::
sš
(
·¿m‘”s
[0][3]);

208 
	gü
 = 
¡d
::
cos
(
·¿m‘”s
[0][3]);

209 
	g¥
 = 
¡d
::
sš
(
·¿m‘”s
[0][4]);

210 
	gı
 = 
¡d
::
cos
(
·¿m‘”s
[0][4]);

211 
	gsy
 = 
¡d
::
sš
(
·¿m‘”s
[0][5]);

212 
	gcy
 = 
¡d
::
cos
(
·¿m‘”s
[0][5]);

214 
	gdx_dr
 = (
cy
 * 
¥
 * 
ü
 + 
¤
 * 
sy
è* 
ı_
.
y
(è+ (sy * c¸- cy * s¸* spè* cp_.
z
();

215 
	gdy_dr
 = (-
cy
 * 
¤
 + 
sy
 * 
¥
 * 
ü
è* 
ı_
.
y
(è+ (-¤ * sy * s°- cy * crè* cp_.
z
();

216 
	gdz_dr
 = 
ı
 * 
ü
 * 
ı_
.
y
(è- c°* 
¤
 * cp_.
z
();

218 
	gdx_dp
 = -
cy
 * 
¥
 * 
ı_
.
x
(è+ cy * 
ı
 * 
¤
 * cp_.
y
(è+ cy * 
ü
 * c°* cp_.
z
();

219 
	gdy_dp
 = -
¥
 * 
sy
 * 
ı_
.
x
(è+ sy * 
ı
 * 
¤
 * cp_.
y
(è+ 
ü
 * s¸* c°* cp_.
z
();

220 
	gdz_dp
 = -
ı
 * 
ı_
.
x
(è- 
¥
 * 
¤
 * cp_.
y
(è- s°* 
ü
 * cp_.
z
();

222 
	gdx_dy
 = -
sy
 * 
ı
 * 
ı_
.
x
(è- (sy * 
¥
 * 
¤
 + 
ü
 * 
cy
è* cp_.
y
(è+ (cy * s¸- sy * c¸* spè* cp_.
z
();

223 
	gdy_dy
 = 
ı
 * 
cy
 * 
ı_
.
x
(è+ (-
sy
 * 
ü
 + cy * 
¥
 * 
¤
è* cp_.
y
(è+ (cy * c¸* s°+ sy * srè* cp_.
z
();

224 
	gdz_dy
 = 0.;

226 ià(
	gjacobŸns
 && jacobians[0])

228 
	gjacobŸns
[0][0] = 0.;

229 
	gjacobŸns
[0][1] = 0.;

230 
	gjacobŸns
[0][2] = 
dm_dz
 / 
k
;

231 
	gjacobŸns
[0][3] = 0.;

232 
	gjacobŸns
[0][4] = 0.;

233 
	gjacobŸns
[0][5] = 0.;

236  
	gŒue
;

239 
	g´iv©e
:

240 
Eig’
::
VeùÜ3d
 
ı_
;

241 
	gEig’
::
VeùÜ3d
 
Íj_
, 
	gÍl_
, 
	gÍm_
;

244 
şass
 
	gLid¬EdgeCo¡FunùiÚ
 : 
public
 
û»s
::
SizedCo¡FunùiÚ
<1, 6>

246 
	gpublic
:

247 
Lid¬EdgeCo¡FunùiÚ
(
Eig’
::
VeùÜ3d
 
ı
, Eig’::VeùÜ3d 
Íj
, Eig’::VeùÜ3d 
Íl
è: 
ı_
(ı), 
Íj_
Öpj), 
Íl_
(lpl) {}

248 
vœtu®
 
boŞ
 
Ev®u©e
(cÚ¡ *cÚ¡ *
·¿m‘”s
, *
»sidu®s
, **
jacobŸns
ècÚ¡ 
	gov”ride


250 
	gEig’
::
VeùÜ3d
 
Í
 = (
Eig’
::
AngËAxisd
(
·¿m‘”s
[0][5], Eig’::VeùÜ3d::
Un™Z
()è* Eig’::AngËAxisdÕ¬am‘”s[0][4], Eig’::VeùÜ3d::
Un™Y
()è* Eig’::AngËAxisdÕ¬am‘”s[0][3], Eig’::VeùÜ3d::
Un™X
())è* 
ı_
 + Eigen::Vector3d(parameters[0][0],…arameters[0][1],…arameters[0][2]);

251 
	gk
 = 
¡d
::
sq¹
(¡d::
pow
(
Íj_
.
x
(è- 
Íl_
.x(), 2è+ std::powÖpj_.
y
(è-†¶_.y(), 2è+ std::powÖpj_.
z
() -†pl_.z(), 2));

252 
	ga
 = (
Í
.
y
(è- 
Íj_
.y()è* (Í.
z
(è- 
Íl_
.z()) - (lp.z() -†pj_.z()) * (lp.y() -†pl_.y());

253 
	gb
 = (
Í
.
z
(è- 
Íj_
.z()è* (Í.
x
(è- 
Íl_
.x()) - (lp.x() -†pj_.x()) * (lp.z() -†pl_.z());

254 
	gc
 = (
Í
.
x
(è- 
Íj_
.x()è* (Í.
y
(è- 
Íl_
.y()) - (lp.y() -†pj_.y()) * (lp.x() -†pl_.x());

255 
	gm
 = 
¡d
::
sq¹
(
a
 *‡ + 
b
 * b + 
c
 * c);

257 
	g»sidu®s
[0] = 
m
 / 
k
;

259 
	gdm_dx
 = (
b
 * (
Íl_
.
z
(è- 
Íj_
.z()è+ 
c
 * (Íj_.
y
(è-†¶_.y())è/ 
m
;

260 
	gdm_dy
 = (
a
 * (
Íj_
.
z
(è- 
Íl_
.z()è- 
c
 * (Íj_.
x
(è-†¶_.x())è/ 
m
;

261 
	gdm_dz
 = (-
a
 * (
Íj_
.
y
(è- 
Íl_
.y()è+ 
b
 * (Íj_.
x
(è-†¶_.x())è/ 
m
;

263 
	g¤
 = 
¡d
::
sš
(
·¿m‘”s
[0][3]);

264 
	gü
 = 
¡d
::
cos
(
·¿m‘”s
[0][3]);

265 
	g¥
 = 
¡d
::
sš
(
·¿m‘”s
[0][4]);

266 
	gı
 = 
¡d
::
cos
(
·¿m‘”s
[0][4]);

267 
	gsy
 = 
¡d
::
sš
(
·¿m‘”s
[0][5]);

268 
	gcy
 = 
¡d
::
cos
(
·¿m‘”s
[0][5]);

270 
	gdx_dr
 = (
cy
 * 
¥
 * 
ü
 + 
¤
 * 
sy
è* 
ı_
.
y
(è+ (sy * c¸- cy * s¸* spè* cp_.
z
();

271 
	gdy_dr
 = (-
cy
 * 
¤
 + 
sy
 * 
¥
 * 
ü
è* 
ı_
.
y
(è+ (-¤ * sy * s°- cy * crè* cp_.
z
();

272 
	gdz_dr
 = 
ı
 * 
ü
 * 
ı_
.
y
(è- c°* 
¤
 * cp_.
z
();

274 
	gdx_dp
 = -
cy
 * 
¥
 * 
ı_
.
x
(è+ cy * 
ı
 * 
¤
 * cp_.
y
(è+ cy * 
ü
 * c°* cp_.
z
();

275 
	gdy_dp
 = -
¥
 * 
sy
 * 
ı_
.
x
(è+ sy * 
ı
 * 
¤
 * cp_.
y
(è+ 
ü
 * s¸* c°* cp_.
z
();

276 
	gdz_dp
 = -
ı
 * 
ı_
.
x
(è- 
¥
 * 
¤
 * cp_.
y
(è- s°* 
ü
 * cp_.
z
();

278 
	gdx_dy
 = -
sy
 * 
ı
 * 
ı_
.
x
(è- (sy * 
¥
 * 
¤
 + 
ü
 * 
cy
è* cp_.
y
(è+ (cy * s¸- sy * c¸* spè* cp_.
z
();

279 
	gdy_dy
 = 
ı
 * 
cy
 * 
ı_
.
x
(è+ (-
sy
 * 
ü
 + cy * 
¥
 * 
¤
è* cp_.
y
(è+ (cy * c¸* s°+ sy * srè* cp_.
z
();

280 
	gdz_dy
 = 0.;

282 ià(
	gjacobŸns
 && jacobians[0])

284 
	gjacobŸns
[0][0] = 
dm_dx
 / 
k
;

285 
	gjacobŸns
[0][1] = 
dm_dy
 / 
k
;

286 
	gjacobŸns
[0][2] = 
dm_dz
 / 
k
;

287 
	gjacobŸns
[0][3] = (
dm_dx
 * 
dx_dr
 + 
dm_dy
 * 
dy_dr
 + 
dm_dz
 * 
dz_dr
è/ 
k
;

288 
	gjacobŸns
[0][4] = (
dm_dx
 * 
dx_dp
 + 
dm_dy
 * 
dy_dp
 + 
dm_dz
 * 
dz_dp
è/ 
k
;

289 
	gjacobŸns
[0][5] = (
dm_dx
 * 
dx_dy
 + 
dm_dy
 * 
dy_dy
 + 
dm_dz
 * 
dz_dy
è/ 
k
;

295  
	gŒue
;

298 
	g´iv©e
:

299 
Eig’
::
VeùÜ3d
 
ı_
;

300 
	gEig’
::
VeùÜ3d
 
Íj_
, 
	gÍl_
;

303 
şass
 
	gLid¬PÏÃCo¡FunùiÚ
 : 
public
 
û»s
::
SizedCo¡FunùiÚ
<1, 6>

305 
	gpublic
:

306 
Lid¬PÏÃCo¡FunùiÚ
(
Eig’
::
VeùÜ3d
 
ı
, Eig’::VeùÜ3d 
¶ªe_un™_nÜm
,

307 
Ãg©ive_OA_dÙ_nÜm
è: 
ı_
(
ı
), 
¶ªe_un™_nÜm_
(
¶ªe_un™_nÜm
),

308 
Ãg©ive_OA_dÙ_nÜm_
(
Ãg©ive_OA_dÙ_nÜm
) {}

309 
vœtu®
 
boŞ
 
Ev®u©e
(cÚ¡ *cÚ¡ *
·¿m‘”s
, *
»sidu®s
, **
jacobŸns
ècÚ¡ 
	gov”ride


311 
	gEig’
::
VeùÜ3d
 
Í
 = (
Eig’
::
AngËAxisd
(
·¿m‘”s
[0][5], Eig’::VeùÜ3d::
Un™Z
()è* Eig’::AngËAxisdÕ¬am‘”s[0][4], Eig’::VeùÜ3d::
Un™Y
()è* Eig’::AngËAxisdÕ¬am‘”s[0][3], Eig’::VeùÜ3d::
Un™X
())è* 
ı_
 + Eigen::Vector3d(parameters[0][0],…arameters[0][1],…arameters[0][2]);

312 
	g»sidu®s
[0] = 
¶ªe_un™_nÜm_
.
dÙ
(
Í
è+ 
Ãg©ive_OA_dÙ_nÜm_
;

313 
	gEig’
::
VeùÜ3d
 
df_dxyz
 = 
¶ªe_un™_nÜm_
;

315 
	g¤
 = 
¡d
::
sš
(
·¿m‘”s
[0][3]);

316 
	gü
 = 
¡d
::
cos
(
·¿m‘”s
[0][3]);

317 
	g¥
 = 
¡d
::
sš
(
·¿m‘”s
[0][4]);

318 
	gı
 = 
¡d
::
cos
(
·¿m‘”s
[0][4]);

319 
	gsy
 = 
¡d
::
sš
(
·¿m‘”s
[0][5]);

320 
	gcy
 = 
¡d
::
cos
(
·¿m‘”s
[0][5]);

322 
	gdx_dr
 = (
cy
 * 
¥
 * 
ü
 + 
¤
 * 
sy
è* 
ı_
.
y
(è+ (sy * c¸- cy * s¸* spè* cp_.
z
();

323 
	gdy_dr
 = (-
cy
 * 
¤
 + 
sy
 * 
¥
 * 
ü
è* 
ı_
.
y
(è+ (-¤ * sy * s°- cy * crè* cp_.
z
();

324 
	gdz_dr
 = 
ı
 * 
ü
 * 
ı_
.
y
(è- c°* 
¤
 * cp_.
z
();

326 
	gdx_dp
 = -
cy
 * 
¥
 * 
ı_
.
x
(è+ cy * 
ı
 * 
¤
 * cp_.
y
(è+ cy * 
ü
 * c°* cp_.
z
();

327 
	gdy_dp
 = -
¥
 * 
sy
 * 
ı_
.
x
(è+ sy * 
ı
 * 
¤
 * cp_.
y
(è+ 
ü
 * s¸* c°* cp_.
z
();

328 
	gdz_dp
 = -
ı
 * 
ı_
.
x
(è- 
¥
 * 
¤
 * cp_.
y
(è- s°* 
ü
 * cp_.
z
();

330 
	gdx_dy
 = -
sy
 * 
ı
 * 
ı_
.
x
(è- (sy * 
¥
 * 
¤
 + 
ü
 * 
cy
è* cp_.
y
(è+ (cy * s¸- sy * c¸* spè* cp_.
z
();

331 
	gdy_dy
 = 
ı
 * 
cy
 * 
ı_
.
x
(è+ (-
sy
 * 
ü
 + cy * 
¥
 * 
¤
è* cp_.
y
(è+ (cy * c¸* s°+ sy * srè* cp_.
z
();

332 
	gdz_dy
 = 0.;

334 ià(
	gjacobŸns
 && jacobians[0])

336 
	gjacobŸns
[0][0] = 
df_dxyz
.
x
();

337 
	gjacobŸns
[0][1] = 
df_dxyz
.
y
();

338 
	gjacobŸns
[0][2] = 
df_dxyz
.
z
();

339 
	gjacobŸns
[0][3] = 
df_dxyz
.
x
(è* 
dx_dr
 + df_dxyz.
y
(è* 
dy_dr
 + df_dxyz.
z
(è* 
dz_dr
;

340 
	gjacobŸns
[0][4] = 
df_dxyz
.
x
(è* 
dx_dp
 + df_dxyz.
y
(è* 
dy_dp
 + df_dxyz.
z
(è* 
dz_dp
;

341 
	gjacobŸns
[0][5] = 
df_dxyz
.
x
(è* 
dx_dy
 + df_dxyz.
y
(è* 
dy_dy
 + df_dxyz.
z
(è* 
dz_dy
;

344  
	gŒue
;

347 
	g´iv©e
:

348 
Eig’
::
VeùÜ3d
 
ı_
;

349 
	gEig’
::
VeùÜ3d
 
¶ªe_un™_nÜm_
;

350 
	gÃg©ive_OA_dÙ_nÜm_
;

	@src/IP.cpp

1 
	~"®ego/ut™y.h
"

3 
usšg
 
Çme¥aû
 
	g¡d
;

5 şas 
	cIP


7 
	m´iv©e
:

8 
ros
::
NodeHªdË
 
nh_
;

9 
	mros
::
Subsüib”
 
sub_pc_
;

10 
	mros
::
Publish”
 
pub_£gm’‹d_şoud_
;

11 
	mros
::
Publish”
 
pub_£g_šfo_
;

12 
	mros
::
Publish”
 
pub_ou›r_
;

13 
	m£nsÜ_msgs
::
PoštCloud2PŒ
 
£gm’‹d_şoud_msg_
;

14 
	mşoud_msgs
::
şoud_šfoPŒ
 
£g_šfo_msg_
;

15 
	m£nsÜ_msgs
::
PoštCloud2PŒ
 
ou›r_şoud_msg_
;

17 
	mPoštCloudT
::
PŒ
 
fuÎ_şoud_
;

18 
	mPoštCloudT
::
PŒ
 
£gm’‹d_şoud_
;

19 
	mPoštCloudT
::
PŒ
 
ou›r_şoud_
;

21 
	mEig’
::
M©rix
<, Eig’::
DyÇmic
, 
	mHÜizÚ_SCAN
> 
	m¿nge_m©_
;

22 
	mEig’
::
M©rix
<, Eig’::
DyÇmic
, 
	mHÜizÚ_SCAN
> 
	mÏb–_m©_
;

23 
	mEig’
::
M©rix
<
boŞ
, Eig’::
DyÇmic
, 
	mHÜizÚ_SCAN
> 
	mground_m©_
;

25 
	mÏb–_út_
;

26 
	mveùÜ
<
	m·œ
<, >> 
	mÃighbÜ_™”_
;

30 
	mpublic
:

31 
	$IP
(
ros
::
NodeHªdË
 
nh
è: 
	$nh_
(
nh
)

33 
	`ÚIn™
();

36 
	$ÚIn™
()

38 
	`ROS_INFO
("---------- ImageProjection init -----------");

39 
TicToc
 
t_š™
;

41 
£gm’‹d_şoud_msg_
.
	`»£t
(
Ãw
 
£nsÜ_msgs
::
	`PoštCloud2
());

42 
£g_šfo_msg_
.
	`»£t
(
Ãw
 
şoud_msgs
::
	`şoud_šfo
());

43 
ou›r_şoud_msg_
.
	`»£t
(
Ãw
 
£nsÜ_msgs
::
	`PoštCloud2
());

45 
£g_šfo_msg_
->
¡¬tRšgIndex
.
	`»size
(
N_SCAN
);

46 
£g_šfo_msg_
->
’dRšgIndex
.
	`»size
(
N_SCAN
);

47 
£g_šfo_msg_
->
£gm’‹dCloudCŞInd
.
	`assign
(
N_SCAN
 * 
HÜizÚ_SCAN
, 
çl£
);

48 
£g_šfo_msg_
->
£gm’‹dCloudGroundFÏg
.
	`assign
(
N_SCAN
 * 
HÜizÚ_SCAN
, 0);

49 
£g_šfo_msg_
->
£gm’‹dCloudRªge
.
	`assign
(
N_SCAN
 * 
HÜizÚ_SCAN
, 0);

50 
fuÎ_şoud_
.
	`»£t
(
Ãw
 
	`PoštCloudT
());

51 
£gm’‹d_şoud_
.
	`»£t
(
Ãw
 
	`PoštCloudT
());

52 
ou›r_şoud_
.
	`»£t
(
Ãw
 
	`PoštCloudT
());

53 
PoštT
 
Çn_p
;

54 
Çn_p
.
š‹ns™y
 = -1;

55 
fuÎ_şoud_
->
pošts
.
	`»size
(
N_SCAN
 * 
HÜizÚ_SCAN
);

56 
¡d
::
	`fl
(
fuÎ_şoud_
->
pošts
.
	`begš
(), fuÎ_şoud_->pošts.
	`’d
(), 
Çn_p
);

58 
¿nge_m©_
.
	`»size
(
N_SCAN
, 
Eig’
::
NoChªge
);

59 
Ïb–_m©_
.
	`»size
(
N_SCAN
, 
Eig’
::
NoChªge
);

60 
ground_m©_
.
	`»size
(
N_SCAN
, 
Eig’
::
NoChªge
);

61 
¿nge_m©_
.
	`£tCÚ¡ªt
(
¡d
::
num”ic_lim™s
<>::
	`max
());

62 
Ïb–_m©_
.
	`£tZ”o
();

63 
ground_m©_
.
	`£tZ”o
();

64 
Ïb–_út_
 = 1;

65 
ÃighbÜ_™”_
.
	`em¶aû_back
(-1, 0);

66 
ÃighbÜ_™”_
.
	`em¶aû_back
(1, 0);

67 
ÃighbÜ_™”_
.
	`em¶aû_back
(0, -1);

68 
ÃighbÜ_™”_
.
	`em¶aû_back
(0, 1);

70 
pub_£gm’‹d_şoud_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/segmented_cloud", 10);

71 
pub_£g_šfo_
 = 
nh_
.
adv”ti£
<
şoud_msgs
::
şoud_šfo
>("/seg_info", 10);

72 
pub_ou›r_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/outlier", 10);

73 
sub_pc_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
PoštCloud2
>("/l¦id¬_pošt_şoud", 10, 
boo¡
::
	`bšd
(&
IP
::
pcCB
, 
this
, 
_1
));

74 
	`ROS_INFO_STREAM
("ImageProjeùiÚ onIn™ƒnd: " << 
t_š™
.
	`toc
());

75 
	}
}

77 
	g‹m¶©e
 <
ty³Çme
 
	gPoštT
>

78 
»moveClo£dPoštCloud
(cÚ¡ 
pş
::
PoštCloud
<
PoštT
> &
şoud_š
,

79 
pş
::
PoštCloud
<
PoštT
> &
şoud_out
, 
th»s
)

81 ià(&
	gşoud_š
 !ğ&
şoud_out
)

83 
şoud_out
.
h—d”
 = 
şoud_š
.header;

84 
	gşoud_out
.
	gpošts
.
»size
(
şoud_š
.
pošts
.
size
());

87 
size_t
 
	gj
 = 0;

89 
size_t
 
	gi
 = 0; i < 
	gşoud_š
.
	gpošts
.
size
(); ++i)

91 ià(
	gşoud_š
.
	gpošts
[
i
].
x
 * cloud_š.pošts[i].
	gx
 + cloud_š.pošts[i].
y
 * cloud_š.pošts[i].
	gy
 + cloud_š.pošts[i].
z
 * cloud_š.pošts[i].
	gz
 < 
th»s
 * 
	gth»s
)

93 
	gşoud_out
.
	gpošts
[
j
] = 
şoud_š
.
pošts
[
i
];

94 
	gj
++;

96 ià(
	gj
 !ğ
şoud_š
.
pošts
.
size
())

98 
şoud_out
.
pošts
.
»size
(
j
);

101 
	gşoud_out
.
	gheight
 = 1;

102 
	gşoud_out
.
	gwidth
 = 
¡©ic_ÿ¡
<
ušt32_t
>(
j
);

103 
	gşoud_out
.
	gis_d’£
 = 
Œue
;

106 
	$pcCB
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
)

108 
TicToc
 
t_whŞe
;

110 
£g_šfo_msg_
->
h—d”
 = 
msg
->header;

111 
PoštCloudT
::
PŒ
 
	`şoud_š
(
Ãw
 
	`PoštCloudT
());

112 
pş
::
	`äomROSMsg
(*
msg
, *
şoud_š
);

115 
¡d
::
veùÜ
<> 
šdiûs
;

116 
pş
::
	`»moveNaNFromPoštCloud
(*
şoud_š
, *şoud_š, 
šdiûs
);

117 
	`»moveClo£dPoštCloud
(*
şoud_š
, *cloud_in, 1.0);

119 
şoud_size
 = 
şoud_š
->
pošts
.
	`size
();

120 
£g_šfo_msg_
->
¡¬tOr›Á©iÚ
 = -
	`©ª2
(
şoud_š
->
pošts
[0].
y
, cloud_š->pošts[0].
x
);

121 
£g_šfo_msg_
->
’dOr›Á©iÚ
 = -
	`©ª2
(
şoud_š
->
pošts
[
şoud_size
 - 1].
y
, cloud_š->pošts[şoud_siz- 1].
x
è+ 2 * 
M_PI
;

122 ià(
£g_šfo_msg_
->
’dOr›Á©iÚ
 - seg_šfo_msg_->
¡¬tOr›Á©iÚ
 > 3 * 
M_PI
)

124 
£g_šfo_msg_
->
’dOr›Á©iÚ
 -ğ2 * 
M_PI
;

126 ià(
£g_šfo_msg_
->
’dOr›Á©iÚ
 - seg_šfo_msg_->
¡¬tOr›Á©iÚ
 < 
M_PI
)

128 
£g_šfo_msg_
->
’dOr›Á©iÚ
 +ğ2 * 
M_PI
;

130 
£g_šfo_msg_
->
Ü›Á©iÚDiff
 = seg_šfo_msg_->
’dOr›Á©iÚ
 - seg_šfo_msg_->
¡¬tOr›Á©iÚ
;

132 
v”tiÿl_ªg
, 
hÜizÚ_ªg
;

133 
row_id
, 
cŞ_id
, 
šdex
;

134 
i
 = 0; i < 
şoud_size
; ++i)

136 autØ&
p
 = 
şoud_š
->
pošts
[
i
];

137 
v”tiÿl_ªg
 = 
	`RAD2ANGLE
(
	`©ª2
(
p
.
z
, 
	`hypÙ
Õ.
x
,….
y
)));

138 ià(
La£rTy³
::
LSLIDAR_C16
 =ğ
Ï£r_ty³
)

140 
row_id
 = (
v”tiÿl_ªg
 + 
ªg_bÙtom
è/ 
ªg_»s_y
 + 0.5;

142 ià(
La£rTy³
::
RFANS_16M
 =ğ
Ï£r_ty³
)

144 ià(
v”tiÿl_ªg
 > 4.5)

146 
row_id
 = 13 + (
v”tiÿl_ªg
 - 5.) / 3 + 0.5;

148 ià(
v”tiÿl_ªg
 > 0.5)

150 
row_id
 = 11 + (
v”tiÿl_ªg
 - 1.0) / 2 + 0.5;

152 ià(
v”tiÿl_ªg
 > -7.)

154 
row_id
 = 10.5 + 
v”tiÿl_ªg
;

156 ià(
v”tiÿl_ªg
 > -8.5)

158 
row_id
 = 3;

160 ià(
v”tiÿl_ªg
 > -10.5)

162 
row_id
 = 2;

164 ià(
v”tiÿl_ªg
 > -13.5)

166 
row_id
 = 1;

170 
row_id
 = 0;

175 
	`ROS_ERROR
("not surpported†aserype.");

178 ià(
row_id
 < 0 ||„ow_id >ğ
N_SCAN
)

180 
	`ROS_WARN
("error„ow_id");

184 
hÜizÚ_ªg
 = 
	`RAD2ANGLE
(-
	`©ª2
(
p
.
y
,….
x
è+ 2 * 
M_PI
);

185 
cŞ_id
 = 
hÜizÚ_ªg
 / 
ªg_»s_x
;

186 ià(
cŞ_id
 >ğ
HÜizÚ_SCAN
)

188 
cŞ_id
 -ğ
HÜizÚ_SCAN
;

190 ià(
cŞ_id
 < 0 || cŞ_id >ğ
HÜizÚ_SCAN
)

192 
	`ROS_WARN
("”rÜ cŞ_id %d ", 
cŞ_id
);

196 
	`¿nge_m©_
(
row_id
, 
cŞ_id
èğ
	`sq¹
(
p
.
x
 *….x +….
y
 *….y +….
z
 *….z);

198 
p
.
š‹ns™y
 = 
row_id
 + 
cŞ_id
 / 10000.0;

199 
šdex
 = 
cŞ_id
 + 
row_id
 * 
HÜizÚ_SCAN
;

200 
fuÎ_şoud_
->
pošts
[
šdex
] = 
p
;

204 
low”_id
, 
uµ”_id
;

205 
diff_x
, 
diff_y
, 
diff_z
, 
ªgË
;

206 
j
 = 0; j < 
HÜizÚ_SCAN
; ++j)

208 
i
 = 0; i < 
ground_sÿn_id
; ++i)

210 
low”_id
 = 
j
 + 
i
 * 
HÜizÚ_SCAN
;

211 
uµ”_id
 = 
j
 + (
i
 + 1è* 
HÜizÚ_SCAN
;

213 ià(-1 =ğ
fuÎ_şoud_
->
pošts
[
low”_id
].
š‹ns™y
 || -1 =ğfuÎ_şoud_->pošts[
uµ”_id
].intensity)

218 
diff_x
 = 
fuÎ_şoud_
->
pošts
[
uµ”_id
].
x
 - fuÎ_şoud_->pošts[
low”_id
].x;

219 
diff_y
 = 
fuÎ_şoud_
->
pošts
[
uµ”_id
].
y
 - fuÎ_şoud_->pošts[
low”_id
].y;

220 
diff_z
 = 
fuÎ_şoud_
->
pošts
[
uµ”_id
].
z
 - fuÎ_şoud_->pošts[
low”_id
].z;

221 
ªgË
 = 
	`RAD2ANGLE
(
	`©ª2
(
diff_z
, 
	`hypÙ
(
diff_x
, 
diff_y
)));

223 ià(
	`abs
(
ªgË
 - 
£nsÜ_mouÁ_ªg
) < 10.)

225 
	`ground_m©_
(
i
, 
j
èğground_m©_(˜+ 1, jèğ
Œue
;

230 
i
 = 0; i < 
N_SCAN
; ++i)

232 
j
 = 0; j < 
HÜizÚ_SCAN
; ++j)

234 ià(
	`ground_m©_
(
i
, 
j
è=ğ
Œue
 || 
	`¿nge_m©_
(i, jè=ğ
¡d
::
num”ic_lim™s
<>::
	`max
())

236 
	`Ïb–_m©_
(
i
, 
j
) = -1;

243 
i
 = 0; i < 
N_SCAN
; ++i)

245 
j
 = 0; j < 
HÜizÚ_SCAN
; ++j)

247 ià(
	`Ïb–_m©_
(
i
, 
j
) == 0)

249 
	`Ïb–CompÚ’ts
(
i
, 
j
);

254 
lše_size
 = 0;

255 
i
 = 0; i < 
N_SCAN
; ++i)

257 
£g_šfo_msg_
->
¡¬tRšgIndex
[
i
] = 
lše_size
 + 5;

258 
j
 = 0; j < 
HÜizÚ_SCAN
; ++j)

260 ià(
	`Ïb–_m©_
(
i
, 
j
è> 0 || 
	`ground_m©_
(i, jè=ğ
Œue
)

263 ià(
	`Ïb–_m©_
(
i
, 
j
) == 999999)

265 ià(
i
 > 
ground_sÿn_id
 && 
j
 % 5 == 0)

267 
ou›r_şoud_
->
pošts
.
	`push_back
(
fuÎ_şoud_
->pošts[
j
 + 
i
 * 
HÜizÚ_SCAN
]);

271 ià(
	`ground_m©_
(
i
, 
j
è=ğ
Œue
)

273 ià(
j
 % 5 !ğ0 && j > 4 && j < 
HÜizÚ_SCAN
 - 5)

279 
£g_šfo_msg_
->
£gm’‹dCloudGroundFÏg
[
lše_size
] = (
	`ground_m©_
(
i
, 
j
è=ğ
Œue
);

280 
£g_šfo_msg_
->
£gm’‹dCloudCŞInd
[
lše_size
] = 
j
;

281 
£g_šfo_msg_
->
£gm’‹dCloudRªge
[
lše_size
] = 
	`¿nge_m©_
(
i
, 
j
);

282 
£gm’‹d_şoud_
->
pošts
.
	`push_back
(
fuÎ_şoud_
->pošts[
j
 + 
i
 * 
HÜizÚ_SCAN
]);

283 ++
lše_size
;

286 
£g_šfo_msg_
->
’dRšgIndex
[
i
] = 
lše_size
 - 1 - 5;

288 
	`publish
();

290 
	`ROS_INFO
("£gm’‹d_şoud size: %d", 
£gm’‹d_şoud_
->
pošts
.
	`size
());

291 
	`ROS_INFO
("ou›r_şoud size: %d", 
ou›r_şoud_
->
pošts
.
	`size
());

293 
£gm’‹d_şoud_
->
	`ş—r
();

294 
ou›r_şoud_
->
	`ş—r
();

295 
¿nge_m©_
.
	`£tCÚ¡ªt
(
¡d
::
num”ic_lim™s
<>::
	`max
());

296 
Ïb–_m©_
.
	`£tZ”o
();

297 
ground_m©_
.
	`£tZ”o
();

298 
Ïb–_út_
 = 1;

299 
PoštT
 
Çn_p
;

300 
Çn_p
.
š‹ns™y
 = -1;

301 
¡d
::
	`fl
(
fuÎ_şoud_
->
pošts
.
	`begš
(), fuÎ_şoud_->pošts.
	`’d
(), 
Çn_p
);

304 
	}
}

306 
	$Ïb–CompÚ’ts
(
row
, 
cŞ
)

308 
d1
, 
d2
, 
®pha
, 
ªgË
;

309 
äom_id_i
, 
äom_id_j
, 
this_id_i
, 
this_id_j
;

310 
boŞ
 
lše_út_æag
[
N_SCAN
] = {
çl£
};

312 
queue
<> 
que_id_i
, 
que_id_j
;

313 
queue
<> 
®l_pushed_id_i
, 
®l_pushed_id_j
;

314 
que_id_i
.
	`push
(
row
);

315 
que_id_j
.
	`push
(
cŞ
);

316 
lše_út_æag
[
row
] = 
Œue
;

317 
®l_pushed_id_i
.
	`push
(
row
);

318 
®l_pushed_id_j
.
	`push
(
cŞ
);

320 !
que_id_i
.
	`em±y
())

322 
äom_id_i
 = 
que_id_i
.
	`äÚt
();

323 
äom_id_j
 = 
que_id_j
.
	`äÚt
();

324 
que_id_i
.
	`pİ
();

325 
que_id_j
.
	`pİ
();

326 
	`Ïb–_m©_
(
äom_id_i
, 
äom_id_j
èğ
Ïb–_út_
;

327 
lše_út_æag
[
äom_id_i
] = 
Œue
;

329 cÚ¡‡utØ&
™”
 : 
ÃighbÜ_™”_
)

331 
this_id_i
 = 
äom_id_i
 + 
™”
.
fœ¡
;

332 
this_id_j
 = 
äom_id_j
 + 
™”
.
£cÚd
;

333 ià(
this_id_i
 < 0 ||his_id_˜>ğ
N_SCAN
)

337 ià(
this_id_j
 < 0)

339 
this_id_j
 = 
HÜizÚ_SCAN
 - 1;

341 ià(
this_id_j
 >ğ
HÜizÚ_SCAN
)

343 
this_id_j
 = 0;

345 ià(
	`Ïb–_m©_
(
this_id_i
, 
this_id_j
))

351 
d1
 = 
	`max
(
	`¿nge_m©_
(
äom_id_i
, 
äom_id_j
),„ªge_m©_(
this_id_i
, 
this_id_j
));

352 
d2
 = 
	`mš
(
	`¿nge_m©_
(
äom_id_i
, 
äom_id_j
),„ªge_m©_(
this_id_i
, 
this_id_j
));

354 ià(
™”
.
fœ¡
 == 0)

356 
®pha
 = 
£g_®pha_x
;

360 
®pha
 = 
£g_®pha_y
;

365 
ªgË
 = 
	`©ª2
(
d2
 * 
	`sš
(
®pha
), (
d1
 - d2 * 
	`cos
(alpha)));

366 ià(
ªgË
 > 
£g_th‘a
)

368 
que_id_i
.
	`push
(
this_id_i
);

369 
que_id_j
.
	`push
(
this_id_j
);

370 
	`Ïb–_m©_
(
this_id_i
, 
this_id_j
èğ
Ïb–_út_
;

371 
lše_út_æag
[
this_id_i
] = 
Œue
;

372 
®l_pushed_id_i
.
	`push
(
this_id_i
);

373 
®l_pushed_id_j
.
	`push
(
this_id_j
);

378 
boŞ
 
ãasibË_£g
 = 
çl£
;

379 ià(
®l_pushed_id_i
.
	`size
() >= 30)

381 
ãasibË_£g
 = 
Œue
;

383 ià(
®l_pushed_id_i
.
	`size
(è>ğ
£g_v®id_pošt_num
)

385 
lše_út
 = 0;

386 
i
 = 0; i < 
N_SCAN
; ++i)

388 ià(
lše_út_æag
[
i
])

390 ++
lše_út
;

393 ià(
lše_út
 >ğ
£g_v®id_lše_num
)

395 
ãasibË_£g
 = 
Œue
;

399 ià(
ãasibË_£g
)

401 ++
Ïb–_út_
;

405 !
®l_pushed_id_i
.
	`em±y
())

407 
	`Ïb–_m©_
(
®l_pushed_id_i
.
	`äÚt
(), 
®l_pushed_id_j
.front()) = 999999;

408 
®l_pushed_id_i
.
	`pİ
();

409 
®l_pushed_id_j
.
	`pİ
();

412 
	}
}

414 
	$publish
()

416 ià(
pub_£g_šfo_
.
	`g‘NumSubsüib”s
() > 0)

418 
pub_£g_šfo_
.
	`publish
(
£g_šfo_msg_
);

420 ià(
pub_£gm’‹d_şoud_
.
	`g‘NumSubsüib”s
() > 0)

422 
pş
::
	`toROSMsg
(*
£gm’‹d_şoud_
, *
£gm’‹d_şoud_msg_
);

423 
£gm’‹d_şoud_msg_
->
h—d”
 = 
£g_šfo_msg_
->header;

424 
pub_£gm’‹d_şoud_
.
	`publish
(
£gm’‹d_şoud_msg_
);

426 ià(
pub_ou›r_
.
	`g‘NumSubsüib”s
() > 0)

428 
pş
::
	`toROSMsg
(*
ou›r_şoud_
, *
ou›r_şoud_msg_
);

429 
ou›r_şoud_msg_
->
h—d”
 = 
£g_šfo_msg_
->header;

430 
pub_ou›r_
.
	`publish
(
ou›r_şoud_msg_
);

432 
	}
}

436 
	$maš
(
¬gc
, **
¬gv
)

438 
ros
::
	`š™
(
¬gc
, 
¬gv
, "IP");

439 
ros
::
NodeHªdË
 
nh
;

440 
IP
 
	`
(
nh
);

441 
ros
::
	`¥š
();

443 
	}
}

	@src/LM.cpp

1 
	~"®ego/ut™y.h
"

2 
	~<¡d_¤vs/Em±y.h
>

3 
	~<gt§m/geom‘ry/RÙ3.h
>

4 
	~<gt§m/geom‘ry/Po£3.h
>

5 
	~<gt§m/¦am/PriÜFaùÜ.h
>

6 
	~<gt§m/¦am/B‘w“nFaùÜ.h
>

7 
	~<gt§m/nÚlš—r/NÚlš—rFaùÜ.h
>

8 
	~<gt§m/nÚlš—r/Lev’b”gM¬qu¬dtO±imiz”.h
>

9 
	~<gt§m/nÚlš—r/M¬gš®s.h
>

10 
	~<gt§m/nÚlš—r/V®ues.h
>

11 
	~<gt§m/nÚlš—r/ISAM2.h
>

13 
usšg
 
Çme¥aû
 
	g¡d
;

14 
usšg
 
Çme¥aû
 
	ggt§m
;

15 şas 
	cLM


17 
	m´iv©e
:

18 
ros
::
NodeHªdË
 
nh_
;

19 
	mros
::
NodeHªdË
 
²h_
;

20 
	mros
::
Subsüib”
 
sub_surf_Ï¡_
;

21 
	mros
::
Subsüib”
 
sub_cÜÃr_Ï¡_
;

22 
	mros
::
Subsüib”
 
sub_ou›r_Ï¡_
;

23 
	mros
::
Subsüib”
 
sub_Ï£r_odom_
;

25 
	mros
::
Publish”
 
pub_şoud_su¼ound_
;

26 
	mros
::
Publish”
 
pub_odom_aá_m­³d_
;

27 
	mros
::
Publish”
 
pub_keypo£s_
;

29 
	mros
::
Publish”
 
pub_hi¡Üy_keyäames_
;

30 
	mros
::
Publish”
 
pub_iı_keyäames_
;

31 
	mros
::
Publish”
 
pub_»ûÁ_keyäames_
;

33 
	mros
::
S”viûS”v”
 
¤v_§ve_m­_
;

35 
	mtf
::
T¿nsfÜmBrßdÿ¡”
 
tf_brßdÿ¡”_
;

37 
NÚlš—rFaùÜG¿ph
 
	mgtSAMg¿ph_
;

38 
V®ues
 
	mš™_e¡im©e_
;

39 
V®ues
 
	mİt_e¡im©e_
;

40 
ISAM2
 *
	mi§m_
;

41 
V®ues
 
	mi§m_cur_e¡im©e_
;

42 
	mnoi£Mod–
::
DŸgÚ®
::
sh¬ed_±r
 
´iÜ_noi£_
;

43 
	mnoi£Mod–
::
DŸgÚ®
::
sh¬ed_±r
 
odom_noi£_
;

44 
	mnoi£Mod–
::
DŸgÚ®
::
sh¬ed_±r
 
cÚ¡¿št_noi£_
;

47 
boŞ
 
	mloİ_şo£d_
;

48 
	mÏ‹¡_hi¡Üy_äame_id_
;

49 
	mşo£¡_hi¡Üy_äame_id_
;

50 
	mPoštCloudT
::
PŒ
 
Ï‹¡_keyäame_
;

51 
	mPoštCloudT
::
PŒ
 
Ã¬_hi¡Üy_keyäames_
;

53 
	m¡d
::
mu‹x
 
mtx_
;

54 
	m¡d
::
th»ad
 
loİ_th»ad_
;

55 
	m¡d
::
th»ad
 
maš_th»ad_
;

56 
	m¡d
::
th»ad
 
visu®ize_th»ad_
;

58 
	mhi¡Üy_£¬ch_¿dius_
;

59 
	mhi¡Üy_£¬ch_num_
;

60 
	mhi¡Üy_f™Ãss_scÜe_
;

61 
boŞ
 
	mloİ_şosu»_’abËd_
;

63 
	mPoštCloudT
::
PŒ
 
surf_Ï¡_
;

64 
	mPoštCloudT
::
PŒ
 
cÜÃr_Ï¡_
;

65 
	mPoštCloudT
::
PŒ
 
ou›r_Ï¡_
;

67 
	mveùÜ
<
	mPoštCloudT
::
PŒ
> 
cÜÃr_äames_
;

68 
	mveùÜ
<
	mPoštCloudT
::
PŒ
> 
surf_äames_
;

69 
	mveùÜ
<
	mPoštCloudT
::
PŒ
> 
ou›r_äames_
;

71 
	mPoštCloudT
::
PŒ
 
şoud_keypo£s_3d_
;

72 
	mpş
::
PoštCloud
<
PoštTy³Po£
>::
PŒ
 
şoud_keypo£s_6d_
;

74 
	mPoštCloudT
::
PŒ
 
cÜÃr_äom_m­_
;

75 
	mPoštCloudT
::
PŒ
 
surf_äom_m­_
;

77 
	mPoštCloudT
::
PŒ
 
cÜÃr_äom_m­_ds_
;

78 
	mPoštCloudT
::
PŒ
 
surf_äom_m­_ds_
;

80 
	mPoštCloudT
::
PŒ
 
Ï£r_cÜÃr_
;

81 
	mPoštCloudT
::
PŒ
 
Ï£r_surf_
;

82 
	mPoštCloudT
::
PŒ
 
Ï£r_ou›r_
;

83 
	mPoštCloudT
::
PŒ
 
Ï£r_surf_tÙ®_
;

84 
	mPoštCloudT
::
PŒ
 
Ï£r_cÜÃr_ds_
;

85 
	mPoštCloudT
::
PŒ
 
Ï£r_surf_ds_
;

86 
	mPoštCloudT
::
PŒ
 
Ï£r_ou›r_ds_
;

87 
	mPoštCloudT
::
PŒ
 
Ï£r_surf_tÙ®_ds_
;

88 
	mtime_Ï£r_cÜÃr_
;

89 
	mtime_Ï£r_surf_
;

90 
	mtime_Ï£r_ou›r_
;

91 
	mtime_Ï£r_odom_
;

92 
boŞ
 
	mÃw_Ï£r_cÜÃr_
;

93 
boŞ
 
	mÃw_Ï£r_surf_
;

94 
boŞ
 
	mÃw_Ï£r_ou›r_
;

95 
boŞ
 
	mÃw_Ï£r_odom_
;

97 
	mpş
::
KdT»eFLANN
<
PoštT
>::
PŒ
 
kd_cÜÃr_m­_
;

98 
	mpş
::
KdT»eFLANN
<
PoštT
>::
PŒ
 
kd_surf_m­_
;

99 
	mpş
::
KdT»eFLANN
<
PoštT
>::
PŒ
 
kd_keypo£s_
;

100 
	mveùÜ
<> 
	mpošt_idx_
;

101 
	mveùÜ
<> 
	mpošt_di¡_
;

103 
	mpş
::
Vox–Grid
<
PoštT
> 
ds_cÜÃr_
;

104 
	mpş
::
Vox–Grid
<
PoštT
> 
ds_surf_
;

105 
	mpş
::
Vox–Grid
<
PoštT
> 
ds_ou›r_
;

106 
	mpş
::
Vox–Grid
<
PoštT
> 
ds_keypo£s_
;

107 
	mpş
::
Vox–Grid
<
PoštT
> 
ds_hi¡Üy_keyäames_
;

109 
	mmš_keyäame_di¡_
;

112 
	mdeque
<
	mPoštCloudT
::
PŒ
> 
»ûÁ_cÜÃr_keyäames_
;

113 
	mdeque
<
	mPoštCloudT
::
PŒ
> 
»ûÁ_surf_keyäames_
;

114 
	mdeque
<
	mPoštCloudT
::
PŒ
> 
»ûÁ_ou›r_keyäames_
;

115 
	m»ûÁ_keyäame_£¬ch_num_
;

116 
	mÏ‹¡_äame_id_
;

117 
	mEig’
::
M©rix4d
 
cÜ»ùiÚ_
;

120 
	mPoštCloudT
::
PŒ
 
su¼ound_keypo£s_
;

121 
	mPoštCloudT
::
PŒ
 
su¼ound_keypo£s_ds_
;

122 
	mveùÜ
<> 
	msu¼ound_exi¡_keypo£_id_
;

123 
	mveùÜ
<
	mPoštCloudT
::
PŒ
> 
su¼ound_cÜÃr_keyäames_
;

124 
	mveùÜ
<
	mPoštCloudT
::
PŒ
> 
su¼ound_surf_keyäames_
;

125 
	mveùÜ
<
	mPoštCloudT
::
PŒ
> 
su¼ound_ou›r_keyäames_
;

126 
	msu¼ound_keyäame_£¬ch_¿dius_
;

128 
	m·¿ms_
[6];

129 
	mEig’
::
VeùÜ3d
 
t_m­2odom_
;

130 
	mEig’
::
Qu©”niÚd
 
q_m­2odom_
;

131 
	mEig’
::
VeùÜ3d
 
t_odom2Ï£r_
;

132 
	mEig’
::
Qu©”niÚd
 
q_odom2Ï£r_
;

133 
	mEig’
::
VeùÜ3d
 
t_m­2Ï£r_
;

134 
	mEig’
::
Qu©”niÚd
 
q_m­2Ï£r_
;

136 
	mpublic
:

137 
	$LM
(
ros
::
NodeHªdË
 
nh
è: 
	$nh_
(
nh
)

139 
	`ÚIn™
();

141 
	$ÚIn™
()

143 
TicToc
 
t_š™
;

145 
	`ROS_INFO
("--------- LaserMapping init --------------");

147 
surf_Ï¡_
.
	`»£t
(
Ãw
 
PoštCloudT
);

148 
cÜÃr_Ï¡_
.
	`»£t
(
Ãw
 
PoštCloudT
);

149 
ou›r_Ï¡_
.
	`»£t
(
Ãw
 
PoštCloudT
);

150 
şoud_keypo£s_3d_
.
	`»£t
(
Ãw
 
PoštCloudT
);

151 
şoud_keypo£s_6d_
.
	`»£t
(
Ãw
 
pş
::
PoštCloud
<
PoštTy³Po£
>);

152 
cÜÃr_äom_m­_
.
	`»£t
(
Ãw
 
PoštCloudT
);

153 
surf_äom_m­_
.
	`»£t
(
Ãw
 
PoštCloudT
);

155 
cÜÃr_äom_m­_ds_
.
	`»£t
(
Ãw
 
PoštCloudT
);

156 
surf_äom_m­_ds_
.
	`»£t
(
Ãw
 
PoštCloudT
);

157 
Ï£r_cÜÃr_
.
	`»£t
(
Ãw
 
PoštCloudT
);

158 
Ï£r_surf_
.
	`»£t
(
Ãw
 
PoštCloudT
);

159 
Ï£r_ou›r_
.
	`»£t
(
Ãw
 
PoštCloudT
);

160 
Ï£r_surf_tÙ®_
.
	`»£t
(
Ãw
 
PoštCloudT
);

161 
Ï£r_cÜÃr_ds_
.
	`»£t
(
Ãw
 
PoštCloudT
);

162 
Ï£r_surf_ds_
.
	`»£t
(
Ãw
 
PoštCloudT
);

163 
Ï£r_ou›r_ds_
.
	`»£t
(
Ãw
 
PoštCloudT
);

164 
Ï£r_surf_tÙ®_ds_
.
	`»£t
(
Ãw
 
PoštCloudT
);

165 
kd_surf_m­_
.
	`»£t
(
Ãw
 
pş
::
KdT»eFLANN
<
PoštT
>);

166 
kd_cÜÃr_m­_
.
	`»£t
(
Ãw
 
pş
::
KdT»eFLANN
<
PoštT
>);

167 
kd_keypo£s_
.
	`»£t
(
Ãw
 
pş
::
KdT»eFLANN
<
PoštT
>);

169 
Ãw_Ï£r_surf_
 = 
Ãw_Ï£r_cÜÃr_
 = 
Ãw_Ï£r_ou›r_
 =‚ew_Ï£r_cÜÃr_ = 
çl£
;

171 
ds_cÜÃr_
.
	`£tL—fSize
(0.4, 0.4, 0.4);

172 
ds_surf_
.
	`£tL—fSize
(0.8, 0.8, 0.8);

173 
ds_ou›r_
.
	`£tL—fSize
(1.0, 1.0, 1.0);

174 
ds_keypo£s_
.
	`£tL—fSize
(1.0, 1.0, 1.0);

175 
ds_hi¡Üy_keyäames_
.
	`£tL—fSize
(0.4, 0.4, 0.4);

177 
mš_keyäame_di¡_
 = 1.0;

179 
su¼ound_keypo£s_
.
	`»£t
(
Ãw
 
PoštCloudT
);

180 
su¼ound_keypo£s_ds_
.
	`»£t
(
Ãw
 
PoštCloudT
);

182 
»ûÁ_keyäame_£¬ch_num_
 = 50;

183 
su¼ound_keyäame_£¬ch_¿dius_
 = 50.;

184 
Ï‹¡_äame_id_
 = -1;

186 
i
 = 0; i < 6; ++i)

188 
·¿ms_
[
i
] = 0.;

190 
t_m­2odom_
.
	`£tZ”o
();

191 
q_m­2odom_
.
	`£tId’t™y
();

192 
t_odom2Ï£r_
.
	`£tZ”o
();

193 
q_odom2Ï£r_
.
	`£tId’t™y
();

194 
t_m­2Ï£r_
.
	`£tZ”o
();

195 
q_m­2Ï£r_
.
	`£tId’t™y
();

197 
ISAM2P¬ams
 
·¿m‘”s
;

198 
·¿m‘”s
.
»lš—rizeTh»shŞd
 = 0.01;

199 
·¿m‘”s
.
»lš—rizeSk
 = 1;

200 
i§m_
 = 
Ãw
 
	`ISAM2
(
·¿m‘”s
);

201 
gt§m
::
VeùÜ
 
	`VeùÜ6
(6);

202 
VeùÜ6
 << 1e-6, 1e-6, 1e-6, 1e-8, 1e-8, 1e-6;

203 
´iÜ_noi£_
 = 
noi£Mod–
::
DŸgÚ®
::
	`V¬Ÿnûs
(
VeùÜ6
);

204 
odom_noi£_
 = 
noi£Mod–
::
DŸgÚ®
::
	`V¬Ÿnûs
(
VeùÜ6
);

206 
loİ_şo£d_
 = 
çl£
;

207 
Ï‹¡_hi¡Üy_äame_id_
 = -1;

208 
Ï‹¡_keyäame_
.
	`»£t
(
Ãw
 
PoštCloudT
);

209 
Ã¬_hi¡Üy_keyäames_
.
	`»£t
(
Ãw
 
PoštCloudT
);

210 
hi¡Üy_£¬ch_¿dius_
 = 10.;

211 
hi¡Üy_£¬ch_num_
 = 25;

212 
hi¡Üy_f™Ãss_scÜe_
 = 0.3;

213 
loİ_şosu»_’abËd_
 = 
Œue
;

214 
cÜ»ùiÚ_
.
	`£tId’t™y
();

216 
pub_şoud_su¼ound_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/laser_cloud_surround", 10);

217 
pub_odom_aá_m­³d_
 = 
nh_
.
adv”ti£
<
Çv_msgs
::
Odom‘ry
>("/odom_aft_mapped", 10);

218 
pub_keypo£s_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/keyposes", 10);

219 
pub_»ûÁ_keyäames_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/recent_keyframes", 10);

220 
pub_hi¡Üy_keyäames_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/history_keyframes", 10);

221 
pub_iı_keyäames_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/icp_keyframes", 10);

222 
¤v_§ve_m­_
 = 
nh_
.
	`adv”ti£S”viû
("/§ve_m­", &
LM
::
§veM­CB
, 
this
);

224 
sub_surf_Ï¡_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
PoštCloud2
>("/surf_Ï¡", 10, 
boo¡
::
	`bšd
(&
LM
::
surfLa¡HªdËr
, 
this
, 
_1
));

225 
sub_cÜÃr_Ï¡_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
PoštCloud2
>("/cÜÃr_Ï¡", 10, 
boo¡
::
	`bšd
(&
LM
::
cÜÃrLa¡HªdËr
, 
this
, 
_1
));

226 
sub_ou›r_Ï¡_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
PoštCloud2
>("/ou›r", 10, 
boo¡
::
	`bšd
(&
LM
::
ou›rLa¡HªdËr
, 
this
, 
_1
));

227 
sub_Ï£r_odom_
 = 
nh_
.
subsüibe
<
Çv_msgs
::
Odom‘ry
>("/odom/lid¬", 10, 
boo¡
::
	`bšd
(&
LM
::
Ï£rOdomHªdËr
, 
this
, 
_1
));

229 
loİ_th»ad_
 = 
¡d
::
	`th»ad
(&
LM
::
loİClosu»Th»ad
, 
this
);

230 
visu®ize_th»ad_
 = 
¡d
::
	`th»ad
(&
LM
::
visu®izeGlob®M­Th»ad
, 
this
);

232 
	`ROS_INFO
("La£rM­pšg onIn™ƒnd: %.3fms", 
t_š™
.
	`toc
());

233 
	}
}

235 
	$mašLoİ
()

237 
ros
::
Du¿tiÚ
 
	`du¿
(0.01);

238 
ros
::
	`ok
())

240 ià(
Ãw_Ï£r_surf_
 && 
Ãw_Ï£r_cÜÃr_
 && 
Ãw_Ï£r_ou›r_
 && 
Ãw_Ï£r_odom_
 &&

241 
¡d
::
	`abs
(
time_Ï£r_surf_
 - 
time_Ï£r_cÜÃr_
è< 0.005 && std::absÑime_Ï£r_surf_ - 
time_Ï£r_ou›r_
è< 0.005 && std::absÑime_Ï£r_surf_ - 
time_Ï£r_odom_
) < 0.005)

243 
Ãw_Ï£r_surf_
 = 
Ãw_Ï£r_cÜÃr_
 = 
Ãw_Ï£r_ou›r_
 = 
Ãw_Ï£r_odom_
 = 
çl£
;

244 
äame_út
 = 0;

245 ià(
äame_út
 % 2 == 0)

247 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lock
(
mtx_
);

248 
TicToc
 
t_whŞe
;

249 
	`ROS_INFO
("transformAssociateToMap");

250 
TicToc
 
t_tm
;

251 
	`ŒªsfÜmAssocŸ‹ToM­
();

252 
	`ROS_INFO
("ŒªsfÜmAssocŸ‹ToM­: %.3fms", 
t_tm
.
	`toc
());

253 
	`ROS_INFO
("extractSurroundingKeyFrames");

254 
TicToc
 
t_eskf
;

255 
	`exŒaùSu¼oundšgKeyF¿mes
();

256 
	`ROS_INFO
("exŒaùSu¼oundšgKeyF¿mes: %.3fms", 
t_eskf
.
	`toc
());

257 
	`ROS_INFO
("downsampleCurrentScan");

258 
TicToc
 
t_dcs
;

259 
	`down§m¶eCu¼’tSÿn
();

260 
	`ROS_INFO
("down§m¶eCu¼’tSÿn: %.3fms", 
t_dcs
.
	`toc
());

261 
	`ROS_INFO
("scan2MapOptimization");

262 
TicToc
 
t_s2mo
;

263 
	`sÿn2M­O±imiz©iÚ
();

264 
	`ROS_INFO
("sÿn2M­O±imiz©iÚ: %.3fms", 
t_s2mo
.
	`toc
());

265 
	`§veKeyF¿mesAndFaùÜ
();

266 
	`cÜ»ùPo£s
();

267 
	`ŒªsfÜmUpd©e
();

268 
	`publish
();

269 
	`ROS_INFO
("m­pšg whŞtime: %.3fms", 
t_whŞe
.
	`toc
());

271 ++
äame_út
;

273 
du¿
.
	`¦“p
();

274 
ros
::
	`¥šOnû
();

276 
	}
}

278 
	$surfLa¡HªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
)

280 
Ï£r_surf_
->
	`ş—r
();

281 
pş
::
	`äomROSMsg
(*
msg
, *
Ï£r_surf_
);

282 
time_Ï£r_surf_
 = 
msg
->
h—d”
.
¡amp
.
	`toSec
();

283 
Ãw_Ï£r_surf_
 = 
Œue
;

284 
	}
}

285 
	$cÜÃrLa¡HªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
)

287 
Ï£r_cÜÃr_
->
	`ş—r
();

288 
pş
::
	`äomROSMsg
(*
msg
, *
Ï£r_cÜÃr_
);

289 
time_Ï£r_cÜÃr_
 = 
msg
->
h—d”
.
¡amp
.
	`toSec
();

290 
Ãw_Ï£r_cÜÃr_
 = 
Œue
;

291 
	}
}

292 
	$ou›rLa¡HªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
)

294 
Ï£r_ou›r_
->
	`ş—r
();

295 
pş
::
	`äomROSMsg
(*
msg
, *
Ï£r_ou›r_
);

296 
time_Ï£r_ou›r_
 = 
msg
->
h—d”
.
¡amp
.
	`toSec
();

297 
Ãw_Ï£r_ou›r_
 = 
Œue
;

298 
	}
}

299 
	$Ï£rOdomHªdËr
(cÚ¡ 
Çv_msgs
::
Odom‘ryCÚ¡PŒ
 &
msg
)

301 
time_Ï£r_odom_
 = 
msg
->
h—d”
.
¡amp
.
	`toSec
();

302 
Ãw_Ï£r_odom_
 = 
Œue
;

303 
	`t_odom2Ï£r_
(0èğ
msg
->
po£
.po£.
pos™iÚ
.
x
;

304 
	`t_odom2Ï£r_
(1èğ
msg
->
po£
.po£.
pos™iÚ
.
y
;

305 
	`t_odom2Ï£r_
(2èğ
msg
->
po£
.po£.
pos™iÚ
.
z
;

306 
q_odom2Ï£r_
.
	`w
(èğ
msg
->
po£
.po£.
Ü›Á©iÚ
.
w
;

307 
q_odom2Ï£r_
.
	`x
(èğ
msg
->
po£
.po£.
Ü›Á©iÚ
.
x
;

308 
q_odom2Ï£r_
.
	`y
(èğ
msg
->
po£
.po£.
Ü›Á©iÚ
.
y
;

309 
q_odom2Ï£r_
.
	`z
(èğ
msg
->
po£
.po£.
Ü›Á©iÚ
.
z
;

310 
t_m­2Ï£r_
 = 
q_m­2odom_
 * 
t_odom2Ï£r_
 + 
t_m­2odom_
;

311 
q_m­2Ï£r_
 = 
q_m­2odom_
 * 
q_odom2Ï£r_
;

312 ià(
pub_odom_aá_m­³d_
.
	`g‘NumSubsüib”s
() > 0)

314 
Çv_msgs
::
Odom‘ryPŒ
 
	`msg
(
Ãw
‚av_msgs::
Odom‘ry
);

315 
msg
->
h—d”
.
¡amp
.
	`äomSec
(
time_Ï£r_odom_
);

316 
msg
->
h—d”
.
äame_id
 = "map";

317 
msg
->
chd_äame_id
 = "/laser";

318 
msg
->
po£
.po£.
pos™iÚ
.
x
 = 
t_m­2Ï£r_
.
	`x
();

319 
msg
->
po£
.po£.
pos™iÚ
.
y
 = 
t_m­2Ï£r_
.
	`y
();

320 
msg
->
po£
.po£.
pos™iÚ
.
z
 = 
t_m­2Ï£r_
.
	`z
();

321 
msg
->
po£
.po£.
Ü›Á©iÚ
.
w
 = 
q_m­2Ï£r_
.
	`w
();

322 
msg
->
po£
.po£.
Ü›Á©iÚ
.
x
 = 
q_m­2Ï£r_
.
	`x
();

323 
msg
->
po£
.po£.
Ü›Á©iÚ
.
y
 = 
q_m­2Ï£r_
.
	`y
();

324 
msg
->
po£
.po£.
Ü›Á©iÚ
.
z
 = 
q_m­2Ï£r_
.
	`z
();

325 
pub_odom_aá_m­³d_
.
	`publish
(
msg
);

327 
tf
::
T¿nsfÜm
 
tf_m2o
;

328 
tf_m2o
.
	`£tOrigš
(
tf
::
	`VeùÜ3
(
t_m­2odom_
.
	`x
(),_m­2odom_.
	`y
(),_m­2odom_.
	`z
()));

329 
tf_m2o
.
	`£tRÙ©iÚ
(
tf
::
	`Qu©”niÚ
(
q_m­2odom_
.
	`x
(), q_m­2odom_.
	`y
(), q_m­2odom_.
	`z
(), q_m­2odom_.
	`w
()));

330 
tf_brßdÿ¡”_
.
	`£ndT¿nsfÜm
(
tf
::
	`Sm³dT¿nsfÜm
(
tf_m2o
, 
ros
::
Time
::
	`now
(), "map", "/odom"));

331 
	}
}

333 
	$ŒªsfÜmAssocŸ‹ToM­
()

335 
t_m­2Ï£r_
 = 
q_m­2odom_
 * 
t_odom2Ï£r_
 + 
t_m­2odom_
;

336 
q_m­2Ï£r_
 = 
q_m­2odom_
 * 
q_odom2Ï£r_
;

337 
	}
}

339 
	$exŒaùSu¼oundšgKeyF¿mes
()

341 
TicToc
 
t_d©a
;

342 
	`ROS_INFO
("extractSurroundingKeyFrames");

343 
surf_äom_m­_
->
	`ş—r
();

344 
cÜÃr_äom_m­_
->
	`ş—r
();

345 
surf_äom_m­_ds_
->
	`ş—r
();

346 
cÜÃr_äom_m­_ds_
->
	`ş—r
();

347 ià(
şoud_keypo£s_3d_
->
	`em±y
())

351 ià(
loİ_şosu»_’abËd_
)

353 ià(
»ûÁ_cÜÃr_keyäames_
.
	`size
(è< 
»ûÁ_keyäame_£¬ch_num_
)

355 
»ûÁ_cÜÃr_keyäames_
.
	`ş—r
();

356 
»ûÁ_surf_keyäames_
.
	`ş—r
();

357 
»ûÁ_ou›r_keyäames_
.
	`ş—r
();

358 
i
 = 
şoud_keypo£s_3d_
->
	`size
() - 1; i >= 0; --i)

360 
äame_id
 = (
şoud_keypo£s_3d_
->
pošts
[
i
].
š‹ns™y
);

361 
»ûÁ_cÜÃr_keyäames_
.
	`push_äÚt
(
	`ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
äame_id
], 
şoud_keypo£s_6d_
->
pošts
[frame_id]));

362 
»ûÁ_surf_keyäames_
.
	`push_äÚt
(
	`ŒªsfÜmPoštCloud
(
surf_äames_
[
äame_id
], 
şoud_keypo£s_6d_
->
pošts
[frame_id]));

363 
»ûÁ_ou›r_keyäames_
.
	`push_äÚt
(
	`ŒªsfÜmPoštCloud
(
ou›r_äames_
[
äame_id
], 
şoud_keypo£s_6d_
->
pošts
[frame_id]));

364 ià(
»ûÁ_cÜÃr_keyäames_
.
	`size
(è>ğ
»ûÁ_keyäame_£¬ch_num_
)

372 ià(
Ï‹¡_äame_id_
 !ğ
şoud_keypo£s_3d_
->
	`size
() - 1)

374 
»ûÁ_cÜÃr_keyäames_
.
	`pİ_äÚt
();

375 
»ûÁ_surf_keyäames_
.
	`pİ_äÚt
();

376 
»ûÁ_ou›r_keyäames_
.
	`pİ_äÚt
();

377 
Ï‹¡_äame_id_
 = 
şoud_keypo£s_3d_
->
	`size
() - 1;

378 
»ûÁ_cÜÃr_keyäames_
.
	`push_back
(
	`ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
Ï‹¡_äame_id_
], 
şoud_keypo£s_6d_
->
pošts
[latest_frame_id_]));

379 
»ûÁ_surf_keyäames_
.
	`push_back
(
	`ŒªsfÜmPoštCloud
(
surf_äames_
[
Ï‹¡_äame_id_
], 
şoud_keypo£s_6d_
->
pošts
[latest_frame_id_]));

380 
»ûÁ_ou›r_keyäames_
.
	`push_back
(
	`ŒªsfÜmPoštCloud
(
ou›r_äames_
[
Ï‹¡_äame_id_
], 
şoud_keypo£s_6d_
->
pošts
[latest_frame_id_]));

383 
i
 = 0; i < 
»ûÁ_cÜÃr_keyäames_
.
	`size
(); ++i)

385 *
cÜÃr_äom_m­_
 +ğ*
»ûÁ_cÜÃr_keyäames_
[
i
];

386 *
surf_äom_m­_
 +ğ*
»ûÁ_surf_keyäames_
[
i
];

387 *
surf_äom_m­_
 +ğ*
»ûÁ_ou›r_keyäames_
[
i
];

392 
su¼ound_keypo£s_
->
	`ş—r
();

393 
su¼ound_keypo£s_ds_
->
	`ş—r
();

394 
PoštT
 
cur_Ï£r_po£
;

395 
cur_Ï£r_po£
.
x
 = 
t_m­2Ï£r_
.
	`x
();

396 
cur_Ï£r_po£
.
y
 = 
t_m­2Ï£r_
.
	`y
();

397 
cur_Ï£r_po£
.
z
 = 
t_m­2Ï£r_
.
	`z
();

398 
kd_keypo£s_
->
	`£tIÅutCloud
(
şoud_keypo£s_3d_
);

399 
kd_keypo£s_
->
	`¿diusS—rch
(
cur_Ï£r_po£
, 
su¼ound_keyäame_£¬ch_¿dius_
, 
pošt_idx_
, 
pošt_di¡_
);

400 
i
 = 0; i < 
pošt_idx_
.
	`size
(); ++i)

402 
su¼ound_keypo£s_
->
pošts
.
	`push_back
(
şoud_keypo£s_3d_
->pošts[
pošt_idx_
[
i
]]);

404 
ds_keypo£s_
.
	`£tIÅutCloud
(
su¼ound_keypo£s_
);

405 
ds_keypo£s_
.
	`f‹r
(*
su¼ound_keypo£s_ds_
);

407 
Ën
 = 
su¼ound_keypo£s_ds_
->
	`size
();

411 
i
 = 0; i < 
su¼ound_exi¡_keypo£_id_
.
	`size
(); ++i)

413 
boŞ
 
exi¡_æag
 = 
çl£
;

414 
j
 = 0; j < 
Ën
; ++j)

416 ià(
su¼ound_exi¡_keypo£_id_
[
i
] =ğ(
su¼ound_keypo£s_ds_
->
pošts
[i].
š‹ns™y
))

418 
exi¡_æag
 = 
Œue
;

422 ià(
çl£
 =ğ
exi¡_æag
)

424 
su¼ound_exi¡_keypo£_id_
.
	`”a£
(su¼ound_exi¡_keypo£_id_.
	`begš
(è+ 
i
);

425 
su¼ound_cÜÃr_keyäames_
.
	`”a£
(su¼ound_cÜÃr_keyäames_.
	`begš
(è+ 
i
);

426 
su¼ound_surf_keyäames_
.
	`”a£
(su¼ound_surf_keyäames_.
	`begš
(è+ 
i
);

427 
su¼ound_ou›r_keyäames_
.
	`”a£
(su¼ound_ou›r_keyäames_.
	`begš
(è+ 
i
);

428 --
i
;

432 
i
 = 0; i < 
Ën
; ++i)

434 
boŞ
 
exi¡_æag
 = 
çl£
;

435 autØ
™”
 = 
su¼ound_exi¡_keypo£_id_
.
	`begš
(); i‹¸!ğsu¼ound_exi¡_keypo£_id_.
	`’d
(); ++iter)

437 ià((*
™”
è=ğ(
su¼ound_keypo£s_ds_
->
pošts
[
i
].
š‹ns™y
))

439 
exi¡_æag
 = 
Œue
;

443 ià(
çl£
 =ğ
exi¡_æag
)

445 
äame_id
 = (
su¼ound_keypo£s_ds_
->
pošts
[
i
].
š‹ns™y
);

446 
su¼ound_exi¡_keypo£_id_
.
	`push_back
(
äame_id
);

447 
su¼ound_surf_keyäames_
.
	`push_back
(
	`ŒªsfÜmPoštCloud
(
surf_äames_
[
äame_id
], 
şoud_keypo£s_6d_
->
pošts
[frame_id]));

448 
su¼ound_cÜÃr_keyäames_
.
	`push_back
(
	`ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
äame_id
], 
şoud_keypo£s_6d_
->
pošts
[frame_id]));

449 
su¼ound_ou›r_keyäames_
.
	`push_back
(
	`ŒªsfÜmPoštCloud
(
ou›r_äames_
[
äame_id
], 
şoud_keypo£s_6d_
->
pošts
[frame_id]));

452 
i
 = 0; i < 
su¼ound_exi¡_keypo£_id_
.
	`size
(); ++i)

454 *
surf_äom_m­_
 +ğ*
su¼ound_surf_keyäames_
[
i
];

455 *
cÜÃr_äom_m­_
 +ğ*
su¼ound_cÜÃr_keyäames_
[
i
];

456 *
surf_äom_m­_
 +ğ*
su¼ound_ou›r_keyäames_
[
i
];

460 
TicToc
 
t_ds
;

461 
ds_surf_
.
	`£tIÅutCloud
(
surf_äom_m­_
);

462 
ds_surf_
.
	`f‹r
(*
surf_äom_m­_ds_
);

463 
ds_cÜÃr_
.
	`£tIÅutCloud
(
cÜÃr_äom_m­_
);

464 
ds_cÜÃr_
.
	`f‹r
(*
cÜÃr_äom_m­_ds_
);

465 
	`ROS_INFO
("befÜds, suràpošts: %d, cÜÃ¸pošts: %d,ime: %.3fms", 
surf_äom_m­_
->
	`size
(), 
cÜÃr_äom_m­_
->size());

466 
	`ROS_INFO
("suràpošts: %d, cÜÃ¸pošts: %d,ime: %.3fms", 
surf_äom_m­_ds_
->
	`size
(), 
cÜÃr_äom_m­_ds_
->size(), 
t_d©a
.
	`toc
());

467 
	`ROS_INFO
("downsiztime: %.3fms", 
t_ds
.
	`toc
());

468 
	}
}

470 
	$down§m¶eCu¼’tSÿn
()

472 
TicToc
 
t_ds
;

473 
Ï£r_cÜÃr_ds_
->
	`ş—r
();

474 
ds_cÜÃr_
.
	`£tIÅutCloud
(
Ï£r_cÜÃr_
);

475 
ds_cÜÃr_
.
	`f‹r
(*
Ï£r_cÜÃr_ds_
);

476 
Ï£r_surf_ds_
->
	`ş—r
();

477 
ds_surf_
.
	`£tIÅutCloud
(
Ï£r_surf_
);

478 
ds_surf_
.
	`f‹r
(*
Ï£r_surf_ds_
);

479 
Ï£r_ou›r_ds_
->
	`ş—r
();

480 
ds_ou›r_
.
	`£tIÅutCloud
(
Ï£r_ou›r_
);

481 
ds_ou›r_
.
	`f‹r
(*
Ï£r_ou›r_ds_
);

482 
Ï£r_surf_tÙ®_
->
	`ş—r
();

483 
Ï£r_surf_tÙ®_ds_
->
	`ş—r
();

484 *
Ï£r_surf_tÙ®_
 +ğ*
Ï£r_surf_ds_
;

485 *
Ï£r_surf_tÙ®_
 +ğ*
Ï£r_ou›r_ds_
;

486 
ds_surf_
.
	`£tIÅutCloud
(
Ï£r_surf_tÙ®_
);

487 
ds_surf_
.
	`f‹r
(*
Ï£r_surf_tÙ®_ds_
);

488 
	`ROS_INFO
("down§m¶eCu¼’tSÿn: %.3fms", 
t_ds
.
	`toc
());

489 
	`ROS_INFO
("befÜdown§m¶e: cÜÃ¸siz%d, suràsiz%d", 
Ï£r_cÜÃr_
->
pošts
.
	`size
(), 
Ï£r_surf_tÙ®_
->pošts.size(è+ 
Ï£r_ou›r_
->points.size());

490 
	`ROS_INFO
("aá” down§m¶e: cÜÃ¸siz%d, suràsiz%d", 
Ï£r_cÜÃr_ds_
->
pošts
.
	`size
(), 
Ï£r_surf_tÙ®_ds_
->points.size());

491 
	}
}

493 
	$sÿn2M­O±imiz©iÚ
()

495 ià(
Ï£r_cÜÃr_ds_
->
pošts
.
	`size
(è< 10 || 
Ï£r_surf_tÙ®_
->pošts.size(è< 100 || 
cÜÃr_äom_m­_ds_
->size() < 10)

497 
	`ROS_WARN
("few feature…ointso„egistration");

500 
TicToc
 
t_İt
, 
t_Œ“
;

501 
kd_cÜÃr_m­_
->
	`£tIÅutCloud
(
cÜÃr_äom_m­_ds_
);

502 
kd_surf_m­_
->
	`£tIÅutCloud
(
surf_äom_m­_ds_
);

503 
	`ROS_INFO
("bud kdŒ“ime: %.3fms", 
t_Œ“
.
	`toc
());

505 
™”_út
 = 0; iter_cnt < 2; ++iter_cnt)

507 
TicToc
 
t_d©a
;

508 
û»s
::
LossFunùiÚ
 *
loss_funùiÚ
 = 
Ãw
 c”es::
	`Hub”Loss
(0.1);

509 
û»s
::
ProbËm
::
O±iÚs
 
´obËm_İtiÚs
;

510 
û»s
::
ProbËm
 
	`´obËm
(
´obËm_İtiÚs
);

512 
´obËm
.
	`AddP¬am‘”Block
(
·¿ms_
, 6);

514 
cÜÃr_cÜ»¥Údaû
 = 0, 
surf_cÜ»n¥Údªû
 = 0;

515 
‹¡_p
 = 0;

516 
i
 = 0; i < 
Ï£r_cÜÃr_ds_
->
	`size
(); ++i)

518 
PoštT
 
pošt_£l
;

519 
	`poštAssocŸ‹ToM­
(
Ï£r_cÜÃr_ds_
->
pošts
[
i
], 
pošt_£l
);

520 
kd_cÜÃr_m­_
->
	`Ã¬e¡KS—rch
(
pošt_£l
, 5, 
pošt_idx_
, 
pošt_di¡_
);

521 ià(
pošt_di¡_
[4] < 1.0)

523 
¡d
::
veùÜ
<
Eig’
::
VeùÜ3d
> 
Ã¬CÜÃrs
;

524 
Eig’
::
VeùÜ3d
 
	`ûÁ”
(0., 0., 0.);

525 
j
 = 0; j < 5; j++)

527 
Eig’
::
VeùÜ3d
 
	`tmp
(
cÜÃr_äom_m­_ds_
->
pošts
[
pošt_idx_
[
j
]].
x
,

528 
cÜÃr_äom_m­_ds_
->
pošts
[
pošt_idx_
[
j
]].
y
,

529 
cÜÃr_äom_m­_ds_
->
pošts
[
pošt_idx_
[
j
]].
z
);

530 
ûÁ”
 = c’‹¸+ 
tmp
;

531 
Ã¬CÜÃrs
.
	`push_back
(
tmp
);

533 
ûÁ”
 = center / 5.0;

535 
Eig’
::
M©rix3d
 
covM©
 = Eig’::M©rix3d::
	`Z”o
();

536 
j
 = 0; j < 5; j++)

538 
Eig’
::
M©rix
<, 3, 1> 
tmpZ”oM—n
 = 
Ã¬CÜÃrs
[
j
] - 
ûÁ”
;

539 
covM©
 = covM© + 
tmpZ”oM—n
 *mpZ”oM—n.
	`Œª¥o£
();

542 
Eig’
::
S–fAdjoštEig’SŞv”
<Eig’::
M©rix3d
> 
	`§es
(
covM©
);

546 
Eig’
::
VeùÜ3d
 
un™_dœeùiÚ
 = 
§es
.
	`eig’veùÜs
().
	`cŞ
(2);

547 
Eig’
::
VeùÜ3d
 
	`ı
(
Ï£r_cÜÃr_ds_
->
pošts
[
i
].
x
,†a£r_cÜÃr_ds_->pošts[i].
y
,†a£r_cÜÃr_ds_->pošts[i].
z
);

548 ià(
§es
.
	`eig’v®ues
()[2] > 3 * saes.eigenvalues()[1])

550 
Eig’
::
VeùÜ3d
 
pošt_Ú_lše
 = 
ûÁ”
;

551 
Eig’
::
VeùÜ3d
 
Íj
 = 0.1 * 
un™_dœeùiÚ
 + 
pošt_Ú_lše
;

552 
Eig’
::
VeùÜ3d
 
Íl
 = -0.1 * 
un™_dœeùiÚ
 + 
pošt_Ú_lše
;

553 
´obËm
.
	`AddResidu®Block
(
Ãw
 
	`Lid¬EdgeCo¡FunùiÚ
(
ı
, 
Íj
, 
Íl
),

554 
loss_funùiÚ
, 
·¿ms_
);

555 ++
cÜÃr_cÜ»¥Údaû
;

559 ++
‹¡_p
;

563 
	`ROS_INFO
("‹¡_p: %d", 
‹¡_p
);

564 
i
 = 0; i < 
Ï£r_surf_tÙ®_ds_
->
	`size
(); ++i)

566 
PoštT
 
pošt_£l
;

567 
	`poštAssocŸ‹ToM­
(
Ï£r_surf_tÙ®_ds_
->
pošts
[
i
], 
pošt_£l
);

568 
kd_surf_m­_
->
	`Ã¬e¡KS—rch
(
pošt_£l
, 5, 
pošt_idx_
, 
pošt_di¡_
);

569 
Eig’
::
M©rix
<, 5, 3> 
m©A0
;

570 
Eig’
::
M©rix
<, 5, 1> 
m©B0
 = -1 * Eig’::M©rix<, 5, 1>::
	`OÃs
();

571 ià(
pošt_di¡_
[4] < 1.0)

573 
j
 = 0; j < 5; j++)

575 
	`m©A0
(
j
, 0èğ
surf_äom_m­_ds_
->
pošts
[
pošt_idx_
[j]].
x
;

576 
	`m©A0
(
j
, 1èğ
surf_äom_m­_ds_
->
pošts
[
pošt_idx_
[j]].
y
;

577 
	`m©A0
(
j
, 2èğ
surf_äom_m­_ds_
->
pošts
[
pošt_idx_
[j]].
z
;

580 
Eig’
::
VeùÜ3d
 
nÜm
 = 
m©A0
.
	`cŞPivHou£hŞd”Qr
().
	`sŞve
(
m©B0
);

581 
Ãg©ive_OA_dÙ_nÜm
 = 1 / 
nÜm
.
	`nÜm
();

582 
nÜm
.
	`nÜm®ize
();

585 
boŞ
 
¶ªeV®id
 = 
Œue
;

586 
j
 = 0; j < 5; j++)

589 ià(
	`çbs
(
	`nÜm
(0è* 
surf_äom_m­_ds_
->
pošts
[
pošt_idx_
[
j
]].
x
 +

590 
	`nÜm
(1è* 
surf_äom_m­_ds_
->
pošts
[
pošt_idx_
[
j
]].
y
 +

591 
	`nÜm
(2è* 
surf_äom_m­_ds_
->
pošts
[
pošt_idx_
[
j
]].
z
 + 
Ãg©ive_OA_dÙ_nÜm
) > 0.2)

593 
¶ªeV®id
 = 
çl£
;

594 
	`ROS_WARN_ONCE
("plane is‚ot fit well");

598 ià(
¶ªeV®id
)

600 
Eig’
::
VeùÜ3d
 
	`ı
(
Ï£r_surf_tÙ®_ds_
->
pošts
[
i
].
x
,†a£r_surf_tÙ®_ds_->pošts[i].
y
,†a£r_surf_tÙ®_ds_->pošts[i].
z
);

601 
´obËm
.
	`AddResidu®Block
(
Ãw
 
	`Lid¬PÏÃCo¡FunùiÚ
(
ı
, 
nÜm
, 
Ãg©ive_OA_dÙ_nÜm
),

602 
loss_funùiÚ
, 
·¿ms_
);

604 ++
surf_cÜ»n¥Údªû
;

609 
	`ROS_INFO
("m­pšg d©¨assosŸtiÚim%.3fms", 
t_d©a
.
	`toc
());

610 
	`ROS_INFO
("cÜÃr_cÜ»¥Údªû: %d, surf_cÜ»¥Údªû: %d", 
cÜÃr_cÜ»¥Údaû
, 
surf_cÜ»n¥Údªû
);

612 
TicToc
 
t_sŞv”
;

613 
û»s
::
SŞv”
::
O±iÚs
 
İtiÚs
;

614 
İtiÚs
.
lš—r_sŞv”_ty³
 = 
û»s
::
DENSE_QR
;

615 
İtiÚs
.
max_num_™”©iÚs
 = 20;

616 
İtiÚs
.
mšimiz”_´og»ss_to_¡dout
 = 
çl£
;

617 
İtiÚs
.
check_g¿d›Ás
 = 
çl£
;

618 
İtiÚs
.
g¿d›Á_check_»Ïtive_´ecisiÚ
 = 1e-4;

619 
û»s
::
SŞv”
::
Summ¬y
 
summ¬y
;

620 
û»s
::
	`SŞve
(
İtiÚs
, &
´obËm
, &
summ¬y
);

621 
	`ROS_INFO
("m­pšg sŞv”im%.3fms", 
t_sŞv”
.
	`toc
());

622 
cout
 << 
summ¬y
.
	`Br›fR•Üt
(è<< 
’dl
;

624 
	}
}

626 
	$ŒªsfÜmUpd©e
()

628 
q_m­2Ï£r_
 = 
Eig’
::
	`AngËAxisd
(
·¿ms_
[5], Eig’::
VeùÜ3d
::
	`Un™Z
()è* Eig’::AngËAxisdÕ¬ams_[4], Eig’::VeùÜ3d::
	`Un™Y
()è* Eig’::AngËAxisdÕ¬ams_[3], Eig’::VeùÜ3d::
	`Un™X
());

629 
t_m­2Ï£r_
.
	`x
(èğ
·¿ms_
[0];

630 
t_m­2Ï£r_
.
	`y
(èğ
·¿ms_
[1];

631 
t_m­2Ï£r_
.
	`z
(èğ
·¿ms_
[2];

632 
q_m­2odom_
 = 
q_m­2Ï£r_
 * 
q_odom2Ï£r_
.
	`šv”£
();

633 
t_m­2odom_
 = 
t_m­2Ï£r_
 - 
q_m­2odom_
 * 
t_odom2Ï£r_
;

634 
	}
}

636 
boŞ
 
	$§veKeyF¿mesAndFaùÜ
()

638 ià(
şoud_keypo£s_3d_
->
pošts
.
	`em±y
())

640 
gtSAMg¿ph_
.
	`add
(
PriÜFaùÜ
<
Po£3
>(0, 
	`Po£3
(
RÙ3
::
	`Qu©”niÚ
(
q_m­2Ï£r_
.
	`w
(), q_m­2Ï£r_.
	`x
(), q_m­2Ï£r_.
	`y
(), q_m­2Ï£r_.
	`z
()), 
	`Pošt3
(
t_m­2Ï£r_
.x(),_m­2Ï£r_.y(),_m­2Ï£r_.z())), 
´iÜ_noi£_
));

641 
š™_e¡im©e_
.
	`š£¹
(0, 
	`Po£3
(
RÙ3
::
	`Qu©”niÚ
(
q_m­2Ï£r_
.
	`w
(), q_m­2Ï£r_.
	`x
(), q_m­2Ï£r_.
	`y
(), q_m­2Ï£r_.
	`z
()), 
	`Pošt3
(
t_m­2Ï£r_
.x(),_map2laser_.y(),_map2laser_.z())));

645 cÚ¡‡utØ&
´e_po£
 = 
şoud_keypo£s_6d_
->
pošts
[
şoud_keypo£s_3d_
->pošts.
	`size
() - 1];

646 ià(
¡d
::
	`pow
(
t_m­2Ï£r_
.
	`x
(è- 
´e_po£
.
x
, 2) +

647 
¡d
::
	`pow
(
t_m­2Ï£r_
.
	`y
(è- 
´e_po£
.
y
, 2) +

648 
¡d
::
	`pow
(
t_m­2Ï£r_
.
	`z
(è- 
´e_po£
.
z
, 2) <

649 
mš_keyäame_di¡_
)

652  
çl£
;

655 
gt§m
::
Po£3
 
po£_äom
 = 
	`Po£3
(
RÙ3
::
	`RzRyRx
(
´e_po£
.
rŞl
,…»_po£.
p™ch
,…»_po£.
yaw
), 
	`Pošt3
Õ»_po£.
x
,…»_po£.
y
,…»_po£.
z
));

656 
gt§m
::
Po£3
 
po£_to
 = 
	`Po£3
(
RÙ3
::
	`Qu©”niÚ
(
q_m­2Ï£r_
.
	`w
(), q_m­2Ï£r_.
	`x
(), q_m­2Ï£r_.
	`y
(), q_m­2Ï£r_.
	`z
()), 
	`Pošt3
(
t_m­2Ï£r_
.x(),_map2laser_.y(),_map2laser_.z()));

657 
gtSAMg¿ph_
.
	`add
(
B‘w“nFaùÜ
<
Po£3
>(
şoud_keypo£s_3d_
->
pošts
.
	`size
(è- 1, cloud_keypo£s_3d_->pošts.size(), 
po£_äom
.
	`b‘w“n
(
po£_to
), 
odom_noi£_
));

658 
š™_e¡im©e_
.
	`š£¹
(
şoud_keypo£s_3d_
->
pošts
.
	`size
(), 
	`Po£3
(
RÙ3
::
	`Qu©”niÚ
(
q_m­2Ï£r_
.
	`w
(), q_m­2Ï£r_.
	`x
(), q_m­2Ï£r_.
	`y
(), q_m­2Ï£r_.
	`z
()), 
	`Pošt3
(
t_m­2Ï£r_
.x(),_map2laser_.y(),_map2laser_.z())));

661 
i§m_
->
	`upd©e
(
gtSAMg¿ph_
, 
š™_e¡im©e_
);

662 
i§m_
->
	`upd©e
();

664 
gtSAMg¿ph_
.
	`»size
(0);

665 
š™_e¡im©e_
.
	`ş—r
();

667 
PoštT
 
this_po£_3d
;

668 
PoštTy³Po£
 
this_po£_6d
;

669 
gt§m
::
Po£3
 
Ï‹¡_e¡im©e
;

670 
i§m_cur_e¡im©e_
 = 
i§m_
->
	`ÿlcuÏ‹E¡im©e
();

671 
Ï‹¡_e¡im©e
 = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i§m_cur_e¡im©e_.
	`size
() - 1);

673 
this_po£_6d
.
x
 = 
this_po£_3d
.x = 
Ï‹¡_e¡im©e
.
	`Œª¦©iÚ
().
	`x
();

674 
this_po£_6d
.
y
 = 
this_po£_3d
.y = 
Ï‹¡_e¡im©e
.
	`Œª¦©iÚ
().
	`y
();

675 
this_po£_6d
.
z
 = 
this_po£_3d
.z = 
Ï‹¡_e¡im©e
.
	`Œª¦©iÚ
().
	`z
();

676 
this_po£_6d
.
š‹ns™y
 = 
this_po£_3d
.š‹ns™y = 
şoud_keypo£s_3d_
->
pošts
.
	`size
() + 0.1;

677 
this_po£_6d
.
rŞl
 = 
Ï‹¡_e¡im©e
.
	`rÙ©iÚ
().
	`rŞl
();

678 
this_po£_6d
.
p™ch
 = 
Ï‹¡_e¡im©e
.
	`rÙ©iÚ
().
	`p™ch
();

679 
this_po£_6d
.
yaw
 = 
Ï‹¡_e¡im©e
.
	`rÙ©iÚ
().
	`yaw
();

680 
this_po£_6d
.
time
 = 
time_Ï£r_cÜÃr_
;

681 
şoud_keypo£s_3d_
->
pošts
.
	`push_back
(
this_po£_3d
);

682 
şoud_keypo£s_6d_
->
pošts
.
	`push_back
(
this_po£_6d
);

684 
·¿ms_
[0] = 
this_po£_6d
.
x
;

685 
·¿ms_
[1] = 
this_po£_6d
.
y
;

686 
·¿ms_
[2] = 
this_po£_6d
.
z
;

687 
·¿ms_
[3] = 
this_po£_6d
.
rŞl
;

688 
·¿ms_
[4] = 
this_po£_6d
.
p™ch
;

689 
·¿ms_
[5] = 
this_po£_6d
.
yaw
;

691 
PoštCloudT
::
PŒ
 
	`this_cÜÃr_ds
(
Ãw
 PointCloudT);

692 
PoštCloudT
::
PŒ
 
	`this_surf_ds
(
Ãw
 PointCloudT);

693 
PoštCloudT
::
PŒ
 
	`this_ou›r_ds
(
Ãw
 PointCloudT);

695 
pş
::
	`cİyPoštCloud
(*
Ï£r_cÜÃr_ds_
, *
this_cÜÃr_ds
);

696 
pş
::
	`cİyPoštCloud
(*
Ï£r_surf_ds_
, *
this_surf_ds
);

697 
pş
::
	`cİyPoštCloud
(*
Ï£r_ou›r_ds_
, *
this_ou›r_ds
);

699 
cÜÃr_äames_
.
	`push_back
(
this_cÜÃr_ds
);

700 
surf_äames_
.
	`push_back
(
this_surf_ds
);

701 
ou›r_äames_
.
	`push_back
(
this_ou›r_ds
);

703  
Œue
;

704 
	}
}

706 
	$cÜ»ùPo£s
()

708 ià(
loİ_şo£d_
)

710 
»ûÁ_surf_keyäames_
.
	`ş—r
();

711 
»ûÁ_cÜÃr_keyäames_
.
	`ş—r
();

712 
»ûÁ_ou›r_keyäames_
.
	`ş—r
();

713 
	`ROS_WARN
("correctPoses");

714 
num_po£s
 = 
i§m_cur_e¡im©e_
.
	`size
();

715 
	`ROS_INFO
("num_po£s: %d", 
num_po£s
);

716 
i
 = 0; i < 
num_po£s
; ++i)

718 
şoud_keypo£s_6d_
->
pošts
[
i
].
x
 = 
şoud_keypo£s_3d_
->pošts[i].x = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i).
	`Œª¦©iÚ
().
	`x
();

719 
şoud_keypo£s_6d_
->
pošts
[
i
].
y
 = 
şoud_keypo£s_3d_
->pošts[i].y = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i).
	`Œª¦©iÚ
().
	`y
();

720 
şoud_keypo£s_6d_
->
pošts
[
i
].
z
 = 
şoud_keypo£s_3d_
->pošts[i].z = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i).
	`Œª¦©iÚ
().
	`z
();

721 
şoud_keypo£s_6d_
->
pošts
[
i
].
rŞl
 = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i).
	`rÙ©iÚ
().
	`rŞl
();

722 
şoud_keypo£s_6d_
->
pošts
[
i
].
p™ch
 = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i).
	`rÙ©iÚ
().
	`p™ch
();

723 
şoud_keypo£s_6d_
->
pošts
[
i
].
yaw
 = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i).
	`rÙ©iÚ
().
	`yaw
();

725 
q_m­2odom_
 = 
cÜ»ùiÚ_
.
block
<3, 3>(0, 0è* q_m­2odom_.
	`toRÙ©iÚM©rix
();

726 
t_m­2odom_
.
	`m©rix
(èğ
cÜ»ùiÚ_
.
block
<3, 3>(0, 0) *_map2odom_.matrix() + correction_.block<3, 1>(0, 3);

728 
loİ_şo£d_
 = 
çl£
;

730 
	}
}

732 
	$publish
()

734 ià(
pub_keypo£s_
.
	`g‘NumSubsüib”s
() > 0)

736 
£nsÜ_msgs
::
PoštCloud2PŒ
 
	`msg
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

737 
pş
::
	`toROSMsg
(*
şoud_keypo£s_3d_
, *
msg
);

738 
msg
->
h—d”
.
¡amp
.
	`äomSec
(
time_Ï£r_odom_
);

739 
msg
->
h—d”
.
äame_id
 = "map";

740 
pub_keypo£s_
.
	`publish
(
msg
);

742 
	}
}

744 
	$visu®izeGlob®M­Th»ad
()

746 
ros
::
R©e
 
	`¿‹
(0.2);

747 
ros
::
ok
)

749 ià(
pub_şoud_su¼ound_
.
	`g‘NumSubsüib”s
() > 0)

751 
£nsÜ_msgs
::
PoštCloud2PŒ
 
	`msg
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

752 
PoštCloudT
::
PŒ
 
	`pc_m­
(
Ãw
 PointCloudT);

753 
i
 = 0; i < 
şoud_keypo£s_3d_
->
	`size
(); ++i)

755 *
pc_m­
 +ğ*
	`ŒªsfÜmPoštCloud
(
surf_äames_
[
i
], 
şoud_keypo£s_6d_
->
pošts
[i]);

756 *
pc_m­
 +ğ*
	`ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
i
], 
şoud_keypo£s_6d_
->
pošts
[i]);

757 *
pc_m­
 +ğ*
	`ŒªsfÜmPoštCloud
(
ou›r_äames_
[
i
], 
şoud_keypo£s_6d_
->
pošts
[i]);

759 
pş
::
	`toROSMsg
(*
pc_m­
, *
msg
);

760 
msg
->
h—d”
.
¡amp
.
	`äomSec
(
time_Ï£r_odom_
);

761 
msg
->
h—d”
.
äame_id
 = "map";

762 
pub_şoud_su¼ound_
.
	`publish
(
msg
);

764 ià(
pub_»ûÁ_keyäames_
.
	`g‘NumSubsüib”s
() > 0)

766 
£nsÜ_msgs
::
PoštCloud2PŒ
 
	`msg
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

767 
PoštCloudT
::
PŒ
 
	`pc_m­
(
Ãw
 PointCloudT);

768 *
pc_m­
 +ğ*
cÜÃr_äom_m­_ds_
;

769 *
pc_m­
 +ğ*
surf_äom_m­_ds_
;

770 
pş
::
	`toROSMsg
(*
pc_m­
, *
msg
);

771 
msg
->
h—d”
.
¡amp
.
	`äomSec
(
time_Ï£r_odom_
);

772 
msg
->
h—d”
.
äame_id
 = "map";

773 
pub_»ûÁ_keyäames_
.
	`publish
(
msg
);

775 
¿‹
.
	`¦“p
();

777 
	}
}

779 
	$loİClosu»Th»ad
()

781 ià(!
loİ_şosu»_’abËd_
)

785 
ros
::
Du¿tiÚ
 
	`du¿tiÚ
(1);

786 
ros
::
	`ok
())

788 
	`ROS_INFO
("performLoopClosure");

789 
TicToc
 
t_¶c
;

790 
	`³rfÜmLoİClosu»
();

791 
	`ROS_INFO
("³rfÜmLoİClosu»: %.3fms", 
t_¶c
.
	`toc
());

792 
du¿tiÚ
.
	`¦“p
();

794 
	}
}

800 
	$³rfÜmLoİClosu»
()

802 ià(
şoud_keypo£s_3d_
->
pošts
.
	`em±y
())

807 ià(!
	`d‘eùLoİClosu»
())

813 
	`ROS_WARN
("detected†oop closure");

816 
TicToc
 
t_iı
;

818 
pş
::
I‹¿tiveClo£¡Pošt
<
PoštT
, PoštT> 
iı
;

819 
iı
.
	`£tMaxCÜ»¥Úd’ûDi¡ªû
(100);

820 
iı
.
	`£tMaximumI‹¿tiÚs
(100);

821 
iı
.
	`£tT¿nsfÜm©iÚEpsÚ
(1e-6);

822 
iı
.
	`£tEuşid—nF™ÃssEpsÚ
(1e-6);

823 
iı
.
	`£tRANSACI‹¿tiÚs
(0);

825 
iı
.
	`£tIÅutSourû
(
Ï‹¡_keyäame_
);

826 
iı
.
	`£tIÅutT¬g‘
(
Ã¬_hi¡Üy_keyäames_
);

827 
PoštCloudT
::
PŒ
 
	`unu£d_»suÉ
(
Ãw
 
	`PoštCloudT
());

828 
Eig’
::
M©rix4f
 
	`š™Ÿl_guess
(Eig’::M©rix4f::
	`Id’t™y
());

829 
š™Ÿl_guess
.
block
<3, 3>(0, 0èğ(
Eig’
::
	`AngËAxisf
(
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
yaw
, Eig’::
VeùÜ3f
::
	`Un™Z
()) *

830 
Eig’
::
	`AngËAxisf
(
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
p™ch
, Eig’::
VeùÜ3f
::
	`Un™Y
()) *

831 
Eig’
::
	`AngËAxisf
(
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
rŞl
, Eig’::
VeùÜ3f
::
	`Un™X
()))

832 .
	`toRÙ©iÚM©rix
();

833 
	`š™Ÿl_guess
(0, 3èğ
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
x
;

834 
	`š™Ÿl_guess
(1, 3èğ
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
y
;

835 
	`š™Ÿl_guess
(2, 3èğ
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
z
;

836 
iı
.
	`®ign
(*
unu£d_»suÉ
);

838 
boŞ
 
has_cÚv”ged
 = 
iı
.
	`hasCÚv”ged
();

839 
f™Ãss_scÜe
 = 
iı
.
	`g‘F™ÃssScÜe
();

840 
Eig’
::
M©rix4f
 
cÜ»ùiÚ_äame
 = 
iı
.
	`g‘Fš®T¿nsfÜm©iÚ
();

842 ià(
has_cÚv”ged
 =ğ
çl£
 || 
f™Ãss_scÜe
 > 
hi¡Üy_f™Ãss_scÜe_
)

844 
	`ROS_WARN
("loop cannot closed");

849 
	`ROS_WARN
("loop closed");

850 ià(
pub_iı_keyäames_
.
	`g‘NumSubsüib”s
() > 0)

852 
PoštCloudT
::
PŒ
 
	`şo£d_şoud
(
Ãw
 
	`PoštCloudT
());

853 
pş
::
	`ŒªsfÜmPoštCloud
(*
Ï‹¡_keyäame_
, *
şo£d_şoud
, 
cÜ»ùiÚ_äame
);

854 
£nsÜ_msgs
::
PoštCloud2PŒ
 
	`msg
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

855 
pş
::
	`toROSMsg
(*
şo£d_şoud
, *
msg
);

856 
msg
->
h—d”
.
¡amp
.
	`äomSec
(
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
time
);

857 
msg
->
h—d”
.
äame_id
 = "map";

858 
pub_iı_keyäames_
.
	`publish
(
msg
);

862 
Eig’
::
M©rix4f
 
t_wrÚg
 = 
š™Ÿl_guess
;

863 
Eig’
::
M©rix4f
 
t_cÜ»ù
 = 
cÜ»ùiÚ_äame
 * 
t_wrÚg
;

864 
Eig’
::
Qu©”niÚf
 
	`r_cÜ»ù
(
t_cÜ»ù
.
block
<3, 3>(0, 0));

865 
gt§m
::
Po£3
 
po£_äom
 = gt§m::
	`Po£3
(
RÙ3
::
	`Qu©”niÚ
(
r_cÜ»ù
.
	`w
(),„_cÜ»ù.
	`x
(),„_cÜ»ù.
	`y
(),„_cÜ»ù.
	`z
()),

866 
	`Pošt3
(
	`t_cÜ»ù
(0, 3),_correct(1, 3),_correct(2, 3)));

867 
gt§m
::
Po£3
 
po£_to
 = gt§m::
	`Po£3
(
RÙ3
::
	`RzRyRx
(
şoud_keypo£s_6d_
->
pošts
[
şo£¡_hi¡Üy_äame_id_
].
rŞl
, cloud_keypo£s_6d_->pošts[şo£¡_hi¡Üy_äame_id_].
p™ch
, cloud_keypo£s_6d_->pošts[şo£¡_hi¡Üy_äame_id_].
yaw
),

868 
	`Pošt3
(
şoud_keypo£s_6d_
->
pošts
[
şo£¡_hi¡Üy_äame_id_
].
x
, cloud_keypo£s_6d_->pošts[şo£¡_hi¡Üy_äame_id_].
y
, cloud_keypo£s_6d_->pošts[şo£¡_hi¡Üy_äame_id_].
z
));

869 
noi£_scÜe
 = 
f™Ãss_scÜe
;

870 
gt§m
::
VeùÜ
 
	`veùÜ6
(6);

871 
veùÜ6
 << 
noi£_scÜe
,‚oise_score,‚oise_score,‚oise_score,‚oise_score,‚oise_score;

872 
cÚ¡¿št_noi£_
 = 
noi£Mod–
::
DŸgÚ®
::
	`V¬Ÿnûs
(
veùÜ6
);

874 
Eig’
::
Qu©”niÚf
 
	`tmp_q
(
t_cÜ»ù
.
block
<3, 3>(0, 0));

875 
rŞl
, 
p™ch
, 
yaw
;

876 
tf
::
	`M©rix3x3
Ñf::
	`Qu©”niÚ
(
tmp_q
.
	`x
(),mp_q.
	`y
(),mp_q.
	`z
(),mp_q.
	`w
())).
	`g‘RPY
(
rŞl
, 
p™ch
, 
yaw
);

878 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lock
(
mtx_
);

879 
gtSAMg¿ph_
.
	`add
(
B‘w“nFaùÜ
<
gt§m
::
Po£3
>(
Ï‹¡_hi¡Üy_äame_id_
, 
şo£¡_hi¡Üy_äame_id_
, 
po£_äom
.
	`b‘w“n
(
po£_to
), 
cÚ¡¿št_noi£_
));

880 
i§m_
->
	`upd©e
(
gtSAMg¿ph_
);

881 
i§m_
->
	`upd©e
();

882 
gtSAMg¿ph_
.
	`»size
(0);

883 
cÜ»ùiÚ_
 = 
cÜ»ùiÚ_äame
.
ÿ¡
<>();

885 
¡d
::
cout
 << "-----------------------------------------------------------------" << std::
’dl
;

886 
¡d
::
cout
 << "Tim–­£d: " << 
t_iı
.
	`toc
(è<< "ms" << std::
’dl
;

887 
¡d
::
cout
 << "Numb” oàsourû…ošts: " << 
Ï‹¡_keyäame_
->
	`size
(è<< "…ošts." << std::
’dl
;

888 
¡d
::
cout
 << "rg‘: " << 
Ã¬_hi¡Üy_keyäames_
->
pošts
.
	`size
(è<< "…ošts." << std::
’dl
;

889 
¡d
::
cout
 << "ICP ha cÚv”ged: " << 
has_cÚv”ged
 << std::
’dl
;

890 
¡d
::
cout
 << "F™Ãs scÜe: " << 
f™Ãss_scÜe
 << std::
’dl
;

891 
¡d
::
cout
 << "š™ŸÈ(x,y,z,rŞl,p™ch,yaw):" << std::
’dl
;

892 
¡d
::
cout
 << "(" << 
	`š™Ÿl_guess
(0, 3) << ", " << initial_guess(1, 3) << ", " << initial_guess(2, 3) << ", "

893 << 
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
rŞl
 << ", " << cloud_keypo£s_6d_->pošts[Ï‹¡_hi¡Üy_äame_id_].
p™ch
 << ", " << cloud_keypo£s_6d_->pošts[Ï‹¡_hi¡Üy_äame_id_].
yaw
 << ")" << 
¡d
::
’dl
;

894 
¡d
::
cout
 << "fš® (x,y,z,rŞl,p™ch,yaw):" << std::
’dl
;

895 
¡d
::
cout
 << "(" << 
	`t_cÜ»ù
(0, 3) << ", " <<_correct(1, 3) << ", " <<_correct(2, 3) << ", "

896 << 
rŞl
 << ", " << 
p™ch
 << ", " << 
yaw
 << ")" << 
¡d
::
’dl
;

897 
¡d
::
cout
 << "T¿nsfÜm©iÚ M©rix:" << std::
’dl
;

898 
¡d
::
cout
 << 
t_cÜ»ù
 << std::
’dl
;

899 
¡d
::
cout
 << "shiá: " << std::
	`sq¹
(¡d::
	`pow
(
	`t_cÜ»ù
(0, 3è- 
	`š™Ÿl_guess
(0, 3), 2è+ std::powÑ_cÜ»ù(1, 3è- in™Ÿl_guess(1, 3), 2è+ std::powÑ_cÜ»ù(2, 3è- in™Ÿl_guess(2, 3), 2)è<< std::
’dl
;

900 
¡d
::
cout
 << "-----------------------------------------------------------------" << std::
’dl
;

902 
loİ_şo£d_
 = 
Œue
;

903 
	}
}

909 
boŞ
 
	$d‘eùLoİClosu»
()

911 ià(
şoud_keypo£s_3d_
->
	`em±y
())

913  
çl£
;

915 
	`ROS_INFO
("detectLoopClosure");

916 
TicToc
 
t_dlc
;

917 
Ï‹¡_keyäame_
->
	`ş—r
();

918 
Ã¬_hi¡Üy_keyäames_
->
	`ş—r
();

920 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
	`lock
(
mtx_
);

922 
PoštT
 
cur_po£
;

923 
cur_po£
.
x
 = 
t_m­2Ï£r_
.
	`x
();

924 
cur_po£
.
y
 = 
t_m­2Ï£r_
.
	`y
();

925 
cur_po£
.
z
 = 
t_m­2Ï£r_
.
	`z
();

926 
kd_keypo£s_
->
	`£tIÅutCloud
(
şoud_keypo£s_3d_
);

927 
kd_keypo£s_
->
	`¿diusS—rch
(
cur_po£
, 
hi¡Üy_£¬ch_¿dius_
, 
pošt_idx_
, 
pošt_di¡_
);

929 
Ï‹¡_hi¡Üy_äame_id_
 = 
şoud_keypo£s_3d_
->
	`size
() - 1;

930 
şo£¡_hi¡Üy_äame_id_
 = -1;

931 
i
 = 0; i < 
pošt_idx_
.
	`size
(); ++i)

934 ià(
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
time
 - cloud_keypo£s_6d_->pošts[
pošt_idx_
[
i
]].time > 30.)

936 
şo£¡_hi¡Üy_äame_id_
 = 
pošt_idx_
[
i
];

940 ià(
şo£¡_hi¡Üy_äame_id_
 == -1)

942  
çl£
;

945 *
Ï‹¡_keyäame_
 +ğ*
	`ŒªsfÜmPoštCloud
(
surf_äames_
[
Ï‹¡_hi¡Üy_äame_id_
], 
şoud_keypo£s_6d_
->
pošts
[latest_history_frame_id_]);

946 *
Ï‹¡_keyäame_
 +ğ*
	`ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
Ï‹¡_hi¡Üy_äame_id_
], 
şoud_keypo£s_6d_
->
pošts
[latest_history_frame_id_]);

947 *
Ï‹¡_keyäame_
 +ğ*
	`ŒªsfÜmPoštCloud
(
ou›r_äames_
[
Ï‹¡_hi¡Üy_äame_id_
], 
şoud_keypo£s_6d_
->
pošts
[latest_history_frame_id_]);

949 
PoštCloudT
::
PŒ
 
	`tmp_şoud
(
Ãw
 
	`PoštCloudT
());

950 
i
 = -
hi¡Üy_£¬ch_num_
, 
j
; i <= history_search_num_; ++i)

952 
j
 = 
şo£¡_hi¡Üy_äame_id_
 + 
i
;

953 ià(
j
 < 0 || j >ğ
Ï‹¡_hi¡Üy_äame_id_
)

957 *
tmp_şoud
 +ğ*
	`ŒªsfÜmPoštCloud
(
surf_äames_
[
j
], 
şoud_keypo£s_6d_
->
pošts
[j]);

958 *
tmp_şoud
 +ğ*
	`ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
j
], 
şoud_keypo£s_6d_
->
pošts
[j]);

959 *
tmp_şoud
 +ğ*
	`ŒªsfÜmPoštCloud
(
ou›r_äames_
[
j
], 
şoud_keypo£s_6d_
->
pošts
[j]);

962 
ds_hi¡Üy_keyäames_
.
	`£tIÅutCloud
(
tmp_şoud
);

963 
ds_hi¡Üy_keyäames_
.
	`f‹r
(*
Ã¬_hi¡Üy_keyäames_
);

965 ià(
pub_hi¡Üy_keyäames_
.
	`g‘NumSubsüib”s
() > 0)

967 
£nsÜ_msgs
::
PoštCloud2PŒ
 
	`msg
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

968 
pş
::
	`toROSMsg
(*
Ã¬_hi¡Üy_keyäames_
, *
msg
);

969 
msg
->
h—d”
.
¡amp
.
	`äomSec
(
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
time
);

970 
msg
->
h—d”
.
äame_id
 = "map";

971 
pub_hi¡Üy_keyäames_
.
	`publish
(
msg
);

973 
	`ROS_INFO
("d‘eùLoİClosu»: %.3fms", 
t_dlc
.
	`toc
());

974  
Œue
;

975 
	}
}

976 
	gPoštCloudT
::
PŒ
 
	$ŒªsfÜmPoštCloud
(cÚ¡ 
PoštCloudT
::
CÚ¡PŒ
 
şoud_š
, cÚ¡ 
PoštTy³Po£
 &
Œªs
)

978 
Eig’
::
M©rix4f
 
	`this_ŒªsfÜm©iÚ
(Eig’::M©rix4f::
	`Id’t™y
());

979 
this_ŒªsfÜm©iÚ
.
block
<3, 3>(0, 0èğ(
Eig’
::
	`AngËAxisf
(
Œªs
.
yaw
, Eig’::
VeùÜ3f
::
	`Un™Z
()) *

980 
Eig’
::
	`AngËAxisf
(
Œªs
.
p™ch
, Eig’::
VeùÜ3f
::
	`Un™Y
()) *

981 
Eig’
::
	`AngËAxisf
(
Œªs
.
rŞl
, Eig’::
VeùÜ3f
::
	`Un™X
()))

982 .
	`toRÙ©iÚM©rix
();

983 
	`this_ŒªsfÜm©iÚ
(0, 3èğ
Œªs
.
x
;

984 
	`this_ŒªsfÜm©iÚ
(1, 3èğ
Œªs
.
y
;

985 
	`this_ŒªsfÜm©iÚ
(2, 3èğ
Œªs
.
z
;

986 
PoštCloudT
::
PŒ
 
	`tf_şoud
(
Ãw
 
	`PoštCloudT
());

987 
pş
::
	`ŒªsfÜmPoštCloud
(*
şoud_š
, *
tf_şoud
, 
this_ŒªsfÜm©iÚ
);

988  
tf_şoud
;

989 
	}
}

990 
	$poštAssocŸ‹ToM­
(cÚ¡ 
PoštT
 &
p_š
, PoštT &
p_out
)

992 
Eig’
::
VeùÜ3d
 
out
 = 
q_m­2Ï£r_
 * Eig’::
	`VeùÜ3d
(
p_š
.
x
,…_š.
y
,…_š.
z
è+ 
t_m­2Ï£r_
;

993 
p_out
.
x
 = 
out
.
	`x
();

994 
p_out
.
y
 = 
out
.
	`y
();

995 
p_out
.
z
 = 
out
.
	`z
();

996 
p_out
.
š‹ns™y
 = 
p_š
.intensity;

997 
	}
}

998 
	gPoštCloudT
::
PŒ
 
	$ŒªsfÜmPoštCloud
(cÚ¡ 
PoštCloudT
::
CÚ¡PŒ
 
şoud_š
, cÚ¡ 
PoštTy³Po£
 &
Œªs
, 
idx
)

1000 
PoštCloudT
::
PŒ
 
tf_şoud
 = 
	`ŒªsfÜmPoštCloud
(
şoud_š
, 
Œªs
);

1001 autØ&
p
 : 
tf_şoud
->
pošts
)

1003 
p
.
š‹ns™y
 = 
idx
;

1005  
tf_şoud
;

1006 
	}
}

1007 
boŞ
 
	$§veM­CB
(
¡d_¤vs
::
Em±y
::
Reque¡
 &
»q
, std_¤vs::Em±y::
Re¥Ú£
 &
»s
)

1010 
PoštCloudT
::
PŒ
 
	`m­_keypo£
(
Ãw
 PointCloudT);

1011 
PoštCloudT
::
PŒ
 
	`m­_cÜÃr
(
Ãw
 PointCloudT);

1012 
PoštCloudT
::
PŒ
 
	`m­_surf
(
Ãw
 PointCloudT);

1013 
PoštCloudT
::
PŒ
 
	`m­_ou›r
(
Ãw
 PointCloudT);

1015 
i
 = 0; i < 
şoud_keypo£s_3d_
->
pošts
.
	`size
(); ++i)

1017 
PoštT
 
p
 = 
şoud_keypo£s_3d_
->
pošts
[
i
];

1018 
p
.
š‹ns™y
 = 
i
;

1019 
m­_keypo£
->
pošts
.
	`push_back
(
p
);

1022 
PoštCloudT
::
PŒ
 
	`tmp
(
Ãw
 PointCloudT);

1024 
i
 = 0; i < 
şoud_keypo£s_3d_
->
pošts
.
	`size
(); ++i)

1026 
tmp
 = 
	`ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
i
], 
şoud_keypo£s_6d_
->
pošts
[i], i);

1027 
m­_cÜÃr
->
pošts
.
	`š£¹
(m­_cÜÃr->pošts.
	`’d
(), 
tmp
->pošts.
	`begš
(),mp->points.end());

1029 
tmp
 = 
	`ŒªsfÜmPoštCloud
(
surf_äames_
[
i
], 
şoud_keypo£s_6d_
->
pošts
[i], i);

1030 
m­_surf
->
pošts
.
	`š£¹
(m­_surf->pošts.
	`’d
(), 
tmp
->pošts.
	`begš
(),mp->points.end());

1032 
tmp
 = 
	`ŒªsfÜmPoštCloud
(
ou›r_äames_
[
i
], 
şoud_keypo£s_6d_
->
pošts
[i], i);

1033 
m­_ou›r
->
pošts
.
	`š£¹
(m­_ou›r->pošts.
	`’d
(), 
tmp
->pošts.
	`begš
(),mp->points.end());

1036 
m­_keypo£
->
width
 = m­_keypo£->
pošts
.
	`size
();

1037 
m­_keypo£
->
height
 = 1;

1038 
m­_keypo£
->
is_d’£
 = 
çl£
;

1039 
m­_cÜÃr
->
width
 = m­_cÜÃr->
pošts
.
	`size
();

1040 
m­_cÜÃr
->
height
 = 1;

1041 
m­_cÜÃr
->
is_d’£
 = 
Œue
;

1042 
m­_surf
->
width
 = m­_surf->
pošts
.
	`size
();

1043 
m­_surf
->
height
 = 1;

1044 
m­_surf
->
is_d’£
 = 
Œue
;

1045 
m­_ou›r
->
width
 = m­_ou›r->
pošts
.
	`size
();

1046 
m­_ou›r
->
height
 = 1;

1047 
m­_ou›r
->
is_d’£
 = 
Œue
;

1049 
pş
::
io
::
	`§vePCDFe
("/home/zh/keypo£.pcd", *
m­_keypo£
);

1050 
pş
::
io
::
	`§vePCDFe
("/home/zh/cÜÃr.pcd", *
m­_cÜÃr
);

1051 
pş
::
io
::
	`§vePCDFe
("/home/zh/surf.pcd", *
m­_surf
);

1052 
pş
::
io
::
	`§vePCDFe
("/home/zh/ou›r.pcd", *
m­_ou›r
);

1054  
Œue
;

1055 
	}
}

1058 
	$maš
(
¬gc
, **
¬gv
)

1060 
ros
::
	`š™
(
¬gc
, 
¬gv
, "LM");

1061 
ros
::
NodeHªdË
 
nh
;

1062 
LM
 
	`lm
(
nh
);

1063 
lm
.
	`mašLoİ
();

1064 
ros
::
	`¥š
();

1066 
	}
}

	@src/LO.cpp

1 
	~"®ego/ut™y.h
"

3 
usšg
 
Çme¥aû
 
	g¡d
;

4 şas 
	cLO


6 
	m´iv©e
:

7 
ros
::
NodeHªdË
 
nh_
;

8 
	mros
::
NodeHªdË
 
²h_
;

9 
	mros
::
Subsüib”
 
sub_£gm’‹d_şoud_
;

10 
	mros
::
Subsüib”
 
sub_£gm’‹d_šfo_
;

11 
	mros
::
Subsüib”
 
sub_ou›r_
;

12 
	mros
::
Subsüib”
 
sub_imu_
;

13 
	mros
::
Subsüib”
 
sub_odom_
;

14 
	mros
::
Publish”
 
pub_surf_
;

15 
	mros
::
Publish”
 
pub_surf_Ëss_
;

16 
	mros
::
Publish”
 
pub_cÜÃr_
;

17 
	mros
::
Publish”
 
pub_cÜÃr_Ëss_
;

18 
	mros
::
Publish”
 
pub_undi¡Ü‹d_pc_
;

19 
	mros
::
Publish”
 
pub_odom_
;

20 
	mros
::
Publish”
 
pub_surf_Ï¡_
;

21 
	mros
::
Publish”
 
pub_cÜÃr_Ï¡_
;

22 
	mros
::
Publish”
 
pub_ou›r_Ï¡_
;

23 
	mtf
::
T¿nsfÜmBrßdÿ¡”
 
tf_brßd_
;

25 
	mqueue
<
	m£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
> 
£g_şoud_buf_
;

26 
	mqueue
<
	mşoud_msgs
::
şoud_šfoCÚ¡PŒ
> 
£g_šfo_buf_
;

27 
	mqueue
<
	m£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
> 
ou›r_buf_
;

28 
	mqueue
<
	mÇv_msgs
::
Odom‘ryCÚ¡PŒ
> 
odom_buf_
;

29 
	mqueue
<
	m£nsÜ_msgs
::
ImuCÚ¡PŒ
> 
imu_buf_
;

31 
	mimu_±r_äÚt_
, 
	mimu_±r_Ï¡_
, 
	mimu_±r_Ï¡_™”_
;

32 
	m¡d
::
¬¿y
<, 
	mimu_queue_Ëngth
> 
	mimu_time_
;

33 
	m¡d
::
¬¿y
<, 
	mimu_queue_Ëngth
> 
	mimu_rŞl_
;

34 
	m¡d
::
¬¿y
<, 
	mimu_queue_Ëngth
> 
	mimu_p™ch_
;

35 
	m¡d
::
¬¿y
<, 
	mimu_queue_Ëngth
> 
	mimu_yaw_
;

36 
	m¡d
::
¬¿y
<, 
	mimu_queue_Ëngth
> 
	mimu_shiá_x_
;

37 
	m¡d
::
¬¿y
<, 
	mimu_queue_Ëngth
> 
	mimu_shiá_y_
;

38 
	m¡d
::
¬¿y
<, 
	mimu_queue_Ëngth
> 
	mimu_shiá_z_
;

39 
	m¡d
::
¬¿y
<, 
	mimu_queue_Ëngth
> 
	mimu_v–o_x_
;

40 
	m¡d
::
¬¿y
<, 
	mimu_queue_Ëngth
> 
	mimu_v–o_y_
;

41 
	m¡d
::
¬¿y
<, 
	mimu_queue_Ëngth
> 
	mimu_v–o_z_
;

44 
	modom_±r_äÚt_
, 
	modom_±r_Ï¡_
, 
	modom_±r_Ï¡_™”_
;

45 
	m¡d
::
¬¿y
<
Çv_msgs
::
Odom‘ryCÚ¡PŒ
, 
	modom_queue_Ëngth
> 
	modom_queue_
;

46 
	m¡d
::
¬¿y
<, 
	modom_queue_Ëngth
> 
	modom_rŞl_
;

47 
	m¡d
::
¬¿y
<, 
	modom_queue_Ëngth
> 
	modom_p™ch_
;

48 
	m¡d
::
¬¿y
<, 
	modom_queue_Ëngth
> 
	modom_yaw_
;

50 
	m¡d
::
¬¿y
<, 
N_SCAN
 * 
	mHÜizÚ_SCAN
> 
	mşoud_curv©u»_
;

51 
	m¡d
::
¬¿y
<
boŞ
, 
N_SCAN
 * 
	mHÜizÚ_SCAN
> 
	mşoud_ÃighbÜ_picked_
;

52 
	m¡d
::
¬¿y
<, 
N_SCAN
 * 
	mHÜizÚ_SCAN
> 
	mşoud_Ïb–_
;

53 
	m¡d
::
¬¿y
<, 
N_SCAN
 * 
	mHÜizÚ_SCAN
> 
	mşoud_sÜt_idx_
;

55 
boŞ
 
	msy¡em_š™Ÿlized_
;

57 
	mPoštCloudT
::
PŒ
 
surf_Ï¡_
;

58 
	mPoštCloudT
::
PŒ
 
cÜÃr_Ï¡_
;

59 
	mPoštCloudT
::
PŒ
 
ou›r_Ï¡_
;

61 
	mpş
::
KdT»eFLANN
<
PoštT
>::
PŒ
 
kd_surf_Ï¡_
;

62 
	mpş
::
KdT»eFLANN
<
PoštT
>::
PŒ
 
kd_cÜÃr_Ï¡_
;

64 
	m·¿ms_
[6];

65 
	m·¿ms_surf_
[3];

66 
	m·¿ms_cÜÃr_
[3];

67 
	mEig’
::
VeùÜ3d
 
t_w_cur_
;

68 
	mEig’
::
M©rix3d
 
r_w_cur_
;

69 
	mEig’
::
M©rix4d
 
tf_b2l_
;

71 
	m¡d
::
mu‹x
 
m_buf_
;

73 
	mpublic
:

74 
	$LO
(
ros
::
NodeHªdË
 
nh
è: 
	$nh_
(
nh
)

76 
	`ÚIn™
();

79 
	$ÚIn™
()

81 
cout
 << "--------- LO in™ --------------" << 
’dl
;

82 
TicToc
 
t_š™
;

84 ià(
u£_imu
 && 
u£_odom
 !ğ
çl£
)

86 
	`ROS_ERROR
("set use_imu=false when use_odom=true");

90 
imu_±r_äÚt_
 = 
odom_±r_äÚt_
 = 0;

91 
imu_±r_Ï¡_
 = 
odom_±r_Ï¡_
 = -1;

92 
imu_±r_Ï¡_™”_
 = 
odom_±r_Ï¡_™”_
 = 0;

93 
imu_time_
.
	`fl
(0);

94 
imu_rŞl_
.
	`fl
(0);

95 
imu_p™ch_
.
	`fl
(0);

96 
imu_yaw_
.
	`fl
(0);

97 
imu_v–o_x_
.
	`fl
(0);

98 
imu_v–o_y_
.
	`fl
(0);

99 
imu_v–o_z_
.
	`fl
(0);

100 
imu_shiá_x_
.
	`fl
(0);

101 
imu_shiá_y_
.
	`fl
(0);

102 
imu_shiá_z_
.
	`fl
(0);

104 
şoud_curv©u»_
.
	`fl
(0);

105 
şoud_ÃighbÜ_picked_
.
	`fl
(
çl£
);

106 
şoud_Ïb–_
.
	`fl
(0);

107 
şoud_sÜt_idx_
.
	`fl
(0);

109 
sy¡em_š™Ÿlized_
 = 
çl£
;

110 
surf_Ï¡_
.
	`»£t
(
Ãw
 
PoštCloudT
);

111 
cÜÃr_Ï¡_
.
	`»£t
(
Ãw
 
PoštCloudT
);

112 
ou›r_Ï¡_
.
	`»£t
(
Ãw
 
PoštCloudT
);

113 
kd_surf_Ï¡_
.
	`»£t
(
Ãw
 
pş
::
KdT»eFLANN
<
PoštT
>);

114 
kd_cÜÃr_Ï¡_
.
	`»£t
(
Ãw
 
pş
::
KdT»eFLANN
<
PoštT
>);

115 
i
 = 0; i < 6; ++i)

117 
·¿ms_
[
i
] = 0.;

119 
t_w_cur_
.
	`£tZ”o
();

120 
r_w_cur_
.
	`£tId’t™y
();

121 
tf_b2l_
.
	`£tId’t™y
();

123 
pub_cÜÃr_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/corner", 10);

124 
pub_cÜÃr_Ëss_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/corner_less", 10);

125 
pub_surf_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/surf", 10);

126 
pub_surf_Ëss_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/surf_less", 10);

127 
pub_undi¡Ü‹d_pc_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/undistorted", 10);

128 
pub_odom_
 = 
nh_
.
adv”ti£
<
Çv_msgs
::
Odom‘ry
>("/odom/lidar", 10);

129 
pub_surf_Ï¡_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/surf_last", 10);

130 
pub_cÜÃr_Ï¡_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/corner_last", 10);

131 
pub_ou›r_Ï¡_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/outlier_last", 10);

133 
sub_£gm’‹d_şoud_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
PoštCloud2
>("/£gm’‹d_şoud", 10, 
boo¡
::
	`bšd
(&
LO
::
£gCloudHªdËr
, 
this
, 
_1
));

134 
sub_£gm’‹d_šfo_
 = 
nh_
.
subsüibe
<
şoud_msgs
::
şoud_šfo
>("/£g_šfo", 10, 
boo¡
::
	`bšd
(&
LO
::
£gInfoHªdËr
, 
this
, 
_1
));

135 
sub_ou›r_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
PoštCloud2
>("/ou›r", 10, 
boo¡
::
	`bšd
(&
LO
::
ou›rHªdËr
, 
this
, 
_1
));

136 ià(
u£_imu
)

138 
sub_imu_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
Imu
>("/imu/d©a", 100, 
boo¡
::
	`bšd
(&
LO
::
imuHªdËr
, 
this
, 
_1
));

140 ià(
u£_odom
)

142 
sub_odom_
 = 
nh_
.
subsüibe
<
Çv_msgs
::
Odom‘ry
>("/odom/imu", 100, 
boo¡
::
	`bšd
(&
LO
::
odomHªdËr
, 
this
, 
_1
));

145 
cout
 << "LO onIn™ƒnd: " << 
t_š™
.
	`toc
(è<< 
’dl
;

146 
	}
}

148 
	$mašLoİ
()

150 
ros
::
R©e
 
	`¿‹
(100);

151 
ros
::
	`ok
())

153 
¿‹
.
	`¦“p
();

154 
ros
::
	`¥šOnû
();

155 ià(!
£g_şoud_buf_
.
	`em±y
(è&& !
£g_šfo_buf_
.em±y(è&& !
ou›r_buf_
.empty())

157 
t1
 = 
£g_şoud_buf_
.
	`äÚt
()->
h—d”
.
¡amp
.
	`toSec
();

158 
t2
 = 
£g_šfo_buf_
.
	`äÚt
()->
h—d”
.
¡amp
.
	`toSec
();

159 
t3
 = 
ou›r_buf_
.
	`äÚt
()->
h—d”
.
¡amp
.
	`toSec
();

160 ià(
	`abs
(
t1
 - 
t2
è> 0.2 ||‡bsÑ1 - 
t3
) > 0.2)

162 
m_buf_
.
	`lock
();

163 
	`ROS_WARN
("unsync msg");

164 !
£g_şoud_buf_
.
	`em±y
())

166 
£g_şoud_buf_
.
	`pİ
();

168 !
£g_šfo_buf_
.
	`em±y
())

170 
£g_šfo_buf_
.
	`pİ
();

172 !
ou›r_buf_
.
	`em±y
())

174 
ou›r_buf_
.
	`pİ
();

176 
m_buf_
.
	`uÆock
();

181 
TicToc
 
t_adj
;

182 
PoštCloudT
::
PŒ
 
	`£g_şoud
(
Ãw
 
	`PoštCloudT
());

183 
pş
::
	`äomROSMsg
(*
£g_şoud_buf_
.
	`äÚt
(), *
£g_şoud
);

185 
	`ROS_INFO
("adju¡Di¡ÜtiÚ %.3àms", 
t_adj
.
	`toc
());

188 
TicToc
 
t_ÿl
;

189 
şoud_size
 = 
£g_şoud
->
pošts
.
	`size
();

190 
şoud_msgs
::
şoud_šfoCÚ¡PŒ
 
£g_šfo
 = 
£g_šfo_buf_
.
	`äÚt
();

191 
i
 = 5; i < 
şoud_size
 - 5; ++i)

193 
diff_¿nge
 = 
£g_šfo
->
£gm’‹dCloudRªge
[
i
 - 5] + seg_info->segmentedCloudRange[i - 4] + seg_info->segmentedCloudRange[i - 3] + seg_info->segmentedCloudRange[i - 2] + seg_info->segmentedCloudRange[i - 1] - seg_info->segmentedCloudRange[i] * 10 + seg_info->segmentedCloudRange[i + 1] + seg_info->segmentedCloudRange[i + 2] + seg_info->segmentedCloudRange[i + 3] + seg_info->segmentedCloudRange[i + 4] + seg_info->segmentedCloudRange[i + 5];

194 
şoud_curv©u»_
[
i
] = 
diff_¿nge
 * diff_range;

195 
şoud_ÃighbÜ_picked_
[
i
] = 0;

196 
şoud_Ïb–_
[
i
] = 0;

197 
şoud_sÜt_idx_
[
i
] = i;

200 
occ1
 = 0, 
occ2
 = 0, 
occ3
 = 0;

201 
i
 = 5; i < 
şoud_size
 - 5; ++i)

203 
d•th1
 = 
£g_šfo
->
£gm’‹dCloudRªge
[
i
];

204 
d•th2
 = 
£g_šfo
->
£gm’‹dCloudRªge
[
i
 + 1];

205 
cŞ_diff
 = 
¡d
::
	`abs
(
£g_šfo
->
£gm’‹dCloudCŞInd
[
i
] - seg_info->segmentedCloudColInd[i + 1]);

206 ià(
¡d
::
	`abs
(
cŞ_diff
) < 10)

209 ià(
d•th1
 - 
d•th2
 > 0.5)

211 
şoud_ÃighbÜ_picked_
[
i
 - 5] = cloud_ÃighbÜ_picked_[˜- 4] = cloud_ÃighbÜ_picked_[˜- 3] = cloud_ÃighbÜ_picked_[˜- 2] = cloud_ÃighbÜ_picked_[˜- 1] = cloud_ÃighbÜ_picked_[i] = 
Œue
;

212 
occ1
 += 6;

213 
cout
 << "cŞ1: " << 
£g_šfo
->
£gm’‹dCloudCŞInd
[
i
] << ", cŞ2: " << seg_šfo->£gm’‹dCloudCŞInd[i+1] << ", cŞ_diff: " << 
cŞ_diff
 << ", d•th1: " << 
d•th1
 << ", d•th2: " << 
d•th2
 << 
’dl
;

216 ià(
d•th2
 - 
d•th1
 > 0.5)

218 
şoud_ÃighbÜ_picked_
[
i
 + 1] = cloud_ÃighbÜ_picked_[˜+ 2] = cloud_ÃighbÜ_picked_[˜+ 3] = cloud_ÃighbÜ_picked_[˜+ 4] = cloud_ÃighbÜ_picked_[˜+ 5] = 
Œue
;

219 
occ2
 += 5;

222 
diff1
 = 
¡d
::
	`abs
(
£g_šfo
->
£gm’‹dCloudRªge
[
i
 - 1] - 
d•th1
);

223 
diff2
 = 
¡d
::
	`abs
(
d•th2
 - 
d•th1
);

224 ià(
diff1
 > 0.02 * 
£g_šfo
->
£gm’‹dCloudRªge
[
i
] && 
diff2
 > 0.02 * seg_info->segmentedCloudRange[i])

226 
şoud_ÃighbÜ_picked_
[
i
] = 
Œue
;

227 ++
occ3
;

230 
	`ROS_INFO
("ÿlcuÏ‹SmoÙhÃs ªd m¬kOcşuded %.3àms", 
t_adj
.
	`toc
());

231 
	`ROS_INFO
("şoud_size: %d, occ1: %d, occ2: %d, occ3: %d", 
şoud_size
, 
occ1
, 
occ2
, 
occ3
);

234 
TicToc
 
t_±s
;

235 
PoštCloudT
::
PŒ
 
	`sh¬p
(
Ãw
 PointCloudT);

236 
PoštCloudT
::
PŒ
 
	`Ëss_sh¬p
(
Ãw
 PointCloudT);

237 
PoštCloudT
::
PŒ
 
	`æ©
(
Ãw
 PointCloudT);

238 
PoštCloudT
::
PŒ
 
	`Ëss_æ©
(
Ãw
 PointCloudT);

239 
PoštCloudT
::
PŒ
 
	`Ëss_æ©_sÿn
(
Ãw
 PointCloudT);

241 
t_sÜt
 = 0.;

242 
i
 = 0; i < 
N_SCAN
; ++i)

244 
Ëss_æ©_sÿn
->
	`ş—r
();

245 
diff_idx
 = 
£g_šfo
->
’dRšgIndex
[
i
] - seg_šfo->
¡¬tRšgIndex
[i];

246 
j
 = 0; j < 6; ++j)

248 
¥
 = 
£g_šfo
->
¡¬tRšgIndex
[
i
] + 
j
 * 
diff_idx
 / 6;

249 
•
 = 
£g_šfo
->
¡¬tRšgIndex
[
i
] + (
j
 + 1è* 
diff_idx
 / 6 - 1;

250 ià(
¥
 >ğ
•
)

252 
	`ROS_INFO
("i: %d, sp: %d,ƒp: %d, s¹: %d,ƒnd: %d", 
i
, 
¥
, 
•
, 
£g_šfo
->
¡¬tRšgIndex
[i], seg_šfo->
’dRšgIndex
[i]);

255 
TicToc
 
t_tmp
;

256 
¡d
::
	`sÜt
(
şoud_sÜt_idx_
.
	`begš
(è+ 
¥
, cloud_sÜt_idx_.begš(è+ 
•
 + 1, [
this
](
a
, 
b
è{  
şoud_curv©u»_
[a] < cloud_curvature_[b]; });

257 
t_sÜt
 +ğ
t_tmp
.
	`toc
();

259 
picked_num
 = 0;

260 
k
 = 
•
; k >ğ
¥
; --k)

262 
idx
 = 
şoud_sÜt_idx_
[
k
];

263 ià(
şoud_ÃighbÜ_picked_
[
idx
] =ğ0 && 
şoud_curv©u»_
[idx] > 0.1 && 
£g_šfo
->
£gm’‹dCloudGroundFÏg
[idx] =ğ
çl£
)

265 ++
picked_num
;

266 
şoud_ÃighbÜ_picked_
[
idx
] = 1;

267 ià(
picked_num
 <= 2)

269 
şoud_Ïb–_
[
idx
] = 2;

270 
sh¬p
->
	`push_back
(
£g_şoud
->
pošts
[
idx
]);

271 
Ëss_sh¬p
->
	`push_back
(
£g_şoud
->
pošts
[
idx
]);

273 ià(
picked_num
 <= 20)

275 
şoud_Ïb–_
[
idx
] = 1;

276 
Ëss_sh¬p
->
	`push_back
(
£g_şoud
->
pošts
[
idx
]);

282 
l
 = 1;† <= 5; ++l)

284 
cŞ_diff
 = 
	`abs
(
£g_šfo
->
£gm’‹dCloudCŞInd
[
idx
 + 
l
] - seg_info->segmentedCloudColInd[idx +† - 1]);

285 ià(
cŞ_diff
 > 10)

291 
şoud_ÃighbÜ_picked_
[
idx
 + 
l
] = 1;

294 
l
 = -1;† >= -5; --l)

296 
cŞ_diff
 = 
	`abs
(
£g_šfo
->
£gm’‹dCloudCŞInd
[
idx
 + 
l
] - seg_info->segmentedCloudColInd[idx +† + 1]);

297 ià(
cŞ_diff
 > 10)

303 
şoud_ÃighbÜ_picked_
[
idx
 + 
l
] = 1;

309 
picked_num
 = 0;

310 
k
 = 
¥
; k <ğ
•
; ++k)

312 
idx
 = 
şoud_sÜt_idx_
[
k
];

313 ià(
şoud_ÃighbÜ_picked_
[
idx
] =ğ0 && 
şoud_curv©u»_
[idx] < 0.1 && 
£g_šfo
->
£gm’‹dCloudGroundFÏg
[idx] =ğ
Œue
)

315 
şoud_Ïb–_
[
idx
] = -1;

316 
æ©
->
	`push_back
(
£g_şoud
->
pošts
[
idx
]);

317 ++
picked_num
;

318 
şoud_ÃighbÜ_picked_
[
idx
] = 1;

319 ià(
picked_num
 >= 4)

323 
l
 = 1;† <= 5; ++l)

325 
cŞ_diff
 = 
	`abs
(
£g_šfo
->
£gm’‹dCloudCŞInd
[
idx
 + 
l
] - seg_info->segmentedCloudColInd[idx +† - 1]);

326 ià(
cŞ_diff
 > 10)

332 
şoud_ÃighbÜ_picked_
[
idx
 + 
l
] = 1;

335 
l
 = -1;† >= -5; --l)

337 
cŞ_diff
 = 
	`abs
(
£g_šfo
->
£gm’‹dCloudCŞInd
[
idx
 + 
l
] - seg_info->segmentedCloudColInd[idx +† + 1]);

338 ià(
cŞ_diff
 > 10)

344 
şoud_ÃighbÜ_picked_
[
idx
 + 
l
] = 1;

350 
k
 = 
¥
; k <ğ
•
; ++k)

352 ià(
şoud_Ïb–_
[
k
] <= 0)

354 
Ëss_æ©_sÿn
->
	`push_back
(
£g_şoud
->
pošts
[
k
]);

359 
PoštCloudT
::
PŒ
 
	`Ëss_æ©_sÿn_ds
(
Ãw
 PointCloudT);

360 
pş
::
Vox–Grid
<
PoštT
> 
ds
;

361 
ds
.
	`£tL—fSize
(0.4, 0.4, 0.4);

362 
ds
.
	`£tIÅutCloud
(
Ëss_æ©_sÿn
);

363 
ds
.
	`f‹r
(*
Ëss_æ©_sÿn_ds
);

364 *
Ëss_æ©
 +ğ*
Ëss_æ©_sÿn_ds
;

366 
	`ROS_INFO
("Ëss_sh¬°size: %d,†ess_æ© size: %d", 
Ëss_sh¬p
->
	`size
(), 
Ëss_æ©
->size());

367 
	`ROS_INFO
("sÜˆcurv©u» v®utime: %.3f", 
t_sÜt
);

368 
	`ROS_INFO
("ã©u»…»·»ime: %.3f", 
t_±s
.
	`toc
());

370 ià(
pub_cÜÃr_
.
	`g‘NumSubsüib”s
(è> 0 || 
pub_cÜÃr_Ëss_
.g‘NumSubsüib”s(è> 0 || 
pub_surf_
.g‘NumSubsüib”s(è> 0 || 
pub_surf_Ëss_
.getNumSubscribers() > 0)

372 
£nsÜ_msgs
::
PoštCloud2PŒ
 
	`msg_sh¬p
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

373 
£nsÜ_msgs
::
PoštCloud2PŒ
 
	`msg_Ëss_sh¬p
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

374 
£nsÜ_msgs
::
PoštCloud2PŒ
 
	`msg_æ©
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

375 
£nsÜ_msgs
::
PoštCloud2PŒ
 
	`msg_Ëss_æ©
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

376 
pş
::
	`toROSMsg
(*
sh¬p
, *
msg_sh¬p
);

377 
pş
::
	`toROSMsg
(*
Ëss_sh¬p
, *
msg_Ëss_sh¬p
);

378 
pş
::
	`toROSMsg
(*
æ©
, *
msg_æ©
);

379 
pş
::
	`toROSMsg
(*
Ëss_æ©
, *
msg_Ëss_æ©
);

380 
msg_sh¬p
->
h—d”
 = 
msg_Ëss_sh¬p
->h—d” = 
msg_æ©
->h—d” = 
msg_Ëss_æ©
->h—d” = 
£g_şoud_buf_
.
	`äÚt
()->header;

381 
pub_cÜÃr_
.
	`publish
(
msg_sh¬p
);

382 
pub_cÜÃr_Ëss_
.
	`publish
(
msg_Ëss_sh¬p
);

383 
pub_surf_
.
	`publish
(
msg_æ©
);

384 
pub_surf_Ëss_
.
	`publish
(
msg_Ëss_æ©
);

387 ià(
sy¡em_š™Ÿlized_
 =ğ
çl£
)

389 
sy¡em_š™Ÿlized_
 = 
Œue
;

390 
surf_Ï¡_
 = 
Ëss_æ©
;

391 
cÜÃr_Ï¡_
 = 
Ëss_sh¬p
;

392 
kd_surf_Ï¡_
->
	`£tIÅutCloud
(
surf_Ï¡_
);

393 
kd_cÜÃr_Ï¡_
->
	`£tIÅutCloud
(
cÜÃr_Ï¡_
);

394 
	`ROS_INFO
("system initialized");

399 
TicToc
 
t_İt
;

400 
TicToc
 
t_d©a
;

401 
cÜÃr_cÜ»¥Údªû
 = 0, 
surf_cÜ»¥Údªû
 = 0;

402 
û»s
::
LossFunùiÚ
 *
loss_funùiÚ
 = 
Ãw
 c”es::
	`Hub”Loss
(0.1);

403 
û»s
::
ProbËm
::
O±iÚs
 
´obËm_İtiÚs
;

404 
û»s
::
ProbËm
 
	`´obËm
(
´obËm_İtiÚs
);

405 
´obËm
.
	`AddP¬am‘”Block
(
·¿ms_
, 6);

406 
¡d
::
veùÜ
<> 
£¬ch_idx
;

407 
¡d
::
veùÜ
<> 
£¬ch_di¡
;

408 
j
 = 0; j < 
æ©
->
pošts
.
	`size
(); ++j)

410 
PoštT
 
pošt_£l
;

411 
	`ŒªsfÜmToS¹
(
æ©
->
pošts
[
j
], 
pošt_£l
);

412 
kd_surf_Ï¡_
->
	`Ã¬e¡KS—rch
(
pošt_£l
, 1, 
£¬ch_idx
, 
£¬ch_di¡
);

413 
şo£¡_idx
 = -1, 
mš_idx2
 = -1, 
mš_idx3
 = -1;

414 ià(
£¬ch_di¡
[0] < 
Ã¬e¡_ã©u»_di¡
)

416 
şo£¡_idx
 = 
£¬ch_idx
[0];

417 
pošt_di¡
, 
mš_di¡2
 = 
Ã¬e¡_ã©u»_di¡
, 
mš_di¡3
 =‚earest_feature_dist;

418 
şo£¡_sÿn
 = (
surf_Ï¡_
->
pošts
[
şo£¡_idx
].
š‹ns™y
);

419 
k
 = 
şo£¡_idx
 + 1; k < 
surf_Ï¡_
->
pošts
.
	`size
(); ++k)

421 ià((
surf_Ï¡_
->
pošts
[
k
].
š‹ns™y
è> 
şo£¡_sÿn
 + 2.5)

425 
pošt_di¡
 = 
	`pow
(
surf_Ï¡_
->
pošts
[
k
].
x
 - 
pošt_£l
.x, 2è+…ow(surf_Ï¡_->pošts[k].
y
 -…ošt_£l.y, 2è+…ow(surf_Ï¡_->pošts[k].
z
 -…oint_sel.z, 2);

426 ià((
surf_Ï¡_
->
pošts
[
k
].
š‹ns™y
è=ğ
şo£¡_sÿn
)

428 ià(
pošt_di¡
 < 
mš_di¡2
)

430 
mš_di¡2
 = 
pošt_di¡
;

431 
mš_idx2
 = 
k
;

436 ià(
pošt_di¡
 < 
mš_di¡3
)

438 
mš_di¡3
 = 
pošt_di¡
;

439 
mš_idx3
 = 
k
;

443 
k
 = 
şo£¡_idx
 - 1; k >= 0; --k)

445 ià((
surf_Ï¡_
->
pošts
[
k
].
š‹ns™y
è< 
şo£¡_sÿn
 - 2.5)

449 
pošt_di¡
 = 
	`pow
(
surf_Ï¡_
->
pošts
[
k
].
x
 - 
pošt_£l
.x, 2è+…ow(surf_Ï¡_->pošts[k].
y
 -…ošt_£l.y, 2è+…ow(surf_Ï¡_->pošts[k].
z
 -…oint_sel.z, 2);

450 ià((
surf_Ï¡_
->
pošts
[
k
].
š‹ns™y
è=ğ
şo£¡_sÿn
)

452 ià(
pošt_di¡
 < 
mš_di¡2
)

454 
mš_di¡2
 = 
pošt_di¡
;

455 
mš_idx2
 = 
k
;

460 ià(
pošt_di¡
 < 
mš_di¡3
)

462 
mš_di¡3
 = 
pošt_di¡
;

463 
mš_idx3
 = 
k
;

468 ià(
mš_idx2
 >ğ0 && 
mš_idx3
 >= 0)

470 
Eig’
::
VeùÜ3d
 
	`ı
(
æ©
->
pošts
[
j
].
x
, fÏt->pošts[j].
y
, fÏt->pošts[j].
z
);

471 
Eig’
::
VeùÜ3d
 
	`Íj
(
surf_Ï¡_
->
pošts
[
şo£¡_idx
].
x
, surf_Ï¡_->pošts[şo£¡_idx].
y
, surf_Ï¡_->pošts[şo£¡_idx].
z
);

472 
Eig’
::
VeùÜ3d
 
	`Íl
(
surf_Ï¡_
->
pošts
[
mš_idx2
].
x
, surf_Ï¡_->pošts[mš_idx2].
y
, surf_Ï¡_->pošts[mš_idx2].
z
);

473 
Eig’
::
VeùÜ3d
 
	`Ím
(
surf_Ï¡_
->
pošts
[
mš_idx3
].
x
, surf_Ï¡_->pošts[mš_idx3].
y
, surf_Ï¡_->pošts[mš_idx3].
z
);

474 
´obËm
.
	`AddResidu®Block
(
Ãw
 
	`SurfCo¡FunùiÚ
(
ı
, 
Íj
, 
Íl
, 
Ím
), 
loss_funùiÚ
, 
·¿ms_
);

475 ++
surf_cÜ»¥Údªû
;

479 
	`ROS_INFO
("suràcÜ»¥Údªû: %d", 
surf_cÜ»¥Údªû
);

480 
	`ROS_INFO
("d©¨assocŸtiÚime: %.3fms", 
t_d©a
.
	`toc
());

481 ià(
surf_cÜ»¥Údªû
 >= 10)

483 
TicToc
 
t_sŞv”
;

484 
û»s
::
SŞv”
::
O±iÚs
 
İtiÚs
;

485 
İtiÚs
.
lš—r_sŞv”_ty³
 = 
û»s
::
DENSE_QR
;

486 
İtiÚs
.
max_num_™”©iÚs
 = 5;

487 
İtiÚs
.
mšimiz”_´og»ss_to_¡dout
 = 
çl£
;

488 
û»s
::
SŞv”
::
Summ¬y
 
summ¬y
;

489 
û»s
::
	`SŞve
(
İtiÚs
, &
´obËm
, &
summ¬y
);

490 
	`ROS_INFO
("sŞv”im%àm \n", 
t_sŞv”
.
	`toc
());

491 
	`ROS_INFO_STREAM
(
summ¬y
.
	`Br›fR•Üt
());

495 
	`ROS_WARN
("few surf correspondance");

497 
t_d©a
.
	`tic
();

498 
j
 = 0; j < 
sh¬p
->
pošts
.
	`size
(); ++j)

500 
PoštT
 
pošt_£l
;

501 
	`ŒªsfÜmToS¹
(
sh¬p
->
pošts
[
j
], 
pošt_£l
);

502 
kd_cÜÃr_Ï¡_
->
	`Ã¬e¡KS—rch
(
pošt_£l
, 1, 
£¬ch_idx
, 
£¬ch_di¡
);

503 
şo£¡_idx
 = -1, 
mš_idx2
 = -1;

504 ià(
£¬ch_di¡
[0] < 
Ã¬e¡_ã©u»_di¡
)

506 
şo£¡_idx
 = 
£¬ch_idx
[0];

507 
şo£¡_sÿn
 = (
cÜÃr_Ï¡_
->
pošts
[
şo£¡_idx
].
š‹ns™y
);

508 
pošt_di¡
, 
mš_pošt_di¡2
 = 
Ã¬e¡_ã©u»_di¡
;

510 
k
 = 
şo£¡_idx
 + 1; k < 
cÜÃr_Ï¡_
->
pošts
.
	`size
(); ++k)

512 ià((
cÜÃr_Ï¡_
->
pošts
[
k
].
š‹ns™y
è> 
şo£¡_sÿn
 + 2.5)

516 
pošt_di¡
 = 
	`pow
(
cÜÃr_Ï¡_
->
pošts
[
k
].
x
 - 
pošt_£l
.x, 2è+…ow(cÜÃr_Ï¡_->pošts[k].
y
 -…ošt_£l.y, 2è+…ow(cÜÃr_Ï¡_->pošts[k].
z
 -…oint_sel.z, 2);

517 ià((
cÜÃr_Ï¡_
->
pošts
[
k
].
š‹ns™y
è> 
şo£¡_sÿn
)

519 ià(
pošt_di¡
 < 
mš_pošt_di¡2
)

521 
mš_pošt_di¡2
 = 
pošt_di¡
;

522 
mš_idx2
 = 
k
;

526 
k
 = 
şo£¡_idx
 - 1; k >= 0; --k)

528 ià((
cÜÃr_Ï¡_
->
pošts
[
k
].
š‹ns™y
è< 
şo£¡_sÿn
 - 2.5)

532 
pošt_di¡
 = 
	`pow
(
cÜÃr_Ï¡_
->
pošts
[
k
].
x
 - 
pošt_£l
.x, 2è+…ow(cÜÃr_Ï¡_->pošts[k].
y
 -…ošt_£l.y, 2è+…ow(cÜÃr_Ï¡_->pošts[k].
z
 -…oint_sel.z, 2);

533 ià((
cÜÃr_Ï¡_
->
pošts
[
k
].
š‹ns™y
è< 
şo£¡_sÿn
)

535 ià(
pošt_di¡
 < 
mš_pošt_di¡2
)

537 
mš_pošt_di¡2
 = 
pošt_di¡
;

538 
mš_idx2
 = 
k
;

543 ià(
mš_idx2
 >= 0)

545 
Eig’
::
VeùÜ3d
 
	`ı
(
sh¬p
->
pošts
[
j
].
x
, sh¬p->pošts[j].
y
, sh¬p->pošts[j].
z
);

546 
Eig’
::
VeùÜ3d
 
	`Íj
(
cÜÃr_Ï¡_
->
pošts
[
şo£¡_idx
].
x
, cÜÃr_Ï¡_->pošts[şo£¡_idx].
y
, cÜÃr_Ï¡_->pošts[şo£¡_idx].
z
);

547 
Eig’
::
VeùÜ3d
 
	`Íl
(
cÜÃr_Ï¡_
->
pošts
[
mš_idx2
].
x
, cÜÃr_Ï¡_->pošts[mš_idx2].
y
, cÜÃr_Ï¡_->pošts[mš_idx2].
z
);

548 
´obËm
.
	`AddResidu®Block
(
Ãw
 
	`CÜÃrCo¡FunùiÚ
(
ı
, 
Íj
, 
Íl
),

549 
loss_funùiÚ
, 
·¿ms_
);

550 ++
cÜÃr_cÜ»¥Údªû
;

553 
	`ROS_INFO
("cÜÃ¸cÜ»¥Údªû: %d", 
cÜÃr_cÜ»¥Údªû
);

554 
	`ROS_INFO
("d©¨assocŸtiÚime: %.3fms", 
t_d©a
.
	`toc
());

555 ià(
cÜÃr_cÜ»¥Údªû
 >= 10)

557 ià(
cÜÃr_cÜ»¥Údªû
 <= 50)

559 
	`ROS_WARN
("corner correspondance <= 50");

561 
TicToc
 
t_sŞv”
;

562 
û»s
::
SŞv”
::
O±iÚs
 
İtiÚs
;

563 
İtiÚs
.
lš—r_sŞv”_ty³
 = 
û»s
::
DENSE_QR
;

564 
İtiÚs
.
max_num_™”©iÚs
 = 5;

565 
İtiÚs
.
mšimiz”_´og»ss_to_¡dout
 = 
çl£
;

566 
û»s
::
SŞv”
::
Summ¬y
 
summ¬y
;

567 
û»s
::
	`SŞve
(
İtiÚs
, &
´obËm
, &
summ¬y
);

568 
	`ROS_INFO
("sŞv”im%àm \n", 
t_sŞv”
.
	`toc
());

569 
	`ROS_INFO_STREAM
(
summ¬y
.
	`Br›fR•Üt
());

573 
	`ROS_WARN
("few corner correspondance");

575 
	`ROS_INFO
("tÙ® o±ime: %.3fms", 
t_İt
.
	`toc
());

576 
t_tÙ®
 = 0.;

577 
t_tÙ®
 +ğ
t_İt
.
	`toc
();

578 
	`ROS_INFO
("İˆtimuÁ‚ow: %.3fms", 
t_tÙ®
);

579 
Eig’
::
VeùÜ3d
 
	`t_Ï¡_cur
(
·¿ms_
[0],…arams_[1],…arams_[2]);

581 
Eig’
::
M©rix3d
 
r_Ï¡_cur
 = (Eig’::
	`AngËAxisd
(
·¿ms_
[5], Eig’::
VeùÜ3d
::
	`Un™Z
())).
	`toRÙ©iÚM©rix
();

582 
t_w_cur_
 =_w_cur_ + 
r_w_cur_
 * 
t_Ï¡_cur
;

583 
r_w_cur_
 =„_w_cur_ * 
r_Ï¡_cur
;

584 
	`ROS_INFO
("t_Ï¡_cur: %.3f, %.3f, %.3f,„_Ï¡_cur: %.3f, %.3f, %.3f", 
·¿ms_
[0],…arams_[1],…arams_[2],…arams_[3],…arams_[4],…arams_[5]);

585 
	`ROS_INFO_STREAM
("t_w_cur: " << 
t_w_cur_
 << "\Ä_w_cur: " << 
r_w_cur_
);

588 
Eig’
::
M©rix4d
 
	`tf_o2b
(Eig’::M©rix4d::
	`Id’t™y
());

589 
tf_o2b
.
block
<3, 3>(0, 0èğ
r_w_cur_
;

590 
tf_o2b
.
block
<3, 1>(0, 3èğ
t_w_cur_
;

591 
tf_o2b
 =f_o2b * 
tf_b2l_
.
	`šv”£
();

592 
Eig’
::
Qu©”niÚd
 
	`tmp_q
(
tf_o2b
.
block
<3, 3>(0, 0));

593 
Çv_msgs
::
Odom‘ryPŒ
 
	`Ï£r_odom‘ry
(
Ãw
‚av_msgs::
Odom‘ry
);

594 
Ï£r_odom‘ry
->
h—d”
.
äame_id
 = "/odom";

595 
Ï£r_odom‘ry
->
chd_äame_id
 = "/base_link";

596 
Ï£r_odom‘ry
->
h—d”
.
¡amp
 = 
ros
::
	`Time
().
	`äomSec
(
t1
);

597 
Ï£r_odom‘ry
->
po£
.po£.
Ü›Á©iÚ
.
x
 = 
tmp_q
.
	`x
();

598 
Ï£r_odom‘ry
->
po£
.po£.
Ü›Á©iÚ
.
y
 = 
tmp_q
.
	`y
();

599 
Ï£r_odom‘ry
->
po£
.po£.
Ü›Á©iÚ
.
z
 = 
tmp_q
.
	`z
();

600 
Ï£r_odom‘ry
->
po£
.po£.
Ü›Á©iÚ
.
w
 = 
tmp_q
.
	`w
();

601 
Ï£r_odom‘ry
->
po£
.po£.
pos™iÚ
.
x
 = 
	`tf_o2b
(0, 3);

602 
Ï£r_odom‘ry
->
po£
.po£.
pos™iÚ
.
y
 = 
	`tf_o2b
(1, 3);

603 
Ï£r_odom‘ry
->
po£
.po£.
pos™iÚ
.
z
 = 
	`tf_o2b
(2, 3);

604 
pub_odom_
.
	`publish
(
Ï£r_odom‘ry
);

606 
tf
::
T¿nsfÜm
 
o2b
;

607 
tf
::
	`po£MsgToTF
(
Ï£r_odom‘ry
->
po£
.po£, 
o2b
);

608 
tf_brßd_
.
	`£ndT¿nsfÜm
(
tf
::
	`Sm³dT¿nsfÜm
(
o2b
, 
Ï£r_odom‘ry
->
h—d”
.
¡amp
, "/odom", "/base_link"));

610 
surf_Ï¡_
 = 
Ëss_æ©
;

611 
cÜÃr_Ï¡_
 = 
Ëss_sh¬p
;

612 
kd_surf_Ï¡_
->
	`£tIÅutCloud
(
surf_Ï¡_
);

613 
kd_cÜÃr_Ï¡_
->
	`£tIÅutCloud
(
cÜÃr_Ï¡_
);

616 
£nsÜ_msgs
::
PoštCloud2PŒ
 
	`msg_surf_Ï¡
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

617 
£nsÜ_msgs
::
PoštCloud2PŒ
 
	`msg_cÜÃr_Ï¡
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

619 
pş
::
	`toROSMsg
(*
surf_Ï¡_
, *
msg_surf_Ï¡
);

620 
pş
::
	`toROSMsg
(*
cÜÃr_Ï¡_
, *
msg_cÜÃr_Ï¡
);

621 
msg_surf_Ï¡
->
h—d”
.
¡amp
.
	`äomSec
(
t1
);

622 
msg_surf_Ï¡
->
h—d”
.
äame_id
 = "/laser";

623 
msg_cÜÃr_Ï¡
->
h—d”
 = 
msg_surf_Ï¡
->header;

624 
pub_surf_Ï¡_
.
	`publish
(
msg_surf_Ï¡
);

625 
pub_cÜÃr_Ï¡_
.
	`publish
(
msg_cÜÃr_Ï¡
);

627 
m_buf_
.
	`lock
();

628 
£g_şoud_buf_
.
	`pİ
();

629 
£g_šfo_buf_
.
	`pİ
();

630 
ou›r_buf_
.
	`pİ
();

631 
m_buf_
.
	`uÆock
();

634 
	}
}

636 
	$adju¡Di¡ÜtiÚ
(
PoštCloudT
::
PŒ
 
şoud
, 
sÿn_time
)

638 
şoud_size
 = 
şoud
->
pošts
.
	`size
();

640 
şoud_msgs
::
şoud_šfoCÚ¡PŒ
 
£g_šfo
 = 
£g_šfo_buf_
.
	`äÚt
();

641 
¡¬t_Üi
 = (
£g_šfo
->
¡¬tOr›Á©iÚ
 + 2 * 
M_PI
è/ 
HÜizÚ_SCAN
;

642 
’d_Üi
 = (
£g_šfo
->
’dOr›Á©iÚ
 + 2 * 
M_PI
è/ 
HÜizÚ_SCAN
;

643 ià(
¡¬t_Üi
 >ğ
HÜizÚ_SCAN
)

645 
¡¬t_Üi
 -ğ
HÜizÚ_SCAN
;

647 ià(
’d_Üi
 >ğ
HÜizÚ_SCAN
)

649 
’d_Üi
 -ğ
HÜizÚ_SCAN
;

652 
Üi_diff
 = 
’d_Üi
 - 
¡¬t_Üi
;

653 ià(
Üi_diff
 <= 0)

655 
	`ROS_WARN
("Üi_difà<ğ0, %d", 
Üi_diff
);

656 
Üi_diff
 = 
HÜizÚ_SCAN
;

658 
Eig’
::
VeùÜ3f
 
½y_¡¬t
, 
shiá_¡¬t
, 
v–o_¡¬t
, 
½y_cur
, 
shiá_cur
, 
v–o_cur
;

659 
Eig’
::
VeùÜ3f
 
shiá_äom_¡¬t
;

660 
Eig’
::
M©rix3f
 
r_s_i
, 
r_c
;

661 
Eig’
::
VeùÜ3f
 
adju¡ed_p
;

663 
i
 = 0; i < 
şoud_size
; ++i)

665 
PoštT
 &
p
 = 
şoud
->
pošts
[
i
];

667 
»l_time
 = (
£g_šfo
->
£gm’‹dCloudCŞInd
[
i
] - 
¡¬t_Üi
è* 
sÿn_³riod
 / 
Üi_diff
;

668 
cur_time
 = 
sÿn_time
 + 
»l_time
;

670 ià(
u£_imu
)

672 ià(
imu_±r_Ï¡_
 > 0)

674 
imu_±r_äÚt_
 = 
imu_±r_Ï¡_™”_
;

675 
imu_±r_äÚt_
 !ğ
imu_±r_Ï¡_
)

677 ià(
cur_time
 < 
imu_time_
[
imu_±r_äÚt_
])

681 
imu_±r_äÚt_
 = (imu_±r_äÚt_ + 1è% 
imu_queue_Ëngth
;

683 ià(
	`abs
(
cur_time
 - 
imu_time_
[
imu_±r_äÚt_
]è> 
sÿn_³riod
)

685 
	`ROS_WARN_COND
(
i
 < 5, "unsynøimu‡nd…ømsg %d, %d, %.6f, %.6f", 
imu_±r_äÚt_
, 
imu_±r_Ï¡_
, 
cur_time
, 
imu_time_
[imu_ptr_front_]);

689 ià(
cur_time
 > 
imu_time_
[
imu_±r_äÚt_
])

691 
	`½y_cur
(0èğ
imu_rŞl_
[
imu_±r_äÚt_
];

692 
	`½y_cur
(1èğ
imu_p™ch_
[
imu_±r_äÚt_
];

693 
	`½y_cur
(2èğ
imu_yaw_
[
imu_±r_äÚt_
];

694 
	`shiá_cur
(0èğ
imu_shiá_x_
[
imu_±r_äÚt_
];

695 
	`shiá_cur
(1èğ
imu_shiá_y_
[
imu_±r_äÚt_
];

696 
	`shiá_cur
(2èğ
imu_shiá_z_
[
imu_±r_äÚt_
];

697 
	`v–o_cur
(0èğ
imu_v–o_x_
[
imu_±r_äÚt_
];

698 
	`v–o_cur
(1èğ
imu_v–o_y_
[
imu_±r_äÚt_
];

699 
	`v–o_cur
(2èğ
imu_v–o_z_
[
imu_±r_äÚt_
];

703 
imu_±r_back
 = (
imu_±r_äÚt_
 - 1 + 
imu_queue_Ëngth
) % imu_queue_length;

704 
¿tio_äÚt
 = (
cur_time
 - 
imu_time_
[
imu_±r_back
]è/ (imu_time_[
imu_±r_äÚt_
] - imu_time_[imu_ptr_back]);

705 
¿tio_back
 = 1. - 
¿tio_äÚt
;

706 
	`½y_cur
(0èğ
imu_rŞl_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_rŞl_[
imu_±r_back
] * 
¿tio_back
;

707 
	`½y_cur
(1èğ
imu_p™ch_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_p™ch_[
imu_±r_back
] * 
¿tio_back
;

708 
	`½y_cur
(2èğ
imu_yaw_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_yaw_[
imu_±r_back
] * 
¿tio_back
;

709 
	`shiá_cur
(0èğ
imu_shiá_x_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_shiá_x_[
imu_±r_back
] * 
¿tio_back
;

710 
	`shiá_cur
(1èğ
imu_shiá_y_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_shiá_y_[
imu_±r_back
] * 
¿tio_back
;

711 
	`shiá_cur
(2èğ
imu_shiá_z_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_shiá_z_[
imu_±r_back
] * 
¿tio_back
;

712 
	`v–o_cur
(0èğ
imu_v–o_x_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_v–o_x_[
imu_±r_back
] * 
¿tio_back
;

713 
	`v–o_cur
(1èğ
imu_v–o_y_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_v–o_y_[
imu_±r_back
] * 
¿tio_back
;

714 
	`v–o_cur
(2èğ
imu_v–o_z_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_v–o_z_[
imu_±r_back
] * 
¿tio_back
;

717 
r_c
 = (
Eig’
::
	`AngËAxisf
(
	`½y_cur
(2), Eig’::
VeùÜ3f
::
	`Un™Z
()è* Eig’::AngËAxisfÔpy_cur(1), Eig’::VeùÜ3f::
	`Un™Y
()è* Eig’::AngËAxisfÔpy_cur(0), Eig’::VeùÜ3f::
	`Un™X
())).
	`toRÙ©iÚM©rix
();

719 ià(
i
 == 0)

721 
½y_¡¬t
 = 
½y_cur
;

722 
shiá_¡¬t
 = 
shiá_cur
;

723 
v–o_¡¬t
 = 
v–o_cur
;

724 
r_s_i
 = 
r_c
.
	`šv”£
();

728 
shiá_äom_¡¬t
 = 
shiá_cur
 - 
shiá_¡¬t
 - 
v–o_¡¬t
 * 
»l_time
;

729 
adju¡ed_p
 = 
r_s_i
 * (
r_c
 * 
Eig’
::
	`VeùÜ3f
(
p
.
x
,….
y
,….
z
è+ 
shiá_äom_¡¬t
);

730 
p
.
x
 = 
adju¡ed_p
.
	`x
();

731 
p
.
y
 = 
adju¡ed_p
.
	`y
();

732 
p
.
z
 = 
adju¡ed_p
.
	`z
();

734 
imu_±r_Ï¡_™”_
 = 
imu_±r_äÚt_
;

737 ià(
u£_odom
)

739 ià(
odom_±r_Ï¡_
 > 0)

741 
odom_±r_äÚt_
 = 
odom_±r_Ï¡_™”_
;

742 
odom_±r_äÚt_
 !ğ
odom_±r_Ï¡_
)

744 ià(
cur_time
 > 
odom_queue_
[
odom_±r_äÚt_
]->
h—d”
.
¡amp
.
	`toSec
())

748 
odom_±r_äÚt_
 = (odom_±r_äÚt_ + 1è% 
odom_queue_Ëngth
;

750 ià(
cur_time
 > 
odom_queue_
[
odom_±r_äÚt_
]->
h—d”
.
¡amp
.
	`toSec
())

752 
	`½y_cur
(0èğ
odom_rŞl_
[
odom_±r_äÚt_
];

753 
	`½y_cur
(1èğ
odom_p™ch_
[
odom_±r_äÚt_
];

754 
	`½y_cur
(2èğ
odom_yaw_
[
odom_±r_äÚt_
];

755 
	`shiá_cur
(0èğ
odom_queue_
[
odom_±r_äÚt_
]->
po£
.po£.
pos™iÚ
.
x
;

756 
	`shiá_cur
(1èğ
odom_queue_
[
odom_±r_äÚt_
]->
po£
.po£.
pos™iÚ
.
y
;

757 
	`shiá_cur
(2èğ
odom_queue_
[
odom_±r_äÚt_
]->
po£
.po£.
pos™iÚ
.
z
;

758 
	`v–o_cur
(0èğ
odom_queue_
[
odom_±r_äÚt_
]->
twi¡
.twi¡.
lš—r
.
x
;

759 
	`v–o_cur
(1èğ
odom_queue_
[
odom_±r_äÚt_
]->
twi¡
.twi¡.
lš—r
.
y
;

760 
	`v–o_cur
(2èğ
odom_queue_
[
odom_±r_äÚt_
]->
twi¡
.twi¡.
lš—r
.
z
;

764 
odom_±r_back
 = (
odom_±r_äÚt_
 - 1 + 
odom_queue_Ëngth
) % odom_queue_length;

765 
¿tio_äÚt
 = (
cur_time
 - 
odom_queue_
[
odom_±r_back
]->
h—d”
.
¡amp
.
	`toSec
()è/ (odom_queue_[
odom_±r_äÚt_
]->header.stamp.toSec() - odom_queue_[odom_ptr_back]->header.stamp.toSec());

766 
¿tio_back
 = 1. - 
¿tio_äÚt
;

767 
	`½y_cur
(0èğ
¿tio_äÚt
 * 
odom_rŞl_
[
odom_±r_äÚt_
] + 
¿tio_back
 * odom_rŞl_[
odom_±r_back
];

768 
	`½y_cur
(1èğ
¿tio_äÚt
 * 
odom_p™ch_
[
odom_±r_äÚt_
] + 
¿tio_back
 * odom_p™ch_[
odom_±r_back
];

769 
	`½y_cur
(2èğ
¿tio_äÚt
 * 
odom_yaw_
[
odom_±r_äÚt_
] + 
¿tio_back
 * odom_yaw_[
odom_±r_back
];

770 
	`shiá_cur
(0èğ
¿tio_äÚt
 * 
odom_queue_
[
odom_±r_äÚt_
]->
po£
.po£.
pos™iÚ
.
x
 + 
¿tio_back
 * odom_queue_[odom_ptr_front_]->pose.pose.position.x;

771 
	`shiá_cur
(1èğ
¿tio_äÚt
 * 
odom_queue_
[
odom_±r_äÚt_
]->
po£
.po£.
pos™iÚ
.
y
 + 
¿tio_back
 * odom_queue_[odom_ptr_front_]->pose.pose.position.y;

772 
	`shiá_cur
(2èğ
¿tio_äÚt
 * 
odom_queue_
[
odom_±r_äÚt_
]->
po£
.po£.
pos™iÚ
.
z
 + 
¿tio_back
 * odom_queue_[odom_ptr_front_]->pose.pose.position.z;

773 
	`v–o_cur
(0èğ
¿tio_äÚt
 * 
odom_queue_
[
odom_±r_äÚt_
]->
twi¡
.twi¡.
lš—r
.
x
 + 
¿tio_back
 * odom_queue_[odom_ptr_front_]->twist.twist.linear.x;

774 
	`v–o_cur
(1èğ
¿tio_äÚt
 * 
odom_queue_
[
odom_±r_äÚt_
]->
twi¡
.twi¡.
lš—r
.
y
 + 
¿tio_back
 * odom_queue_[odom_ptr_front_]->twist.twist.linear.y;

775 
	`v–o_cur
(2èğ
¿tio_äÚt
 * 
odom_queue_
[
odom_±r_äÚt_
]->
twi¡
.twi¡.
lš—r
.
z
 + 
¿tio_back
 * odom_queue_[odom_ptr_front_]->twist.twist.linear.z;

777 
r_c
 = (
Eig’
::
	`AngËAxisf
(
	`½y_cur
(2), Eig’::
VeùÜ3f
::
	`Un™Z
()è* Eig’::AngËAxisfÔpy_cur(1), Eig’::VeùÜ3f::
	`Un™Y
()è* Eig’::AngËAxisfÔpy_cur(0), Eig’::VeùÜ3f::
	`Un™X
())).
	`toRÙ©iÚM©rix
();

778 ià(
i
 == 0)

780 
½y_¡¬t
 = 
½y_cur
;

781 
shiá_¡¬t
 = 
shiá_cur
;

782 
v–o_¡¬t
 = 
v–o_cur
;

783 
r_s_i
 = 
r_c
.
	`šv”£
();

787 
shiá_äom_¡¬t
 = 
shiá_cur
 - 
shiá_¡¬t
 - 
v–o_¡¬t
 * 
»l_time
;

788 
adju¡ed_p
 = 
r_s_i
 * (
r_c
 * 
Eig’
::
	`VeùÜ3f
(
p
.
x
,….
y
,….
z
è+ 
shiá_äom_¡¬t
);

789 
p
.
x
 = 
adju¡ed_p
.
	`x
();

790 
p
.
y
 = 
adju¡ed_p
.
	`y
();

791 
p
.
z
 = 
adju¡ed_p
.
	`z
();

793 
odom_±r_Ï¡_™”_
 = 
odom_±r_äÚt_
;

797 ià(
pub_undi¡Ü‹d_pc_
.
	`g‘NumSubsüib”s
() > 0)

799 
£nsÜ_msgs
::
PoštCloud2PŒ
 
	`msg
(
Ãw
 s’sÜ_msgs::
	`PoštCloud2
());

800 
pş
::
	`toROSMsg
(*
şoud
, *
msg
);

801 
msg
->
h—d”
.
¡amp
.
	`äomSec
(
sÿn_time
);

802 
msg
->
h—d”
.
äame_id
 = "/laser";

803 
pub_undi¡Ü‹d_pc_
.
	`publish
(
msg
);

805 
	}
}

807 
	$ŒªsfÜmToS¹
(cÚ¡ 
PoštT
 &
pi
, PoštT &
po
)

809 
s
 = 1;

810 
Eig’
::
M©rix3d
 
r_pošt_Ï¡
 = (Eig’::
	`AngËAxisd
(
·¿ms_
[5] * 
s
, Eig’::
VeùÜ3d
::
	`Un™Z
()è* Eig’::AngËAxisdÕ¬ams_[4] * s, Eig’::VeùÜ3d::
	`Un™Y
()è* Eig’::AngËAxisdÕ¬ams_[3] * s, Eig’::VeùÜ3d::
	`Un™X
())).
	`toRÙ©iÚM©rix
();

811 
Eig’
::
VeùÜ3d
 
	`t_pošt_Ï¡
(
·¿ms_
[0] * 
s
,…arams_[1] * s,…arams_[2] * s);

812 
Eig’
::
VeùÜ3d
 
	`pošt
(
pi
.
x
,…i.
y
,…i.
z
);

813 
Eig’
::
VeùÜ3d
 
un_pošt
 = 
r_pošt_Ï¡
 * 
pošt
 + 
t_pošt_Ï¡
;

815 
po
.
x
 = 
un_pošt
.
	`x
();

816 
po
.
y
 = 
un_pošt
.
	`y
();

817 
po
.
z
 = 
un_pošt
.
	`z
();

818 
po
.
š‹ns™y
 = 
pi
.intensity;

819 
	}
}

821 
	$£gCloudHªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
)

823 
m_buf_
.
	`lock
();

824 
£g_şoud_buf_
.
	`push
(
msg
);

825 
m_buf_
.
	`uÆock
();

826 
	}
}

827 
	$£gInfoHªdËr
(cÚ¡ 
şoud_msgs
::
şoud_šfoCÚ¡PŒ
 &
msg
)

829 
m_buf_
.
	`lock
();

830 
£g_šfo_buf_
.
	`push
(
msg
);

831 
m_buf_
.
	`uÆock
();

832 
	}
}

833 
	$ou›rHªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
)

835 
m_buf_
.
	`lock
();

836 
ou›r_buf_
.
	`push
(
msg
);

837 
m_buf_
.
	`uÆock
();

838 
	}
}

840 
	$imuHªdËr
(cÚ¡ 
£nsÜ_msgs
::
ImuCÚ¡PŒ
 &
msg
)

843 
rŞl
, 
p™ch
, 
yaw
;

844 
tf
::
Qu©”niÚ
 
Üi
;

845 
tf
::
	`qu©”niÚMsgToTF
(
msg
->
Ü›Á©iÚ
, 
Üi
);

846 
tf
::
	`M©rix3x3
(
Üi
).
	`g‘RPY
(
rŞl
, 
p™ch
, 
yaw
);

847 
acc_x
 = 
msg
->
lš—r_acûË¿tiÚ
.
x
 + 9.81 * 
	`sš
(
p™ch
);

848 
acc_y
 = 
msg
->
lš—r_acûË¿tiÚ
.
y
 - 9.81 * 
	`cos
(
p™ch
è* 
	`sš
(
rŞl
);

849 
acc_z
 = 
msg
->
lš—r_acûË¿tiÚ
.
z
 - 9.81 * 
	`cos
(
p™ch
è* cos(
rŞl
);

851 
imu_±r_Ï¡_
 = (imu_±r_Ï¡_ + 1è% 
imu_queue_Ëngth
;

852 ià((
imu_±r_Ï¡_
 + 1è% 
imu_queue_Ëngth
 =ğ
imu_±r_äÚt_
)

854 
imu_±r_äÚt_
 = (imu_±r_äÚt_ + 1è% 
imu_queue_Ëngth
;

857 
imu_time_
[
imu_±r_Ï¡_
] = 
msg
->
h—d”
.
¡amp
.
	`toSec
();

858 
imu_rŞl_
[
imu_±r_Ï¡_
] = 
rŞl
;

859 
imu_p™ch_
[
imu_±r_Ï¡_
] = 
p™ch
;

860 
imu_yaw_
[
imu_±r_Ï¡_
] = 
yaw
;

863 
Eig’
::
M©rix3f
 
rÙ
 = Eig’::
	`Qu©”niÚf
(
msg
->
Ü›Á©iÚ
.
w
, msg->Ü›Á©iÚ.
x
, msg->Ü›Á©iÚ.
y
, msg->Ü›Á©iÚ.
z
).
	`toRÙ©iÚM©rix
();

864 
Eig’
::
VeùÜ3f
 
acc
 = 
rÙ
 * Eig’::
	`VeùÜ3f
(
acc_x
, 
acc_y
, 
acc_z
);

867 
Eig’
::
VeùÜ3f
 
	`ªguÏr_v–o
(
msg
->
ªguÏr_v–oc™y
.
x
, msg->ªguÏr_v–oc™y.
y
, msg->ªguÏr_v–oc™y.
z
);

869 
imu_±r_back
 = (
imu_±r_Ï¡_
 - 1 + 
imu_queue_Ëngth
) % imu_queue_length;

870 
time_diff
 = 
imu_time_
[
imu_±r_Ï¡_
] - imu_time_[
imu_±r_back
];

871 ià(
time_diff
 < 1.)

873 
imu_shiá_x_
[
imu_±r_Ï¡_
] = imu_shiá_x_[
imu_±r_back
] + 
imu_v–o_x_
[imu_±r_back] * 
time_diff
 + 
	`acc
(0) *ime_diff *ime_diff * 0.5;

874 
imu_shiá_y_
[
imu_±r_Ï¡_
] = imu_shiá_y_[
imu_±r_back
] + 
imu_v–o_y_
[imu_±r_back] * 
time_diff
 + 
	`acc
(1) *ime_diff *ime_diff * 0.5;

875 
imu_shiá_z_
[
imu_±r_Ï¡_
] = imu_shiá_z_[
imu_±r_back
] + 
imu_v–o_z_
[imu_±r_back] * 
time_diff
 + 
	`acc
(2) *ime_diff *ime_diff * 0.5;

877 
imu_v–o_x_
[
imu_±r_Ï¡_
] = imu_v–o_x_[
imu_±r_back
] + 
	`acc
(0è* 
time_diff
;

878 
imu_v–o_y_
[
imu_±r_Ï¡_
] = imu_v–o_y_[
imu_±r_back
] + 
	`acc
(1è* 
time_diff
;

879 
imu_v–o_z_
[
imu_±r_Ï¡_
] = imu_v–o_z_[
imu_±r_back
] + 
	`acc
(2è* 
time_diff
;

881 
	}
}

882 
	$odomHªdËr
(cÚ¡ 
Çv_msgs
::
Odom‘ryCÚ¡PŒ
 &
msg
)

886 
rŞl
, 
p™ch
, 
yaw
;

887 
tf
::
Qu©”niÚ
 
Üi
;

888 
tf
::
	`qu©”niÚMsgToTF
(
msg
->
po£
.po£.
Ü›Á©iÚ
, 
Üi
);

889 
tf
::
	`M©rix3x3
(
Üi
).
	`g‘RPY
(
rŞl
, 
p™ch
, 
yaw
);

891 
odom_±r_Ï¡_
 = (odom_±r_Ï¡_ + 1è% 
odom_queue_Ëngth
;

892 
odom_rŞl_
[
odom_±r_Ï¡_
] = 
rŞl
;

893 
odom_p™ch_
[
odom_±r_Ï¡_
] = 
p™ch
;

894 
odom_yaw_
[
odom_±r_Ï¡_
] = 
yaw
;

895 
	}
}

898 
	$maš
(
¬gc
, **
¬gv
)

900 
ros
::
	`š™
(
¬gc
, 
¬gv
, "LO");

901 
ros
::
NodeHªdË
 
nh
;

902 
LO
 
	`lo
(
nh
);

903 
lo
.
	`mašLoİ
();

904 
ros
::
	`¥š
();

906 
	}
}

	@src/imageProjection.cpp

1 
	~"®ego/imageProjeùiÚ.h
"

3 
Çme¥aû
 
	glßm


6 
	gImageProjeùiÚ
::
ÚIn™
()

8 
NODELET_INFO
("---------- ImageProjection init -----------");

9 
TicToc
 
	gt_š™
;

10 
	gnh_
 = 
g‘MTNodeHªdË
();

12 
	g£gm’‹d_şoud_msg_
.
»£t
(
Ãw
 
£nsÜ_msgs
::
PoštCloud2
());

13 
	g£g_šfo_msg_
.
»£t
(
Ãw
 
şoud_msgs
::
şoud_šfo
());

14 
	gou›r_şoud_msg_
.
»£t
(
Ãw
 
£nsÜ_msgs
::
PoštCloud2
());

16 
	g£g_šfo_msg_
->
	g¡¬tRšgIndex
.
»size
(
N_SCAN
);

17 
	g£g_šfo_msg_
->
	g’dRšgIndex
.
»size
(
N_SCAN
);

18 
	g£g_šfo_msg_
->
	g£gm’‹dCloudCŞInd
.
assign
(
N_SCAN
 * 
HÜizÚ_SCAN
, 
çl£
);

19 
	g£g_šfo_msg_
->
	g£gm’‹dCloudGroundFÏg
.
assign
(
N_SCAN
 * 
HÜizÚ_SCAN
, 0);

20 
	g£g_šfo_msg_
->
	g£gm’‹dCloudRªge
.
assign
(
N_SCAN
 * 
HÜizÚ_SCAN
, 0);

21 
	gfuÎ_şoud_
.
»£t
(
Ãw
 
PoštCloudT
());

22 
	g£gm’‹d_şoud_
.
»£t
(
Ãw
 
PoštCloudT
());

23 
	gou›r_şoud_
.
»£t
(
Ãw
 
PoštCloudT
());

24 
PoštT
 
	gÇn_p
;

25 
	gÇn_p
.
	gš‹ns™y
 = -1;

26 
	gfuÎ_şoud_
->
	gpošts
.
»size
(
N_SCAN
 * 
HÜizÚ_SCAN
);

27 
	g¡d
::
fl
(
fuÎ_şoud_
->
pošts
.
begš
(), fuÎ_şoud_->pošts.
’d
(), 
Çn_p
);

29 
	g¿nge_m©_
.
»size
(
N_SCAN
, 
Eig’
::
NoChªge
);

30 
	gÏb–_m©_
.
»size
(
N_SCAN
, 
Eig’
::
NoChªge
);

31 
	gground_m©_
.
»size
(
N_SCAN
, 
Eig’
::
NoChªge
);

33 
	g¿nge_m©_
.
£tCÚ¡ªt
(
¡d
::
num”ic_lim™s
<>::
max
());

34 
	gÏb–_m©_
.
£tZ”o
();

35 
	gground_m©_
.
£tZ”o
();

36 
	gÏb–_út_
 = 1;

37 
	gÃighbÜ_™”_
.
em¶aû_back
(-1, 0);

38 
	gÃighbÜ_™”_
.
em¶aû_back
(1, 0);

39 
	gÃighbÜ_™”_
.
em¶aû_back
(0, -1);

40 
	gÃighbÜ_™”_
.
em¶aû_back
(0, 1);

42 
	gpub_£gm’‹d_şoud_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/segmented_cloud", 10);

43 
	gpub_£g_šfo_
 = 
nh_
.
adv”ti£
<
şoud_msgs
::
şoud_šfo
>("/seg_info", 10);

44 
	gpub_ou›r_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/outlier", 10);

45 
	gsub_pc_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
PoštCloud2
>("/l¦id¬_pošt_şoud", 10, 
	gboo¡
::
bšd
(&
ImageProjeùiÚ
::
pcCB
, 
this
, 
_1
));

46 
NODELET_INFO_STREAM
("ImageProjeùiÚ onIn™ƒnd: " << 
t_š™
.
toc
());

49 
	gImageProjeùiÚ
::
pcCB
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
)

51 
TicToc
 
t_whŞe
;

53 
	g£g_šfo_msg_
->
	gh—d”
 = 
msg
->
h—d”
;

54 
	gPoštCloudT
::
PŒ
 
şoud_š
(
Ãw
 
PoštCloudT
());

55 
	gpş
::
äomROSMsg
(*
msg
, *
şoud_š
);

58 
	g¡d
::
veùÜ
<> 
šdiûs
;

59 
	gpş
::
»moveNaNFromPoštCloud
(*
şoud_š
, *şoud_š, 
šdiûs
);

61 
	gşoud_size
 = 
şoud_š
->
pošts
.
size
();

62 
	g£g_šfo_msg_
->
	g¡¬tOr›Á©iÚ
 = -
©ª2
(
şoud_š
->
pošts
[0].
y
, cloud_š->pošts[0].
x
);

63 
	g£g_šfo_msg_
->
	g’dOr›Á©iÚ
 = -
©ª2
(
şoud_š
->
pošts
[
şoud_size
 - 1].
y
, cloud_š->pošts[şoud_siz- 1].
x
è+ 2 * 
	gM_PI
;

64 ià(
	g£g_šfo_msg_
->
	g’dOr›Á©iÚ
 - seg_šfo_msg_->
	g¡¬tOr›Á©iÚ
 > 3 * 
	gM_PI
)

66 
	g£g_šfo_msg_
->
	g’dOr›Á©iÚ
 -ğ2 * 
M_PI
;

68 ià(
	g£g_šfo_msg_
->
	g’dOr›Á©iÚ
 - seg_šfo_msg_->
	g¡¬tOr›Á©iÚ
 < 
	gM_PI
)

70 
	g£g_šfo_msg_
->
	g’dOr›Á©iÚ
 +ğ2 * 
M_PI
;

72 
	g£g_šfo_msg_
->
	gÜ›Á©iÚDiff
 = 
£g_šfo_msg_
->
’dOr›Á©iÚ
 - seg_šfo_msg_->
¡¬tOr›Á©iÚ
;

74 
	gv”tiÿl_ªg
, 
	ghÜizÚ_ªg
;

75 
	grow_id
, 
	gcŞ_id
, 
	gšdex
;

76 
	gi
 = 0; i < 
	gşoud_size
; ++i)

78 autØ&
	gp
 = 
şoud_š
->
pošts
[
i
];

79 
	gv”tiÿl_ªg
 = 
RAD2ANGLE
(
©ª2
(
p
.
z
, 
hypÙ
Õ.
x
,….
y
)));

80 
	grow_id
 = (
v”tiÿl_ªg
 + 
ªg_bÙtom
è/ 
ªg_»s_y
 + 0.5;

81 ià(
	grow_id
 < 0 ||„ow_id >ğ
N_SCAN
)

83 
ROS_WARN
("error„ow_id");

87 
	ghÜizÚ_ªg
 = 
RAD2ANGLE
(-
©ª2
(
p
.
y
,….
x
è+ 2 * 
M_PI
);

88 
	gcŞ_id
 = 
hÜizÚ_ªg
 / 
ªg_»s_x
;

89 ià(
	gcŞ_id
 >ğ
HÜizÚ_SCAN
)

91 
cŞ_id
 -ğ
HÜizÚ_SCAN
;

93 ià(
	gcŞ_id
 < 0 || cŞ_id >ğ
HÜizÚ_SCAN
)

95 
ROS_WARN
("”rÜ cŞ_id %d ", 
cŞ_id
);

99 
¿nge_m©_
(
row_id
, 
cŞ_id
èğ
sq¹
(
p
.
x
 *….x +….
y
 *….y +….
z
 *….z);

101 
	gp
.
	gš‹ns™y
 = 
row_id
 + 
cŞ_id
 / 10000.0;

102 
	gšdex
 = 
cŞ_id
 + 
row_id
 * 
HÜizÚ_SCAN
;

103 
	gfuÎ_şoud_
->
	gpošts
[
šdex
] = 
p
;

107 
	glow”_id
, 
	guµ”_id
;

108 
	gdiff_x
, 
	gdiff_y
, 
	gdiff_z
, 
	gªgË
;

109 
	gj
 = 0; j < 
	gHÜizÚ_SCAN
; ++j)

111 
	gi
 = 0; i < 
	gground_sÿn_id
; ++i)

113 
	glow”_id
 = 
j
 + 
i
 * 
HÜizÚ_SCAN
;

114 
	guµ”_id
 = 
j
 + (
i
 + 1è* 
HÜizÚ_SCAN
;

116 ià(-1 =ğ
fuÎ_şoud_
->
pošts
[
low”_id
].
š‹ns™y
 || -1 =ğfuÎ_şoud_->pošts[
uµ”_id
].intensity)

122 
	gdiff_x
 = 
fuÎ_şoud_
->
pošts
[
uµ”_id
].
x
 - fuÎ_şoud_->pošts[
low”_id
].x;

123 
	gdiff_y
 = 
fuÎ_şoud_
->
pošts
[
uµ”_id
].
y
 - fuÎ_şoud_->pošts[
low”_id
].y;

124 
	gdiff_z
 = 
fuÎ_şoud_
->
pošts
[
uµ”_id
].
z
 - fuÎ_şoud_->pošts[
low”_id
].z;

125 
	gªgË
 = 
RAD2ANGLE
(
©ª2
(
diff_z
, 
hypÙ
(
diff_x
, 
diff_y
)));

127 ià(
abs
(
ªgË
 - 
£nsÜ_mouÁ_ªg
) < 10.)

129 
ground_m©_
(
i
, 
j
) = ground_mat_(i + 1, j) = 1;

134 
	gi
 = 0; i < 
	gN_SCAN
; ++i)

136 
	gj
 = 0; j < 
	gHÜizÚ_SCAN
; ++j)

138 ià(
ground_m©_
(
i
, 
j
è=ğ1 || 
¿nge_m©_
(i, jè=ğ
¡d
::
num”ic_lim™s
<>::
max
())

140 
Ïb–_m©_
(
i
, 
j
) = -1;

147 
	gi
 = 0; i < 
	gN_SCAN
; ++i)

149 
	gj
 = 0; j < 
	gHÜizÚ_SCAN
; ++j)

151 ià(
Ïb–_m©_
(
i
, 
j
) == 0)

153 
Ïb–CompÚ’ts
(
i
, 
j
);

158 
	glše_size
 = 0;

159 
	gi
 = 0; i < 
	gN_SCAN
; ++i)

161 
	g£g_šfo_msg_
->
	g¡¬tRšgIndex
[
i
] = 
lše_size
 + 5;

162 
	gj
 = 0; j < 
	gHÜizÚ_SCAN
; ++j)

164 ià(
Ïb–_m©_
(
i
, 
j
è> 0 || 
ground_m©_
(i, j) == 1)

167 ià(
Ïb–_m©_
(
i
, 
j
) == 999999)

169 ià(
i
 > 
ground_sÿn_id
 && 
j
 % 5 == 0)

171 
ou›r_şoud_
->
pošts
.
push_back
(
fuÎ_şoud_
->pošts[
j
 + 
i
 * 
HÜizÚ_SCAN
]);

175 ià(
ground_m©_
(
i
, 
j
) == 1)

177 ià(
j
 % 5 !ğ0 && j > 4 && j < 
HÜizÚ_SCAN
 - 5)

183 
	g£g_šfo_msg_
->
	g£gm’‹dCloudGroundFÏg
[
lše_size
] = (
ground_m©_
(
i
, 
j
) == 1);

184 
	g£g_šfo_msg_
->
	g£gm’‹dCloudCŞInd
[
lše_size
] = 
j
;

185 
	g£g_šfo_msg_
->
	g£gm’‹dCloudRªge
[
lše_size
] = 
¿nge_m©_
(
i
, 
j
);

186 
	g£gm’‹d_şoud_
->
	gpošts
.
push_back
(
fuÎ_şoud_
->
pošts
[
j
 + 
i
 * 
HÜizÚ_SCAN
]);

187 ++
	glše_size
;

190 
	g£g_šfo_msg_
->
	g’dRšgIndex
[
i
] = 
lše_size
 - 1 - 5;

192 
publish
();

197 
	g£gm’‹d_şoud_
->
ş—r
();

198 
	gou›r_şoud_
->
ş—r
();

199 
	g¿nge_m©_
.
£tCÚ¡ªt
(
¡d
::
num”ic_lim™s
<>::
max
());

200 
	gÏb–_m©_
.
£tZ”o
();

201 
	gground_m©_
.
£tZ”o
();

202 
	gÏb–_út_
 = 1;

203 
PoštT
 
	gÇn_p
;

204 
	gÇn_p
.
	gš‹ns™y
 = -1;

205 
	g¡d
::
fl
(
fuÎ_şoud_
->
pošts
.
begš
(), fuÎ_şoud_->pošts.
’d
(), 
Çn_p
);

210 
	gImageProjeùiÚ
::
Ïb–CompÚ’ts
(
row
, 
cŞ
)

212 
	gd1
, 
	gd2
, 
	g®pha
, 
	gªgË
;

213 
	gäom_id_i
, 
	gäom_id_j
, 
	gthis_id_i
, 
	gthis_id_j
;

214 
boŞ
 
	glše_út_æag
[
N_SCAN
] = {
çl£
};

216 
	gqueue
<> 
	gque_id_i
, 
	gque_id_j
;

217 
	gqueue
<> 
	g®l_pushed_id_i
, 
	g®l_pushed_id_j
;

218 
	gque_id_i
.
push
(
row
);

219 
	gque_id_j
.
push
(
cŞ
);

220 
	glše_út_æag
[
row
] = 
Œue
;

221 
	g®l_pushed_id_i
.
push
(
row
);

222 
	g®l_pushed_id_j
.
push
(
cŞ
);

224 !
	gque_id_i
.
em±y
())

226 
	gäom_id_i
 = 
que_id_i
.
äÚt
();

227 
	gäom_id_j
 = 
que_id_j
.
äÚt
();

228 
	gque_id_i
.
pİ
();

229 
	gque_id_j
.
pİ
();

230 
Ïb–_m©_
(
äom_id_i
, 
äom_id_j
èğ
Ïb–_út_
;

231 
	glše_út_æag
[
äom_id_i
] = 
Œue
;

233 cÚ¡‡utØ&
	g™”
 : 
ÃighbÜ_™”_
)

235 
this_id_i
 = 
äom_id_i
 + 
™”
.
fœ¡
;

236 
	gthis_id_j
 = 
äom_id_j
 + 
™”
.
£cÚd
;

237 ià(
	gthis_id_i
 < 0 ||his_id_˜>ğ
N_SCAN
)

241 ià(
	gthis_id_j
 < 0)

243 
	gthis_id_j
 = 
HÜizÚ_SCAN
 - 1;

245 ià(
	gthis_id_j
 >ğ
HÜizÚ_SCAN
)

247 
this_id_j
 = 0;

249 ià(
Ïb–_m©_
(
this_id_i
, 
this_id_j
))

255 
	gd1
 = 
max
(
¿nge_m©_
(
äom_id_i
, 
äom_id_j
),„ªge_m©_(
this_id_i
, 
this_id_j
));

256 
	gd2
 = 
mš
(
¿nge_m©_
(
äom_id_i
, 
äom_id_j
),„ªge_m©_(
this_id_i
, 
this_id_j
));

258 ià(
	g™”
.
	gfœ¡
 == 0)

260 
®pha
 = 
£g_®pha_x
;

264 
	g®pha
 = 
£g_®pha_y
;

269 
	gªgË
 = 
©ª2
(
d2
 * 
sš
(
®pha
), (
d1
 - d2 * 
cos
(alpha)));

270 ià(
	gªgË
 > 
	g£g_th‘a
)

272 
	gque_id_i
.
push
(
this_id_i
);

273 
	gque_id_j
.
push
(
this_id_j
);

274 
Ïb–_m©_
(
this_id_i
, 
this_id_j
èğ
Ïb–_út_
;

275 
	glše_út_æag
[
this_id_i
] = 
Œue
;

276 
	g®l_pushed_id_i
.
push
(
this_id_i
);

277 
	g®l_pushed_id_j
.
push
(
this_id_j
);

282 
boŞ
 
	gãasibË_£g
 = 
çl£
;

283 ià(
	g®l_pushed_id_i
.
size
() >= 30)

285 
ãasibË_£g
 = 
Œue
;

287 ià(
	g®l_pushed_id_i
.
size
(è>ğ
£g_v®id_pošt_num
)

289 
lše_út
 = 0;

290 
	gi
 = 0; i < 
	gN_SCAN
; ++i)

292 ià(
	glše_út_æag
[
i
])

294 ++
	glše_út
;

297 ià(
	glše_út
 >ğ
£g_v®id_lše_num
)

299 
ãasibË_£g
 = 
Œue
;

303 ià(
	gãasibË_£g
)

305 ++
	gÏb–_út_
;

309 !
	g®l_pushed_id_i
.
em±y
())

311 
Ïb–_m©_
(
®l_pushed_id_i
.
äÚt
(), 
®l_pushed_id_j
.front()) = 999999;

312 
	g®l_pushed_id_i
.
pİ
();

313 
	g®l_pushed_id_j
.
pİ
();

318 
	gImageProjeùiÚ
::
publish
()

320 ià(
pub_£g_šfo_
.
g‘NumSubsüib”s
() > 0)

322 
pub_£g_šfo_
.
publish
(
£g_šfo_msg_
);

324 ià(
	gpub_£gm’‹d_şoud_
.
g‘NumSubsüib”s
() > 0)

326 
	gpş
::
toROSMsg
(*
£gm’‹d_şoud_
, *
£gm’‹d_şoud_msg_
);

327 
	g£gm’‹d_şoud_msg_
->
	gh—d”
 = 
£g_šfo_msg_
->
h—d”
;

328 
	gpub_£gm’‹d_şoud_
.
publish
(
£gm’‹d_şoud_msg_
);

330 ià(
	gpub_ou›r_
.
g‘NumSubsüib”s
() > 0)

332 
	gpş
::
toROSMsg
(*
ou›r_şoud_
, *
ou›r_şoud_msg_
);

333 
	gou›r_şoud_msg_
->
	gh—d”
 = 
£g_šfo_msg_
->
h—d”
;

334 
	gpub_ou›r_
.
publish
(
ou›r_şoud_msg_
);

	@src/laserMapping.cpp

1 
	~"®ego/Ï£rM­pšg.h
"

3 
Çme¥aû
 
	glßm


5 
	gLa£rM­pšg
::
ÚIn™
()

7 
TicToc
 
t_š™
;

9 
NODELET_INFO
("--------- LaserMapping init --------------");

10 
	gnh_
 = 
g‘MTNodeHªdË
();

11 
	g²h_
 = 
g‘MTPriv©eNodeHªdË
();

13 
	gsurf_Ï¡_
.
»£t
(
Ãw
 
PoštCloudT
);

14 
	gcÜÃr_Ï¡_
.
»£t
(
Ãw
 
PoštCloudT
);

15 
	gou›r_Ï¡_
.
»£t
(
Ãw
 
PoštCloudT
);

16 
	gşoud_keypo£s_3d_
.
»£t
(
Ãw
 
PoštCloudT
);

17 
	gşoud_keypo£s_6d_
.
»£t
(
Ãw
 
pş
::
PoštCloud
<
PoštTy³Po£
>);

18 
	gcÜÃr_äom_m­_
.
»£t
(
Ãw
 
PoštCloudT
);

19 
	gsurf_äom_m­_
.
»£t
(
Ãw
 
PoštCloudT
);

21 
	gcÜÃr_äom_m­_ds_
.
»£t
(
Ãw
 
PoštCloudT
);

22 
	gsurf_äom_m­_ds_
.
»£t
(
Ãw
 
PoštCloudT
);

23 
	gÏ£r_cÜÃr_
.
»£t
(
Ãw
 
PoštCloudT
);

24 
	gÏ£r_surf_
.
»£t
(
Ãw
 
PoštCloudT
);

25 
	gÏ£r_ou›r_
.
»£t
(
Ãw
 
PoštCloudT
);

26 
	gÏ£r_surf_tÙ®_
.
»£t
(
Ãw
 
PoštCloudT
);

27 
	gÏ£r_cÜÃr_ds_
.
»£t
(
Ãw
 
PoštCloudT
);

28 
	gÏ£r_surf_ds_
.
»£t
(
Ãw
 
PoštCloudT
);

29 
	gÏ£r_ou›r_ds_
.
»£t
(
Ãw
 
PoštCloudT
);

30 
	gÏ£r_surf_tÙ®_ds_
.
»£t
(
Ãw
 
PoštCloudT
);

31 
	gkd_surf_m­_
.
»£t
(
Ãw
 
pş
::
KdT»eFLANN
<
PoštT
>);

32 
	gkd_cÜÃr_m­_
.
»£t
(
Ãw
 
pş
::
KdT»eFLANN
<
PoštT
>);

33 
	gkd_keypo£s_
.
»£t
(
Ãw
 
pş
::
KdT»eFLANN
<
PoštT
>);

35 
	gÃw_Ï£r_surf_
 = 
Ãw_Ï£r_cÜÃr_
 = 
Ãw_Ï£r_ou›r_
 =‚ew_Ï£r_cÜÃr_ = 
çl£
;

37 
	gds_cÜÃr_
.
£tL—fSize
(0.4, 0.4, 0.4);

38 
	gds_surf_
.
£tL—fSize
(0.8, 0.8, 0.8);

39 
	gds_ou›r_
.
£tL—fSize
(1.0, 1.0, 1.0);

40 
	gds_keypo£s_
.
£tL—fSize
(1.0, 1.0, 1.0);

41 
	gds_hi¡Üy_keyäames_
.
£tL—fSize
(1.0, 1.0, 1.0);

43 
	gmš_keyäame_di¡_
 = 1.0;

45 
	gsu¼ound_keypo£s_
.
»£t
(
Ãw
 
PoštCloudT
);

46 
	gsu¼ound_keypo£s_ds_
.
»£t
(
Ãw
 
PoštCloudT
);

48 
	g»ûÁ_keyäame_£¬ch_num_
 = 50;

49 
	gsu¼ound_keyäame_£¬ch_¿dius_
 = 50.;

50 
	gÏ‹¡_äame_id_
 = -1;

52 
	gi
 = 0; i < 6; ++i)

54 
	g·¿ms_
[
i
] = 0.;

56 
	gt_m­2odom_
.
£tZ”o
();

57 
	gq_m­2odom_
.
£tId’t™y
();

58 
	gt_odom2Ï£r_
.
£tZ”o
();

59 
	gq_odom2Ï£r_
.
£tId’t™y
();

60 
	gt_m­2Ï£r_
.
£tZ”o
();

61 
	gq_m­2Ï£r_
.
£tId’t™y
();

63 
ISAM2P¬ams
 
	g·¿m‘”s
;

64 
	g·¿m‘”s
.
	g»lš—rizeTh»shŞd
 = 0.01;

65 
	g·¿m‘”s
.
	g»lš—rizeSk
 = 1;

66 
	gi§m_
 = 
Ãw
 
ISAM2
(
·¿m‘”s
);

67 
	ggt§m
::
VeùÜ
 
VeùÜ6
(6);

68 
	gVeùÜ6
 << 1e-6, 1e-6, 1e-6, 1e-8, 1e-8, 1e-6;

69 
	g´iÜ_noi£_
 = 
noi£Mod–
::
DŸgÚ®
::
V¬Ÿnûs
(
VeùÜ6
);

70 
	godom_noi£_
 = 
noi£Mod–
::
DŸgÚ®
::
V¬Ÿnûs
(
VeùÜ6
);

72 
	gloİ_şo£d_
 = 
çl£
;

73 
	gÏ‹¡_hi¡Üy_äame_id_
 = -1;

74 
	gÏ‹¡_keyäame_
.
»£t
(
Ãw
 
PoštCloudT
);

75 
	gÃ¬_hi¡Üy_keyäames_
.
»£t
(
Ãw
 
PoštCloudT
);

76 
	ghi¡Üy_£¬ch_¿dius_
 = 20.;

77 
	ghi¡Üy_£¬ch_num_
 = 25;

78 
	ghi¡Üy_f™Ãss_scÜe_
 = 0.4;

79 
	gloİ_şosu»_’abËd_
 = 
Œue
;

80 
	gcÜ»ùiÚ_
.
£tId’t™y
();

82 
	gpub_şoud_su¼ound_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/laser_cloud_surround", 10);

83 
	gpub_odom_aá_m­³d_
 = 
nh_
.
adv”ti£
<
Çv_msgs
::
Odom‘ry
>("/odom_aft_mapped", 10);

84 
	gpub_keypo£s_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/keyposes", 10);

85 
	gpub_»ûÁ_keyäames_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/recent_keyframes", 10);

86 
	gpub_hi¡Üy_keyäames_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/history_keyframes", 10);

87 
	gpub_iı_keyäames_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/icp_keyframes", 10);

88 
	g¤v_§ve_m­_
 = 
nh_
.
adv”ti£S”viû
("/§ve_m­", &
La£rM­pšg
::
§veM­CB
, 
this
);

90 
	gsub_surf_Ï¡_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
PoštCloud2
>("/surf_Ï¡", 10, 
	gboo¡
::
bšd
(&
La£rM­pšg
::
surfLa¡HªdËr
, 
this
, 
_1
));

91 
	gsub_cÜÃr_Ï¡_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
PoštCloud2
>("/cÜÃr_Ï¡", 10, 
	gboo¡
::
bšd
(&
La£rM­pšg
::
cÜÃrLa¡HªdËr
, 
this
, 
_1
));

92 
	gsub_ou›r_Ï¡_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
PoštCloud2
>("/ou›r", 10, 
	gboo¡
::
bšd
(&
La£rM­pšg
::
ou›rLa¡HªdËr
, 
this
, 
_1
));

93 
	gsub_Ï£r_odom_
 = 
nh_
.
subsüibe
<
Çv_msgs
::
Odom‘ry
>("/odom/lid¬", 10, 
	gboo¡
::
bšd
(&
La£rM­pšg
::
Ï£rOdomHªdËr
, 
this
, 
_1
));

95 
	gmaš_th»ad_
 = 
¡d
::
th»ad
(&
La£rM­pšg
::
mašLoİ
, 
this
);

96 
	gloİ_th»ad_
 = 
¡d
::
th»ad
(&
La£rM­pšg
::
loİClosu»Th»ad
, 
this
);

97 
	gvisu®ize_th»ad_
 = 
¡d
::
th»ad
(&
La£rM­pšg
::
visu®izeGlob®M­Th»ad
, 
this
);

99 
NODELET_INFO
("La£rM­pšg onIn™ƒnd: %.3fms", 
t_š™
.
toc
());

102 
	gLa£rM­pšg
::
mašLoİ
()

104 
ros
::
Du¿tiÚ
 
du¿
(0.01);

105 
	gros
::
ok
())

107 ià(
Ãw_Ï£r_surf_
 && 
Ãw_Ï£r_cÜÃr_
 && 
Ãw_Ï£r_ou›r_
 && 
Ãw_Ï£r_odom_
 &&

108 
¡d
::
abs
(
time_Ï£r_surf_
 - 
time_Ï£r_cÜÃr_
è< 0.005 && std::absÑime_Ï£r_surf_ - 
time_Ï£r_ou›r_
è< 0.005 && std::absÑime_Ï£r_surf_ - 
time_Ï£r_odom_
) < 0.005)

110 
Ãw_Ï£r_surf_
 = 
Ãw_Ï£r_cÜÃr_
 = 
Ãw_Ï£r_ou›r_
 = 
Ãw_Ï£r_odom_
 = 
çl£
;

111 
	gäame_út
 = 0;

112 ià(
	gäame_út
 % 2 == 0)

114 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
mtx_
);

115 
TicToc
 
	gt_whŞe
;

116 
ŒªsfÜmAssocŸ‹ToM­
();

117 
exŒaùSu¼oundšgKeyF¿mes
();

118 
down§m¶eCu¼’tSÿn
();

119 
sÿn2M­O±imiz©iÚ
();

120 
§veKeyF¿mesAndFaùÜ
();

121 
cÜ»ùPo£s
();

122 
ŒªsfÜmUpd©e
();

123 
publish
();

124 
NODELET_INFO
("m­pšg whŞtime: %.3fms", 
t_whŞe
.
toc
());

126 ++
	gäame_út
;

128 
	gdu¿
.
¦“p
();

129 
	gros
::
¥šOnû
();

133 
	gLa£rM­pšg
::
surfLa¡HªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
)

135 
Ï£r_surf_
->
ş—r
();

136 
	gpş
::
äomROSMsg
(*
msg
, *
Ï£r_surf_
);

137 
	gtime_Ï£r_surf_
 = 
msg
->
h—d”
.
¡amp
.
toSec
();

138 
	gÃw_Ï£r_surf_
 = 
Œue
;

140 
	gLa£rM­pšg
::
cÜÃrLa¡HªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
)

142 
Ï£r_cÜÃr_
->
ş—r
();

143 
	gpş
::
äomROSMsg
(*
msg
, *
Ï£r_cÜÃr_
);

144 
	gtime_Ï£r_cÜÃr_
 = 
msg
->
h—d”
.
¡amp
.
toSec
();

145 
	gÃw_Ï£r_cÜÃr_
 = 
Œue
;

147 
	gLa£rM­pšg
::
ou›rLa¡HªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
)

149 
Ï£r_ou›r_
->
ş—r
();

150 
	gpş
::
äomROSMsg
(*
msg
, *
Ï£r_ou›r_
);

151 
	gtime_Ï£r_ou›r_
 = 
msg
->
h—d”
.
¡amp
.
toSec
();

152 
	gÃw_Ï£r_ou›r_
 = 
Œue
;

154 
	gLa£rM­pšg
::
Ï£rOdomHªdËr
(cÚ¡ 
Çv_msgs
::
Odom‘ryCÚ¡PŒ
 &
msg
)

156 
time_Ï£r_odom_
 = 
msg
->
h—d”
.
¡amp
.
toSec
();

157 
	gÃw_Ï£r_odom_
 = 
Œue
;

158 
t_odom2Ï£r_
(0èğ
msg
->
po£
.po£.
pos™iÚ
.
x
;

159 
t_odom2Ï£r_
(1èğ
msg
->
po£
.po£.
pos™iÚ
.
y
;

160 
t_odom2Ï£r_
(2èğ
msg
->
po£
.po£.
pos™iÚ
.
z
;

161 
	gq_odom2Ï£r_
.
w
(èğ
msg
->
po£
.po£.
Ü›Á©iÚ
.w;

162 
	gq_odom2Ï£r_
.
x
(èğ
msg
->
po£
.po£.
Ü›Á©iÚ
.x;

163 
	gq_odom2Ï£r_
.
y
(èğ
msg
->
po£
.po£.
Ü›Á©iÚ
.y;

164 
	gq_odom2Ï£r_
.
z
(èğ
msg
->
po£
.po£.
Ü›Á©iÚ
.z;

165 
	gt_m­2Ï£r_
 = 
q_m­2odom_
 * 
t_odom2Ï£r_
 + 
t_m­2odom_
;

166 
	gq_m­2Ï£r_
 = 
q_m­2odom_
 * 
q_odom2Ï£r_
;

167 ià(
	gpub_odom_aá_m­³d_
.
g‘NumSubsüib”s
() > 0)

169 
	gÇv_msgs
::
Odom‘ryPŒ
 
msg
(
Ãw
 
Çv_msgs
::
Odom‘ry
);

170 
	gmsg
->
	gh—d”
.
	g¡amp
.
äomSec
(
time_Ï£r_odom_
);

171 
	gmsg
->
	gh—d”
.
	gäame_id
 = "map";

172 
	gmsg
->
	gchd_äame_id
 = "/laser";

173 
	gmsg
->
	gpo£
.po£.
	gpos™iÚ
.
	gx
 = 
t_m­2Ï£r_
.
x
();

174 
	gmsg
->
	gpo£
.po£.
	gpos™iÚ
.
	gy
 = 
t_m­2Ï£r_
.
y
();

175 
	gmsg
->
	gpo£
.po£.
	gpos™iÚ
.
	gz
 = 
t_m­2Ï£r_
.
z
();

176 
	gmsg
->
	gpo£
.po£.
	gÜ›Á©iÚ
.
	gw
 = 
q_m­2Ï£r_
.
w
();

177 
	gmsg
->
	gpo£
.po£.
	gÜ›Á©iÚ
.
	gx
 = 
q_m­2Ï£r_
.
x
();

178 
	gmsg
->
	gpo£
.po£.
	gÜ›Á©iÚ
.
	gy
 = 
q_m­2Ï£r_
.
y
();

179 
	gmsg
->
	gpo£
.po£.
	gÜ›Á©iÚ
.
	gz
 = 
q_m­2Ï£r_
.
z
();

180 
	gpub_odom_aá_m­³d_
.
publish
(
msg
);

182 
	gtf
::
T¿nsfÜm
 
tf_m2o
;

183 
	gtf_m2o
.
£tOrigš
(
tf
::
VeùÜ3
(
t_m­2odom_
.
x
(),_m­2odom_.
y
(),_m­2odom_.
z
()));

184 
	gtf_m2o
.
£tRÙ©iÚ
(
tf
::
Qu©”niÚ
(
q_m­2odom_
.
x
(), q_m­2odom_.
y
(), q_m­2odom_.
z
(), q_m­2odom_.
w
()));

185 
	gtf_brßdÿ¡”_
.
£ndT¿nsfÜm
(
tf
::
Sm³dT¿nsfÜm
(
tf_m2o
, 
ros
::
Time
::
now
(), "map", "/odom"));

188 
	gLa£rM­pšg
::
ŒªsfÜmAssocŸ‹ToM­
()

190 
t_m­2Ï£r_
 = 
q_m­2odom_
 * 
t_odom2Ï£r_
 + 
t_m­2odom_
;

191 
	gq_m­2Ï£r_
 = 
q_m­2odom_
 * 
q_odom2Ï£r_
;

194 
	gLa£rM­pšg
::
exŒaùSu¼oundšgKeyF¿mes
()

196 
TicToc
 
t_d©a
;

197 
NODELET_INFO
("extractSurroundingKeyFrames");

198 
	gsurf_äom_m­_
->
ş—r
();

199 
	gcÜÃr_äom_m­_
->
ş—r
();

200 
	gsurf_äom_m­_ds_
->
ş—r
();

201 
	gcÜÃr_äom_m­_ds_
->
ş—r
();

202 ià(
	gşoud_keypo£s_3d_
->
em±y
())

206 ià(
	gloİ_şosu»_’abËd_
)

208 ià(
	g»ûÁ_cÜÃr_keyäames_
.
size
(è< 
	g»ûÁ_keyäame_£¬ch_num_
)

210 
	g»ûÁ_cÜÃr_keyäames_
.
ş—r
();

211 
	g»ûÁ_surf_keyäames_
.
ş—r
();

212 
	g»ûÁ_ou›r_keyäames_
.
ş—r
();

213 
	gi
 = 
şoud_keypo£s_3d_
->
size
() - 1; i >= 0; --i)

215 
	gäame_id
 = (
şoud_keypo£s_3d_
->
pošts
[
i
].
š‹ns™y
);

216 
	g»ûÁ_cÜÃr_keyäames_
.
push_äÚt
(
ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
äame_id
], 
şoud_keypo£s_6d_
->
pošts
[frame_id]));

217 
	g»ûÁ_surf_keyäames_
.
push_äÚt
(
ŒªsfÜmPoštCloud
(
surf_äames_
[
äame_id
], 
şoud_keypo£s_6d_
->
pošts
[frame_id]));

218 
	g»ûÁ_ou›r_keyäames_
.
push_äÚt
(
ŒªsfÜmPoštCloud
(
ou›r_äames_
[
äame_id
], 
şoud_keypo£s_6d_
->
pošts
[frame_id]));

219 ià(
	g»ûÁ_cÜÃr_keyäames_
.
size
(è>ğ
»ûÁ_keyäame_£¬ch_num_
)

227 ià(
	gÏ‹¡_äame_id_
 !ğ
şoud_keypo£s_3d_
->
size
() - 1)

229 
»ûÁ_cÜÃr_keyäames_
.
pİ_äÚt
();

230 
	g»ûÁ_surf_keyäames_
.
pİ_äÚt
();

231 
	g»ûÁ_ou›r_keyäames_
.
pİ_äÚt
();

232 
	gÏ‹¡_äame_id_
 = 
şoud_keypo£s_3d_
->
size
() - 1;

233 
	g»ûÁ_cÜÃr_keyäames_
.
push_back
(
ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
Ï‹¡_äame_id_
], 
şoud_keypo£s_6d_
->
pošts
[latest_frame_id_]));

234 
	g»ûÁ_surf_keyäames_
.
push_back
(
ŒªsfÜmPoštCloud
(
surf_äames_
[
Ï‹¡_äame_id_
], 
şoud_keypo£s_6d_
->
pošts
[latest_frame_id_]));

235 
	g»ûÁ_ou›r_keyäames_
.
push_back
(
ŒªsfÜmPoštCloud
(
ou›r_äames_
[
Ï‹¡_äame_id_
], 
şoud_keypo£s_6d_
->
pošts
[latest_frame_id_]));

238 
	gi
 = 0; i < 
	g»ûÁ_cÜÃr_keyäames_
.
size
(); ++i)

240 *
	gcÜÃr_äom_m­_
 +ğ*
»ûÁ_cÜÃr_keyäames_
[
i
];

241 *
	gsurf_äom_m­_
 +ğ*
»ûÁ_surf_keyäames_
[
i
];

242 *
	gsurf_äom_m­_
 +ğ*
»ûÁ_ou›r_keyäames_
[
i
];

247 
	gsu¼ound_keypo£s_
->
ş—r
();

248 
	gsu¼ound_keypo£s_ds_
->
ş—r
();

249 
PoštT
 
	gcur_Ï£r_po£
;

250 
	gcur_Ï£r_po£
.
	gx
 = 
t_m­2Ï£r_
.
x
();

251 
	gcur_Ï£r_po£
.
	gy
 = 
t_m­2Ï£r_
.
y
();

252 
	gcur_Ï£r_po£
.
	gz
 = 
t_m­2Ï£r_
.
z
();

253 
	gkd_keypo£s_
->
£tIÅutCloud
(
şoud_keypo£s_3d_
);

254 
	gkd_keypo£s_
->
¿diusS—rch
(
cur_Ï£r_po£
, 
su¼ound_keyäame_£¬ch_¿dius_
, 
pošt_idx_
, 
pošt_di¡_
);

255 
	gi
 = 0; i < 
	gpošt_idx_
.
size
(); ++i)

257 
	gsu¼ound_keypo£s_
->
	gpošts
.
push_back
(
şoud_keypo£s_3d_
->
pošts
[
pošt_idx_
[
i
]]);

259 
	gds_keypo£s_
.
£tIÅutCloud
(
su¼ound_keypo£s_
);

260 
	gds_keypo£s_
.
f‹r
(*
su¼ound_keypo£s_ds_
);

262 
	gËn
 = 
su¼ound_keypo£s_ds_
->
size
();

266 
	gi
 = 0; i < 
	gsu¼ound_exi¡_keypo£_id_
.
size
(); ++i)

268 
boŞ
 
	gexi¡_æag
 = 
çl£
;

269 
	gj
 = 0; j < 
	gËn
; ++j)

271 ià(
	gsu¼ound_exi¡_keypo£_id_
[
i
] =ğ(
su¼ound_keypo£s_ds_
->
pošts
[i].
š‹ns™y
))

273 
exi¡_æag
 = 
Œue
;

277 ià(
	gçl£
 =ğ
exi¡_æag
)

279 
su¼ound_exi¡_keypo£_id_
.
”a£
(su¼ound_exi¡_keypo£_id_.
begš
(è+ 
i
);

280 
	gsu¼ound_cÜÃr_keyäames_
.
”a£
(
su¼ound_cÜÃr_keyäames_
.
begš
(è+ 
i
);

281 
	gsu¼ound_surf_keyäames_
.
”a£
(
su¼ound_surf_keyäames_
.
begš
(è+ 
i
);

282 
	gsu¼ound_ou›r_keyäames_
.
”a£
(
su¼ound_ou›r_keyäames_
.
begš
(è+ 
i
);

283 --
	gi
;

287 
	gi
 = 0; i < 
	gËn
; ++i)

289 
boŞ
 
	gexi¡_æag
 = 
çl£
;

290 autØ
	g™”
 = 
su¼ound_exi¡_keypo£_id_
.
begš
(); i‹¸!ğsu¼ound_exi¡_keypo£_id_.
’d
(); ++iter)

292 ià((*
	g™”
è=ğ(
su¼ound_keypo£s_ds_
->
pošts
[
i
].
š‹ns™y
))

294 
exi¡_æag
 = 
Œue
;

298 ià(
	gçl£
 =ğ
exi¡_æag
)

300 
äame_id
 = (
su¼ound_keypo£s_ds_
->
pošts
[
i
].
š‹ns™y
);

301 
	gsu¼ound_exi¡_keypo£_id_
.
push_back
(
äame_id
);

302 
	gsu¼ound_surf_keyäames_
.
push_back
(
ŒªsfÜmPoštCloud
(
surf_äames_
[
äame_id
], 
şoud_keypo£s_6d_
->
pošts
[frame_id]));

303 
	gsu¼ound_cÜÃr_keyäames_
.
push_back
(
ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
äame_id
], 
şoud_keypo£s_6d_
->
pošts
[frame_id]));

304 
	gsu¼ound_ou›r_keyäames_
.
push_back
(
ŒªsfÜmPoštCloud
(
ou›r_äames_
[
äame_id
], 
şoud_keypo£s_6d_
->
pošts
[frame_id]));

307 
	gi
 = 0; i < 
	gsu¼ound_exi¡_keypo£_id_
.
size
(); ++i)

309 *
	gsurf_äom_m­_
 +ğ*
su¼ound_surf_keyäames_
[
i
];

310 *
	gcÜÃr_äom_m­_
 +ğ*
su¼ound_cÜÃr_keyäames_
[
i
];

311 *
	gsurf_äom_m­_
 +ğ*
su¼ound_ou›r_keyäames_
[
i
];

315 
TicToc
 
	gt_ds
;

316 
	gds_surf_
.
£tIÅutCloud
(
surf_äom_m­_
);

317 
	gds_surf_
.
f‹r
(*
surf_äom_m­_ds_
);

318 
	gds_cÜÃr_
.
£tIÅutCloud
(
cÜÃr_äom_m­_
);

319 
	gds_cÜÃr_
.
f‹r
(*
cÜÃr_äom_m­_ds_
);

320 
NODELET_INFO
("befÜds, suràpošts: %d, cÜÃ¸pošts: %d,ime: %.3fms", 
surf_äom_m­_
->
size
(), 
cÜÃr_äom_m­_
->size());

321 
NODELET_INFO
("suràpošts: %d, cÜÃ¸pošts: %d,ime: %.3fms", 
surf_äom_m­_ds_
->
size
(), 
cÜÃr_äom_m­_ds_
->size(), 
t_d©a
.
toc
());

322 
NODELET_INFO
("downsiztime: %.3fms", 
t_ds
.
toc
());

325 
	gLa£rM­pšg
::
down§m¶eCu¼’tSÿn
()

327 
TicToc
 
t_ds
;

328 
	gÏ£r_cÜÃr_ds_
->
ş—r
();

329 
	gds_cÜÃr_
.
£tIÅutCloud
(
Ï£r_cÜÃr_
);

330 
	gds_cÜÃr_
.
f‹r
(*
Ï£r_cÜÃr_ds_
);

331 
	gÏ£r_surf_ds_
->
ş—r
();

332 
	gds_surf_
.
£tIÅutCloud
(
Ï£r_surf_
);

333 
	gds_surf_
.
f‹r
(*
Ï£r_surf_ds_
);

334 
	gÏ£r_ou›r_ds_
->
ş—r
();

335 
	gds_ou›r_
.
£tIÅutCloud
(
Ï£r_ou›r_
);

336 
	gds_ou›r_
.
f‹r
(*
Ï£r_ou›r_ds_
);

337 
	gÏ£r_surf_tÙ®_
->
ş—r
();

338 
	gÏ£r_surf_tÙ®_ds_
->
ş—r
();

339 *
	gÏ£r_surf_tÙ®_
 +ğ*
Ï£r_surf_ds_
;

340 *
	gÏ£r_surf_tÙ®_
 +ğ*
Ï£r_ou›r_ds_
;

341 
	gds_surf_
.
£tIÅutCloud
(
Ï£r_surf_tÙ®_
);

342 
	gds_surf_
.
f‹r
(*
Ï£r_surf_tÙ®_ds_
);

343 
NODELET_INFO
("down§m¶eCu¼’tSÿn: %.3fms", 
t_ds
.
toc
());

344 
NODELET_INFO
("befÜdown§m¶e: cÜÃ¸siz%d, suràsiz%d", 
Ï£r_cÜÃr_
->
pošts
.
size
(), 
Ï£r_surf_tÙ®_
->pošts.size(è+ 
Ï£r_ou›r_
->points.size());

345 
NODELET_INFO
("aá” down§m¶e: cÜÃ¸siz%d, suràsiz%d", 
Ï£r_cÜÃr_ds_
->
pošts
.
size
(), 
Ï£r_surf_tÙ®_ds_
->points.size());

348 
	gLa£rM­pšg
::
sÿn2M­O±imiz©iÚ
()

350 ià(
Ï£r_cÜÃr_ds_
->
pošts
.
size
(è< 10 || 
Ï£r_surf_tÙ®_
->pošts.size(è< 100 || 
cÜÃr_äom_m­_ds_
->size() < 10)

352 
NODELET_WARN
("few feature…ointso„egistration");

355 
TicToc
 
	gt_İt
, 
	gt_Œ“
;

356 
	gkd_cÜÃr_m­_
->
£tIÅutCloud
(
cÜÃr_äom_m­_ds_
);

357 
	gkd_surf_m­_
->
£tIÅutCloud
(
surf_äom_m­_ds_
);

358 
NODELET_INFO
("bud kdŒ“ime: %.3fms", 
t_Œ“
.
toc
());

360 
	g™”_út
 = 0; iter_cnt < 2; ++iter_cnt)

362 
TicToc
 
	gt_d©a
;

363 
	gû»s
::
LossFunùiÚ
 *
loss_funùiÚ
 = 
Ãw
 
û»s
::
Hub”Loss
(0.1);

364 
	gû»s
::
ProbËm
::
O±iÚs
 
´obËm_İtiÚs
;

365 
	gû»s
::
ProbËm
 
´obËm
(
´obËm_İtiÚs
);

367 
	g´obËm
.
AddP¬am‘”Block
(
·¿ms_
, 6);

369 
	gcÜÃr_cÜ»¥Údaû
 = 0, 
	gsurf_cÜ»n¥Údªû
 = 0;

370 
	g‹¡_p
 = 0;

371 
	gi
 = 0; i < 
	gÏ£r_cÜÃr_ds_
->
size
(); ++i)

373 
PoštT
 
	gpošt_£l
;

374 
poštAssocŸ‹ToM­
(
Ï£r_cÜÃr_ds_
->
pošts
[
i
], 
pošt_£l
);

375 
	gkd_cÜÃr_m­_
->
Ã¬e¡KS—rch
(
pošt_£l
, 5, 
pošt_idx_
, 
pošt_di¡_
);

376 ià(
	gpošt_di¡_
[4] < 1.0)

378 
	g¡d
::
veùÜ
<
Eig’
::
VeùÜ3d
> 
Ã¬CÜÃrs
;

379 
	gEig’
::
VeùÜ3d
 
ûÁ”
(0., 0., 0.);

380 
	gj
 = 0; j < 5; j++)

382 
	gEig’
::
VeùÜ3d
 
tmp
(
cÜÃr_äom_m­_ds_
->
pošts
[
pošt_idx_
[
j
]].
x
,

383 
cÜÃr_äom_m­_ds_
->
pošts
[
pošt_idx_
[
j
]].
y
,

384 
cÜÃr_äom_m­_ds_
->
pošts
[
pošt_idx_
[
j
]].
z
);

385 
	gûÁ”
 = 
ûÁ”
 + 
tmp
;

386 
	gÃ¬CÜÃrs
.
push_back
(
tmp
);

388 
	gûÁ”
 = 
ûÁ”
 / 5.0;

390 
	gEig’
::
M©rix3d
 
covM©
 = 
Eig’
::M©rix3d::
Z”o
();

391 
	gj
 = 0; j < 5; j++)

393 
	gEig’
::
M©rix
<, 3, 1> 
	gtmpZ”oM—n
 = 
Ã¬CÜÃrs
[
j
] - 
ûÁ”
;

394 
	gcovM©
 = 
covM©
 + 
tmpZ”oM—n
 *mpZ”oM—n.
Œª¥o£
();

397 
	gEig’
::
S–fAdjoštEig’SŞv”
<
Eig’
::
M©rix3d
> 
§es
(
covM©
);

401 
	gEig’
::
VeùÜ3d
 
un™_dœeùiÚ
 = 
§es
.
eig’veùÜs
().
cŞ
(2);

402 
	gEig’
::
VeùÜ3d
 
ı
(
Ï£r_cÜÃr_ds_
->
pošts
[
i
].
x
,†a£r_cÜÃr_ds_->pošts[i].
y
,†a£r_cÜÃr_ds_->pošts[i].
z
);

403 ià(
	g§es
.
eig’v®ues
()[2] > 3 * saes.eigenvalues()[1])

405 
	gEig’
::
VeùÜ3d
 
pošt_Ú_lše
 = 
ûÁ”
;

406 
	gEig’
::
VeùÜ3d
 
Íj
 = 0.1 * 
un™_dœeùiÚ
 + 
pošt_Ú_lše
;

407 
	gEig’
::
VeùÜ3d
 
Íl
 = -0.1 * 
un™_dœeùiÚ
 + 
pošt_Ú_lše
;

408 
	g´obËm
.
AddResidu®Block
(
Ãw
 
Lid¬EdgeCo¡FunùiÚ
(
ı
, 
Íj
, 
Íl
),

409 
loss_funùiÚ
, 
·¿ms_
);

410 ++
	gcÜÃr_cÜ»¥Údaû
;

414 ++
	g‹¡_p
;

418 
NODELET_INFO
("‹¡_p: %d", 
‹¡_p
);

419 
	gi
 = 0; i < 
	gÏ£r_surf_tÙ®_ds_
->
size
(); ++i)

421 
PoštT
 
	gpošt_£l
;

422 
poštAssocŸ‹ToM­
(
Ï£r_surf_tÙ®_ds_
->
pošts
[
i
], 
pošt_£l
);

423 
	gkd_surf_m­_
->
Ã¬e¡KS—rch
(
pošt_£l
, 5, 
pošt_idx_
, 
pošt_di¡_
);

424 
	gEig’
::
M©rix
<, 5, 3> 
	gm©A0
;

425 
	gEig’
::
M©rix
<, 5, 1> 
	gm©B0
 = -1 * 
Eig’
::M©rix<, 5, 1>::
OÃs
();

426 ià(
	gpošt_di¡_
[4] < 1.0)

428 
	gj
 = 0; j < 5; j++)

430 
m©A0
(
j
, 0èğ
surf_äom_m­_ds_
->
pošts
[
pošt_idx_
[j]].
x
;

431 
m©A0
(
j
, 1èğ
surf_äom_m­_ds_
->
pošts
[
pošt_idx_
[j]].
y
;

432 
m©A0
(
j
, 2èğ
surf_äom_m­_ds_
->
pošts
[
pošt_idx_
[j]].
z
;

435 
	gEig’
::
VeùÜ3d
 
nÜm
 = 
m©A0
.
cŞPivHou£hŞd”Qr
().
sŞve
(
m©B0
);

436 
	gÃg©ive_OA_dÙ_nÜm
 = 1 / 
nÜm
.norm();

437 
	gnÜm
.
nÜm®ize
();

440 
boŞ
 
	g¶ªeV®id
 = 
Œue
;

441 
	gj
 = 0; j < 5; j++)

444 ià(
çbs
(
nÜm
(0è* 
surf_äom_m­_ds_
->
pošts
[
pošt_idx_
[
j
]].
x
 +

445 
nÜm
(1è* 
surf_äom_m­_ds_
->
pošts
[
pošt_idx_
[
j
]].
y
 +

446 
nÜm
(2è* 
surf_äom_m­_ds_
->
pošts
[
pošt_idx_
[
j
]].
z
 + 
Ãg©ive_OA_dÙ_nÜm
) > 0.2)

448 
	g¶ªeV®id
 = 
çl£
;

449 
NODELET_WARN_ONCE
("plane is‚ot fit well");

453 ià(
	g¶ªeV®id
)

455 
	gEig’
::
VeùÜ3d
 
ı
(
Ï£r_surf_tÙ®_ds_
->
pošts
[
i
].
x
,†a£r_surf_tÙ®_ds_->pošts[i].
y
,†a£r_surf_tÙ®_ds_->pošts[i].
z
);

456 
	g´obËm
.
AddResidu®Block
(
Ãw
 
Lid¬PÏÃCo¡FunùiÚ
(
ı
, 
nÜm
, 
Ãg©ive_OA_dÙ_nÜm
),

457 
loss_funùiÚ
, 
·¿ms_
);

459 ++
	gsurf_cÜ»n¥Údªû
;

464 
NODELET_INFO
("m­pšg d©¨assosŸtiÚim%.3fms", 
t_d©a
.
toc
());

465 
NODELET_INFO
("cÜÃr_cÜ»¥Údªû: %d, surf_cÜ»¥Údªû: %d", 
cÜÃr_cÜ»¥Údaû
, 
surf_cÜ»n¥Údªû
);

467 
TicToc
 
	gt_sŞv”
;

468 
	gû»s
::
SŞv”
::
O±iÚs
 
İtiÚs
;

469 
	gİtiÚs
.
	glš—r_sŞv”_ty³
 = 
û»s
::
DENSE_QR
;

470 
	gİtiÚs
.
	gmax_num_™”©iÚs
 = 20;

471 
	gİtiÚs
.
	gmšimiz”_´og»ss_to_¡dout
 = 
çl£
;

472 
	gİtiÚs
.
	gcheck_g¿d›Ás
 = 
çl£
;

473 
	gİtiÚs
.
	gg¿d›Á_check_»Ïtive_´ecisiÚ
 = 1e-4;

474 
	gû»s
::
SŞv”
::
Summ¬y
 
summ¬y
;

475 
	gû»s
::
SŞve
(
İtiÚs
, &
´obËm
, &
summ¬y
);

476 
NODELET_INFO
("m­pšg sŞv”im%.3fms", 
t_sŞv”
.
toc
());

477 
	gcout
 << 
	gsumm¬y
.
Br›fR•Üt
(è<< 
	g’dl
;

481 
	gLa£rM­pšg
::
ŒªsfÜmUpd©e
()

483 
q_m­2Ï£r_
 = 
Eig’
::
AngËAxisd
(
·¿ms_
[5], Eig’::
VeùÜ3d
::
Un™Z
()è* Eig’::AngËAxisdÕ¬ams_[4], Eig’::VeùÜ3d::
Un™Y
()è* Eig’::AngËAxisdÕ¬ams_[3], Eig’::VeùÜ3d::
Un™X
());

484 
	gt_m­2Ï£r_
.
x
(èğ
·¿ms_
[0];

485 
	gt_m­2Ï£r_
.
y
(èğ
·¿ms_
[1];

486 
	gt_m­2Ï£r_
.
z
(èğ
·¿ms_
[2];

487 
	gq_m­2odom_
 = 
q_m­2Ï£r_
 * 
q_odom2Ï£r_
.
šv”£
();

488 
	gt_m­2odom_
 = 
t_m­2Ï£r_
 - 
q_m­2odom_
 * 
t_odom2Ï£r_
;

491 
boŞ
 
	gLa£rM­pšg
::
§veKeyF¿mesAndFaùÜ
()

493 ià(
şoud_keypo£s_3d_
->
pošts
.
em±y
())

495 
gtSAMg¿ph_
.
add
(
PriÜFaùÜ
<
Po£3
>(0, Po£3(
RÙ3
::
Qu©”niÚ
(
q_m­2Ï£r_
.
w
(), q_m­2Ï£r_.
x
(), q_m­2Ï£r_.
y
(), q_m­2Ï£r_.
z
()), 
Pošt3
(
t_m­2Ï£r_
.x(),_m­2Ï£r_.y(),_m­2Ï£r_.z())), 
´iÜ_noi£_
));

496 
	gš™_e¡im©e_
.
š£¹
(0, 
Po£3
(
RÙ3
::
Qu©”niÚ
(
q_m­2Ï£r_
.
w
(), q_m­2Ï£r_.
x
(), q_m­2Ï£r_.
y
(), q_m­2Ï£r_.
z
()), 
Pošt3
(
t_m­2Ï£r_
.x(),_map2laser_.y(),_map2laser_.z())));

500 cÚ¡‡utØ&
	g´e_po£
 = 
şoud_keypo£s_6d_
->
pošts
[
şoud_keypo£s_3d_
->pošts.
size
() - 1];

501 ià(
	g¡d
::
pow
(
t_m­2Ï£r_
.
x
(è- 
´e_po£
.x, 2) +

502 
	g¡d
::
pow
(
t_m­2Ï£r_
.
y
(è- 
´e_po£
.y, 2) +

503 
	g¡d
::
pow
(
t_m­2Ï£r_
.
z
(è- 
´e_po£
.z, 2) <

504 
	gmš_keyäame_di¡_
)

507  
	gçl£
;

510 
	ggt§m
::
Po£3
 
po£_äom
 = Po£3(
RÙ3
::
RzRyRx
(
´e_po£
.
rŞl
,…»_po£.
p™ch
,…»_po£.
yaw
), 
Pošt3
Õ»_po£.
x
,…»_po£.
y
,…»_po£.
z
));

511 
	ggt§m
::
Po£3
 
po£_to
 = Po£3(
RÙ3
::
Qu©”niÚ
(
q_m­2Ï£r_
.
w
(), q_m­2Ï£r_.
x
(), q_m­2Ï£r_.
y
(), q_m­2Ï£r_.
z
()), 
Pošt3
(
t_m­2Ï£r_
.x(),_map2laser_.y(),_map2laser_.z()));

512 
	ggtSAMg¿ph_
.
add
(
B‘w“nFaùÜ
<
Po£3
>(
şoud_keypo£s_3d_
->
pošts
.
size
(è- 1, cloud_keypo£s_3d_->pošts.size(), 
po£_äom
.
b‘w“n
(
po£_to
), 
odom_noi£_
));

513 
	gš™_e¡im©e_
.
š£¹
(
şoud_keypo£s_3d_
->
pošts
.
size
(), 
Po£3
(
RÙ3
::
Qu©”niÚ
(
q_m­2Ï£r_
.
w
(), q_m­2Ï£r_.
x
(), q_m­2Ï£r_.
y
(), q_m­2Ï£r_.
z
()), 
Pošt3
(
t_m­2Ï£r_
.x(),_map2laser_.y(),_map2laser_.z())));

516 
	gi§m_
->
upd©e
(
gtSAMg¿ph_
, 
š™_e¡im©e_
);

517 
	gi§m_
->
upd©e
();

519 
	ggtSAMg¿ph_
.
»size
(0);

520 
	gš™_e¡im©e_
.
ş—r
();

522 
PoštT
 
	gthis_po£_3d
;

523 
PoštTy³Po£
 
	gthis_po£_6d
;

524 
	ggt§m
::
Po£3
 
Ï‹¡_e¡im©e
;

525 
	gi§m_cur_e¡im©e_
 = 
i§m_
->
ÿlcuÏ‹E¡im©e
();

526 
	gÏ‹¡_e¡im©e
 = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i§m_cur_e¡im©e_.
size
() - 1);

528 
	gthis_po£_6d
.
	gx
 = 
this_po£_3d
.
x
 = 
Ï‹¡_e¡im©e
.
Œª¦©iÚ
().x();

529 
	gthis_po£_6d
.
	gy
 = 
this_po£_3d
.
y
 = 
Ï‹¡_e¡im©e
.
Œª¦©iÚ
().y();

530 
	gthis_po£_6d
.
	gz
 = 
this_po£_3d
.
z
 = 
Ï‹¡_e¡im©e
.
Œª¦©iÚ
().z();

531 
	gthis_po£_6d
.
	gš‹ns™y
 = 
this_po£_3d
.
š‹ns™y
 = 
şoud_keypo£s_3d_
->
pošts
.
size
() + 0.1;

532 
	gthis_po£_6d
.
	grŞl
 = 
Ï‹¡_e¡im©e
.
rÙ©iÚ
().
rŞl
();

533 
	gthis_po£_6d
.
	gp™ch
 = 
Ï‹¡_e¡im©e
.
rÙ©iÚ
().
p™ch
();

534 
	gthis_po£_6d
.
	gyaw
 = 
Ï‹¡_e¡im©e
.
rÙ©iÚ
().
yaw
();

535 
	gthis_po£_6d
.
	gtime
 = 
time_Ï£r_cÜÃr_
;

536 
	gşoud_keypo£s_3d_
->
	gpošts
.
push_back
(
this_po£_3d
);

537 
	gşoud_keypo£s_6d_
->
	gpošts
.
push_back
(
this_po£_6d
);

539 
	g·¿ms_
[0] = 
this_po£_6d
.
x
;

540 
	g·¿ms_
[1] = 
this_po£_6d
.
y
;

541 
	g·¿ms_
[2] = 
this_po£_6d
.
z
;

542 
	g·¿ms_
[3] = 
this_po£_6d
.
rŞl
;

543 
	g·¿ms_
[4] = 
this_po£_6d
.
p™ch
;

544 
	g·¿ms_
[5] = 
this_po£_6d
.
yaw
;

546 
	gPoštCloudT
::
PŒ
 
this_cÜÃr_ds
(
Ãw
 
PoštCloudT
);

547 
	gPoštCloudT
::
PŒ
 
this_surf_ds
(
Ãw
 
PoštCloudT
);

548 
	gPoštCloudT
::
PŒ
 
this_ou›r_ds
(
Ãw
 
PoštCloudT
);

550 
	gpş
::
cİyPoštCloud
(*
Ï£r_cÜÃr_ds_
, *
this_cÜÃr_ds
);

551 
	gpş
::
cİyPoštCloud
(*
Ï£r_surf_ds_
, *
this_surf_ds
);

552 
	gpş
::
cİyPoštCloud
(*
Ï£r_ou›r_ds_
, *
this_ou›r_ds
);

554 
	gcÜÃr_äames_
.
push_back
(
this_cÜÃr_ds
);

555 
	gsurf_äames_
.
push_back
(
this_surf_ds
);

556 
	gou›r_äames_
.
push_back
(
this_ou›r_ds
);

558  
	gŒue
;

561 
	gLa£rM­pšg
::
cÜ»ùPo£s
()

563 ià(
loİ_şo£d_
)

565 
»ûÁ_surf_keyäames_
.
ş—r
();

566 
	g»ûÁ_cÜÃr_keyäames_
.
ş—r
();

567 
	g»ûÁ_ou›r_keyäames_
.
ş—r
();

568 
NODELET_WARN
("correctPoses");

569 
	gnum_po£s
 = 
i§m_cur_e¡im©e_
.
size
();

570 
	gi
 = 0; i < 
	gnum_po£s
; ++i)

572 
	gşoud_keypo£s_6d_
->
	gpošts
[
i
].
	gx
 = 
şoud_keypo£s_3d_
->
pošts
[i].
x
 = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i).
Œª¦©iÚ
().x();

573 
	gşoud_keypo£s_6d_
->
	gpošts
[
i
].
	gy
 = 
şoud_keypo£s_3d_
->
pošts
[i].
y
 = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i).
Œª¦©iÚ
().y();

574 
	gşoud_keypo£s_6d_
->
	gpošts
[
i
].
	gz
 = 
şoud_keypo£s_3d_
->
pošts
[i].
z
 = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i).
Œª¦©iÚ
().z();

575 
	gşoud_keypo£s_6d_
->
	gpošts
[
i
].
	grŞl
 = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i).
rÙ©iÚ
().
rŞl
();

576 
	gşoud_keypo£s_6d_
->
	gpošts
[
i
].
	gp™ch
 = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i).
rÙ©iÚ
().
p™ch
();

577 
	gşoud_keypo£s_6d_
->
	gpošts
[
i
].
	gyaw
 = 
i§m_cur_e¡im©e_
.
©
<
gt§m
::
Po£3
>(i).
rÙ©iÚ
().
yaw
();

579 
	gq_m­2odom_
 = 
cÜ»ùiÚ_
.
block
<3, 3>(0, 0è* q_m­2odom_.
toRÙ©iÚM©rix
();

580 
	gt_m­2odom_
.
m©rix
(èğ
cÜ»ùiÚ_
.
block
<3, 3>(0, 0è*_m­2odom_.m©rix(è+ 
	gcÜ»ùiÚ_
.
	gblock
<3, 1>(0, 3);

582 
	gloİ_şo£d_
 = 
çl£
;

586 
	gLa£rM­pšg
::
publish
()

588 ià(
pub_keypo£s_
.
g‘NumSubsüib”s
() > 0)

590 
£nsÜ_msgs
::
PoštCloud2PŒ
 
msg
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

591 
	gpş
::
toROSMsg
(*
şoud_keypo£s_3d_
, *
msg
);

592 
	gmsg
->
	gh—d”
.
	g¡amp
.
äomSec
(
time_Ï£r_odom_
);

593 
	gmsg
->
	gh—d”
.
	gäame_id
 = "map";

594 
	gpub_keypo£s_
.
publish
(
msg
);

598 
	gLa£rM­pšg
::
visu®izeGlob®M­Th»ad
()

600 
ros
::
R©e
 
¿‹
(0.2);

601 
	gros
::
ok
)

603 ià(
pub_şoud_su¼ound_
.
g‘NumSubsüib”s
() > 0)

605 
£nsÜ_msgs
::
PoštCloud2PŒ
 
msg
(
Ãw
 s’sÜ_msgs::
PoštCloud2
);

606 
	gPoštCloudT
::
PŒ
 
pc_m­
(
Ãw
 
PoštCloudT
);

607 
	gi
 = 0; i < 
	gşoud_keypo£s_3d_
->
size
(); ++i)

609 *
	gpc_m­
 +ğ*
ŒªsfÜmPoštCloud
(
surf_äames_
[
i
], 
şoud_keypo£s_6d_
->
pošts
[i]);

610 *
	gpc_m­
 +ğ*
ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
i
], 
şoud_keypo£s_6d_
->
pošts
[i]);

611 *
	gpc_m­
 +ğ*
ŒªsfÜmPoštCloud
(
ou›r_äames_
[
i
], 
şoud_keypo£s_6d_
->
pošts
[i]);

613 
	gpş
::
toROSMsg
(*
pc_m­
, *
msg
);

614 
	gmsg
->
	gh—d”
.
	g¡amp
.
äomSec
(
time_Ï£r_odom_
);

615 
	gmsg
->
	gh—d”
.
	gäame_id
 = "map";

616 
	gpub_şoud_su¼ound_
.
publish
(
msg
);

618 ià(
	gpub_»ûÁ_keyäames_
.
g‘NumSubsüib”s
() > 0)

620 
	g£nsÜ_msgs
::
PoštCloud2PŒ
 
msg
(
Ãw
 
£nsÜ_msgs
::
PoštCloud2
);

621 
	gPoštCloudT
::
PŒ
 
pc_m­
(
Ãw
 
PoštCloudT
);

622 *
	gpc_m­
 +ğ*
cÜÃr_äom_m­_ds_
;

623 *
	gpc_m­
 +ğ*
surf_äom_m­_ds_
;

624 
	gpş
::
toROSMsg
(*
pc_m­
, *
msg
);

625 
	gmsg
->
	gh—d”
.
	g¡amp
.
äomSec
(
time_Ï£r_odom_
);

626 
	gmsg
->
	gh—d”
.
	gäame_id
 = "map";

627 
	gpub_»ûÁ_keyäames_
.
publish
(
msg
);

629 
	g¿‹
.
¦“p
();

633 
	gLa£rM­pšg
::
loİClosu»Th»ad
()

635 ià(!
loİ_şosu»_’abËd_
)

639 
	gros
::
Du¿tiÚ
 
du¿tiÚ
(1);

640 
	gros
::
ok
())

642 
³rfÜmLoİClosu»
();

643 
	gdu¿tiÚ
.
¦“p
();

644 
	gros
::
¥šOnû
();

652 
	gLa£rM­pšg
::
³rfÜmLoİClosu»
()

654 ià(
şoud_keypo£s_3d_
->
pošts
.
em±y
())

659 ià(!
d‘eùLoİClosu»
())

665 
NODELET_WARN
("detected†oop closure");

668 
TicToc
 
	gt_iı
;

670 
	gpş
::
I‹¿tiveClo£¡Pošt
<
PoštT
, 
	gPoštT
> 
	giı
;

671 
	giı
.
£tMaxCÜ»¥Úd’ûDi¡ªû
(100);

672 
	giı
.
£tMaximumI‹¿tiÚs
(100);

673 
	giı
.
£tT¿nsfÜm©iÚEpsÚ
(1e-6);

674 
	giı
.
£tEuşid—nF™ÃssEpsÚ
(1e-6);

675 
	giı
.
£tRANSACI‹¿tiÚs
(0);

677 
	giı
.
£tIÅutSourû
(
Ï‹¡_keyäame_
);

678 
	giı
.
£tIÅutT¬g‘
(
Ã¬_hi¡Üy_keyäames_
);

679 
	gPoštCloudT
::
PŒ
 
unu£d_»suÉ
(
Ãw
 
PoštCloudT
());

680 
	gEig’
::
M©rix4f
 
š™Ÿl_guess
(
Eig’
::M©rix4f::
Id’t™y
());

681 
	gš™Ÿl_guess
.
	gblock
<3, 3>(0, 0èğ(
Eig’
::
AngËAxisf
(
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
yaw
, Eig’::
VeùÜ3f
::
Un™Z
()) *

682 
Eig’
::
AngËAxisf
(
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
p™ch
, Eig’::
VeùÜ3f
::
Un™Y
()) *

683 
Eig’
::
AngËAxisf
(
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
rŞl
, Eig’::
VeùÜ3f
::
Un™X
()))

684 .
toRÙ©iÚM©rix
();

685 
š™Ÿl_guess
(0, 3èğ
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
x
;

686 
š™Ÿl_guess
(1, 3èğ
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
y
;

687 
š™Ÿl_guess
(2, 3èğ
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
z
;

688 
	giı
.
®ign
(*
unu£d_»suÉ
);

690 
boŞ
 
	ghas_cÚv”ged
 = 
iı
.
hasCÚv”ged
();

691 
	gf™Ãss_scÜe
 = 
iı
.
g‘F™ÃssScÜe
();

692 
	gEig’
::
M©rix4f
 
cÜ»ùiÚ_äame
 = 
iı
.
g‘Fš®T¿nsfÜm©iÚ
();

693 
	gEig’
::
Qu©”niÚf
 
tmp_q
(
cÜ»ùiÚ_äame
.
block
<3, 3>(0, 0));

694 
	grŞl
, 
	gp™ch
, 
	gyaw
;

695 
	gtf
::
M©rix3x3
(
tf
::
Qu©”niÚ
(
tmp_q
.
x
(),mp_q.
y
(),mp_q.
z
(),mp_q.
w
())).
g‘RPY
(
rŞl
, 
p™ch
, 
yaw
);

697 ià(
	ghas_cÚv”ged
 =ğ
çl£
 || 
f™Ãss_scÜe
 > 
hi¡Üy_f™Ãss_scÜe_
)

699 
ROS_WARN
("loop cannot closed");

704 
ROS_WARN
("loop closed");

705 ià(
	gpub_iı_keyäames_
.
g‘NumSubsüib”s
() > 0)

707 
	gPoštCloudT
::
PŒ
 
şo£d_şoud
(
Ãw
 
PoštCloudT
());

708 
	gpş
::
ŒªsfÜmPoštCloud
(*
Ï‹¡_keyäame_
, *
şo£d_şoud
, 
cÜ»ùiÚ_äame
);

709 
	g£nsÜ_msgs
::
PoštCloud2PŒ
 
msg
(
Ãw
 
£nsÜ_msgs
::
PoštCloud2
);

710 
	gpş
::
toROSMsg
(*
şo£d_şoud
, *
msg
);

711 
	gmsg
->
	gh—d”
.
	g¡amp
.
äomSec
(
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
time
);

712 
	gmsg
->
	gh—d”
.
	gäame_id
 = "map";

713 
	gpub_iı_keyäames_
.
publish
(
msg
);

717 
	gEig’
::
M©rix4f
 
t_wrÚg
 = 
š™Ÿl_guess
;

718 
	gEig’
::
M©rix4f
 
t_cÜ»ù
 = 
cÜ»ùiÚ_äame
 * 
t_wrÚg
;

719 
	gEig’
::
Qu©”niÚf
 
r_cÜ»ù
(
t_cÜ»ù
.
block
<3, 3>(0, 0));

720 
	ggt§m
::
Po£3
 
po£_äom
 = 
gt§m
::Po£3(
RÙ3
::
Qu©”niÚ
(
r_cÜ»ù
.
w
(),„_cÜ»ù.
x
(),„_cÜ»ù.
y
(),„_cÜ»ù.
z
()),

721 
Pošt3
(
t_cÜ»ù
(0, 3),_correct(1, 3),_correct(2, 3)));

722 
	ggt§m
::
Po£3
 
po£_to
 = 
gt§m
::Po£3(
RÙ3
::
RzRyRx
(
şoud_keypo£s_6d_
->
pošts
[
şo£¡_hi¡Üy_äame_id_
].
rŞl
, cloud_keypo£s_6d_->pošts[şo£¡_hi¡Üy_äame_id_].
p™ch
, cloud_keypo£s_6d_->pošts[şo£¡_hi¡Üy_äame_id_].
yaw
),

723 
Pošt3
(
şoud_keypo£s_6d_
->
pošts
[
şo£¡_hi¡Üy_äame_id_
].
x
, cloud_keypo£s_6d_->pošts[şo£¡_hi¡Üy_äame_id_].
y
, cloud_keypo£s_6d_->pošts[şo£¡_hi¡Üy_äame_id_].
z
));

724 
	gnoi£_scÜe
 = 
f™Ãss_scÜe
;

725 
	ggt§m
::
VeùÜ
 
veùÜ6
(6);

726 
	gveùÜ6
 << 
	gnoi£_scÜe
,‚oise_score,‚oise_score,‚oise_score,‚oise_score,‚oise_score;

727 
	gcÚ¡¿št_noi£_
 = 
noi£Mod–
::
DŸgÚ®
::
V¬Ÿnûs
(
veùÜ6
);

729 
	g¡d
::
lock_gu¬d
<
¡d
::
mu‹x
> 
lock
(
mtx_
);

730 
	ggtSAMg¿ph_
.
add
(
B‘w“nFaùÜ
<
gt§m
::
Po£3
>(
Ï‹¡_hi¡Üy_äame_id_
, 
şo£¡_hi¡Üy_äame_id_
, 
po£_äom
.
b‘w“n
(
po£_to
), 
cÚ¡¿št_noi£_
));

731 
	gi§m_
->
upd©e
(
gtSAMg¿ph_
);

732 
	gi§m_
->
upd©e
();

733 
	ggtSAMg¿ph_
.
»size
(0);

734 
	gcÜ»ùiÚ_
 = 
cÜ»ùiÚ_äame
.
ÿ¡
<>();

736 
	g¡d
::
cout
 << "-----------------------------------------------------------------" << 
¡d
::
’dl
;

737 
	g¡d
::
cout
 << "Tim–­£d: " << 
t_iı
.
toc
(è<< "ms" << 
¡d
::
’dl
;

738 
	g¡d
::
cout
 << "Numb” oàsourû…ošts: " << 
Ï‹¡_keyäame_
->
size
(è<< "…ošts." << 
¡d
::
’dl
;

739 
	g¡d
::
cout
 << "rg‘: " << 
Ã¬_hi¡Üy_keyäames_
->
pošts
.
size
(è<< "…ošts." << 
¡d
::
’dl
;

740 
	g¡d
::
cout
 << "ICP ha cÚv”ged: " << 
has_cÚv”ged
 << 
¡d
::
’dl
;

741 
	g¡d
::
cout
 << "F™Ãs scÜe: " << 
f™Ãss_scÜe
 << 
¡d
::
’dl
;

742 
	g¡d
::
cout
 << "š™ŸÈ(x,y,z,rŞl,p™ch,yaw):" << 
¡d
::
’dl
;

743 
	g¡d
::
cout
 << "(" << 
š™Ÿl_guess
(0, 3) << ", " << initial_guess(1, 3) << ", " << initial_guess(2, 3) << ", "

744 << 
	gşoud_keypo£s_6d_
->
	gpošts
[
Ï‹¡_hi¡Üy_äame_id_
].
	grŞl
 << ", " << cloud_keypo£s_6d_->pošts[Ï‹¡_hi¡Üy_äame_id_].
	gp™ch
 << ", " << cloud_keypo£s_6d_->pošts[Ï‹¡_hi¡Üy_äame_id_].
	gyaw
 << ")" << 
	g¡d
::
’dl
;

745 
	g¡d
::
cout
 << "fš® (x,y,z,rŞl,p™ch,yaw):" << 
¡d
::
’dl
;

746 
	g¡d
::
cout
 << "(" << 
t_cÜ»ù
(0, 3) << ", " <<_correct(1, 3) << ", " <<_correct(2, 3) << ", "

747 << 
	grŞl
 << ", " << 
	gp™ch
 << ", " << 
	gyaw
 << ")" << 
	g¡d
::
’dl
;

748 
	g¡d
::
cout
 << "T¿nsfÜm©iÚ M©rix:" << 
¡d
::
’dl
;

749 
	g¡d
::
cout
 << 
t_cÜ»ù
 << 
¡d
::
’dl
;

750 
	g¡d
::
cout
 << "shiá: " << 
¡d
::
sq¹
(¡d::
pow
(
cÜ»ùiÚ_äame
(0, 3è- 
š™Ÿl_guess
(0, 3), 2è+ std::pow(cÜ»ùiÚ_äame(1, 3è- in™Ÿl_guess(1, 3), 2è+ std::pow(cÜ»ùiÚ_äame(2, 3è- in™Ÿl_guess(2, 3), 2)è<< std::
’dl
;

751 
	g¡d
::
cout
 << "-----------------------------------------------------------------" << 
¡d
::
’dl
;

753 
	gloİ_şo£d_
 = 
Œue
;

760 
boŞ
 
	gLa£rM­pšg
::
d‘eùLoİClosu»
()

762 ià(
şoud_keypo£s_3d_
->
em±y
())

764  
çl£
;

766 
	gÏ‹¡_keyäame_
->
ş—r
();

767 
	gÃ¬_hi¡Üy_keyäames_
->
ş—r
();

769 
	g¡d
::
lock_gu¬d
<
¡d
::
mu‹x
> 
lock
(
mtx_
);

771 
PoštT
 
	gcur_po£
;

772 
	gcur_po£
.
	gx
 = 
t_m­2Ï£r_
.
x
();

773 
	gcur_po£
.
	gy
 = 
t_m­2Ï£r_
.
y
();

774 
	gcur_po£
.
	gz
 = 
t_m­2Ï£r_
.
z
();

775 
	gkd_keypo£s_
->
£tIÅutCloud
(
şoud_keypo£s_3d_
);

776 
	gkd_keypo£s_
->
¿diusS—rch
(
cur_po£
, 
hi¡Üy_£¬ch_¿dius_
, 
pošt_idx_
, 
pošt_di¡_
);

778 
	gÏ‹¡_hi¡Üy_äame_id_
 = 
şoud_keypo£s_3d_
->
size
() - 1;

779 
	gşo£¡_hi¡Üy_äame_id_
 = -1;

780 
	gi
 = 0; i < 
	gpošt_idx_
.
size
(); ++i)

782 ià(
	gşoud_keypo£s_6d_
->
	gpošts
[
Ï‹¡_hi¡Üy_äame_id_
].
	gtime
 - cloud_keypo£s_6d_->pošts[
pošt_idx_
[
i
]].time > 30.)

784 
	gşo£¡_hi¡Üy_äame_id_
 = 
pošt_idx_
[
i
];

789 ià(
	gşo£¡_hi¡Üy_äame_id_
 == -1)

791  
çl£
;

794 *
	gÏ‹¡_keyäame_
 +ğ*
ŒªsfÜmPoštCloud
(
surf_äames_
[
Ï‹¡_hi¡Üy_äame_id_
], 
şoud_keypo£s_6d_
->
pošts
[latest_history_frame_id_]);

795 *
	gÏ‹¡_keyäame_
 +ğ*
ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
Ï‹¡_hi¡Üy_äame_id_
], 
şoud_keypo£s_6d_
->
pošts
[latest_history_frame_id_]);

796 *
	gÏ‹¡_keyäame_
 +ğ*
ŒªsfÜmPoštCloud
(
ou›r_äames_
[
Ï‹¡_hi¡Üy_äame_id_
], 
şoud_keypo£s_6d_
->
pošts
[latest_history_frame_id_]);

798 
	gPoštCloudT
::
PŒ
 
tmp_şoud
(
Ãw
 
PoštCloudT
());

799 
	gi
 = -
hi¡Üy_£¬ch_num_
, 
	gj
; i <= history_search_num_; ++i)

801 
	gj
 = 
şo£¡_hi¡Üy_äame_id_
 + 
i
;

802 ià(
	gj
 < 0 || j >ğ
Ï‹¡_hi¡Üy_äame_id_
)

806 *
	gtmp_şoud
 +ğ*
ŒªsfÜmPoštCloud
(
surf_äames_
[
j
], 
şoud_keypo£s_6d_
->
pošts
[j]);

807 *
	gtmp_şoud
 +ğ*
ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
j
], 
şoud_keypo£s_6d_
->
pošts
[j]);

808 *
	gtmp_şoud
 +ğ*
ŒªsfÜmPoštCloud
(
ou›r_äames_
[
j
], 
şoud_keypo£s_6d_
->
pošts
[j]);

811 
	gds_hi¡Üy_keyäames_
.
£tIÅutCloud
(
tmp_şoud
);

812 
	gds_hi¡Üy_keyäames_
.
f‹r
(*
Ã¬_hi¡Üy_keyäames_
);

814 ià(
	gpub_hi¡Üy_keyäames_
.
g‘NumSubsüib”s
() > 0)

816 
	g£nsÜ_msgs
::
PoštCloud2PŒ
 
msg
(
Ãw
 
£nsÜ_msgs
::
PoštCloud2
);

817 
	gpş
::
toROSMsg
(*
Ã¬_hi¡Üy_keyäames_
, *
msg
);

818 
	gmsg
->
	gh—d”
.
	g¡amp
.
äomSec
(
şoud_keypo£s_6d_
->
pošts
[
Ï‹¡_hi¡Üy_äame_id_
].
time
);

819 
	gmsg
->
	gh—d”
.
	gäame_id
 = "map";

820 
	gpub_hi¡Üy_keyäames_
.
publish
(
msg
);

823  
	gŒue
;

826 
boŞ
 
	gLa£rM­pšg
::
§veM­CB
(
¡d_¤vs
::
Em±y
::
Reque¡
 &
»q
, std_¤vs::Em±y::
Re¥Ú£
 &
»s
)

829 
PoštCloudT
::
PŒ
 
m­_keypo£
(
Ãw
 PointCloudT);

830 
	gPoštCloudT
::
PŒ
 
m­_cÜÃr
(
Ãw
 
PoštCloudT
);

831 
	gPoštCloudT
::
PŒ
 
m­_surf
(
Ãw
 
PoštCloudT
);

832 
	gPoštCloudT
::
PŒ
 
m­_ou›r
(
Ãw
 
PoštCloudT
);

834 
	gi
 = 0; i < 
	gşoud_keypo£s_3d_
->
	gpošts
.
size
(); ++i)

836 
PoštT
 
	gp
 = 
şoud_keypo£s_3d_
->
pošts
[
i
];

837 
	gp
.
	gš‹ns™y
 = 
i
;

838 
	gm­_keypo£
->
	gpošts
.
push_back
(
p
);

841 
	gPoštCloudT
::
PŒ
 
tmp
(
Ãw
 
PoštCloudT
);

843 
	gi
 = 0; i < 
	gşoud_keypo£s_3d_
->
	gpošts
.
size
(); ++i)

845 
	gtmp
 = 
ŒªsfÜmPoštCloud
(
cÜÃr_äames_
[
i
], 
şoud_keypo£s_6d_
->
pošts
[i], i);

846 
	gm­_cÜÃr
->
	gpošts
.
š£¹
(
m­_cÜÃr
->
pošts
.
’d
(), 
tmp
->pošts.
begš
(),mp->points.end());

848 
	gtmp
 = 
ŒªsfÜmPoštCloud
(
surf_äames_
[
i
], 
şoud_keypo£s_6d_
->
pošts
[i], i);

849 
	gm­_surf
->
	gpošts
.
š£¹
(
m­_surf
->
pošts
.
’d
(), 
tmp
->pošts.
begš
(),mp->points.end());

851 
	gtmp
 = 
ŒªsfÜmPoštCloud
(
ou›r_äames_
[
i
], 
şoud_keypo£s_6d_
->
pošts
[i], i);

852 
	gm­_ou›r
->
	gpošts
.
š£¹
(
m­_ou›r
->
pošts
.
’d
(), 
tmp
->pošts.
begš
(),mp->points.end());

855 
	gm­_keypo£
->
	gwidth
 = 
m­_keypo£
->
pošts
.
size
();

856 
	gm­_keypo£
->
	gheight
 = 1;

857 
	gm­_keypo£
->
	gis_d’£
 = 
çl£
;

858 
	gm­_cÜÃr
->
	gwidth
 = 
m­_cÜÃr
->
pošts
.
size
();

859 
	gm­_cÜÃr
->
	gheight
 = 1;

860 
	gm­_cÜÃr
->
	gis_d’£
 = 
Œue
;

861 
	gm­_surf
->
	gwidth
 = 
m­_surf
->
pošts
.
size
();

862 
	gm­_surf
->
	gheight
 = 1;

863 
	gm­_surf
->
	gis_d’£
 = 
Œue
;

864 
	gm­_ou›r
->
	gwidth
 = 
m­_ou›r
->
pošts
.
size
();

865 
	gm­_ou›r
->
	gheight
 = 1;

866 
	gm­_ou›r
->
	gis_d’£
 = 
Œue
;

868 
	gpş
::
io
::
§vePCDFe
("/home/zh/keypo£.pcd", *
m­_keypo£
);

869 
	gpş
::
io
::
§vePCDFe
("/home/zh/cÜÃr.pcd", *
m­_cÜÃr
);

870 
	gpş
::
io
::
§vePCDFe
("/home/zh/surf.pcd", *
m­_surf
);

871 
	gpş
::
io
::
§vePCDFe
("/home/zh/ou›r.pcd", *
m­_ou›r
);

873  
	gŒue
;

	@src/laserOdometry.cpp

1 
	~"®ego/Ï£rOdom‘ry.h
"

3 
Çme¥aû
 
	glßm


6 
	gLa£rOdom‘ry
::
ÚIn™
()

8 
cout
 << "--------- La£rOdom‘ry in™ --------------" << 
’dl
;

9 
TicToc
 
	gt_š™
;

11 ià(
	gu£_imu
 && 
	gu£_odom
 !ğ
çl£
)

13 
ROS_ERROR
("set use_imu=false when use_odom=true");

17 
	gimu_±r_äÚt_
 = 
odom_±r_äÚt_
 = 0;

18 
	gimu_±r_Ï¡_
 = 
odom_±r_Ï¡_
 = -1;

19 
	gimu_±r_Ï¡_™”_
 = 
odom_±r_Ï¡_™”_
 = 0;

20 
	gimu_time_
.
fl
(0);

21 
	gimu_rŞl_
.
fl
(0);

22 
	gimu_p™ch_
.
fl
(0);

23 
	gimu_yaw_
.
fl
(0);

24 
	gimu_v–o_x_
.
fl
(0);

25 
	gimu_v–o_y_
.
fl
(0);

26 
	gimu_v–o_z_
.
fl
(0);

27 
	gimu_shiá_x_
.
fl
(0);

28 
	gimu_shiá_y_
.
fl
(0);

29 
	gimu_shiá_z_
.
fl
(0);

31 
	gşoud_curv©u»_
.
fl
(0);

32 
	gşoud_ÃighbÜ_picked_
.
fl
(
çl£
);

33 
	gşoud_Ïb–_
.
fl
(0);

34 
	gşoud_sÜt_idx_
.
fl
(0);

36 
	gsy¡em_š™Ÿlized_
 = 
çl£
;

37 
	gsurf_Ï¡_
.
»£t
(
Ãw
 
PoštCloudT
);

38 
	gcÜÃr_Ï¡_
.
»£t
(
Ãw
 
PoštCloudT
);

39 
	gou›r_Ï¡_
.
»£t
(
Ãw
 
PoštCloudT
);

40 
	gkd_surf_Ï¡_
.
»£t
(
Ãw
 
pş
::
KdT»eFLANN
<
PoštT
>);

41 
	gkd_cÜÃr_Ï¡_
.
»£t
(
Ãw
 
pş
::
KdT»eFLANN
<
PoštT
>);

42 
	gi
 = 0; i < 6; ++i)

44 
	g·¿ms_
[
i
] = 0.;

46 
	gt_w_cur_
.
£tZ”o
();

47 
	gr_w_cur_
.
£tId’t™y
();

49 
	gnh_
 = 
g‘MTNodeHªdË
();

50 
	g²h_
 = 
g‘MTPriv©eNodeHªdË
();

52 
	gpub_cÜÃr_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/corner", 10);

53 
	gpub_cÜÃr_Ëss_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/corner_less", 10);

54 
	gpub_surf_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/surf", 10);

55 
	gpub_surf_Ëss_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/surf_less", 10);

56 
	gpub_undi¡Ü‹d_pc_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/undistorted", 10);

57 
	gpub_odom_
 = 
nh_
.
adv”ti£
<
Çv_msgs
::
Odom‘ry
>("/odom/lidar", 10);

58 
	gpub_surf_Ï¡_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/surf_last", 10);

59 
	gpub_cÜÃr_Ï¡_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/corner_last", 10);

60 
	gpub_ou›r_Ï¡_
 = 
nh_
.
adv”ti£
<
£nsÜ_msgs
::
PoštCloud2
>("/outlier_last", 10);

62 
	gsub_£gm’‹d_şoud_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
PoštCloud2
>("/£gm’‹d_şoud", 10, 
	gboo¡
::
bšd
(&
La£rOdom‘ry
::
£gCloudHªdËr
, 
this
, 
_1
));

63 
	gsub_£gm’‹d_šfo_
 = 
nh_
.
subsüibe
<
şoud_msgs
::
şoud_šfo
>("/£g_šfo", 10, 
	gboo¡
::
bšd
(&
La£rOdom‘ry
::
£gInfoHªdËr
, 
this
, 
_1
));

64 
	gsub_ou›r_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
PoštCloud2
>("/ou›r", 10, 
	gboo¡
::
bšd
(&
La£rOdom‘ry
::
ou›rHªdËr
, 
this
, 
_1
));

65 ià(
	gu£_imu
)

67 
	gsub_imu_
 = 
nh_
.
subsüibe
<
£nsÜ_msgs
::
Imu
>("/imu/d©a", 100, 
	gboo¡
::
bšd
(&
La£rOdom‘ry
::
imuHªdËr
, 
this
, 
_1
));

69 ià(
	gu£_odom
)

71 
	gsub_odom_
 = 
nh_
.
subsüibe
<
Çv_msgs
::
Odom‘ry
>("/odom/imu", 100, 
	gboo¡
::
bšd
(&
La£rOdom‘ry
::
odomHªdËr
, 
this
, 
_1
));

74 
	gcout
 << "La£rOdom‘ry onIn™ƒnd: " << 
	gt_š™
.
toc
(è<< 
	g’dl
;

76 
	g¡d
::
th»ad
 
maš_th»ad
(&
La£rOdom‘ry
::
mašLoİ
, 
this
);

79 
	gLa£rOdom‘ry
::
mašLoİ
()

81 
ros
::
R©e
 
¿‹
(100);

82 
	gros
::
ok
())

84 
¿‹
.
¦“p
();

85 
	gros
::
¥šOnû
();

86 ià(!
	g£g_şoud_buf_
.
em±y
(è&& !
	g£g_šfo_buf_
.em±y(è&& !
	gou›r_buf_
.empty())

88 
	gt1
 = 
£g_şoud_buf_
.
äÚt
()->
h—d”
.
¡amp
.
toSec
();

89 
	gt2
 = 
£g_šfo_buf_
.
äÚt
()->
h—d”
.
¡amp
.
toSec
();

90 
	gt3
 = 
ou›r_buf_
.
äÚt
()->
h—d”
.
¡amp
.
toSec
();

91 ià(
abs
(
t1
 - 
t2
è> 0.2 ||‡bsÑ1 - 
t3
) > 0.2)

93 
	gm_buf_
.
lock
();

94 
NODELET_WARN
("unsync msg");

95 !
	g£g_şoud_buf_
.
em±y
())

97 
	g£g_şoud_buf_
.
pİ
();

99 !
	g£g_šfo_buf_
.
em±y
())

101 
	g£g_šfo_buf_
.
pİ
();

103 !
	gou›r_buf_
.
em±y
())

105 
	gou›r_buf_
.
pİ
();

107 
	gm_buf_
.
uÆock
();

112 
TicToc
 
	gt_adj
;

113 
	gPoštCloudT
::
PŒ
 
£g_şoud
(
Ãw
 
PoštCloudT
());

114 
	gpş
::
äomROSMsg
(*
£g_şoud_buf_
.
äÚt
(), *
£g_şoud
);

116 
NODELET_INFO
("adju¡Di¡ÜtiÚ %.3àms", 
t_adj
.
toc
());

119 
TicToc
 
	gt_ÿl
;

120 
	gşoud_size
 = 
£g_şoud
->
pošts
.
size
();

121 
	gşoud_msgs
::
şoud_šfoCÚ¡PŒ
 
£g_šfo
 = 
£g_šfo_buf_
.
äÚt
();

122 
	gi
 = 5; i < 
	gşoud_size
 - 5; ++i)

124 
	gdiff_¿nge
 = 
£g_šfo
->
£gm’‹dCloudRªge
[
i
 - 5] + seg_info->segmentedCloudRange[i - 4] + seg_info->segmentedCloudRange[i - 3] + seg_info->segmentedCloudRange[i - 2] + seg_info->segmentedCloudRange[i - 1] - seg_info->segmentedCloudRange[i] * 10 + seg_info->segmentedCloudRange[i + 1] + seg_info->segmentedCloudRange[i + 2] + seg_info->segmentedCloudRange[i + 3] + seg_info->segmentedCloudRange[i + 4] + seg_info->segmentedCloudRange[i + 5];

125 
	gşoud_curv©u»_
[
i
] = 
diff_¿nge
 * diff_range;

126 
	gşoud_ÃighbÜ_picked_
[
i
] = 0;

127 
	gşoud_Ïb–_
[
i
] = 0;

128 
	gşoud_sÜt_idx_
[
i
] = i;

131 
	gocc1
 = 0, 
	gocc2
 = 0, 
	gocc3
 = 0;

132 
	gi
 = 5; i < 
	gşoud_size
 - 5; ++i)

134 
	gd•th1
 = 
£g_šfo
->
£gm’‹dCloudRªge
[
i
];

135 
	gd•th2
 = 
£g_šfo
->
£gm’‹dCloudRªge
[
i
 + 1];

136 
	gcŞ_diff
 = 
abs
(
£g_šfo
->
£gm’‹dCloudCŞInd
[
i
] - seg_info->segmentedCloudColInd[i + 1]);

137 ià(
	gcŞ_diff
 < 10)

140 ià(
	gd•th1
 - 
	gd•th2
 > 0.5)

142 
	gşoud_ÃighbÜ_picked_
[
i
 - 5] = 
şoud_ÃighbÜ_picked_
[˜- 4] = cloud_ÃighbÜ_picked_[˜- 3] = cloud_ÃighbÜ_picked_[˜- 2] = cloud_ÃighbÜ_picked_[˜- 1] = cloud_ÃighbÜ_picked_[i] = 
Œue
;

143 
	gocc1
 += 6;

146 ià(
	gd•th2
 - 
	gd•th1
 > 0.5)

148 
	gşoud_ÃighbÜ_picked_
[
i
 + 1] = 
şoud_ÃighbÜ_picked_
[˜+ 2] = cloud_ÃighbÜ_picked_[˜+ 3] = cloud_ÃighbÜ_picked_[˜+ 4] = cloud_ÃighbÜ_picked_[˜+ 5] = 
Œue
;

149 
	gocc2
 += 5;

152 
	gdiff1
 = 
abs
(
£g_šfo
->
£gm’‹dCloudRªge
[
i
 - 1] - 
d•th1
);

153 
	gdiff2
 = 
abs
(
d•th2
 - 
d•th1
);

154 ià(
	gdiff1
 > 0.02 * 
	g£g_šfo
->
	g£gm’‹dCloudRªge
[
i
] && 
	gdiff2
 > 0.02 * seg_info->segmentedCloudRange[i])

156 
	gşoud_ÃighbÜ_picked_
[
i
] = 
Œue
;

157 ++
	gocc3
;

160 
NODELET_INFO
("ÿlcuÏ‹SmoÙhÃs ªd m¬kOcşuded %.3àms", 
t_adj
.
toc
());

161 
NODELET_INFO
("şoud_size: %d, occ1: %d, occ2: %d, occ3: %d", 
şoud_size
, 
occ1
, 
occ2
, 
occ3
);

164 
TicToc
 
	gt_±s
;

165 
	gPoštCloudT
::
PŒ
 
sh¬p
(
Ãw
 
PoštCloudT
);

166 
	gPoštCloudT
::
PŒ
 
Ëss_sh¬p
(
Ãw
 
PoštCloudT
);

167 
	gPoštCloudT
::
PŒ
 
æ©
(
Ãw
 
PoštCloudT
);

168 
	gPoštCloudT
::
PŒ
 
Ëss_æ©
(
Ãw
 
PoštCloudT
);

169 
	gPoštCloudT
::
PŒ
 
Ëss_æ©_sÿn
(
Ãw
 
PoštCloudT
);

171 
	gt_sÜt
 = 0.;

172 
	gi
 = 0; i < 
	gN_SCAN
; ++i)

174 
	gËss_æ©_sÿn
->
ş—r
();

175 
	gj
 = 0; j < 6; ++j)

177 
	g¥
 = (
£g_šfo
->
¡¬tRšgIndex
[
i
] * (6 - 
j
è+ seg_šfo->
’dRšgIndex
[i] * j) / 6;

178 
	g•
 = (
£g_šfo
->
¡¬tRšgIndex
[
i
] * (5 - 
j
è+ seg_šfo->
’dRšgIndex
[i] * (j + 1)) / 6 - 1;

179 ià(
	g¥
 >ğ
•
)

181 
NODELET_WARN
("¥: %d,ƒp: %d, s¹: %d,ƒnd: %d", 
¥
, 
•
, 
£g_šfo
->
¡¬tRšgIndex
[
i
], seg_šfo->
’dRšgIndex
[i]);

184 
TicToc
 
	gt_tmp
;

185 
	g¡d
::
sÜt
(
şoud_sÜt_idx_
.
begš
(è+ 
¥
, cloud_sÜt_idx_.begš(è+ 
•
 + 1, [
this
](
a
, 
b
è{  
şoud_curv©u»_
[a] < cloud_curvature_[b]; });

186 
	gt_sÜt
 +ğ
t_tmp
.
toc
();

188 
	gpicked_num
 = 0;

189 
	gk
 = 
•
; k >ğ
¥
; --k)

191 
	gidx
 = 
şoud_sÜt_idx_
[
k
];

192 ià(
	gşoud_ÃighbÜ_picked_
[
idx
] =ğ0 && 
şoud_curv©u»_
[idx] > 0.1 && 
£g_šfo
->
£gm’‹dCloudGroundFÏg
[idx] =ğ
çl£
)

194 ++
picked_num
;

195 
	gşoud_ÃighbÜ_picked_
[
idx
] = 1;

196 ià(
	gpicked_num
 <= 2)

198 
şoud_Ïb–_
[
idx
] = 2;

199 
	gsh¬p
->
push_back
(
£g_şoud
->
pošts
[
idx
]);

200 
	gËss_sh¬p
->
push_back
(
£g_şoud
->
pošts
[
idx
]);

202 ià(
	gpicked_num
 <= 20)

204 
şoud_Ïb–_
[
idx
] = 1;

205 
	gËss_sh¬p
->
push_back
(
£g_şoud
->
pošts
[
idx
]);

211 
	gl
 = 1;† <= 5; ++l)

213 
	gcŞ_diff
 = 
abs
(
£g_šfo
->
£gm’‹dCloudCŞInd
[
idx
 + 
l
] - seg_info->segmentedCloudColInd[idx +† - 1]);

214 ià(
	gcŞ_diff
 > 10)

220 
	gşoud_ÃighbÜ_picked_
[
idx
 + 
l
] = 1;

223 
	gl
 = -1;† >= -5; --l)

225 
	gcŞ_diff
 = 
abs
(
£g_šfo
->
£gm’‹dCloudCŞInd
[
idx
 + 
l
] - seg_info->segmentedCloudColInd[idx +† + 1]);

226 ià(
	gcŞ_diff
 > 10)

232 
	gşoud_ÃighbÜ_picked_
[
idx
 + 
l
] = 1;

238 
	gpicked_num
 = 0;

239 
	gk
 = 
¥
; k <ğ
•
; ++k)

241 
	gidx
 = 
şoud_sÜt_idx_
[
k
];

242 ià(
	gşoud_ÃighbÜ_picked_
[
idx
] =ğ0 && 
şoud_curv©u»_
[idx] < 0.1 && 
£g_šfo
->
£gm’‹dCloudGroundFÏg
[idx] =ğ
Œue
)

244 
şoud_Ïb–_
[
idx
] = -1;

245 
	gæ©
->
push_back
(
£g_şoud
->
pošts
[
idx
]);

246 ++
	gpicked_num
;

247 
	gşoud_ÃighbÜ_picked_
[
idx
] = 1;

248 ià(
	gpicked_num
 >= 4)

252 
	gl
 = 1;† <= 5; ++l)

254 
	gcŞ_diff
 = 
abs
(
£g_šfo
->
£gm’‹dCloudCŞInd
[
idx
 + 
l
] - seg_info->segmentedCloudColInd[idx +† - 1]);

255 ià(
	gcŞ_diff
 > 10)

261 
	gşoud_ÃighbÜ_picked_
[
idx
 + 
l
] = 1;

264 
	gl
 = -1;† >= -5; --l)

266 
	gcŞ_diff
 = 
abs
(
£g_šfo
->
£gm’‹dCloudCŞInd
[
idx
 + 
l
] - seg_info->segmentedCloudColInd[idx +† + 1]);

267 ià(
	gcŞ_diff
 > 10)

273 
	gşoud_ÃighbÜ_picked_
[
idx
 + 
l
] = 1;

279 
	gk
 = 
¥
; k <ğ
•
; ++k)

281 ià(
	gşoud_Ïb–_
[
k
] <= 0)

283 
Ëss_æ©_sÿn
->
push_back
(
£g_şoud
->
pošts
[
k
]);

288 
	gPoštCloudT
::
PŒ
 
Ëss_æ©_sÿn_ds
(
Ãw
 
PoštCloudT
);

289 
	gpş
::
Vox–Grid
<
PoštT
> 
ds
;

290 
	gds
.
£tL—fSize
(0.4, 0.4, 0.4);

291 
	gds
.
£tIÅutCloud
(
Ëss_æ©_sÿn
);

292 
	gds
.
f‹r
(*
Ëss_æ©_sÿn_ds
);

293 *
	gËss_æ©
 +ğ*
Ëss_æ©_sÿn_ds
;

295 
NODELET_INFO
("Ëss_sh¬°size: %d,†ess_æ© size: %d", 
Ëss_sh¬p
->
size
(), 
Ëss_æ©
->size());

296 
NODELET_INFO
("sÜˆcurv©u» v®utime: %.3f", 
t_sÜt
);

297 
NODELET_INFO
("ã©u»…»·»ime: %.3f", 
t_±s
.
toc
());

299 ià(
	gpub_cÜÃr_
.
g‘NumSubsüib”s
(è> 0 || 
	gpub_cÜÃr_Ëss_
.g‘NumSubsüib”s(è> 0 || 
	gpub_surf_
.g‘NumSubsüib”s(è> 0 || 
	gpub_surf_Ëss_
.getNumSubscribers() > 0)

301 
	g£nsÜ_msgs
::
PoštCloud2PŒ
 
msg_sh¬p
(
Ãw
 
£nsÜ_msgs
::
PoštCloud2
);

302 
	g£nsÜ_msgs
::
PoštCloud2PŒ
 
msg_Ëss_sh¬p
(
Ãw
 
£nsÜ_msgs
::
PoštCloud2
);

303 
	g£nsÜ_msgs
::
PoštCloud2PŒ
 
msg_æ©
(
Ãw
 
£nsÜ_msgs
::
PoštCloud2
);

304 
	g£nsÜ_msgs
::
PoštCloud2PŒ
 
msg_Ëss_æ©
(
Ãw
 
£nsÜ_msgs
::
PoštCloud2
);

305 
	gpş
::
toROSMsg
(*
sh¬p
, *
msg_sh¬p
);

306 
	gpş
::
toROSMsg
(*
Ëss_sh¬p
, *
msg_Ëss_sh¬p
);

307 
	gpş
::
toROSMsg
(*
æ©
, *
msg_æ©
);

308 
	gpş
::
toROSMsg
(*
Ëss_æ©
, *
msg_Ëss_æ©
);

309 
	gmsg_sh¬p
->
	gh—d”
 = 
msg_Ëss_sh¬p
->
h—d”
 = 
msg_æ©
->h—d” = 
msg_Ëss_æ©
->h—d” = 
£g_şoud_buf_
.
äÚt
()->header;

310 
	gpub_cÜÃr_
.
publish
(
msg_sh¬p
);

311 
	gpub_cÜÃr_Ëss_
.
publish
(
msg_Ëss_sh¬p
);

312 
	gpub_surf_
.
publish
(
msg_æ©
);

313 
	gpub_surf_Ëss_
.
publish
(
msg_Ëss_æ©
);

316 ià(
	gsy¡em_š™Ÿlized_
 =ğ
çl£
)

318 
sy¡em_š™Ÿlized_
 = 
Œue
;

319 
	gsurf_Ï¡_
 = 
Ëss_æ©
;

320 
	gcÜÃr_Ï¡_
 = 
Ëss_sh¬p
;

321 
	gkd_surf_Ï¡_
->
£tIÅutCloud
(
surf_Ï¡_
);

322 
	gkd_cÜÃr_Ï¡_
->
£tIÅutCloud
(
cÜÃr_Ï¡_
);

323 
NODELET_INFO
("system initialized");

328 
TicToc
 
	gt_İt
;

329 
TicToc
 
	gt_d©a
;

330 
	gcÜÃr_cÜ»¥Údªû
 = 0, 
	gsurf_cÜ»¥Údªû
 = 0;

331 
	gû»s
::
LossFunùiÚ
 *
loss_funùiÚ
 = 
Ãw
 
û»s
::
Hub”Loss
(0.1);

332 
	gû»s
::
ProbËm
::
O±iÚs
 
´obËm_İtiÚs
;

333 
	gû»s
::
ProbËm
 
´obËm
(
´obËm_İtiÚs
);

334 
	g´obËm
.
AddP¬am‘”Block
(
·¿ms_
, 6);

335 
	g¡d
::
veùÜ
<> 
£¬ch_idx
;

336 
	g¡d
::
veùÜ
<> 
£¬ch_di¡
;

337 
	gj
 = 0; j < 
	gæ©
->
	gpošts
.
size
(); ++j)

339 
PoštT
 
	gpošt_£l
;

340 
ŒªsfÜmToS¹
(
æ©
->
pošts
[
j
], 
pošt_£l
);

341 
	gkd_surf_Ï¡_
->
Ã¬e¡KS—rch
(
pošt_£l
, 1, 
£¬ch_idx
, 
£¬ch_di¡
);

342 
	gşo£¡_idx
 = -1, 
	gmš_idx2
 = -1, 
	gmš_idx3
 = -1;

343 ià(
	g£¬ch_di¡
[0] < 
	gÃ¬e¡_ã©u»_di¡
)

345 
	gşo£¡_idx
 = 
£¬ch_idx
[0];

346 
	gpošt_di¡
, 
	gmš_di¡2
 = 
Ã¬e¡_ã©u»_di¡
, 
	gmš_di¡3
 =‚earest_feature_dist;

347 
	gşo£¡_sÿn
 = (
surf_Ï¡_
->
pošts
[
şo£¡_idx
].
š‹ns™y
);

348 
	gk
 = 
şo£¡_idx
 + 1; k < 
	gsurf_Ï¡_
->
	gpošts
.
size
(); ++k)

350 ià((
	gsurf_Ï¡_
->
	gpošts
[
k
].
	gš‹ns™y
è> 
	gşo£¡_sÿn
 + 2.5)

354 
	gpošt_di¡
 = 
pow
(
surf_Ï¡_
->
pošts
[
k
].
x
 - 
pošt_£l
.x, 2è+…ow(surf_Ï¡_->pošts[k].
y
 -…ošt_£l.y, 2è+…ow(surf_Ï¡_->pošts[k].
z
 -…oint_sel.z, 2);

355 ià((
	gsurf_Ï¡_
->
	gpošts
[
k
].
	gš‹ns™y
è=ğ
şo£¡_sÿn
)

357 ià(
pošt_di¡
 < 
mš_di¡2
)

359 
mš_di¡2
 = 
pošt_di¡
;

360 
	gmš_idx2
 = 
k
;

365 ià(
	gpošt_di¡
 < 
	gmš_di¡3
)

367 
	gmš_di¡3
 = 
pošt_di¡
;

368 
	gmš_idx3
 = 
k
;

372 
	gk
 = 
şo£¡_idx
 - 1; k >= 0; --k)

374 ià((
	gsurf_Ï¡_
->
	gpošts
[
k
].
	gš‹ns™y
è< 
	gşo£¡_sÿn
 - 2.5)

378 
	gpošt_di¡
 = 
pow
(
surf_Ï¡_
->
pošts
[
k
].
x
 - 
pošt_£l
.x, 2è+…ow(surf_Ï¡_->pošts[k].
y
 -…ošt_£l.y, 2è+…ow(surf_Ï¡_->pošts[k].
z
 -…oint_sel.z, 2);

379 ià((
	gsurf_Ï¡_
->
	gpošts
[
k
].
	gš‹ns™y
è=ğ
şo£¡_sÿn
)

381 ià(
pošt_di¡
 < 
mš_di¡2
)

383 
mš_di¡2
 = 
pošt_di¡
;

384 
	gmš_idx2
 = 
k
;

389 ià(
	gpošt_di¡
 < 
	gmš_di¡3
)

391 
	gmš_di¡3
 = 
pošt_di¡
;

392 
	gmš_idx3
 = 
k
;

397 ià(
	gmš_idx2
 >ğ0 && 
mš_idx3
 >= 0)

399 
Eig’
::
VeùÜ3d
 
ı
(
æ©
->
pošts
[
j
].
x
, fÏt->pošts[j].
y
, fÏt->pošts[j].
z
);

400 
	gEig’
::
VeùÜ3d
 
Íj
(
surf_Ï¡_
->
pošts
[
şo£¡_idx
].
x
, surf_Ï¡_->pošts[şo£¡_idx].
y
, surf_Ï¡_->pošts[şo£¡_idx].
z
);

401 
	gEig’
::
VeùÜ3d
 
Íl
(
surf_Ï¡_
->
pošts
[
mš_idx2
].
x
, surf_Ï¡_->pošts[mš_idx2].
y
, surf_Ï¡_->pošts[mš_idx2].
z
);

402 
	gEig’
::
VeùÜ3d
 
Ím
(
surf_Ï¡_
->
pošts
[
mš_idx3
].
x
, surf_Ï¡_->pošts[mš_idx3].
y
, surf_Ï¡_->pošts[mš_idx3].
z
);

403 
	g´obËm
.
AddResidu®Block
(
Ãw
 
SurfCo¡FunùiÚ
(
ı
, 
Íj
, 
Íl
, 
Ím
), 
loss_funùiÚ
, 
·¿ms_
);

404 ++
	gsurf_cÜ»¥Údªû
;

408 
NODELET_INFO
("suràcÜ»¥Údªû: %d", 
surf_cÜ»¥Údªû
);

409 
NODELET_INFO
("d©¨assocŸtiÚime: %.3fms", 
t_d©a
.
toc
());

410 ià(
	gsurf_cÜ»¥Údªû
 >= 10)

412 
TicToc
 
t_sŞv”
;

413 
	gû»s
::
SŞv”
::
O±iÚs
 
İtiÚs
;

414 
	gİtiÚs
.
	glš—r_sŞv”_ty³
 = 
û»s
::
DENSE_QR
;

415 
	gİtiÚs
.
	gmax_num_™”©iÚs
 = 5;

416 
	gİtiÚs
.
	gmšimiz”_´og»ss_to_¡dout
 = 
çl£
;

417 
	gû»s
::
SŞv”
::
Summ¬y
 
summ¬y
;

418 
	gû»s
::
SŞve
(
İtiÚs
, &
´obËm
, &
summ¬y
);

419 
NODELET_INFO
("sŞv”im%àm \n", 
t_sŞv”
.
toc
());

420 
NODELET_INFO_STREAM
(
summ¬y
.
Br›fR•Üt
());

424 
NODELET_WARN
("few surf correspondance");

426 
	gt_d©a
.
tic
();

427 
	gj
 = 0; j < 
	gsh¬p
->
	gpošts
.
size
(); ++j)

429 
PoštT
 
	gpošt_£l
;

430 
ŒªsfÜmToS¹
(
sh¬p
->
pošts
[
j
], 
pošt_£l
);

431 
	gkd_cÜÃr_Ï¡_
->
Ã¬e¡KS—rch
(
pošt_£l
, 1, 
£¬ch_idx
, 
£¬ch_di¡
);

432 
	gşo£¡_idx
 = -1, 
	gmš_idx2
 = -1;

433 ià(
	g£¬ch_di¡
[0] < 
	gÃ¬e¡_ã©u»_di¡
)

435 
	gşo£¡_idx
 = 
£¬ch_idx
[0];

436 
	gşo£¡_sÿn
 = (
cÜÃr_Ï¡_
->
pošts
[
şo£¡_idx
].
š‹ns™y
);

437 
	gpošt_di¡
, 
	gmš_pošt_di¡2
 = 
Ã¬e¡_ã©u»_di¡
;

439 
	gk
 = 
şo£¡_idx
 + 1; k < 
	gcÜÃr_Ï¡_
->
	gpošts
.
size
(); ++k)

441 ià((
	gcÜÃr_Ï¡_
->
	gpošts
[
k
].
	gš‹ns™y
è> 
	gşo£¡_sÿn
 + 2)

445 
	gpošt_di¡
 = 
pow
(
cÜÃr_Ï¡_
->
pošts
[
k
].
x
 - 
pošt_£l
.x, 2è+…ow(cÜÃr_Ï¡_->pošts[k].
y
 -…ošt_£l.y, 2è+…ow(cÜÃr_Ï¡_->pošts[k].
z
 -…oint_sel.z, 2);

446 ià((
	gcÜÃr_Ï¡_
->
	gpošts
[
k
].
	gš‹ns™y
è> 
	gşo£¡_sÿn
)

448 ià(
	gpošt_di¡
 < 
	gmš_pošt_di¡2
)

450 
	gmš_pošt_di¡2
 = 
pošt_di¡
;

451 
	gmš_idx2
 = 
k
;

455 
	gk
 = 
şo£¡_idx
 - 1; k >= 0; --k)

457 ià((
	gcÜÃr_Ï¡_
->
	gpošts
[
k
].
	gš‹ns™y
è< 
	gşo£¡_sÿn
 - 2)

461 
	gpošt_di¡
 = 
pow
(
cÜÃr_Ï¡_
->
pošts
[
k
].
x
 - 
pošt_£l
.x, 2è+…ow(cÜÃr_Ï¡_->pošts[k].
y
 -…ošt_£l.y, 2è+…ow(cÜÃr_Ï¡_->pošts[k].
z
 -…oint_sel.z, 2);

462 ià((
	gcÜÃr_Ï¡_
->
	gpošts
[
k
].
	gš‹ns™y
è< 
	gşo£¡_sÿn
)

464 ià(
	gpošt_di¡
 < 
	gmš_pošt_di¡2
)

466 
	gmš_pošt_di¡2
 = 
pošt_di¡
;

467 
	gmš_idx2
 = 
k
;

472 ià(
	gmš_idx2
 >= 0)

474 
Eig’
::
VeùÜ3d
 
ı
(
sh¬p
->
pošts
[
j
].
x
, sh¬p->pošts[j].
y
, sh¬p->pošts[j].
z
);

475 
	gEig’
::
VeùÜ3d
 
Íj
(
cÜÃr_Ï¡_
->
pošts
[
şo£¡_idx
].
x
, cÜÃr_Ï¡_->pošts[şo£¡_idx].
y
, cÜÃr_Ï¡_->pošts[şo£¡_idx].
z
);

476 
	gEig’
::
VeùÜ3d
 
Íl
(
cÜÃr_Ï¡_
->
pošts
[
mš_idx2
].
x
, cÜÃr_Ï¡_->pošts[mš_idx2].
y
, cÜÃr_Ï¡_->pošts[mš_idx2].
z
);

477 
	g´obËm
.
AddResidu®Block
(
Ãw
 
CÜÃrCo¡FunùiÚ
(
ı
, 
Íj
, 
Íl
),

478 
loss_funùiÚ
, 
·¿ms_
);

479 ++
	gcÜÃr_cÜ»¥Údªû
;

482 
NODELET_INFO
("cÜÃ¸cÜ»¥Údªû: %d", 
cÜÃr_cÜ»¥Údªû
);

483 
NODELET_INFO
("d©¨assocŸtiÚime: %.3fms", 
t_d©a
.
toc
());

484 ià(
	gcÜÃr_cÜ»¥Údªû
 >= 10)

486 
TicToc
 
t_sŞv”
;

487 
	gû»s
::
SŞv”
::
O±iÚs
 
İtiÚs
;

488 
	gİtiÚs
.
	glš—r_sŞv”_ty³
 = 
û»s
::
DENSE_QR
;

489 
	gİtiÚs
.
	gmax_num_™”©iÚs
 = 5;

490 
	gİtiÚs
.
	gmšimiz”_´og»ss_to_¡dout
 = 
çl£
;

491 
	gû»s
::
SŞv”
::
Summ¬y
 
summ¬y
;

492 
	gû»s
::
SŞve
(
İtiÚs
, &
´obËm
, &
summ¬y
);

493 
NODELET_INFO
("sŞv”im%àm \n", 
t_sŞv”
.
toc
());

494 
NODELET_INFO_STREAM
(
summ¬y
.
Br›fR•Üt
());

498 
NODELET_WARN
("few corner correspondance");

500 
NODELET_INFO
("tÙ® o±ime: %.3fms", 
t_İt
.
toc
());

501 
	gt_tÙ®
 = 0.;

502 
	gt_tÙ®
 +ğ
t_İt
.
toc
();

503 
NODELET_INFO
("İˆtimuÁ‚ow: %.3fms", 
t_tÙ®
);

504 
	gEig’
::
VeùÜ3d
 
t_Ï¡_cur
(
·¿ms_
[0],…arams_[1],…arams_[2]);

506 
	gEig’
::
M©rix3d
 
r_Ï¡_cur
 = (
Eig’
::
AngËAxisd
(
·¿ms_
[5], Eig’::
VeùÜ3d
::
Un™Z
())).
toRÙ©iÚM©rix
();

507 
	gt_w_cur_
 = 
t_w_cur_
 + 
r_w_cur_
 * 
t_Ï¡_cur
;

508 
	gr_w_cur_
 = 
r_w_cur_
 * 
r_Ï¡_cur
;

509 
NODELET_INFO
("t_Ï¡_cur: %.3f, %.3f, %.3f,„_Ï¡_cur: %.3f, %.3f, %.3f", 
·¿ms_
[0],…arams_[1],…arams_[2],…arams_[3],…arams_[4],…arams_[5]);

510 
NODELET_INFO_STREAM
("t_w_cur: " << 
t_w_cur_
 << "\Ä_w_cur: " << 
r_w_cur_
);

513 
	gEig’
::
Qu©”niÚd
 
tmp_q
(
r_w_cur_
);

514 
	gÇv_msgs
::
Odom‘ryPŒ
 
Ï£r_odom‘ry
(
Ãw
 
Çv_msgs
::
Odom‘ry
);

515 
	gÏ£r_odom‘ry
->
	gh—d”
.
	gäame_id
 = "/odom";

516 
	gÏ£r_odom‘ry
->
	gchd_äame_id
 = "/laser";

517 
	gÏ£r_odom‘ry
->
	gh—d”
.
	g¡amp
 = 
ros
::
Time
().
äomSec
(
t1
);

518 
	gÏ£r_odom‘ry
->
	gpo£
.po£.
	gÜ›Á©iÚ
.
	gx
 = 
tmp_q
.
x
();

519 
	gÏ£r_odom‘ry
->
	gpo£
.po£.
	gÜ›Á©iÚ
.
	gy
 = 
tmp_q
.
y
();

520 
	gÏ£r_odom‘ry
->
	gpo£
.po£.
	gÜ›Á©iÚ
.
	gz
 = 
tmp_q
.
z
();

521 
	gÏ£r_odom‘ry
->
	gpo£
.po£.
	gÜ›Á©iÚ
.
	gw
 = 
tmp_q
.
w
();

522 
	gÏ£r_odom‘ry
->
	gpo£
.po£.
	gpos™iÚ
.
	gx
 = 
t_w_cur_
.
x
();

523 
	gÏ£r_odom‘ry
->
	gpo£
.po£.
	gpos™iÚ
.
	gy
 = 
t_w_cur_
.
y
();

524 
	gÏ£r_odom‘ry
->
	gpo£
.po£.
	gpos™iÚ
.
	gz
 = 
t_w_cur_
.
z
();

525 
	gpub_odom_
.
publish
(
Ï£r_odom‘ry
);

527 
	gtf
::
T¿nsfÜm
 
tf_o2l
;

528 
	gtf
::
po£MsgToTF
(
Ï£r_odom‘ry
->
po£
.po£, 
tf_o2l
);

529 
	gtf_brßd_
.
£ndT¿nsfÜm
(
tf
::
Sm³dT¿nsfÜm
(
tf_o2l
, 
Ï£r_odom‘ry
->
h—d”
.
¡amp
, "/odom", "/laser"));

531 
	gsurf_Ï¡_
 = 
Ëss_æ©
;

532 
	gcÜÃr_Ï¡_
 = 
Ëss_sh¬p
;

533 
	gkd_surf_Ï¡_
->
£tIÅutCloud
(
surf_Ï¡_
);

534 
	gkd_cÜÃr_Ï¡_
->
£tIÅutCloud
(
cÜÃr_Ï¡_
);

537 
	g£nsÜ_msgs
::
PoštCloud2PŒ
 
msg_surf_Ï¡
(
Ãw
 
£nsÜ_msgs
::
PoštCloud2
);

538 
	g£nsÜ_msgs
::
PoštCloud2PŒ
 
msg_cÜÃr_Ï¡
(
Ãw
 
£nsÜ_msgs
::
PoštCloud2
);

540 
	gpş
::
toROSMsg
(*
surf_Ï¡_
, *
msg_surf_Ï¡
);

541 
	gpş
::
toROSMsg
(*
cÜÃr_Ï¡_
, *
msg_cÜÃr_Ï¡
);

542 
	gmsg_surf_Ï¡
->
	gh—d”
.
	g¡amp
.
äomSec
(
t1
);

543 
	gmsg_surf_Ï¡
->
	gh—d”
.
	gäame_id
 = "/laser";

544 
	gmsg_cÜÃr_Ï¡
->
	gh—d”
 = 
msg_surf_Ï¡
->
h—d”
;

545 
	gpub_surf_Ï¡_
.
publish
(
msg_surf_Ï¡
);

546 
	gpub_cÜÃr_Ï¡_
.
publish
(
msg_cÜÃr_Ï¡
);

548 
	gm_buf_
.
lock
();

549 
	g£g_şoud_buf_
.
pİ
();

550 
	g£g_šfo_buf_
.
pİ
();

551 
	gou›r_buf_
.
pİ
();

552 
	gm_buf_
.
uÆock
();

557 
	gLa£rOdom‘ry
::
adju¡Di¡ÜtiÚ
(
PoštCloudT
::
PŒ
 
şoud
, 
sÿn_time
)

559 
	gşoud_size
 = 
şoud
->
pošts
.
size
();

561 
	gşoud_msgs
::
şoud_šfoCÚ¡PŒ
 
£g_šfo
 = 
£g_šfo_buf_
.
äÚt
();

562 
	g¡¬t_Üi
 = (
£g_šfo
->
¡¬tOr›Á©iÚ
 + 2 * 
M_PI
è/ 
HÜizÚ_SCAN
;

563 
	g’d_Üi
 = (
£g_šfo
->
’dOr›Á©iÚ
 + 2 * 
M_PI
è/ 
HÜizÚ_SCAN
;

564 ià(
	g¡¬t_Üi
 >ğ
HÜizÚ_SCAN
)

566 
¡¬t_Üi
 -ğ
HÜizÚ_SCAN
;

568 ià(
	g’d_Üi
 >ğ
HÜizÚ_SCAN
)

570 
’d_Üi
 -ğ
HÜizÚ_SCAN
;

573 
	gÜi_diff
 = 
’d_Üi
 - 
¡¬t_Üi
;

574 ià(
	gÜi_diff
 <= 0)

576 
NODELET_WARN
("Üi_difà<ğ0, %d", 
Üi_diff
);

577 
	gÜi_diff
 = 
HÜizÚ_SCAN
;

579 
	gEig’
::
VeùÜ3f
 
½y_¡¬t
, 
	gshiá_¡¬t
, 
	gv–o_¡¬t
, 
	g½y_cur
, 
	gshiá_cur
, 
	gv–o_cur
;

580 
	gEig’
::
VeùÜ3f
 
shiá_äom_¡¬t
;

581 
	gEig’
::
M©rix3f
 
r_s_i
, 
	gr_c
;

582 
	gEig’
::
VeùÜ3f
 
adju¡ed_p
;

584 
	gi
 = 0; i < 
	gşoud_size
; ++i)

586 
	gPoštT
 &
	gp
 = 
şoud
->
pošts
[
i
];

588 
	g»l_time
 = (
£g_šfo
->
£gm’‹dCloudCŞInd
[
i
] - 
¡¬t_Üi
è* 
sÿn_³riod
 / 
Üi_diff
;

589 
	gcur_time
 = 
sÿn_time
 + 
»l_time
;

591 ià(
	gu£_imu
)

593 ià(
	gimu_±r_Ï¡_
 > 0)

595 
	gimu_±r_äÚt_
 = 
imu_±r_Ï¡_™”_
;

596 
	gimu_±r_äÚt_
 !ğ
imu_±r_Ï¡_
)

598 ià(
cur_time
 < 
imu_time_
[
imu_±r_äÚt_
])

602 
	gimu_±r_äÚt_
 = (
imu_±r_äÚt_
 + 1è% 
imu_queue_Ëngth
;

604 ià(
abs
(
cur_time
 - 
imu_time_
[
imu_±r_äÚt_
]è> 
	gsÿn_³riod
)

606 
NODELET_WARN_COND
(
i
 < 5, "unsynøimu‡nd…ømsg %d, %d, %.6f, %.6f", 
imu_±r_äÚt_
, 
imu_±r_Ï¡_
, 
cur_time
, 
imu_time_
[imu_ptr_front_]);

610 ià(
	gcur_time
 > 
	gimu_time_
[
imu_±r_äÚt_
])

612 
½y_cur
(0èğ
imu_rŞl_
[
imu_±r_äÚt_
];

613 
½y_cur
(1èğ
imu_p™ch_
[
imu_±r_äÚt_
];

614 
½y_cur
(2èğ
imu_yaw_
[
imu_±r_äÚt_
];

615 
shiá_cur
(0èğ
imu_shiá_x_
[
imu_±r_äÚt_
];

616 
shiá_cur
(1èğ
imu_shiá_y_
[
imu_±r_äÚt_
];

617 
shiá_cur
(2èğ
imu_shiá_z_
[
imu_±r_äÚt_
];

618 
v–o_cur
(0èğ
imu_v–o_x_
[
imu_±r_äÚt_
];

619 
v–o_cur
(1èğ
imu_v–o_y_
[
imu_±r_äÚt_
];

620 
v–o_cur
(2èğ
imu_v–o_z_
[
imu_±r_äÚt_
];

624 
	gimu_±r_back
 = (
imu_±r_äÚt_
 - 1 + 
imu_queue_Ëngth
) % imu_queue_length;

625 
	g¿tio_äÚt
 = (
cur_time
 - 
imu_time_
[
imu_±r_back
]è/ (imu_time_[
imu_±r_äÚt_
] - imu_time_[imu_ptr_back]);

626 
	g¿tio_back
 = 1. - 
¿tio_äÚt
;

627 
½y_cur
(0èğ
imu_rŞl_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_rŞl_[
imu_±r_back
] * 
¿tio_back
;

628 
½y_cur
(1èğ
imu_p™ch_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_p™ch_[
imu_±r_back
] * 
¿tio_back
;

629 
½y_cur
(2èğ
imu_yaw_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_yaw_[
imu_±r_back
] * 
¿tio_back
;

630 
shiá_cur
(0èğ
imu_shiá_x_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_shiá_x_[
imu_±r_back
] * 
¿tio_back
;

631 
shiá_cur
(1èğ
imu_shiá_y_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_shiá_y_[
imu_±r_back
] * 
¿tio_back
;

632 
shiá_cur
(2èğ
imu_shiá_z_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_shiá_z_[
imu_±r_back
] * 
¿tio_back
;

633 
v–o_cur
(0èğ
imu_v–o_x_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_v–o_x_[
imu_±r_back
] * 
¿tio_back
;

634 
v–o_cur
(1èğ
imu_v–o_y_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_v–o_y_[
imu_±r_back
] * 
¿tio_back
;

635 
v–o_cur
(2èğ
imu_v–o_z_
[
imu_±r_äÚt_
] * 
¿tio_äÚt
 + imu_v–o_z_[
imu_±r_back
] * 
¿tio_back
;

638 
	gr_c
 = (
Eig’
::
AngËAxisf
(
½y_cur
(2), Eig’::
VeùÜ3f
::
Un™Z
()è* Eig’::AngËAxisfÔpy_cur(1), Eig’::VeùÜ3f::
Un™Y
()è* Eig’::AngËAxisfÔpy_cur(0), Eig’::VeùÜ3f::
Un™X
())).
toRÙ©iÚM©rix
();

640 ià(
	gi
 == 0)

642 
½y_¡¬t
 = 
½y_cur
;

643 
	gshiá_¡¬t
 = 
shiá_cur
;

644 
	gv–o_¡¬t
 = 
v–o_cur
;

645 
	gr_s_i
 = 
r_c
.
šv”£
();

649 
	gshiá_äom_¡¬t
 = 
shiá_cur
 - 
shiá_¡¬t
 - 
v–o_¡¬t
 * 
»l_time
;

650 
	gadju¡ed_p
 = 
r_s_i
 * (
r_c
 * 
Eig’
::
VeùÜ3f
(
p
.
x
,….
y
,….
z
è+ 
	gshiá_äom_¡¬t
);

651 
	gp
.
	gx
 = 
adju¡ed_p
.
x
();

652 
	gp
.
	gy
 = 
adju¡ed_p
.
y
();

653 
	gp
.
	gz
 = 
adju¡ed_p
.
z
();

655 
	gimu_±r_Ï¡_™”_
 = 
imu_±r_äÚt_
;

658 ià(
	gu£_odom
)

660 ià(
	godom_±r_Ï¡_
 > 0)

662 
	godom_±r_äÚt_
 = 
odom_±r_Ï¡_™”_
;

663 
	godom_±r_äÚt_
 !ğ
odom_±r_Ï¡_
)

665 ià(
cur_time
 > 
odom_queue_
[
odom_±r_äÚt_
]->
h—d”
.
¡amp
.
toSec
())

669 
	godom_±r_äÚt_
 = (
odom_±r_äÚt_
 + 1è% 
odom_queue_Ëngth
;

671 ià(
	gcur_time
 > 
	godom_queue_
[
odom_±r_äÚt_
]->
	gh—d”
.
	g¡amp
.
toSec
())

673 
½y_cur
(0èğ
odom_rŞl_
[
odom_±r_äÚt_
];

674 
½y_cur
(1èğ
odom_p™ch_
[
odom_±r_äÚt_
];

675 
½y_cur
(2èğ
odom_yaw_
[
odom_±r_äÚt_
];

676 
shiá_cur
(0èğ
odom_queue_
[
odom_±r_äÚt_
]->
po£
.po£.
pos™iÚ
.
x
;

677 
shiá_cur
(1èğ
odom_queue_
[
odom_±r_äÚt_
]->
po£
.po£.
pos™iÚ
.
y
;

678 
shiá_cur
(2èğ
odom_queue_
[
odom_±r_äÚt_
]->
po£
.po£.
pos™iÚ
.
z
;

679 
v–o_cur
(0èğ
odom_queue_
[
odom_±r_äÚt_
]->
twi¡
.twi¡.
lš—r
.
x
;

680 
v–o_cur
(1èğ
odom_queue_
[
odom_±r_äÚt_
]->
twi¡
.twi¡.
lš—r
.
y
;

681 
v–o_cur
(2èğ
odom_queue_
[
odom_±r_äÚt_
]->
twi¡
.twi¡.
lš—r
.
z
;

685 
	godom_±r_back
 = (
odom_±r_äÚt_
 - 1 + 
odom_queue_Ëngth
) % odom_queue_length;

686 
	g¿tio_äÚt
 = (
cur_time
 - 
odom_queue_
[
odom_±r_back
]->
h—d”
.
¡amp
.
toSec
()è/ (odom_queue_[
odom_±r_äÚt_
]->header.stamp.toSec() - odom_queue_[odom_ptr_back]->header.stamp.toSec());

687 
	g¿tio_back
 = 1. - 
¿tio_äÚt
;

688 
½y_cur
(0èğ
¿tio_äÚt
 * 
odom_rŞl_
[
odom_±r_äÚt_
] + 
¿tio_back
 * odom_rŞl_[
odom_±r_back
];

689 
½y_cur
(1èğ
¿tio_äÚt
 * 
odom_p™ch_
[
odom_±r_äÚt_
] + 
¿tio_back
 * odom_p™ch_[
odom_±r_back
];

690 
½y_cur
(2èğ
¿tio_äÚt
 * 
odom_yaw_
[
odom_±r_äÚt_
] + 
¿tio_back
 * odom_yaw_[
odom_±r_back
];

691 
shiá_cur
(0èğ
¿tio_äÚt
 * 
odom_queue_
[
odom_±r_äÚt_
]->
po£
.po£.
pos™iÚ
.
x
 + 
¿tio_back
 * odom_queue_[odom_ptr_front_]->pose.pose.position.x;

692 
shiá_cur
(1èğ
¿tio_äÚt
 * 
odom_queue_
[
odom_±r_äÚt_
]->
po£
.po£.
pos™iÚ
.
y
 + 
¿tio_back
 * odom_queue_[odom_ptr_front_]->pose.pose.position.y;

693 
shiá_cur
(2èğ
¿tio_äÚt
 * 
odom_queue_
[
odom_±r_äÚt_
]->
po£
.po£.
pos™iÚ
.
z
 + 
¿tio_back
 * odom_queue_[odom_ptr_front_]->pose.pose.position.z;

694 
v–o_cur
(0èğ
¿tio_äÚt
 * 
odom_queue_
[
odom_±r_äÚt_
]->
twi¡
.twi¡.
lš—r
.
x
 + 
¿tio_back
 * odom_queue_[odom_ptr_front_]->twist.twist.linear.x;

695 
v–o_cur
(1èğ
¿tio_äÚt
 * 
odom_queue_
[
odom_±r_äÚt_
]->
twi¡
.twi¡.
lš—r
.
y
 + 
¿tio_back
 * odom_queue_[odom_ptr_front_]->twist.twist.linear.y;

696 
v–o_cur
(2èğ
¿tio_äÚt
 * 
odom_queue_
[
odom_±r_äÚt_
]->
twi¡
.twi¡.
lš—r
.
z
 + 
¿tio_back
 * odom_queue_[odom_ptr_front_]->twist.twist.linear.z;

698 
	gr_c
 = (
Eig’
::
AngËAxisf
(
½y_cur
(2), Eig’::
VeùÜ3f
::
Un™Z
()è* Eig’::AngËAxisfÔpy_cur(1), Eig’::VeùÜ3f::
Un™Y
()è* Eig’::AngËAxisfÔpy_cur(0), Eig’::VeùÜ3f::
Un™X
())).
toRÙ©iÚM©rix
();

699 ià(
	gi
 == 0)

701 
½y_¡¬t
 = 
½y_cur
;

702 
	gshiá_¡¬t
 = 
shiá_cur
;

703 
	gv–o_¡¬t
 = 
v–o_cur
;

704 
	gr_s_i
 = 
r_c
.
šv”£
();

708 
	gshiá_äom_¡¬t
 = 
shiá_cur
 - 
shiá_¡¬t
 - 
v–o_¡¬t
 * 
»l_time
;

709 
	gadju¡ed_p
 = 
r_s_i
 * (
r_c
 * 
Eig’
::
VeùÜ3f
(
p
.
x
,….
y
,….
z
è+ 
	gshiá_äom_¡¬t
);

710 
	gp
.
	gx
 = 
adju¡ed_p
.
x
();

711 
	gp
.
	gy
 = 
adju¡ed_p
.
y
();

712 
	gp
.
	gz
 = 
adju¡ed_p
.
z
();

714 
	godom_±r_Ï¡_™”_
 = 
odom_±r_äÚt_
;

718 ià(
	gpub_undi¡Ü‹d_pc_
.
g‘NumSubsüib”s
() > 0)

720 
	g£nsÜ_msgs
::
PoštCloud2PŒ
 
msg
(
Ãw
 
£nsÜ_msgs
::
PoštCloud2
());

721 
	gpş
::
toROSMsg
(*
şoud
, *
msg
);

722 
	gmsg
->
	gh—d”
.
	g¡amp
.
äomSec
(
sÿn_time
);

723 
	gmsg
->
	gh—d”
.
	gäame_id
 = "/laser";

724 
	gpub_undi¡Ü‹d_pc_
.
publish
(
msg
);

728 
	gLa£rOdom‘ry
::
ŒªsfÜmToS¹
(cÚ¡ 
PoštT
 &
pi
, PoštT &
po
)

730 
	gs
 = 1;

731 
	gEig’
::
M©rix3d
 
r_pošt_Ï¡
 = (
Eig’
::
AngËAxisd
(
·¿ms_
[5] * 
s
, Eig’::
VeùÜ3d
::
Un™Z
()è* Eig’::AngËAxisdÕ¬ams_[4] * s, Eig’::VeùÜ3d::
Un™Y
()è* Eig’::AngËAxisdÕ¬ams_[3] * s, Eig’::VeùÜ3d::
Un™X
())).
toRÙ©iÚM©rix
();

732 
	gEig’
::
VeùÜ3d
 
t_pošt_Ï¡
(
·¿ms_
[0] * 
s
,…arams_[1] * s,…arams_[2] * s);

733 
	gEig’
::
VeùÜ3d
 
pošt
(
pi
.
x
,…i.
y
,…i.
z
);

734 
	gEig’
::
VeùÜ3d
 
un_pošt
 = 
r_pošt_Ï¡
 * 
pošt
 + 
t_pošt_Ï¡
;

736 
	gpo
.
	gx
 = 
un_pošt
.
x
();

737 
	gpo
.
	gy
 = 
un_pošt
.
y
();

738 
	gpo
.
	gz
 = 
un_pošt
.
z
();

739 
	gpo
.
	gš‹ns™y
 = 
pi
.
š‹ns™y
;

742 
	gLa£rOdom‘ry
::
£gCloudHªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
)

744 
m_buf_
.
lock
();

745 
	g£g_şoud_buf_
.
push
(
msg
);

746 
	gm_buf_
.
uÆock
();

748 
	gLa£rOdom‘ry
::
£gInfoHªdËr
(cÚ¡ 
şoud_msgs
::
şoud_šfoCÚ¡PŒ
 &
msg
)

750 
m_buf_
.
lock
();

751 
	g£g_šfo_buf_
.
push
(
msg
);

752 
	gm_buf_
.
uÆock
();

754 
	gLa£rOdom‘ry
::
ou›rHªdËr
(cÚ¡ 
£nsÜ_msgs
::
PoštCloud2CÚ¡PŒ
 &
msg
)

756 
m_buf_
.
lock
();

757 
	gou›r_buf_
.
push
(
msg
);

758 
	gm_buf_
.
uÆock
();

761 
	gLa£rOdom‘ry
::
imuHªdËr
(cÚ¡ 
£nsÜ_msgs
::
ImuCÚ¡PŒ
 &
msg
)

764 
rŞl
, 
	gp™ch
, 
	gyaw
;

765 
	gtf
::
Qu©”niÚ
 
Üi
;

766 
	gtf
::
qu©”niÚMsgToTF
(
msg
->
Ü›Á©iÚ
, 
Üi
);

767 
	gtf
::
M©rix3x3
(
Üi
).
g‘RPY
(
rŞl
, 
p™ch
, 
yaw
);

768 
	gacc_x
 = 
msg
->
lš—r_acûË¿tiÚ
.
x
 + 9.81 * 
sš
(
p™ch
);

769 
	gacc_y
 = 
msg
->
lš—r_acûË¿tiÚ
.
y
 - 9.81 * 
cos
(
p™ch
è* 
sš
(
rŞl
);

770 
	gacc_z
 = 
msg
->
lš—r_acûË¿tiÚ
.
z
 - 9.81 * 
cos
(
p™ch
è* cos(
rŞl
);

772 
	gimu_±r_Ï¡_
 = (
imu_±r_Ï¡_
 + 1è% 
imu_queue_Ëngth
;

773 ià((
	gimu_±r_Ï¡_
 + 1è% 
	gimu_queue_Ëngth
 =ğ
imu_±r_äÚt_
)

775 
imu_±r_äÚt_
 = (imu_±r_äÚt_ + 1è% 
imu_queue_Ëngth
;

778 
	gimu_time_
[
imu_±r_Ï¡_
] = 
msg
->
h—d”
.
¡amp
.
toSec
();

779 
	gimu_rŞl_
[
imu_±r_Ï¡_
] = 
rŞl
;

780 
	gimu_p™ch_
[
imu_±r_Ï¡_
] = 
p™ch
;

781 
	gimu_yaw_
[
imu_±r_Ï¡_
] = 
yaw
;

784 
	gEig’
::
M©rix3f
 
rÙ
 = 
Eig’
::
Qu©”niÚf
(
msg
->
Ü›Á©iÚ
.
w
, msg->Ü›Á©iÚ.
x
, msg->Ü›Á©iÚ.
y
, msg->Ü›Á©iÚ.
z
).
toRÙ©iÚM©rix
();

785 
	gEig’
::
VeùÜ3f
 
acc
 = 
rÙ
 * 
Eig’
::VeùÜ3f(
acc_x
, 
acc_y
, 
acc_z
);

788 
	gEig’
::
VeùÜ3f
 
ªguÏr_v–o
(
msg
->
ªguÏr_v–oc™y
.
x
, msg->ªguÏr_v–oc™y.
y
, msg->ªguÏr_v–oc™y.
z
);

790 
	gimu_±r_back
 = (
imu_±r_Ï¡_
 - 1 + 
imu_queue_Ëngth
) % imu_queue_length;

791 
	gtime_diff
 = 
imu_time_
[
imu_±r_Ï¡_
] - imu_time_[
imu_±r_back
];

792 ià(
	gtime_diff
 < 1.)

794 
	gimu_shiá_x_
[
imu_±r_Ï¡_
] = 
imu_shiá_x_
[
imu_±r_back
] + 
imu_v–o_x_
[imu_±r_back] * 
time_diff
 + 
acc
(0) *ime_diff *ime_diff * 0.5;

795 
	gimu_shiá_y_
[
imu_±r_Ï¡_
] = 
imu_shiá_y_
[
imu_±r_back
] + 
imu_v–o_y_
[imu_±r_back] * 
time_diff
 + 
acc
(1) *ime_diff *ime_diff * 0.5;

796 
	gimu_shiá_z_
[
imu_±r_Ï¡_
] = 
imu_shiá_z_
[
imu_±r_back
] + 
imu_v–o_z_
[imu_±r_back] * 
time_diff
 + 
acc
(2) *ime_diff *ime_diff * 0.5;

798 
	gimu_v–o_x_
[
imu_±r_Ï¡_
] = 
imu_v–o_x_
[
imu_±r_back
] + 
acc
(0è* 
time_diff
;

799 
	gimu_v–o_y_
[
imu_±r_Ï¡_
] = 
imu_v–o_y_
[
imu_±r_back
] + 
acc
(1è* 
time_diff
;

800 
	gimu_v–o_z_
[
imu_±r_Ï¡_
] = 
imu_v–o_z_
[
imu_±r_back
] + 
acc
(2è* 
time_diff
;

803 
	gLa£rOdom‘ry
::
odomHªdËr
(cÚ¡ 
Çv_msgs
::
Odom‘ryCÚ¡PŒ
 &
msg
)

807 
rŞl
, 
	gp™ch
, 
	gyaw
;

808 
	gtf
::
Qu©”niÚ
 
Üi
;

809 
	gtf
::
qu©”niÚMsgToTF
(
msg
->
po£
.po£.
Ü›Á©iÚ
, 
Üi
);

810 
	gtf
::
M©rix3x3
(
Üi
).
g‘RPY
(
rŞl
, 
p™ch
, 
yaw
);

812 
	godom_±r_Ï¡_
 = (
odom_±r_Ï¡_
 + 1è% 
odom_queue_Ëngth
;

813 
	godom_rŞl_
[
odom_±r_Ï¡_
] = 
rŞl
;

814 
	godom_p™ch_
[
odom_±r_Ï¡_
] = 
p™ch
;

815 
	godom_yaw_
[
odom_±r_Ï¡_
] = 
yaw
;

	@/usr/include/ceres/ceres.h

34 #iâdeà
CERES_PUBLIC_CERES_H_


35 
	#CERES_PUBLIC_CERES_H_


	)

37 
	~"û»s/autodiff_co¡_funùiÚ.h
"

38 
	~"û»s/autodiff_loÿl_·¿m‘”iz©iÚ.h
"

39 
	~"û»s/co¡_funùiÚ.h
"

40 
	~"û»s/co¡_funùiÚ_to_funùÜ.h
"

41 
	~"û»s/cov¬Ÿnû.h
"

42 
	~"û»s/üs_m©rix.h
"

43 
	~"û»s/dyÇmic_autodiff_co¡_funùiÚ.h
"

44 
	~"û»s/dyÇmic_num”ic_diff_co¡_funùiÚ.h
"

45 
	~"û»s/g¿d›Á_´obËm.h
"

46 
	~"û»s/g¿d›Á_´obËm_sŞv”.h
"

47 
	~"û»s/™”©iÚ_ÿÎback.h
"

48 
	~"û»s/j‘.h
"

49 
	~"û»s/loÿl_·¿m‘”iz©iÚ.h
"

50 
	~"û»s/loss_funùiÚ.h
"

51 
	~"û»s/num”ic_diff_co¡_funùiÚ.h
"

52 
	~"û»s/Üd”ed_groups.h
"

53 
	~"û»s/´obËm.h
"

54 
	~"û»s/sized_co¡_funùiÚ.h
"

55 
	~"û»s/sŞv”.h
"

56 
	~"û»s/ty³s.h
"

57 
	~"û»s/v”siÚ.h
"

	@/usr/include/ceres/rotation.h

45 #iâdeà
CERES_PUBLIC_ROTATION_H_


46 
	#CERES_PUBLIC_ROTATION_H_


	)

48 
	~<®gÜ™hm
>

49 
	~<cm©h
>

50 
	~<lim™s
>

52 
Çme¥aû
 
	gû»s
 {

67 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
>

68 
	gM©rixAd­‹r
;

73 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

74 
	gM©rixAd­‹r
<
	gT
, 1, 3> 
CŞumnMajÜAd­‹r3x3
(
T
* 
poš‹r
);

76 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

77 
	gM©rixAd­‹r
<
	gT
, 3, 1> 
RowMajÜAd­‹r3x3
(
T
* 
poš‹r
);

85 
	g‹m¶©e
<
ty³Çme
 
	gT
>

86 
AngËAxisToQu©”niÚ
(cÚ¡ 
T
* 
ªgË_axis
, T* 
qu©”niÚ
);

94 
	g‹m¶©e
<
ty³Çme
 
	gT
>

95 
Qu©”niÚToAngËAxis
(cÚ¡ 
T
* 
qu©”niÚ
, T* 
ªgË_axis
);

100 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

101 
RÙ©iÚM©rixToQu©”niÚ
(cÚ¡ 
T
* 
R
, T* 
qu©”niÚ
);

103 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
>

104 
RÙ©iÚM©rixToQu©”niÚ
(

105 cÚ¡ 
M©rixAd­‹r
<cÚ¡ 
T
, 
row_¡ride
, 
cŞ_¡ride
>& 
R
,

106 
T
* 
qu©”niÚ
);

111 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

112 
RÙ©iÚM©rixToAngËAxis
(cÚ¡ 
T
* 
R
, T* 
ªgË_axis
);

114 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
>

115 
RÙ©iÚM©rixToAngËAxis
(

116 cÚ¡ 
M©rixAd­‹r
<cÚ¡ 
T
, 
row_¡ride
, 
cŞ_¡ride
>& 
R
,

117 
T
* 
ªgË_axis
);

119 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

120 
AngËAxisToRÙ©iÚM©rix
(cÚ¡ 
T
* 
ªgË_axis
, T* 
R
);

122 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
>

123 
AngËAxisToRÙ©iÚM©rix
(

124 cÚ¡ 
T
* 
ªgË_axis
,

125 cÚ¡ 
M©rixAd­‹r
<
T
, 
row_¡ride
, 
cŞ_¡ride
>& 
R
);

133 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

134 
EuËrAngËsToRÙ©iÚM©rix
(cÚ¡ 
T
* 
euËr
, 
row_¡ride
, T* 
R
);

136 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
>

137 
EuËrAngËsToRÙ©iÚM©rix
(

138 cÚ¡ 
T
* 
euËr
,

139 cÚ¡ 
M©rixAd­‹r
<
T
, 
row_¡ride
, 
cŞ_¡ride
>& 
R
);

160 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
šlše


161 
Qu©”niÚToSÿËdRÙ©iÚ
(cÚ¡ 
T
 
q
[4], T 
R
[3 * 3]);

163 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
> 
šlše


164 
Qu©”niÚToSÿËdRÙ©iÚ
(

165 cÚ¡ 
T
 
q
[4],

166 cÚ¡ 
M©rixAd­‹r
<
T
, 
row_¡ride
, 
cŞ_¡ride
>& 
R
);

172 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
šlše


173 
Qu©”niÚToRÙ©iÚ
(cÚ¡ 
T
 
q
[4], T 
R
[3 * 3]);

175 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
> 
šlše


176 
Qu©”niÚToRÙ©iÚ
(

177 cÚ¡ 
T
 
q
[4],

178 cÚ¡ 
M©rixAd­‹r
<
T
, 
row_¡ride
, 
cŞ_¡ride
>& 
R
);

188 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
šlše


189 
Un™Qu©”niÚRÙ©ePošt
(cÚ¡ 
T
 
q
[4], cÚ¡ T 
±
[3], T 
»suÉ
[3]);

193 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
šlše


194 
Qu©”niÚRÙ©ePošt
(cÚ¡ 
T
 
q
[4], cÚ¡ T 
±
[3], T 
»suÉ
[3]);

197 
	g‹m¶©e
<
ty³Çme
 
	gT
> 
šlše


198 
Qu©”niÚProduù
(cÚ¡ 
T
 
z
[4], cÚ¡ T 
w
[4], T 
zw
[4]);

201 
	g‹m¶©e
<
ty³Çme
 
	gT
> 
šlše


202 
CrossProduù
(cÚ¡ 
T
 
x
[3], cÚ¡ T 
y
[3], T 
x_üoss_y
[3]);

204 
	g‹m¶©e
<
ty³Çme
 
	gT
> 
šlše


205 
T
 
DÙProduù
(cÚ¡ T 
x
[3], cÚ¡ T 
y
[3]);

208 
	g‹m¶©e
<
ty³Çme
 
	gT
> 
šlše


209 
AngËAxisRÙ©ePošt
(cÚ¡ 
T
 
ªgË_axis
[3], cÚ¡ T 
±
[3], T 
»suÉ
[3]);

213 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
>

214 
	sM©rixAd­‹r
 {

215 
T
* 
	gpoš‹r_
;

216 
ex¶ic™
 
M©rixAd­‹r
(
T
* 
poš‹r
)

217 : 
poš‹r_
(
poš‹r
)

220 
T
& 
İ”©Ü
()(
r
, 
	gc
) const {

221  
	gpoš‹r_
[
r
 * 
row_¡ride
 + 
c
 * 
cŞ_¡ride
];

225 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

226 
	gM©rixAd­‹r
<
	gT
, 1, 3> 
CŞumnMajÜAd­‹r3x3
(
T
* 
poš‹r
) {

227  
	gM©rixAd­‹r
<
	gT
, 1, 3>(
	gpoš‹r
);

230 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

231 
	gM©rixAd­‹r
<
	gT
, 3, 1> 
RowMajÜAd­‹r3x3
(
T
* 
poš‹r
) {

232  
	gM©rixAd­‹r
<
	gT
, 3, 1>(
	gpoš‹r
);

235 
	g‹m¶©e
<
ty³Çme
 
	gT
>

236 
šlše
 
AngËAxisToQu©”niÚ
(cÚ¡ 
T
* 
ªgË_axis
, T* 
qu©”niÚ
) {

237 cÚ¡ 
	gT
& 
	ga0
 = 
ªgË_axis
[0];

238 cÚ¡ 
	gT
& 
	ga1
 = 
ªgË_axis
[1];

239 cÚ¡ 
	gT
& 
	ga2
 = 
ªgË_axis
[2];

240 cÚ¡ 
T
 
	gth‘a_squ¬ed
 = 
a0
 *‡0 + 
a1
 *‡1 + 
a2
 *‡2;

243 ià(
	gth‘a_squ¬ed
 > 
T
(0.0)) {

244 cÚ¡ 
T
 
	gth‘a
 = 
sq¹
(
th‘a_squ¬ed
);

245 cÚ¡ 
T
 
	gh®f_th‘a
 = 
th‘a
 * T(0.5);

246 cÚ¡ 
T
 
	gk
 = 
sš
(
h®f_th‘a
è/ 
th‘a
;

247 
	gqu©”niÚ
[0] = 
cos
(
h®f_th‘a
);

248 
	gqu©”niÚ
[1] = 
a0
 * 
k
;

249 
	gqu©”niÚ
[2] = 
a1
 * 
k
;

250 
	gqu©”niÚ
[3] = 
a2
 * 
k
;

256 cÚ¡ 
T
 
k
(0.5);

257 
	gqu©”niÚ
[0] = 
T
(1.0);

258 
	gqu©”niÚ
[1] = 
a0
 * 
k
;

259 
	gqu©”niÚ
[2] = 
a1
 * 
k
;

260 
	gqu©”niÚ
[3] = 
a2
 * 
k
;

264 
	g‹m¶©e
<
ty³Çme
 
	gT
>

265 
šlše
 
Qu©”niÚToAngËAxis
(cÚ¡ 
T
* 
qu©”niÚ
, T* 
ªgË_axis
) {

266 cÚ¡ 
	gT
& 
	gq1
 = 
qu©”niÚ
[1];

267 cÚ¡ 
	gT
& 
	gq2
 = 
qu©”niÚ
[2];

268 cÚ¡ 
	gT
& 
	gq3
 = 
qu©”niÚ
[3];

269 cÚ¡ 
T
 
	gsš_squ¬ed_th‘a
 = 
q1
 * q1 + 
q2
 * q2 + 
q3
 * q3;

273 ià(
	gsš_squ¬ed_th‘a
 > 
T
(0.0)) {

274 cÚ¡ 
T
 
	gsš_th‘a
 = 
sq¹
(
sš_squ¬ed_th‘a
);

275 cÚ¡ 
	gT
& 
	gcos_th‘a
 = 
qu©”niÚ
[0];

290 cÚ¡ 
T
 
	gtwo_th‘a
 =

291 
T
(2.0è* ((
cos_th‘a
 < 0.0)

292 ? 
©ª2
(-
sš_th‘a
, -
cos_th‘a
)

293 : 
©ª2
(
sš_th‘a
, 
cos_th‘a
));

294 cÚ¡ 
T
 
	gk
 = 
two_th‘a
 / 
sš_th‘a
;

295 
	gªgË_axis
[0] = 
q1
 * 
k
;

296 
	gªgË_axis
[1] = 
q2
 * 
k
;

297 
	gªgË_axis
[2] = 
q3
 * 
k
;

303 cÚ¡ 
T
 
k
(2.0);

304 
	gªgË_axis
[0] = 
q1
 * 
k
;

305 
	gªgË_axis
[1] = 
q2
 * 
k
;

306 
	gªgË_axis
[2] = 
q3
 * 
k
;

310 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

311 
RÙ©iÚM©rixToQu©”niÚ
(cÚ¡ 
T
* 
R
, T* 
ªgË_axis
) {

312 
RÙ©iÚM©rixToQu©”niÚ
(
CŞumnMajÜAd­‹r3x3
(
R
), 
ªgË_axis
);

317 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
>

318 
RÙ©iÚM©rixToQu©”niÚ
(

319 cÚ¡ 
M©rixAd­‹r
<cÚ¡ 
T
, 
row_¡ride
, 
cŞ_¡ride
>& 
R
,

320 
T
* 
qu©”niÚ
) {

321 cÚ¡ 
T
 
	gŒaû
 = 
R
(0, 0) + R(1, 1) + R(2, 2);

322 ià(
	gŒaû
 >= 0.0) {

323 
T
 
t
 = 
sq¹
(
Œaû
 + T(1.0));

324 
	gqu©”niÚ
[0] = 
T
(0.5è* 
t
;

325 
	gt
 = 
T
(0.5è/ 
t
;

326 
	gqu©”niÚ
[1] = (
R
(2, 1è- R(1, 2)è* 
	gt
;

327 
	gqu©”niÚ
[2] = (
R
(0, 2è- R(2, 0)è* 
	gt
;

328 
	gqu©”niÚ
[3] = (
R
(1, 0è- R(0, 1)è* 
	gt
;

330 
	gi
 = 0;

331 ià(
R
(1, 1) > R(0, 0)) {

332 
	gi
 = 1;

335 ià(
R
(2, 2è> R(
i
, i)) {

336 
	gi
 = 2;

339 cÚ¡ 
	gj
 = (
i
 + 1) % 3;

340 cÚ¡ 
	gk
 = (
j
 + 1) % 3;

341 
T
 
	gt
 = 
sq¹
(
R
(
i
, iè- R(
j
, jè- R(
k
, k) + T(1.0));

342 
	gqu©”niÚ
[
i
 + 1] = 
T
(0.5è* 
t
;

343 
	gt
 = 
T
(0.5è/ 
t
;

344 
	gqu©”niÚ
[0] = (
R
(
k
, 
j
è- R(j, k)è* 
	gt
;

345 
	gqu©”niÚ
[
j
 + 1] = (
R
(j, 
i
è+ R(i, j)è* 
	gt
;

346 
	gqu©”niÚ
[
k
 + 1] = (
R
(k, 
i
è+ R(i, k)è* 
	gt
;

355 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

356 
šlše
 
RÙ©iÚM©rixToAngËAxis
(cÚ¡ 
T
* 
R
, T* 
ªgË_axis
) {

357 
RÙ©iÚM©rixToAngËAxis
(
CŞumnMajÜAd­‹r3x3
(
R
), 
ªgË_axis
);

360 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
>

361 
RÙ©iÚM©rixToAngËAxis
(

362 cÚ¡ 
M©rixAd­‹r
<cÚ¡ 
T
, 
row_¡ride
, 
cŞ_¡ride
>& 
R
,

363 
T
* 
ªgË_axis
) {

364 
T
 
	gqu©”niÚ
[4];

365 
RÙ©iÚM©rixToQu©”niÚ
(
R
, 
qu©”niÚ
);

366 
Qu©”niÚToAngËAxis
(
qu©”niÚ
, 
ªgË_axis
);

370 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

371 
šlše
 
AngËAxisToRÙ©iÚM©rix
(cÚ¡ 
T
* 
ªgË_axis
, T* 
R
) {

372 
AngËAxisToRÙ©iÚM©rix
(
ªgË_axis
, 
CŞumnMajÜAd­‹r3x3
(
R
));

375 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
>

376 
AngËAxisToRÙ©iÚM©rix
(

377 cÚ¡ 
T
* 
ªgË_axis
,

378 cÚ¡ 
M©rixAd­‹r
<
T
, 
row_¡ride
, 
cŞ_¡ride
>& 
R
) {

379 cÚ¡ 
T
 
	gkOÃ
 = T(1.0);

380 cÚ¡ 
T
 
	gth‘a2
 = 
DÙProduù
(
ªgË_axis
,‡ngle_axis);

381 ià(
	gth‘a2
 > 
T
(
¡d
::
num”ic_lim™s
<>::
•sÚ
())) {

385 cÚ¡ 
T
 
th‘a
 = 
sq¹
(
th‘a2
);

386 cÚ¡ 
T
 
	gwx
 = 
ªgË_axis
[0] / 
th‘a
;

387 cÚ¡ 
T
 
	gwy
 = 
ªgË_axis
[1] / 
th‘a
;

388 cÚ¡ 
T
 
	gwz
 = 
ªgË_axis
[2] / 
th‘a
;

390 cÚ¡ 
T
 
	gco¡h‘a
 = 
cos
(
th‘a
);

391 cÚ¡ 
T
 
	gsšth‘a
 = 
sš
(
th‘a
);

393 
R
(0, 0èğ
co¡h‘a
 + 
wx
*wx*(
kOÃ
 - costheta);

394 
R
(1, 0èğ
wz
*
sšth‘a
 + 
wx
*
wy
*(
kOÃ
 - 
co¡h‘a
);

395 
R
(2, 0èğ-
wy
*
sšth‘a
 + 
wx
*
wz
*(
kOÃ
 - 
co¡h‘a
);

396 
R
(0, 1èğ
wx
*
wy
*(
kOÃ
 - 
co¡h‘a
è- 
wz
*
sšth‘a
;

397 
R
(1, 1èğ
co¡h‘a
 + 
wy
*wy*(
kOÃ
 - costheta);

398 
R
(2, 1èğ
wx
*
sšth‘a
 + 
wy
*
wz
*(
kOÃ
 - 
co¡h‘a
);

399 
R
(0, 2èğ
wy
*
sšth‘a
 + 
wx
*
wz
*(
kOÃ
 - 
co¡h‘a
);

400 
R
(1, 2èğ-
wx
*
sšth‘a
 + 
wy
*
wz
*(
kOÃ
 - 
co¡h‘a
);

401 
R
(2, 2èğ
co¡h‘a
 + 
wz
*wz*(
kOÃ
 - costheta);

404 
R
(0, 0èğ
kOÃ
;

405 
R
(1, 0èğ
ªgË_axis
[2];

406 
R
(2, 0èğ-
ªgË_axis
[1];

407 
R
(0, 1èğ-
ªgË_axis
[2];

408 
R
(1, 1èğ
kOÃ
;

409 
R
(2, 1èğ
ªgË_axis
[0];

410 
R
(0, 2èğ
ªgË_axis
[1];

411 
R
(1, 2èğ-
ªgË_axis
[0];

412 
R
(2, 2èğ
kOÃ
;

416 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

417 
šlše
 
EuËrAngËsToRÙ©iÚM©rix
(cÚ¡ 
T
* 
euËr
,

418 cÚ¡ 
row_¡ride_·¿m‘”
,

419 
T
* 
R
) {

420 
EuËrAngËsToRÙ©iÚM©rix
(
euËr
, 
RowMajÜAd­‹r3x3
(
R
));

423 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
>

424 
EuËrAngËsToRÙ©iÚM©rix
(

425 cÚ¡ 
T
* 
euËr
,

426 cÚ¡ 
M©rixAd­‹r
<
T
, 
row_¡ride
, 
cŞ_¡ride
>& 
R
) {

427 cÚ¡ 
	gkPi
 = 3.14159265358979323846;

428 cÚ¡ 
T
 
deg»es_to_¿dŸns
(
kPi
 / 180.0);

430 cÚ¡ 
T
 
p™ch
(
euËr
[0] * 
deg»es_to_¿dŸns
);

431 cÚ¡ 
T
 
rŞl
(
euËr
[1] * 
deg»es_to_¿dŸns
);

432 cÚ¡ 
T
 
yaw
(
euËr
[2] * 
deg»es_to_¿dŸns
);

434 cÚ¡ 
T
 
	gc1
 = 
cos
(
yaw
);

435 cÚ¡ 
T
 
	gs1
 = 
sš
(
yaw
);

436 cÚ¡ 
T
 
	gc2
 = 
cos
(
rŞl
);

437 cÚ¡ 
T
 
	gs2
 = 
sš
(
rŞl
);

438 cÚ¡ 
T
 
	gc3
 = 
cos
(
p™ch
);

439 cÚ¡ 
T
 
	gs3
 = 
sš
(
p™ch
);

441 
R
(0, 0èğ
c1
*
c2
;

442 
R
(0, 1èğ-
s1
*
c3
 + 
c1
*
s2
*
s3
;

443 
R
(0, 2èğ
s1
*
s3
 + 
c1
*
s2
*
c3
;

445 
R
(1, 0èğ
s1
*
c2
;

446 
R
(1, 1èğ
c1
*
c3
 + 
s1
*
s2
*
s3
;

447 
R
(1, 2èğ-
c1
*
s3
 + 
s1
*
s2
*
c3
;

449 
R
(2, 0èğ-
s2
;

450 
R
(2, 1èğ
c2
*
s3
;

451 
R
(2, 2èğ
c2
*
c3
;

454 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
šlše


455 
Qu©”niÚToSÿËdRÙ©iÚ
(cÚ¡ 
T
 
q
[4], T 
R
[3 * 3]) {

456 
Qu©”niÚToSÿËdRÙ©iÚ
(
q
, 
RowMajÜAd­‹r3x3
(
R
));

459 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
> 
šlše


460 
Qu©”niÚToSÿËdRÙ©iÚ
(

461 cÚ¡ 
T
 
q
[4],

462 cÚ¡ 
M©rixAd­‹r
<
T
, 
row_¡ride
, 
cŞ_¡ride
>& 
R
) {

464 
T
 
	ga
 = 
q
[0];

465 
T
 
	gb
 = 
q
[1];

466 
T
 
	gc
 = 
q
[2];

467 
T
 
	gd
 = 
q
[3];

470 
T
 
	g¯
 = 
a
 *‡;

471 
T
 
	gab
 = 
a
 * 
b
;

472 
T
 
	gac
 = 
a
 * 
c
;

473 
T
 
	gad
 = 
a
 * 
d
;

474 
T
 
	gbb
 = 
b
 * b;

475 
T
 
	gbc
 = 
b
 * 
c
;

476 
T
 
	gbd
 = 
b
 * 
d
;

477 
T
 
	gcc
 = 
c
 * c;

478 
T
 
	gcd
 = 
c
 * 
d
;

479 
T
 
	gdd
 = 
d
 * d;

481 
R
(0, 0èğ
¯
 + 
bb
 - 
cc
 - 
dd
; R(0, 1èğ
T
(2è* (
bc
 - 
ad
); R(0, 2èğT(2è* (
ac
 + 
bd
);

482 
R
(1, 0èğ
T
(2è* (
ad
 + 
bc
); R(1, 1èğ
¯
 - 
bb
 + 
cc
 - 
dd
; R(1, 2èğT(2è* (
cd
 - 
ab
);

483 
R
(2, 0èğ
T
(2è* (
bd
 - 
ac
); R(2, 1èğT(2è* (
ab
 + 
cd
); R(2, 2èğ
¯
 - 
bb
 - 
cc
 + 
dd
;

486 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
šlše


487 
Qu©”niÚToRÙ©iÚ
(cÚ¡ 
T
 
q
[4], T 
R
[3 * 3]) {

488 
Qu©”niÚToRÙ©iÚ
(
q
, 
RowMajÜAd­‹r3x3
(
R
));

491 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	grow_¡ride
, 
	gcŞ_¡ride
> 
šlše


492 
Qu©”niÚToRÙ©iÚ
(cÚ¡ 
T
 
q
[4],

493 cÚ¡ 
M©rixAd­‹r
<
T
, 
row_¡ride
, 
cŞ_¡ride
>& 
R
) {

494 
Qu©”niÚToSÿËdRÙ©iÚ
(
q
, 
R
);

496 
T
 
	gnÜm®iz”
 = 
q
[0]*q[0] + q[1]*q[1] + q[2]*q[2] + q[3]*q[3];

497 
	gnÜm®iz”
 = 
T
(1è/ 
nÜm®iz”
;

499 
	gi
 = 0; i < 3; ++i) {

500 
	gj
 = 0; j < 3; ++j) {

501 
R
(
i
, 
j
è*ğ
nÜm®iz”
;

506 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
šlše


507 
Un™Qu©”niÚRÙ©ePošt
(cÚ¡ 
T
 
q
[4], cÚ¡ T 
±
[3], T 
»suÉ
[3]) {

508 cÚ¡ 
T
 
	gt2
 = 
q
[0] * q[1];

509 cÚ¡ 
T
 
	gt3
 = 
q
[0] * q[2];

510 cÚ¡ 
T
 
	gt4
 = 
q
[0] * q[3];

511 cÚ¡ 
T
 
	gt5
 = -
q
[1] * q[1];

512 cÚ¡ 
T
 
	gt6
 = 
q
[1] * q[2];

513 cÚ¡ 
T
 
	gt7
 = 
q
[1] * q[3];

514 cÚ¡ 
T
 
	gt8
 = -
q
[2] * q[2];

515 cÚ¡ 
T
 
	gt9
 = 
q
[2] * q[3];

516 cÚ¡ 
T
 
	gt1
 = -
q
[3] * q[3];

517 
	g»suÉ
[0] = 
T
(2è* ((
t8
 + 
t1
è* 
±
[0] + (
t6
 - 
t4
è*…t[1] + (
t3
 + 
t7
) *…t[2]) +…t[0];

518 
	g»suÉ
[1] = 
T
(2è* ((
t4
 + 
t6
è* 
±
[0] + (
t5
 + 
t1
è*…t[1] + (
t9
 - 
t2
) *…t[2]) +…t[1];

519 
	g»suÉ
[2] = 
T
(2è* ((
t7
 - 
t3
è* 
±
[0] + (
t2
 + 
t9
è*…t[1] + (
t5
 + 
t8
) *…t[2]) +…t[2];

522 
	g‹m¶©e
 <
ty³Çme
 
	gT
> 
šlše


523 
Qu©”niÚRÙ©ePošt
(cÚ¡ 
T
 
q
[4], cÚ¡ T 
±
[3], T 
»suÉ
[3]) {

525 cÚ¡ 
T
 
	gsÿË
 = T(1è/ 
sq¹
(
q
[0] * q[0] +

526 
q
[1] * q[1] +

527 
q
[2] * q[2] +

528 
q
[3] * q[3]);

531 cÚ¡ 
T
 
	gun™
[4] = {

532 
sÿË
 * 
q
[0],

533 
sÿË
 * 
q
[1],

534 
sÿË
 * 
q
[2],

535 
sÿË
 * 
q
[3],

538 
Un™Qu©”niÚRÙ©ePošt
(
un™
, 
±
, 
»suÉ
);

541 
	g‹m¶©e
<
ty³Çme
 
	gT
> 
šlše


542 
Qu©”niÚProduù
(cÚ¡ 
T
 
z
[4], cÚ¡ T 
w
[4], T 
zw
[4]) {

543 
	gzw
[0] = 
z
[0] * 
w
[0] - z[1] * w[1] - z[2] * w[2] - z[3] * w[3];

544 
	gzw
[1] = 
z
[0] * 
w
[1] + z[1] * w[0] + z[2] * w[3] - z[3] * w[2];

545 
	gzw
[2] = 
z
[0] * 
w
[2] - z[1] * w[3] + z[2] * w[0] + z[3] * w[1];

546 
	gzw
[3] = 
z
[0] * 
w
[3] + z[1] * w[2] - z[2] * w[1] + z[3] * w[0];

550 
	g‹m¶©e
<
ty³Çme
 
	gT
> 
šlše


551 
CrossProduù
(cÚ¡ 
T
 
x
[3], cÚ¡ T 
y
[3], T 
x_üoss_y
[3]) {

552 
	gx_üoss_y
[0] = 
x
[1] * 
y
[2] - x[2] * y[1];

553 
	gx_üoss_y
[1] = 
x
[2] * 
y
[0] - x[0] * y[2];

554 
	gx_üoss_y
[2] = 
x
[0] * 
y
[1] - x[1] * y[0];

557 
	g‹m¶©e
<
ty³Çme
 
	gT
> 
šlše


558 
T
 
DÙProduù
(cÚ¡ T 
x
[3], cÚ¡ T 
y
[3]) {

559  (
	gx
[0] * 
	gy
[0] + x[1] * y[1] + x[2] * y[2]);

562 
	g‹m¶©e
<
ty³Çme
 
	gT
> 
šlše


563 
AngËAxisRÙ©ePošt
(cÚ¡ 
T
 
ªgË_axis
[3], cÚ¡ T 
±
[3], T 
»suÉ
[3]) {

564 cÚ¡ 
T
 
	gth‘a2
 = 
DÙProduù
(
ªgË_axis
,‡ngle_axis);

565 ià(
	gth‘a2
 > 
T
(
¡d
::
num”ic_lim™s
<>::
•sÚ
())) {

576 cÚ¡ 
T
 
th‘a
 = 
sq¹
(
th‘a2
);

577 cÚ¡ 
T
 
	gco¡h‘a
 = 
cos
(
th‘a
);

578 cÚ¡ 
T
 
	gsšth‘a
 = 
sš
(
th‘a
);

579 cÚ¡ 
T
 
	gth‘a_šv”£
 = T(1.0è/ 
th‘a
;

581 cÚ¡ 
T
 
	gw
[3] = { 
ªgË_axis
[0] * 
th‘a_šv”£
,

582 
ªgË_axis
[1] * 
th‘a_šv”£
,

583 
ªgË_axis
[2] * 
th‘a_šv”£
 };

587 cÚ¡ 
T
 
	gw_üoss_±
[3] = { 
w
[1] * 
±
[2] - w[2] *…t[1],

588 
w
[2] * 
±
[0] - w[0] *…t[2],

589 
w
[0] * 
±
[1] - w[1] *…t[0] };

590 cÚ¡ 
T
 
	gtmp
 =

591 (
w
[0] * 
±
[0] + w[1] *…t[1] + w[2] *…t[2]è* (
T
(1.0è- 
co¡h‘a
);

593 
	g»suÉ
[0] = 
±
[0] * 
co¡h‘a
 + 
w_üoss_±
[0] * 
sšth‘a
 + 
w
[0] * 
tmp
;

594 
	g»suÉ
[1] = 
±
[1] * 
co¡h‘a
 + 
w_üoss_±
[1] * 
sšth‘a
 + 
w
[1] * 
tmp
;

595 
	g»suÉ
[2] = 
±
[2] * 
co¡h‘a
 + 
w_üoss_±
[2] * 
sšth‘a
 + 
w
[2] * 
tmp
;

614 cÚ¡ 
T
 
	gw_üoss_±
[3] = { 
ªgË_axis
[1] * 
±
[2] -‡ngle_axis[2] *…t[1],

615 
ªgË_axis
[2] * 
±
[0] -‡ngle_axis[0] *…t[2],

616 
ªgË_axis
[0] * 
±
[1] -‡ngle_axis[1] *…t[0] };

618 
	g»suÉ
[0] = 
±
[0] + 
w_üoss_±
[0];

619 
	g»suÉ
[1] = 
±
[1] + 
w_üoss_±
[1];

620 
	g»suÉ
[2] = 
±
[2] + 
w_üoss_±
[2];

	@/usr/include/ceres/autodiff_cost_function.h

129 #iâdeà
CERES_PUBLIC_AUTODIFF_COST_FUNCTION_H_


130 
	#CERES_PUBLIC_AUTODIFF_COST_FUNCTION_H_


	)

132 
	~"û»s/š‹º®/autodiff.h
"

133 
	~"û»s/š‹º®/scİed_±r.h
"

134 
	~"û»s/sized_co¡_funùiÚ.h
"

135 
	~"û»s/ty³s.h
"

136 
	~"glog/loggšg.h
"

138 
Çme¥aû
 
	gû»s
 {

154 
	g‹m¶©e
 <
ty³Çme
 
	gCo¡FunùÜ
,

155 
	gkNumResidu®s
,

156 
	gN0
,

157 
	gN1
 = 0,

158 
	gN2
 = 0,

159 
	gN3
 = 0,

160 
	gN4
 = 0,

161 
	gN5
 = 0,

162 
	gN6
 = 0,

163 
	gN7
 = 0,

164 
	gN8
 = 0,

165 
	gN9
 = 0>

166 
şass
 
AutoDiffCo¡FunùiÚ
 : 
public
 
SizedCo¡FunùiÚ
<
kNumResidu®s
,

167 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
,

168 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
> {

169 
	gpublic
:

172 
ex¶ic™
 
AutoDiffCo¡FunùiÚ
(
Co¡FunùÜ
* 
funùÜ
)

173 : 
funùÜ_
(
funùÜ
) {

174 
CHECK_NE
(
kNumResidu®s
, 
DYNAMIC
)

184 
AutoDiffCo¡FunùiÚ
(
Co¡FunùÜ
* 
funùÜ
, 
num_»sidu®s
)

185 : 
funùÜ_
(
funùÜ
) {

186 
CHECK_EQ
(
kNumResidu®s
, 
DYNAMIC
)

189 
	gSizedCo¡FunùiÚ
<
	gkNumResidu®s
,

190 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
,

191 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
>

192 ::
£t_num_»sidu®s
(
num_»sidu®s
);

195 
	gvœtu®
 ~
AutoDiffCo¡FunùiÚ
() {}

202 
vœtu®
 
boŞ
 
Ev®u©e
(cÚ¡* cÚ¡* 
·¿m‘”s
,

203 * 
»sidu®s
,

204 ** 
jacobŸns
) const {

205 ià(!
	gjacobŸns
) {

206  
	gš‹º®
::
V¬ŸdicEv®u©e
<

207 
Co¡FunùÜ
, , 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
>

208 ::
C®l
(*
funùÜ_
, 
·¿m‘”s
, 
»sidu®s
);

210  
	gš‹º®
::
AutoDiff
<
Co¡FunùÜ
, ,

211 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
>::
Difã»ÁŸ‹
(

212 *
funùÜ_
,

213 
·¿m‘”s
,

214 
SizedCo¡FunùiÚ
<
kNumResidu®s
,

215 
N0
, 
N1
, 
N2
, 
N3
, 
N4
,

216 
N5
, 
N6
, 
N7
, 
N8
, 
N9
>::
num_»sidu®s
(),

217 
»sidu®s
,

218 
jacobŸns
);

221 
	g´iv©e
:

222 
š‹º®
::
scİed_±r
<
Co¡FunùÜ
> 
funùÜ_
;

	@/usr/include/ceres/autodiff_local_parameterization.h

33 #iâdeà
CERES_PUBLIC_AUTODIFF_LOCAL_PARAMETERIZATION_H_


34 
	#CERES_PUBLIC_AUTODIFF_LOCAL_PARAMETERIZATION_H_


	)

36 
	~"û»s/loÿl_·¿m‘”iz©iÚ.h
"

37 
	~"û»s/š‹º®/autodiff.h
"

38 
	~"û»s/š‹º®/scİed_±r.h
"

40 
Çme¥aû
 
	gû»s
 {

107 
	g‹m¶©e
 <
ty³Çme
 
	gFunùÜ
, 
	gkGlob®Size
, 
	gkLoÿlSize
>

108 şas 
	cAutoDiffLoÿlP¬am‘”iz©iÚ
 : 
public
 
LoÿlP¬am‘”iz©iÚ
 {

109 
public
:

110 
AutoDiffLoÿlP¬am‘”iz©iÚ
() :

111 
funùÜ_
(
Ãw
 
FunùÜ
()) {}

114 
ex¶ic™
 
AutoDiffLoÿlP¬am‘”iz©iÚ
(
FunùÜ
* 
funùÜ
) :

115 
funùÜ_
(
funùÜ
) {}

117 
vœtu®
 ~
AutoDiffLoÿlP¬am‘”iz©iÚ
() {}

118 
vœtu®
 
boŞ
 
Plus
(cÚ¡ * 
x
,

119 cÚ¡ * 
d–
,

120 * 
x_¶us_d–
) const {

121  (*
	gfunùÜ_
)(
	gx
, 
	gd–
, 
	gx_¶us_d–
);

124 
vœtu®
 
boŞ
 
Compu‹JacobŸn
(cÚ¡ * 
x
, * 
jacobŸn
) const {

125 
	gz”o_d–
[
kLoÿlSize
];

126 
	gi
 = 0; i < 
	gkLoÿlSize
; ++i) {

127 
	gz”o_d–
[
i
] = 0.0;

130 
	gx_¶us_d–
[
kGlob®Size
];

131 
	gi
 = 0; i < 
	gkGlob®Size
; ++i) {

132 
	gx_¶us_d–
[
i
] = 0.0;

135 cÚ¡ * 
	g·¿m‘”_±rs
[2] = {
x
, 
z”o_d–
};

136 * 
	gjacobŸn_±rs
[2] = { 
NULL
, 
jacobŸn
 };

137  
	gš‹º®
::
AutoDiff
<
FunùÜ
, , 
	gkGlob®Size
, 
	gkLoÿlSize
>

138 ::
Difã»ÁŸ‹
(*
funùÜ_
,

139 
·¿m‘”_±rs
,

140 
kGlob®Size
,

141 
x_¶us_d–
,

142 
jacobŸn_±rs
);

145 
vœtu®
 
Glob®Size
(ècÚ¡ {  
	gkGlob®Size
; }

146 
vœtu®
 
LoÿlSize
(ècÚ¡ {  
	gkLoÿlSize
; }

148 
	g´iv©e
:

149 
š‹º®
::
scİed_±r
<
FunùÜ
> 
funùÜ_
;

	@/usr/include/ceres/cost_function.h

44 #iâdeà
CERES_PUBLIC_COST_FUNCTION_H_


45 
	#CERES_PUBLIC_COST_FUNCTION_H_


	)

47 
	~<veùÜ
>

48 
	~"û»s/š‹º®/maüos.h
"

49 
	~"û»s/š‹º®/pÜt.h
"

50 
	~"û»s/ty³s.h
"

51 
	~"û»s/š‹º®/di§bË_w¬nšgs.h
"

53 
Çme¥aû
 
	gû»s
 {

64 şas 
	cCERES_EXPORT
 
	gCo¡FunùiÚ
 {

65 
	gpublic
:

66 
Co¡FunùiÚ
(è: 
num_»sidu®s_
(0) {}

68 
vœtu®
 ~
Co¡FunùiÚ
() {}

114 
vœtu®
 
boŞ
 
Ev®u©e
(cÚ¡* cÚ¡* 
·¿m‘”s
,

115 * 
»sidu®s
,

116 ** 
jacobŸns
) const = 0;

118 cÚ¡ 
	g¡d
::
veùÜ
<
št32
>& 
·¿m‘”_block_sizes
() const {

119  
·¿m‘”_block_sizes_
;

122 
num_»sidu®s
() const {

123  
	gnum_»sidu®s_
;

126 
	g´Ùeùed
:

127 
¡d
::
veùÜ
<
št32
>* 
mubË_·¿m‘”_block_sizes
() {

128  &
·¿m‘”_block_sizes_
;

131 
£t_num_»sidu®s
(
num_»sidu®s
) {

132 
	gnum_»sidu®s_
 = 
num_»sidu®s
;

135 
	g´iv©e
:

138 
¡d
::
veùÜ
<
št32
> 
·¿m‘”_block_sizes_
;

139 
	gnum_»sidu®s_
;

140 
CERES_DISALLOW_COPY_AND_ASSIGN
(
Co¡FunùiÚ
);

145 
	~"û»s/š‹º®/»’abË_w¬nšgs.h
"

	@/usr/include/ceres/cost_function_to_functor.h

87 #iâdeà
CERES_PUBLIC_COST_FUNCTION_TO_FUNCTOR_H_


88 
	#CERES_PUBLIC_COST_FUNCTION_TO_FUNCTOR_H_


	)

90 
	~<num”ic
>

91 
	~<veùÜ
>

93 
	~"û»s/co¡_funùiÚ.h
"

94 
	~"û»s/dyÇmic_co¡_funùiÚ_to_funùÜ.h
"

95 
	~"û»s/š‹º®/fixed_¬¿y.h
"

96 
	~"û»s/š‹º®/pÜt.h
"

97 
	~"û»s/š‹º®/scİed_±r.h
"

99 
Çme¥aû
 
	gû»s
 {

101 
	g‹m¶©e
 <
	gkNumResidu®s
,

102 
	gN0
, 
	gN1
 = 0, 
	gN2
 = 0, 
	gN3
 = 0, 
	gN4
 = 0,

103 
	gN5
 = 0, 
	gN6
 = 0, 
	gN7
 = 0, 
	gN8
 = 0, 
	gN9
 = 0>

104 şas 
	cCo¡FunùiÚToFunùÜ
 {

105 
public
:

107 
ex¶ic™
 
Co¡FunùiÚToFunùÜ
(
Co¡FunùiÚ
* 
co¡_funùiÚ
)

108 : 
co¡_funùÜ_
(
co¡_funùiÚ
) {

109 
CHECK_NOTNULL
(
co¡_funùiÚ
);

110 
CHECK
(
kNumResidu®s
 > 0 || kNumResidu® =ğ
DYNAMIC
);

113 
CHECK
((!
N1
 && !
N2
 && !
N3
 && !
N4
 && !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

114 ((
N1
 > 0è&& !
N2
 && !
N3
 && !
N4
 && !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

115 ((
N1
 > 0è&& (
N2
 > 0è&& !
N3
 && !
N4
 && !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

116 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& !
N4
 && !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

117 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

118 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

119 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& (
N6
 > 0è&& !
N7
 && !
N8
 && !
N9
) ||

120 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& (
N6
 > 0è&& (
N7
 > 0è&& !
N8
 && !
N9
) ||

121 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& (
N6
 > 0è&& (
N7
 > 0è&& (
N8
 > 0è&& !
N9
) ||

122 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& (
N6
 > 0è&& (
N7
 > 0è&& (
N8
 > 0è&& (
N9
 > 0)))

124 << "(ignÜŒašg 0s): " << 
	gN0
 << ", " << 
	gN1
 << ", " << 
	gN2
 << ", "

125 << 
	gN3
 << ", " << 
	gN4
 << ", " << 
	gN5
 << ", " << 
	gN6
 << ", " << 
	gN7
 << ", "

126 << 
	gN8
 << ", " << 
	gN9
;

128 cÚ¡ 
	g¡d
::
veùÜ
<
št32
>& 
·¿m‘”_block_sizes
 =

129 
co¡_funùiÚ
->
·¿m‘”_block_sizes
();

130 cÚ¡ 
	gnum_·¿m‘”_blocks
 =

131 (
N0
 > 0è+ (
N1
 > 0è+ (
N2
 > 0è+ (
N3
 > 0è+ (
N4
 > 0) +

132 (
N5
 > 0è+ (
N6
 > 0è+ (
N7
 > 0è+ (
N8
 > 0è+ (
N9
 > 0);

133 
CHECK_EQ
(
¡©ic_ÿ¡
<>(
·¿m‘”_block_sizes
.
size
()),

134 
num_·¿m‘”_blocks
);

136 
CHECK_EQ
(
N0
, 
·¿m‘”_block_sizes
[0]);

137 ià(
	g·¿m‘”_block_sizes
.
size
(è> 1è
CHECK_EQ
(
N1
, 
·¿m‘”_block_sizes
[1]);

138 ià(
	g·¿m‘”_block_sizes
.
size
(è> 2è
CHECK_EQ
(
N2
, 
·¿m‘”_block_sizes
[2]);

139 ià(
	g·¿m‘”_block_sizes
.
size
(è> 3è
CHECK_EQ
(
N3
, 
·¿m‘”_block_sizes
[3]);

140 ià(
	g·¿m‘”_block_sizes
.
size
(è> 4è
CHECK_EQ
(
N4
, 
·¿m‘”_block_sizes
[4]);

141 ià(
	g·¿m‘”_block_sizes
.
size
(è> 5è
CHECK_EQ
(
N5
, 
·¿m‘”_block_sizes
[5]);

142 ià(
	g·¿m‘”_block_sizes
.
size
(è> 6è
CHECK_EQ
(
N6
, 
·¿m‘”_block_sizes
[6]);

143 ià(
	g·¿m‘”_block_sizes
.
size
(è> 7è
CHECK_EQ
(
N7
, 
·¿m‘”_block_sizes
[7]);

144 ià(
	g·¿m‘”_block_sizes
.
size
(è> 8è
CHECK_EQ
(
N8
, 
·¿m‘”_block_sizes
[8]);

145 ià(
	g·¿m‘”_block_sizes
.
size
(è> 9è
CHECK_EQ
(
N9
, 
·¿m‘”_block_sizes
[9]);

147 
CHECK_EQ
(
accumuÏ‹
(
·¿m‘”_block_sizes
.
begš
(),

148 
·¿m‘”_block_sizes
.
’d
(), 0),

149 
N0
 + 
N1
 + 
N2
 + 
N3
 + 
N4
 + 
N5
 + 
N6
 + 
N7
 + 
N8
 + 
N9
);

152 
boŞ
 
İ”©Ü
()(cÚ¡ * 
	gx0
, * 
	g»sidu®s
) const {

153 
CHECK_NE
(
N0
, 0);

154 
CHECK_EQ
(
N1
, 0);

155 
CHECK_EQ
(
N2
, 0);

156 
CHECK_EQ
(
N3
, 0);

157 
CHECK_EQ
(
N4
, 0);

158 
CHECK_EQ
(
N5
, 0);

159 
CHECK_EQ
(
N6
, 0);

160 
CHECK_EQ
(
N7
, 0);

161 
CHECK_EQ
(
N8
, 0);

162 
CHECK_EQ
(
N9
, 0);

164  
co¡_funùÜ_
(&
x0
, 
»sidu®s
);

167 
boŞ
 
İ”©Ü
()(cÚ¡ * 
	gx0
,

168 cÚ¡ * 
	gx1
,

169 * 
	g»sidu®s
) const {

170 
CHECK_NE
(
N0
, 0);

171 
CHECK_NE
(
N1
, 0);

172 
CHECK_EQ
(
N2
, 0);

173 
CHECK_EQ
(
N3
, 0);

174 
CHECK_EQ
(
N4
, 0);

175 
CHECK_EQ
(
N5
, 0);

176 
CHECK_EQ
(
N6
, 0);

177 
CHECK_EQ
(
N7
, 0);

178 
CHECK_EQ
(
N8
, 0);

179 
CHECK_EQ
(
N9
, 0);

180 
	gš‹º®
::
FixedA¼ay
<cÚ¡ *> 
·¿m‘”_blocks
(2);

181 
	g·¿m‘”_blocks
[0] = 
x0
;

182 
	g·¿m‘”_blocks
[1] = 
x1
;

183  
co¡_funùÜ_
(
·¿m‘”_blocks
.
g‘
(), 
»sidu®s
);

186 
boŞ
 
İ”©Ü
()(cÚ¡ * 
	gx0
,

187 cÚ¡ * 
	gx1
,

188 cÚ¡ * 
	gx2
,

189 * 
	g»sidu®s
) const {

190 
CHECK_NE
(
N0
, 0);

191 
CHECK_NE
(
N1
, 0);

192 
CHECK_NE
(
N2
, 0);

193 
CHECK_EQ
(
N3
, 0);

194 
CHECK_EQ
(
N4
, 0);

195 
CHECK_EQ
(
N5
, 0);

196 
CHECK_EQ
(
N6
, 0);

197 
CHECK_EQ
(
N7
, 0);

198 
CHECK_EQ
(
N8
, 0);

199 
CHECK_EQ
(
N9
, 0);

200 
	gš‹º®
::
FixedA¼ay
<cÚ¡ *> 
·¿m‘”_blocks
(3);

201 
	g·¿m‘”_blocks
[0] = 
x0
;

202 
	g·¿m‘”_blocks
[1] = 
x1
;

203 
	g·¿m‘”_blocks
[2] = 
x2
;

204  
co¡_funùÜ_
(
·¿m‘”_blocks
.
g‘
(), 
»sidu®s
);

207 
boŞ
 
İ”©Ü
()(cÚ¡ * 
	gx0
,

208 cÚ¡ * 
	gx1
,

209 cÚ¡ * 
	gx2
,

210 cÚ¡ * 
	gx3
,

211 * 
	g»sidu®s
) const {

212 
CHECK_NE
(
N0
, 0);

213 
CHECK_NE
(
N1
, 0);

214 
CHECK_NE
(
N2
, 0);

215 
CHECK_NE
(
N3
, 0);

216 
CHECK_EQ
(
N4
, 0);

217 
CHECK_EQ
(
N5
, 0);

218 
CHECK_EQ
(
N6
, 0);

219 
CHECK_EQ
(
N7
, 0);

220 
CHECK_EQ
(
N8
, 0);

221 
CHECK_EQ
(
N9
, 0);

222 
	gš‹º®
::
FixedA¼ay
<cÚ¡ *> 
·¿m‘”_blocks
(4);

223 
	g·¿m‘”_blocks
[0] = 
x0
;

224 
	g·¿m‘”_blocks
[1] = 
x1
;

225 
	g·¿m‘”_blocks
[2] = 
x2
;

226 
	g·¿m‘”_blocks
[3] = 
x3
;

227  
co¡_funùÜ_
(
·¿m‘”_blocks
.
g‘
(), 
»sidu®s
);

230 
boŞ
 
İ”©Ü
()(cÚ¡ * 
	gx0
,

231 cÚ¡ * 
	gx1
,

232 cÚ¡ * 
	gx2
,

233 cÚ¡ * 
	gx3
,

234 cÚ¡ * 
	gx4
,

235 * 
	g»sidu®s
) const {

236 
CHECK_NE
(
N0
, 0);

237 
CHECK_NE
(
N1
, 0);

238 
CHECK_NE
(
N2
, 0);

239 
CHECK_NE
(
N3
, 0);

240 
CHECK_NE
(
N4
, 0);

241 
CHECK_EQ
(
N5
, 0);

242 
CHECK_EQ
(
N6
, 0);

243 
CHECK_EQ
(
N7
, 0);

244 
CHECK_EQ
(
N8
, 0);

245 
CHECK_EQ
(
N9
, 0);

246 
	gš‹º®
::
FixedA¼ay
<cÚ¡ *> 
·¿m‘”_blocks
(5);

247 
	g·¿m‘”_blocks
[0] = 
x0
;

248 
	g·¿m‘”_blocks
[1] = 
x1
;

249 
	g·¿m‘”_blocks
[2] = 
x2
;

250 
	g·¿m‘”_blocks
[3] = 
x3
;

251 
	g·¿m‘”_blocks
[4] = 
x4
;

252  
co¡_funùÜ_
(
·¿m‘”_blocks
.
g‘
(), 
»sidu®s
);

255 
boŞ
 
İ”©Ü
()(cÚ¡ * 
	gx0
,

256 cÚ¡ * 
	gx1
,

257 cÚ¡ * 
	gx2
,

258 cÚ¡ * 
	gx3
,

259 cÚ¡ * 
	gx4
,

260 cÚ¡ * 
	gx5
,

261 * 
	g»sidu®s
) const {

262 
CHECK_NE
(
N0
, 0);

263 
CHECK_NE
(
N1
, 0);

264 
CHECK_NE
(
N2
, 0);

265 
CHECK_NE
(
N3
, 0);

266 
CHECK_NE
(
N4
, 0);

267 
CHECK_NE
(
N5
, 0);

268 
CHECK_EQ
(
N6
, 0);

269 
CHECK_EQ
(
N7
, 0);

270 
CHECK_EQ
(
N8
, 0);

271 
CHECK_EQ
(
N9
, 0);

272 
	gš‹º®
::
FixedA¼ay
<cÚ¡ *> 
·¿m‘”_blocks
(6);

273 
	g·¿m‘”_blocks
[0] = 
x0
;

274 
	g·¿m‘”_blocks
[1] = 
x1
;

275 
	g·¿m‘”_blocks
[2] = 
x2
;

276 
	g·¿m‘”_blocks
[3] = 
x3
;

277 
	g·¿m‘”_blocks
[4] = 
x4
;

278 
	g·¿m‘”_blocks
[5] = 
x5
;

279  
co¡_funùÜ_
(
·¿m‘”_blocks
.
g‘
(), 
»sidu®s
);

282 
boŞ
 
İ”©Ü
()(cÚ¡ * 
	gx0
,

283 cÚ¡ * 
	gx1
,

284 cÚ¡ * 
	gx2
,

285 cÚ¡ * 
	gx3
,

286 cÚ¡ * 
	gx4
,

287 cÚ¡ * 
	gx5
,

288 cÚ¡ * 
	gx6
,

289 * 
	g»sidu®s
) const {

290 
CHECK_NE
(
N0
, 0);

291 
CHECK_NE
(
N1
, 0);

292 
CHECK_NE
(
N2
, 0);

293 
CHECK_NE
(
N3
, 0);

294 
CHECK_NE
(
N4
, 0);

295 
CHECK_NE
(
N5
, 0);

296 
CHECK_NE
(
N6
, 0);

297 
CHECK_EQ
(
N7
, 0);

298 
CHECK_EQ
(
N8
, 0);

299 
CHECK_EQ
(
N9
, 0);

300 
	gš‹º®
::
FixedA¼ay
<cÚ¡ *> 
·¿m‘”_blocks
(7);

301 
	g·¿m‘”_blocks
[0] = 
x0
;

302 
	g·¿m‘”_blocks
[1] = 
x1
;

303 
	g·¿m‘”_blocks
[2] = 
x2
;

304 
	g·¿m‘”_blocks
[3] = 
x3
;

305 
	g·¿m‘”_blocks
[4] = 
x4
;

306 
	g·¿m‘”_blocks
[5] = 
x5
;

307 
	g·¿m‘”_blocks
[6] = 
x6
;

308  
co¡_funùÜ_
(
·¿m‘”_blocks
.
g‘
(), 
»sidu®s
);

311 
boŞ
 
İ”©Ü
()(cÚ¡ * 
	gx0
,

312 cÚ¡ * 
	gx1
,

313 cÚ¡ * 
	gx2
,

314 cÚ¡ * 
	gx3
,

315 cÚ¡ * 
	gx4
,

316 cÚ¡ * 
	gx5
,

317 cÚ¡ * 
	gx6
,

318 cÚ¡ * 
	gx7
,

319 * 
	g»sidu®s
) const {

320 
CHECK_NE
(
N0
, 0);

321 
CHECK_NE
(
N1
, 0);

322 
CHECK_NE
(
N2
, 0);

323 
CHECK_NE
(
N3
, 0);

324 
CHECK_NE
(
N4
, 0);

325 
CHECK_NE
(
N5
, 0);

326 
CHECK_NE
(
N6
, 0);

327 
CHECK_NE
(
N7
, 0);

328 
CHECK_EQ
(
N8
, 0);

329 
CHECK_EQ
(
N9
, 0);

330 
	gš‹º®
::
FixedA¼ay
<cÚ¡ *> 
·¿m‘”_blocks
(8);

331 
	g·¿m‘”_blocks
[0] = 
x0
;

332 
	g·¿m‘”_blocks
[1] = 
x1
;

333 
	g·¿m‘”_blocks
[2] = 
x2
;

334 
	g·¿m‘”_blocks
[3] = 
x3
;

335 
	g·¿m‘”_blocks
[4] = 
x4
;

336 
	g·¿m‘”_blocks
[5] = 
x5
;

337 
	g·¿m‘”_blocks
[6] = 
x6
;

338 
	g·¿m‘”_blocks
[7] = 
x7
;

339  
co¡_funùÜ_
(
·¿m‘”_blocks
.
g‘
(), 
»sidu®s
);

342 
boŞ
 
İ”©Ü
()(cÚ¡ * 
	gx0
,

343 cÚ¡ * 
	gx1
,

344 cÚ¡ * 
	gx2
,

345 cÚ¡ * 
	gx3
,

346 cÚ¡ * 
	gx4
,

347 cÚ¡ * 
	gx5
,

348 cÚ¡ * 
	gx6
,

349 cÚ¡ * 
	gx7
,

350 cÚ¡ * 
	gx8
,

351 * 
	g»sidu®s
) const {

352 
CHECK_NE
(
N0
, 0);

353 
CHECK_NE
(
N1
, 0);

354 
CHECK_NE
(
N2
, 0);

355 
CHECK_NE
(
N3
, 0);

356 
CHECK_NE
(
N4
, 0);

357 
CHECK_NE
(
N5
, 0);

358 
CHECK_NE
(
N6
, 0);

359 
CHECK_NE
(
N7
, 0);

360 
CHECK_NE
(
N8
, 0);

361 
CHECK_EQ
(
N9
, 0);

362 
	gš‹º®
::
FixedA¼ay
<cÚ¡ *> 
·¿m‘”_blocks
(9);

363 
	g·¿m‘”_blocks
[0] = 
x0
;

364 
	g·¿m‘”_blocks
[1] = 
x1
;

365 
	g·¿m‘”_blocks
[2] = 
x2
;

366 
	g·¿m‘”_blocks
[3] = 
x3
;

367 
	g·¿m‘”_blocks
[4] = 
x4
;

368 
	g·¿m‘”_blocks
[5] = 
x5
;

369 
	g·¿m‘”_blocks
[6] = 
x6
;

370 
	g·¿m‘”_blocks
[7] = 
x7
;

371 
	g·¿m‘”_blocks
[8] = 
x8
;

372  
co¡_funùÜ_
(
·¿m‘”_blocks
.
g‘
(), 
»sidu®s
);

375 
boŞ
 
İ”©Ü
()(cÚ¡ * 
	gx0
,

376 cÚ¡ * 
	gx1
,

377 cÚ¡ * 
	gx2
,

378 cÚ¡ * 
	gx3
,

379 cÚ¡ * 
	gx4
,

380 cÚ¡ * 
	gx5
,

381 cÚ¡ * 
	gx6
,

382 cÚ¡ * 
	gx7
,

383 cÚ¡ * 
	gx8
,

384 cÚ¡ * 
	gx9
,

385 * 
	g»sidu®s
) const {

386 
CHECK_NE
(
N0
, 0);

387 
CHECK_NE
(
N1
, 0);

388 
CHECK_NE
(
N2
, 0);

389 
CHECK_NE
(
N3
, 0);

390 
CHECK_NE
(
N4
, 0);

391 
CHECK_NE
(
N5
, 0);

392 
CHECK_NE
(
N6
, 0);

393 
CHECK_NE
(
N7
, 0);

394 
CHECK_NE
(
N8
, 0);

395 
CHECK_NE
(
N9
, 0);

396 
	gš‹º®
::
FixedA¼ay
<cÚ¡ *> 
·¿m‘”_blocks
(10);

397 
	g·¿m‘”_blocks
[0] = 
x0
;

398 
	g·¿m‘”_blocks
[1] = 
x1
;

399 
	g·¿m‘”_blocks
[2] = 
x2
;

400 
	g·¿m‘”_blocks
[3] = 
x3
;

401 
	g·¿m‘”_blocks
[4] = 
x4
;

402 
	g·¿m‘”_blocks
[5] = 
x5
;

403 
	g·¿m‘”_blocks
[6] = 
x6
;

404 
	g·¿m‘”_blocks
[7] = 
x7
;

405 
	g·¿m‘”_blocks
[8] = 
x8
;

406 
	g·¿m‘”_blocks
[9] = 
x9
;

407  
co¡_funùÜ_
(
·¿m‘”_blocks
.
g‘
(), 
»sidu®s
);

410 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
>

411 
boŞ
 
İ”©Ü
()(cÚ¡ 
J‘T
* 
	gx0
, J‘T* 
	g»sidu®s
) const {

412 
CHECK_NE
(
N0
, 0);

413 
CHECK_EQ
(
N1
, 0);

414 
CHECK_EQ
(
N2
, 0);

415 
CHECK_EQ
(
N3
, 0);

416 
CHECK_EQ
(
N4
, 0);

417 
CHECK_EQ
(
N5
, 0);

418 
CHECK_EQ
(
N6
, 0);

419 
CHECK_EQ
(
N7
, 0);

420 
CHECK_EQ
(
N8
, 0);

421 
CHECK_EQ
(
N9
, 0);

422  
co¡_funùÜ_
(&
x0
, 
»sidu®s
);

425 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
>

426 
boŞ
 
İ”©Ü
()(cÚ¡ 
J‘T
* 
	gx0
,

427 cÚ¡ 
J‘T
* 
	gx1
,

428 
J‘T
* 
	g»sidu®s
) const {

429 
CHECK_NE
(
N0
, 0);

430 
CHECK_NE
(
N1
, 0);

431 
CHECK_EQ
(
N2
, 0);

432 
CHECK_EQ
(
N3
, 0);

433 
CHECK_EQ
(
N4
, 0);

434 
CHECK_EQ
(
N5
, 0);

435 
CHECK_EQ
(
N6
, 0);

436 
CHECK_EQ
(
N7
, 0);

437 
CHECK_EQ
(
N8
, 0);

438 
CHECK_EQ
(
N9
, 0);

439 
	gš‹º®
::
FixedA¼ay
<cÚ¡ 
J‘T
*> 
j‘s
(2);

440 
	gj‘s
[0] = 
x0
;

441 
	gj‘s
[1] = 
x1
;

442  
co¡_funùÜ_
(
j‘s
.
g‘
(), 
»sidu®s
);

445 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
>

446 
boŞ
 
İ”©Ü
()(cÚ¡ 
J‘T
* 
	gx0
,

447 cÚ¡ 
J‘T
* 
	gx1
,

448 cÚ¡ 
J‘T
* 
	gx2
,

449 
J‘T
* 
	g»sidu®s
) const {

450 
CHECK_NE
(
N0
, 0);

451 
CHECK_NE
(
N1
, 0);

452 
CHECK_NE
(
N2
, 0);

453 
CHECK_EQ
(
N3
, 0);

454 
CHECK_EQ
(
N4
, 0);

455 
CHECK_EQ
(
N5
, 0);

456 
CHECK_EQ
(
N6
, 0);

457 
CHECK_EQ
(
N7
, 0);

458 
CHECK_EQ
(
N8
, 0);

459 
CHECK_EQ
(
N9
, 0);

460 
	gš‹º®
::
FixedA¼ay
<cÚ¡ 
J‘T
*> 
j‘s
(3);

461 
	gj‘s
[0] = 
x0
;

462 
	gj‘s
[1] = 
x1
;

463 
	gj‘s
[2] = 
x2
;

464  
co¡_funùÜ_
(
j‘s
.
g‘
(), 
»sidu®s
);

467 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
>

468 
boŞ
 
İ”©Ü
()(cÚ¡ 
J‘T
* 
	gx0
,

469 cÚ¡ 
J‘T
* 
	gx1
,

470 cÚ¡ 
J‘T
* 
	gx2
,

471 cÚ¡ 
J‘T
* 
	gx3
,

472 
J‘T
* 
	g»sidu®s
) const {

473 
CHECK_NE
(
N0
, 0);

474 
CHECK_NE
(
N1
, 0);

475 
CHECK_NE
(
N2
, 0);

476 
CHECK_NE
(
N3
, 0);

477 
CHECK_EQ
(
N4
, 0);

478 
CHECK_EQ
(
N5
, 0);

479 
CHECK_EQ
(
N6
, 0);

480 
CHECK_EQ
(
N7
, 0);

481 
CHECK_EQ
(
N8
, 0);

482 
CHECK_EQ
(
N9
, 0);

483 
	gš‹º®
::
FixedA¼ay
<cÚ¡ 
J‘T
*> 
j‘s
(4);

484 
	gj‘s
[0] = 
x0
;

485 
	gj‘s
[1] = 
x1
;

486 
	gj‘s
[2] = 
x2
;

487 
	gj‘s
[3] = 
x3
;

488  
co¡_funùÜ_
(
j‘s
.
g‘
(), 
»sidu®s
);

491 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
>

492 
boŞ
 
İ”©Ü
()(cÚ¡ 
J‘T
* 
	gx0
,

493 cÚ¡ 
J‘T
* 
	gx1
,

494 cÚ¡ 
J‘T
* 
	gx2
,

495 cÚ¡ 
J‘T
* 
	gx3
,

496 cÚ¡ 
J‘T
* 
	gx4
,

497 
J‘T
* 
	g»sidu®s
) const {

498 
CHECK_NE
(
N0
, 0);

499 
CHECK_NE
(
N1
, 0);

500 
CHECK_NE
(
N2
, 0);

501 
CHECK_NE
(
N3
, 0);

502 
CHECK_NE
(
N4
, 0);

503 
CHECK_EQ
(
N5
, 0);

504 
CHECK_EQ
(
N6
, 0);

505 
CHECK_EQ
(
N7
, 0);

506 
CHECK_EQ
(
N8
, 0);

507 
CHECK_EQ
(
N9
, 0);

508 
	gš‹º®
::
FixedA¼ay
<cÚ¡ 
J‘T
*> 
j‘s
(5);

509 
	gj‘s
[0] = 
x0
;

510 
	gj‘s
[1] = 
x1
;

511 
	gj‘s
[2] = 
x2
;

512 
	gj‘s
[3] = 
x3
;

513 
	gj‘s
[4] = 
x4
;

514  
co¡_funùÜ_
(
j‘s
.
g‘
(), 
»sidu®s
);

517 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
>

518 
boŞ
 
İ”©Ü
()(cÚ¡ 
J‘T
* 
	gx0
,

519 cÚ¡ 
J‘T
* 
	gx1
,

520 cÚ¡ 
J‘T
* 
	gx2
,

521 cÚ¡ 
J‘T
* 
	gx3
,

522 cÚ¡ 
J‘T
* 
	gx4
,

523 cÚ¡ 
J‘T
* 
	gx5
,

524 
J‘T
* 
	g»sidu®s
) const {

525 
CHECK_NE
(
N0
, 0);

526 
CHECK_NE
(
N1
, 0);

527 
CHECK_NE
(
N2
, 0);

528 
CHECK_NE
(
N3
, 0);

529 
CHECK_NE
(
N4
, 0);

530 
CHECK_NE
(
N5
, 0);

531 
CHECK_EQ
(
N6
, 0);

532 
CHECK_EQ
(
N7
, 0);

533 
CHECK_EQ
(
N8
, 0);

534 
CHECK_EQ
(
N9
, 0);

535 
	gš‹º®
::
FixedA¼ay
<cÚ¡ 
J‘T
*> 
j‘s
(6);

536 
	gj‘s
[0] = 
x0
;

537 
	gj‘s
[1] = 
x1
;

538 
	gj‘s
[2] = 
x2
;

539 
	gj‘s
[3] = 
x3
;

540 
	gj‘s
[4] = 
x4
;

541 
	gj‘s
[5] = 
x5
;

542  
co¡_funùÜ_
(
j‘s
.
g‘
(), 
»sidu®s
);

545 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
>

546 
boŞ
 
İ”©Ü
()(cÚ¡ 
J‘T
* 
	gx0
,

547 cÚ¡ 
J‘T
* 
	gx1
,

548 cÚ¡ 
J‘T
* 
	gx2
,

549 cÚ¡ 
J‘T
* 
	gx3
,

550 cÚ¡ 
J‘T
* 
	gx4
,

551 cÚ¡ 
J‘T
* 
	gx5
,

552 cÚ¡ 
J‘T
* 
	gx6
,

553 
J‘T
* 
	g»sidu®s
) const {

554 
CHECK_NE
(
N0
, 0);

555 
CHECK_NE
(
N1
, 0);

556 
CHECK_NE
(
N2
, 0);

557 
CHECK_NE
(
N3
, 0);

558 
CHECK_NE
(
N4
, 0);

559 
CHECK_NE
(
N5
, 0);

560 
CHECK_NE
(
N6
, 0);

561 
CHECK_EQ
(
N7
, 0);

562 
CHECK_EQ
(
N8
, 0);

563 
CHECK_EQ
(
N9
, 0);

564 
	gš‹º®
::
FixedA¼ay
<cÚ¡ 
J‘T
*> 
j‘s
(7);

565 
	gj‘s
[0] = 
x0
;

566 
	gj‘s
[1] = 
x1
;

567 
	gj‘s
[2] = 
x2
;

568 
	gj‘s
[3] = 
x3
;

569 
	gj‘s
[4] = 
x4
;

570 
	gj‘s
[5] = 
x5
;

571 
	gj‘s
[6] = 
x6
;

572  
co¡_funùÜ_
(
j‘s
.
g‘
(), 
»sidu®s
);

575 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
>

576 
boŞ
 
İ”©Ü
()(cÚ¡ 
J‘T
* 
	gx0
,

577 cÚ¡ 
J‘T
* 
	gx1
,

578 cÚ¡ 
J‘T
* 
	gx2
,

579 cÚ¡ 
J‘T
* 
	gx3
,

580 cÚ¡ 
J‘T
* 
	gx4
,

581 cÚ¡ 
J‘T
* 
	gx5
,

582 cÚ¡ 
J‘T
* 
	gx6
,

583 cÚ¡ 
J‘T
* 
	gx7
,

584 
J‘T
* 
	g»sidu®s
) const {

585 
CHECK_NE
(
N0
, 0);

586 
CHECK_NE
(
N1
, 0);

587 
CHECK_NE
(
N2
, 0);

588 
CHECK_NE
(
N3
, 0);

589 
CHECK_NE
(
N4
, 0);

590 
CHECK_NE
(
N5
, 0);

591 
CHECK_NE
(
N6
, 0);

592 
CHECK_NE
(
N7
, 0);

593 
CHECK_EQ
(
N8
, 0);

594 
CHECK_EQ
(
N9
, 0);

595 
	gš‹º®
::
FixedA¼ay
<cÚ¡ 
J‘T
*> 
j‘s
(8);

596 
	gj‘s
[0] = 
x0
;

597 
	gj‘s
[1] = 
x1
;

598 
	gj‘s
[2] = 
x2
;

599 
	gj‘s
[3] = 
x3
;

600 
	gj‘s
[4] = 
x4
;

601 
	gj‘s
[5] = 
x5
;

602 
	gj‘s
[6] = 
x6
;

603 
	gj‘s
[7] = 
x7
;

604  
co¡_funùÜ_
(
j‘s
.
g‘
(), 
»sidu®s
);

607 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
>

608 
boŞ
 
İ”©Ü
()(cÚ¡ 
J‘T
* 
	gx0
,

609 cÚ¡ 
J‘T
* 
	gx1
,

610 cÚ¡ 
J‘T
* 
	gx2
,

611 cÚ¡ 
J‘T
* 
	gx3
,

612 cÚ¡ 
J‘T
* 
	gx4
,

613 cÚ¡ 
J‘T
* 
	gx5
,

614 cÚ¡ 
J‘T
* 
	gx6
,

615 cÚ¡ 
J‘T
* 
	gx7
,

616 cÚ¡ 
J‘T
* 
	gx8
,

617 
J‘T
* 
	g»sidu®s
) const {

618 
CHECK_NE
(
N0
, 0);

619 
CHECK_NE
(
N1
, 0);

620 
CHECK_NE
(
N2
, 0);

621 
CHECK_NE
(
N3
, 0);

622 
CHECK_NE
(
N4
, 0);

623 
CHECK_NE
(
N5
, 0);

624 
CHECK_NE
(
N6
, 0);

625 
CHECK_NE
(
N7
, 0);

626 
CHECK_NE
(
N8
, 0);

627 
CHECK_EQ
(
N9
, 0);

628 
	gš‹º®
::
FixedA¼ay
<cÚ¡ 
J‘T
*> 
j‘s
(9);

629 
	gj‘s
[0] = 
x0
;

630 
	gj‘s
[1] = 
x1
;

631 
	gj‘s
[2] = 
x2
;

632 
	gj‘s
[3] = 
x3
;

633 
	gj‘s
[4] = 
x4
;

634 
	gj‘s
[5] = 
x5
;

635 
	gj‘s
[6] = 
x6
;

636 
	gj‘s
[7] = 
x7
;

637 
	gj‘s
[8] = 
x8
;

638  
co¡_funùÜ_
(
j‘s
.
g‘
(), 
»sidu®s
);

641 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
>

642 
boŞ
 
İ”©Ü
()(cÚ¡ 
J‘T
* 
	gx0
,

643 cÚ¡ 
J‘T
* 
	gx1
,

644 cÚ¡ 
J‘T
* 
	gx2
,

645 cÚ¡ 
J‘T
* 
	gx3
,

646 cÚ¡ 
J‘T
* 
	gx4
,

647 cÚ¡ 
J‘T
* 
	gx5
,

648 cÚ¡ 
J‘T
* 
	gx6
,

649 cÚ¡ 
J‘T
* 
	gx7
,

650 cÚ¡ 
J‘T
* 
	gx8
,

651 cÚ¡ 
J‘T
* 
	gx9
,

652 
J‘T
* 
	g»sidu®s
) const {

653 
CHECK_NE
(
N0
, 0);

654 
CHECK_NE
(
N1
, 0);

655 
CHECK_NE
(
N2
, 0);

656 
CHECK_NE
(
N3
, 0);

657 
CHECK_NE
(
N4
, 0);

658 
CHECK_NE
(
N5
, 0);

659 
CHECK_NE
(
N6
, 0);

660 
CHECK_NE
(
N7
, 0);

661 
CHECK_NE
(
N8
, 0);

662 
CHECK_NE
(
N9
, 0);

663 
	gš‹º®
::
FixedA¼ay
<cÚ¡ 
J‘T
*> 
j‘s
(10);

664 
	gj‘s
[0] = 
x0
;

665 
	gj‘s
[1] = 
x1
;

666 
	gj‘s
[2] = 
x2
;

667 
	gj‘s
[3] = 
x3
;

668 
	gj‘s
[4] = 
x4
;

669 
	gj‘s
[5] = 
x5
;

670 
	gj‘s
[6] = 
x6
;

671 
	gj‘s
[7] = 
x7
;

672 
	gj‘s
[8] = 
x8
;

673 
	gj‘s
[9] = 
x9
;

674  
co¡_funùÜ_
(
j‘s
.
g‘
(), 
»sidu®s
);

677 
	g´iv©e
:

678 
DyÇmicCo¡FunùiÚToFunùÜ
 
co¡_funùÜ_
;

	@/usr/include/ceres/covariance.h

31 #iâdeà
CERES_PUBLIC_COVARIANCE_H_


32 
	#CERES_PUBLIC_COVARIANCE_H_


	)

34 
	~<ut™y
>

35 
	~<veùÜ
>

36 
	~"û»s/š‹º®/pÜt.h
"

37 
	~"û»s/š‹º®/scİed_±r.h
"

38 
	~"û»s/ty³s.h
"

39 
	~"û»s/š‹º®/di§bË_w¬nšgs.h
"

41 
Çme¥aû
 
	gû»s
 {

43 
şass
 
	gProbËm
;

45 
Çme¥aû
 
	gš‹º®
 {

46 
şass
 
	gCov¬ŸnûIm¶
;

200 şas 
	cCERES_EXPORT
 
	gCov¬Ÿnû
 {

201 
	gpublic
:

202 
CERES_EXPORT
 
O±iÚs
 {

203 
O±iÚs
() {

204 
®gÜ™hm_ty³
 = 
SPARSE_QR
;

207 
	g¥¬£_lš—r_®geb¿_lib¿ry_ty³
 = 
EIGEN_SPARSE
;

208 #ià!
defšed
(
CERES_NO_SUITESPARSE
)

209 
	g¥¬£_lš—r_®geb¿_lib¿ry_ty³
 = 
SUITE_SPARSE
;

212 
	gmš_»croÿl_cÚd™iÚ_numb”
 = 1e-14;

213 
	gnuÎ_¥aû_¿nk
 = 0;

214 
	gnum_th»ads
 = 1;

215 
	g­¶y_loss_funùiÚ
 = 
Œue
;

222 
S·r£Lš—rAlgeb¿Lib¿ryTy³
 
	g¥¬£_lš—r_®geb¿_lib¿ry_ty³
;

254 
Cov¬ŸnûAlgÜ™hmTy³
 
	g®gÜ™hm_ty³
;

287 
	gmš_»croÿl_cÚd™iÚ_numb”
;

322 
	gnuÎ_¥aû_¿nk
;

324 
	gnum_th»ads
;

332 
boŞ
 
	g­¶y_loss_funùiÚ
;

335 
ex¶ic™
 
Cov¬Ÿnû
(cÚ¡ 
O±iÚs
& 
İtiÚs
);

336 ~
Cov¬Ÿnû
();

361 
boŞ
 
Compu‹
(

362 cÚ¡ 
¡d
::
veùÜ
<¡d::
·œ
<const *,

363 cÚ¡ *> >& 
cov¬Ÿnû_blocks
,

364 
ProbËm
* 
´obËm
);

385 
boŞ
 
Compu‹
(cÚ¡ 
¡d
::
veùÜ
<cÚ¡ *>& 
·¿m‘”_blocks
,

386 
ProbËm
* 
´obËm
);

401 
boŞ
 
G‘Cov¬ŸnûBlock
(cÚ¡ * 
·¿m‘”_block1
,

402 cÚ¡ * 
·¿m‘”_block2
,

403 * 
cov¬Ÿnû_block
) const;

421 
boŞ
 
G‘Cov¬ŸnûBlockInTªg’tS·û
(cÚ¡ * 
·¿m‘”_block1
,

422 cÚ¡ * 
·¿m‘”_block2
,

423 * 
cov¬Ÿnû_block
) const;

437 
boŞ
 
G‘Cov¬ŸnûM©rix
(cÚ¡ 
¡d
::
veùÜ
<cÚ¡ *> &
·¿m‘”_blocks
,

438 *
cov¬Ÿnû_m©rix
);

455 
boŞ
 
G‘Cov¬ŸnûM©rixInTªg’tS·û
(

456 cÚ¡ 
¡d
::
veùÜ
<cÚ¡ *>& 
·¿m‘”_blocks
,

457 * 
cov¬Ÿnû_m©rix
);

459 
	g´iv©e
:

460 
š‹º®
::
scİed_±r
<š‹º®::
Cov¬ŸnûIm¶
> 
im¶_
;

465 
	~"û»s/š‹º®/»’abË_w¬nšgs.h
"

	@/usr/include/ceres/crs_matrix.h

31 #iâdeà
CERES_PUBLIC_CRS_MATRIX_H_


32 
	#CERES_PUBLIC_CRS_MATRIX_H_


	)

34 
	~<veùÜ
>

35 
	~"û»s/š‹º®/pÜt.h
"

36 
	~"û»s/š‹º®/di§bË_w¬nšgs.h
"

38 
Çme¥aû
 
	gû»s
 {

42 
CERES_EXPORT
 
	gCRSM©rix
 {

43 
CRSM©rix
(è: 
num_rows
(0), 
num_cŞs
(0) {}

45 
	gnum_rows
;

46 
	gnum_cŞs
;

77 
	g¡d
::
veùÜ
<> 
cŞs
;

78 
	g¡d
::
veùÜ
<> 
rows
;

79 
	g¡d
::
veùÜ
<> 
v®ues
;

84 
	~"û»s/š‹º®/»’abË_w¬nšgs.h
"

	@/usr/include/ceres/dynamic_autodiff_cost_function.h

32 #iâdeà
CERES_PUBLIC_DYNAMIC_AUTODIFF_COST_FUNCTION_H_


33 
	#CERES_PUBLIC_DYNAMIC_AUTODIFF_COST_FUNCTION_H_


	)

35 
	~<cm©h
>

36 
	~<num”ic
>

37 
	~<veùÜ
>

39 
	~"û»s/dyÇmic_co¡_funùiÚ.h
"

40 
	~"û»s/š‹º®/scİed_±r.h
"

41 
	~"û»s/j‘.h
"

42 
	~"glog/loggšg.h
"

44 
Çme¥aû
 
	gû»s
 {

77 
	g‹m¶©e
 <
ty³Çme
 
	gCo¡FunùÜ
, 
	gSŒide
 = 4>

78 şas 
	cDyÇmicAutoDiffCo¡FunùiÚ
 : 
public
 
DyÇmicCo¡FunùiÚ
 {

79 
public
:

80 
ex¶ic™
 
DyÇmicAutoDiffCo¡FunùiÚ
(
Co¡FunùÜ
* 
funùÜ
)

81 : 
funùÜ_
(
funùÜ
) {}

83 
vœtu®
 ~
DyÇmicAutoDiffCo¡FunùiÚ
() {}

85 
vœtu®
 
boŞ
 
Ev®u©e
(cÚ¡* cÚ¡* 
·¿m‘”s
,

86 * 
»sidu®s
,

87 ** 
jacobŸns
) const {

88 
CHECK_GT
(
num_»sidu®s
(), 0)

92 ià(
	gjacobŸns
 =ğ
NULL
) {

93  (*
funùÜ_
)(
·¿m‘”s
, 
»sidu®s
);

108 cÚ¡ 
	gnum_·¿m‘”_blocks
 = 
·¿m‘”_block_sizes
().
size
();

109 cÚ¡ 
	gnum_·¿m‘”s
 = 
¡d
::
accumuÏ‹
(
·¿m‘”_block_sizes
().
begš
(),

110 
·¿m‘”_block_sizes
().
’d
(),

114 
	g¡d
::
veùÜ
<
J‘
<, 
	gSŒide
> > 
šput_j‘s
(
num_·¿m‘”s
);

115 
	g¡d
::
veùÜ
<
J‘
<, 
	gSŒide
> > 
ouut_j‘s
(
num_»sidu®s
());

118 
	g¡d
::
veùÜ
<
J‘
<, 
	gSŒide
>* > 
j‘_·¿m‘”s
(
num_·¿m‘”_blocks
,

119 
¡©ic_ÿ¡
<
J‘
<, 
SŒide
>* >(
NULL
));

120 
	gnum_aùive_·¿m‘”s
 = 0;

125 
	g¡d
::
veùÜ
<> 
¡¬t_d”iv©ive_£ùiÚ
;

126 
boŞ
 
	gš_d”iv©ive_£ùiÚ
 = 
çl£
;

127 
	g·¿m‘”_cursÜ
 = 0;

130 
	gi
 = 0; i < 
	gnum_·¿m‘”_blocks
; ++i) {

131 
	gj‘_·¿m‘”s
[
i
] = &
šput_j‘s
[
·¿m‘”_cursÜ
];

133 cÚ¡ 
	g·¿m‘”_block_size
 = 
·¿m‘”_block_sizes
()[
i
];

134 ià(
	gjacobŸns
[
i
] !ğ
NULL
) {

135 ià(!
š_d”iv©ive_£ùiÚ
) {

136 
¡¬t_d”iv©ive_£ùiÚ
.
push_back
(
·¿m‘”_cursÜ
);

137 
	gš_d”iv©ive_£ùiÚ
 = 
Œue
;

140 
	gnum_aùive_·¿m‘”s
 +ğ
·¿m‘”_block_size
;

142 
	gš_d”iv©ive_£ùiÚ
 = 
çl£
;

145 
	gj
 = 0; j < 
	g·¿m‘”_block_size
; ++j, 
	g·¿m‘”_cursÜ
++) {

146 
	gšput_j‘s
[
·¿m‘”_cursÜ
].
	ga
 = 
·¿m‘”s
[
i
][
j
];

161 
	g¡¬t_d”iv©ive_£ùiÚ
.
push_back
(
·¿m‘”_cursÜ
);

166 
	gnum_¡rides
 = 
¡©ic_ÿ¡
<>(
û
(
num_aùive_·¿m‘”s
 /

167 
¡©ic_ÿ¡
<>(
SŒide
)));

169 
	gcu¼’t_d”iv©ive_£ùiÚ
 = 0;

170 
	gcu¼’t_d”iv©ive_£ùiÚ_cursÜ
 = 0;

172 
	g·ss
 = 0;…as < 
	gnum_¡rides
; ++pass) {

175 cÚ¡ 
	gš™Ÿl_d”iv©ive_£ùiÚ
 = 
cu¼’t_d”iv©ive_£ùiÚ
;

176 cÚ¡ 
	gš™Ÿl_d”iv©ive_£ùiÚ_cursÜ
 =

177 
cu¼’t_d”iv©ive_£ùiÚ_cursÜ
;

179 
	gaùive_·¿m‘”_couÁ
 = 0;

180 
	g·¿m‘”_cursÜ
 = 0;

182 
	gi
 = 0; i < 
	gnum_·¿m‘”_blocks
; ++i) {

183 
	gj
 = 0; j < 
·¿m‘”_block_sizes
()[
i
];

184 ++
	gj
, 
	g·¿m‘”_cursÜ
++) {

185 
	gšput_j‘s
[
·¿m‘”_cursÜ
].
	gv
.
£tZ”o
();

186 ià(
	gaùive_·¿m‘”_couÁ
 < 
	gSŒide
 &&

187 
	g·¿m‘”_cursÜ
 >= (

188 
¡¬t_d”iv©ive_£ùiÚ
[
cu¼’t_d”iv©ive_£ùiÚ
] +

189 
cu¼’t_d”iv©ive_£ùiÚ_cursÜ
)) {

190 ià(
jacobŸns
[
i
] !ğ
NULL
) {

191 
šput_j‘s
[
·¿m‘”_cursÜ
].
v
[
aùive_·¿m‘”_couÁ
] = 1.0;

192 ++
	gaùive_·¿m‘”_couÁ
;

193 ++
	gcu¼’t_d”iv©ive_£ùiÚ_cursÜ
;

195 ++
	gcu¼’t_d”iv©ive_£ùiÚ
;

196 
	gcu¼’t_d”iv©ive_£ùiÚ_cursÜ
 = 0;

202 ià(!(*
	gfunùÜ_
)(&
	gj‘_·¿m‘”s
[0], &
	gouut_j‘s
[0])) {

203  
	gçl£
;

207 
	gaùive_·¿m‘”_couÁ
 = 0;

209 
	gcu¼’t_d”iv©ive_£ùiÚ
 = 
š™Ÿl_d”iv©ive_£ùiÚ
;

210 
	gcu¼’t_d”iv©ive_£ùiÚ_cursÜ
 = 
š™Ÿl_d”iv©ive_£ùiÚ_cursÜ
;

212 
	gi
 = 0, 
	g·¿m‘”_cursÜ
 = 0; i < 
	gnum_·¿m‘”_blocks
; ++i) {

213 
	gj
 = 0; j < 
·¿m‘”_block_sizes
()[
i
];

214 ++
	gj
, 
	g·¿m‘”_cursÜ
++) {

215 ià(
	gaùive_·¿m‘”_couÁ
 < 
	gSŒide
 &&

216 
	g·¿m‘”_cursÜ
 >= (

217 
¡¬t_d”iv©ive_£ùiÚ
[
cu¼’t_d”iv©ive_£ùiÚ
] +

218 
cu¼’t_d”iv©ive_£ùiÚ_cursÜ
)) {

219 ià(
jacobŸns
[
i
] !ğ
NULL
) {

220 
k
 = 0; 
	gk
 < 
num_»sidu®s
(); ++k) {

221 
	gjacobŸns
[
i
][
k
 * 
·¿m‘”_block_sizes
()[i] + 
	gj
] =

222 
ouut_j‘s
[
k
].
v
[
aùive_·¿m‘”_couÁ
];

224 ++
	gaùive_·¿m‘”_couÁ
;

225 ++
	gcu¼’t_d”iv©ive_£ùiÚ_cursÜ
;

227 ++
	gcu¼’t_d”iv©ive_£ùiÚ
;

228 
	gcu¼’t_d”iv©ive_£ùiÚ_cursÜ
 = 0;

236 ià(
	g·ss
 =ğ
num_¡rides
 - 1) {

237 
k
 = 0; 
	gk
 < 
num_»sidu®s
(); ++k) {

238 
	g»sidu®s
[
k
] = 
ouut_j‘s
[k].
a
;

242  
	gŒue
;

245 
	g´iv©e
:

246 
š‹º®
::
scİed_±r
<
Co¡FunùÜ
> 
funùÜ_
;

	@/usr/include/ceres/dynamic_numeric_diff_cost_function.h

34 #iâdeà
CERES_PUBLIC_DYNAMIC_NUMERIC_DIFF_COST_FUNCTION_H_


35 
	#CERES_PUBLIC_DYNAMIC_NUMERIC_DIFF_COST_FUNCTION_H_


	)

37 
	~<cm©h
>

38 
	~<num”ic
>

39 
	~<veùÜ
>

41 
	~"û»s/dyÇmic_co¡_funùiÚ.h
"

42 
	~"û»s/š‹º®/scİed_±r.h
"

43 
	~"û»s/š‹º®/eig’.h
"

44 
	~"û»s/š‹º®/num”ic_diff.h
"

45 
	~"û»s/num”ic_diff_İtiÚs.h
"

46 
	~"glog/loggšg.h
"

48 
Çme¥aû
 
	gû»s
 {

75 
	g‹m¶©e
 <
ty³Çme
 
	gCo¡FunùÜ
, 
Num”icDiffM‘hodTy³
 
	gm‘hod
 = 
CENTRAL
>

76 şas 
	cDyÇmicNum”icDiffCo¡FunùiÚ
 : 
public
 
DyÇmicCo¡FunùiÚ
 {

77 
public
:

78 
ex¶ic™
 
DyÇmicNum”icDiffCo¡FunùiÚ
(

79 cÚ¡ 
Co¡FunùÜ
* 
funùÜ
,

80 
OwÃrsh
 
owÃrsh
 = 
TAKE_OWNERSHIP
,

81 cÚ¡ 
Num”icDiffO±iÚs
& 
İtiÚs
 = NumericDiffOptions())

82 : 
funùÜ_
(
funùÜ
),

83 
owÃrsh_
(
owÃrsh
),

84 
İtiÚs_
(
İtiÚs
) {

87 
	gvœtu®
 ~
DyÇmicNum”icDiffCo¡FunùiÚ
() {

88 ià(
	gowÃrsh_
 !ğ
TAKE_OWNERSHIP
) {

89 
funùÜ_
.
»Ëa£
();

93 
vœtu®
 
boŞ
 
Ev®u©e
(cÚ¡* cÚ¡* 
·¿m‘”s
,

94 * 
»sidu®s
,

95 ** 
jacobŸns
) const {

96 
usšg
 
	gš‹º®
::
Num”icDiff
;

97 
CHECK_GT
(
num_»sidu®s
(), 0)

101 cÚ¡ 
	g¡d
::
veùÜ
<
št32
>& 
block_sizes
 = 
·¿m‘”_block_sizes
();

102 
CHECK
(!
block_sizes
.
em±y
())

106 cÚ¡ 
boŞ
 
	g¡©us
 = 
Ev®u©eCo¡FunùÜ
(
·¿m‘”s
, 
»sidu®s
);

107 ià(
	gjacobŸns
 =ğ
NULL
 || !
¡©us
) {

108  
¡©us
;

112 
	g·¿m‘”s_size
 = 
accumuÏ‹
(
block_sizes
.
begš
(), block_sizes.
’d
(), 0);

113 
	g¡d
::
veùÜ
<> 
·¿m‘”s_cİy
(
·¿m‘”s_size
);

114 
	g¡d
::
veùÜ
<*> 
·¿m‘”s_»ã»nûs_cİy
(
block_sizes
.
size
());

115 
	g·¿m‘”s_»ã»nûs_cİy
[0] = &
·¿m‘”s_cİy
[0];

116 
size_t
 
	gblock
 = 1; block < 
	gblock_sizes
.
size
(); ++block) {

117 
	g·¿m‘”s_»ã»nûs_cİy
[
block
] = 
·¿m‘”s_»ã»nûs_cİy
[block - 1]

118 + 
block_sizes
[
block
 - 1];

122 
size_t
 
	gblock
 = 0; block < 
	gblock_sizes
.
size
(); ++block) {

123 
memıy
(
·¿m‘”s_»ã»nûs_cİy
[
block
],

124 
·¿m‘”s
[
block
],

125 
block_sizes
[
block
] * (*
·¿m‘”s
[block]));

128 
size_t
 
	gblock
 = 0; block < 
	gblock_sizes
.
size
(); ++block) {

129 ià(
	gjacobŸns
[
block
] !ğ
NULL
 &&

130 !
Num”icDiff
<
Co¡FunùÜ
, 
	gm‘hod
, 
	gDYNAMIC
,

131 
	gDYNAMIC
, DYNAMIC, DYNAMIC, DYNAMIC, DYNAMIC,

132 
	gDYNAMIC
, DYNAMIC, DYNAMIC, DYNAMIC, DYNAMIC,

133 
	gDYNAMIC
, DYNAMIC>::
Ev®u©eJacobŸnFÜP¬am‘”Block
(

134 
funùÜ_
.
g‘
(),

135 
»sidu®s
,

136 
İtiÚs_
,

137 
this
->
num_»sidu®s
(),

138 
block
,

139 
block_sizes
[
block
],

140 &
·¿m‘”s_»ã»nûs_cİy
[0],

141 
jacobŸns
[
block
])) {

142  
	gçl£
;

145  
	gŒue
;

148 
	g´iv©e
:

149 
boŞ
 
Ev®u©eCo¡FunùÜ
(cÚ¡* cÚ¡* 
·¿m‘”s
,

150 * 
»sidu®s
) const {

151  
Ev®u©eCo¡FunùÜIm¶
(
funùÜ_
.
g‘
(),

152 
·¿m‘”s
,

153 
»sidu®s
,

154 
funùÜ_
.
g‘
());

159 
boŞ
 
Ev®u©eCo¡FunùÜIm¶
(cÚ¡ 
Co¡FunùÜ
* 
funùÜ
,

160 cÚ¡* cÚ¡* 
·¿m‘”s
,

161 * 
»sidu®s
,

163  (*
	gfunùÜ
)(
	g·¿m‘”s
, 
	g»sidu®s
);

166 
boŞ
 
Ev®u©eCo¡FunùÜIm¶
(cÚ¡ 
Co¡FunùÜ
* 
funùÜ
,

167 cÚ¡* cÚ¡* 
·¿m‘”s
,

168 * 
»sidu®s
,

169 cÚ¡ 
Co¡FunùiÚ
* ) const {

170  
	gfunùÜ
->
Ev®u©e
(
·¿m‘”s
, 
»sidu®s
, 
NULL
);

173 
	gš‹º®
::
scİed_±r
<cÚ¡ 
Co¡FunùÜ
> 
funùÜ_
;

174 
OwÃrsh
 
	gowÃrsh_
;

175 
Num”icDiffO±iÚs
 
	gİtiÚs_
;

	@/usr/include/ceres/gradient_problem.h

31 #iâdeà
CERES_PUBLIC_GRADIENT_PROBLEM_H_


32 
	#CERES_PUBLIC_GRADIENT_PROBLEM_H_


	)

34 
	~"û»s/š‹º®/maüos.h
"

35 
	~"û»s/š‹º®/pÜt.h
"

36 
	~"û»s/š‹º®/scİed_±r.h
"

37 
	~"û»s/loÿl_·¿m‘”iz©iÚ.h
"

39 
Çme¥aû
 
	gû»s
 {

41 
şass
 
	gFœ¡Ord”FunùiÚ
;

91 şas 
	cCERES_EXPORT
 
	gG¿d›ÁProbËm
 {

92 
	gpublic
:

94 
ex¶ic™
 
G¿d›ÁProbËm
(
Fœ¡Ord”FunùiÚ
* 
funùiÚ
);

97 
G¿d›ÁProbËm
(
Fœ¡Ord”FunùiÚ
* 
funùiÚ
,

98 
LoÿlP¬am‘”iz©iÚ
* 
·¿m‘”iz©iÚ
);

100 
NumP¬am‘”s
() const;

101 
NumLoÿlP¬am‘”s
() const;

104 
boŞ
 
Ev®u©e
(cÚ¡ * 
·¿m‘”s
, * 
co¡
, * 
g¿d›Á
) const;

105 
boŞ
 
Plus
(cÚ¡ * 
x
, cÚ¡ * 
d–
, * 
x_¶us_d–
) const;

107 
	g´iv©e
:

108 
š‹º®
::
scİed_±r
<
Fœ¡Ord”FunùiÚ
> 
funùiÚ_
;

109 
	gš‹º®
::
scİed_±r
<
LoÿlP¬am‘”iz©iÚ
> 
·¿m‘”iz©iÚ_
;

110 
	gš‹º®
::
scİed_¬¿y
<> 
sü©ch_
;

115 şas 
	cCERES_EXPORT
 
	gFœ¡Ord”FunùiÚ
 {

116 
	gpublic
:

117 
vœtu®
 ~
Fœ¡Ord”FunùiÚ
() {}

119 
vœtu®
 
boŞ
 
Ev®u©e
(cÚ¡ * cÚ¡ 
·¿m‘”s
,

120 * 
co¡
,

121 * 
g¿d›Á
) const = 0;

122 
vœtu®
 
NumP¬am‘”s
() const = 0;

	@/usr/include/ceres/gradient_problem_solver.h

31 #iâdeà
CERES_PUBLIC_GRADIENT_PROBLEM_SOLVER_H_


32 
	#CERES_PUBLIC_GRADIENT_PROBLEM_SOLVER_H_


	)

34 
	~<cm©h
>

35 
	~<¡ršg
>

36 
	~<veùÜ
>

37 
	~"û»s/š‹º®/maüos.h
"

38 
	~"û»s/š‹º®/pÜt.h
"

39 
	~"û»s/™”©iÚ_ÿÎback.h
"

40 
	~"û»s/ty³s.h
"

41 
	~"û»s/š‹º®/di§bË_w¬nšgs.h
"

43 
Çme¥aû
 
	gû»s
 {

45 
şass
 
	gG¿d›ÁProbËm
;

47 şas 
	cCERES_EXPORT
 
	gG¿d›ÁProbËmSŞv”
 {

48 
	gpublic
:

49 
vœtu®
 ~
G¿d›ÁProbËmSŞv”
();

56 
CERES_EXPORT
 
	gO±iÚs
 {

58 
O±iÚs
() {

59 
	glše_£¬ch_dœeùiÚ_ty³
 = 
LBFGS
;

60 
	glše_£¬ch_ty³
 = 
WOLFE
;

61 
	gnÚlš—r_cÚjug©e_g¿d›Á_ty³
 = 
FLETCHER_REEVES
;

62 
	gmax_lbfgs_¿nk
 = 20;

63 
	gu£_­´oxim©e_eig’v®ue_bfgs_sÿlšg
 = 
çl£
;

64 
	glše_£¬ch_š‹½Ş©iÚ_ty³
 = 
CUBIC
;

65 
	gmš_lše_£¬ch_¡•_size
 = 1e-9;

66 
	glše_£¬ch_suffic›Á_funùiÚ_deü—£
 = 1e-4;

67 
	gmax_lše_£¬ch_¡•_cÚŒaùiÚ
 = 1e-3;

68 
	gmš_lše_£¬ch_¡•_cÚŒaùiÚ
 = 0.6;

69 
	gmax_num_lše_£¬ch_¡•_size_™”©iÚs
 = 20;

70 
	gmax_num_lše_£¬ch_dœeùiÚ_»¡¬ts
 = 5;

71 
	glše_£¬ch_suffic›Á_curv©u»_deü—£
 = 0.9;

72 
	gmax_lše_£¬ch_¡•_ex·nsiÚ
 = 10.0;

73 
	gmax_num_™”©iÚs
 = 50;

74 
	gmax_sŞv”_time_š_£cÚds
 = 1e9;

75 
	gfunùiÚ_tŞ”ªû
 = 1e-6;

76 
	gg¿d›Á_tŞ”ªû
 = 1e-10;

77 
	g·¿m‘”_tŞ”ªû
 = 1e-8;

78 
	gloggšg_ty³
 = 
PER_MINIMIZER_ITERATION
;

79 
	gmšimiz”_´og»ss_to_¡dout
 = 
çl£
;

85 
boŞ
 
IsV®id
(
¡d
::
¡ršg
* 
”rÜ
) const;

88 
LšeS—rchDœeùiÚTy³
 
	glše_£¬ch_dœeùiÚ_ty³
;

89 
LšeS—rchTy³
 
	glše_£¬ch_ty³
;

90 
NÚlš—rCÚjug©eG¿d›ÁTy³
 
	gnÚlš—r_cÚjug©e_g¿d›Á_ty³
;

116 
	gmax_lbfgs_¿nk
;

138 
boŞ
 
	gu£_­´oxim©e_eig’v®ue_bfgs_sÿlšg
;

145 
LšeS—rchIÁ”pŞ©iÚTy³
 
	glše_£¬ch_š‹½Ş©iÚ_ty³
;

149 
	gmš_lše_£¬ch_¡•_size
;

163 
	glše_£¬ch_suffic›Á_funùiÚ_deü—£
;

173 
	gmax_lše_£¬ch_¡•_cÚŒaùiÚ
;

183 
	gmš_lše_£¬ch_¡•_cÚŒaùiÚ
;

188 
	gmax_num_lše_£¬ch_¡•_size_™”©iÚs
;

195 
	gmax_num_lše_£¬ch_dœeùiÚ_»¡¬ts
;

208 
	glše_£¬ch_suffic›Á_curv©u»_deü—£
;

219 
	gmax_lše_£¬ch_¡•_ex·nsiÚ
;

222 
	gmax_num_™”©iÚs
;

225 
	gmax_sŞv”_time_š_£cÚds
;

231 
	gfunùiÚ_tŞ”ªû
;

238 
	gg¿d›Á_tŞ”ªû
;

244 
	g·¿m‘”_tŞ”ªû
;

248 
LoggšgTy³
 
	gloggšg_ty³
;

254 
boŞ
 
	gmšimiz”_´og»ss_to_¡dout
;

271 
	g¡d
::
veùÜ
<
I‹¿tiÚC®lback
*> 
ÿÎbacks
;

274 
CERES_EXPORT
 
	gSumm¬y
 {

275 
Summ¬y
();

279 
	g¡d
::
¡ršg
 
Br›fR•Üt
() const;

283 
	g¡d
::
¡ršg
 
FuÎR•Üt
() const;

285 
boŞ
 
IsSŞutiÚU§bË
() const;

288 
T”mš©iÚTy³
 
	g‹rmš©iÚ_ty³
;

291 
	g¡d
::
¡ršg
 
mes§ge
;

295 
	gš™Ÿl_co¡
;

299 
	gfš®_co¡
;

302 
	g¡d
::
veùÜ
<
I‹¿tiÚSumm¬y
> 
™”©iÚs
;

305 
	gnum_co¡_ev®u©iÚs
;

308 
	gnum_g¿d›Á_ev®u©iÚs
;

311 
	gtÙ®_time_š_£cÚds
;

314 
	gco¡_ev®u©iÚ_time_š_£cÚds
;

317 
	gg¿d›Á_ev®u©iÚ_time_š_£cÚds
;

321 
	glše_£¬ch_pŞynomŸl_mšimiz©iÚ_time_š_£cÚds
;

324 
	gnum_·¿m‘”s
;

327 
	gnum_loÿl_·¿m‘”s
;

330 
LšeS—rchDœeùiÚTy³
 
	glše_£¬ch_dœeùiÚ_ty³
;

333 
LšeS—rchTy³
 
	glše_£¬ch_ty³
;

337 
LšeS—rchIÁ”pŞ©iÚTy³
 
	glše_£¬ch_š‹½Ş©iÚ_ty³
;

342 
NÚlš—rCÚjug©eG¿d›ÁTy³
 
	gnÚlš—r_cÚjug©e_g¿d›Á_ty³
;

346 
	gmax_lbfgs_¿nk
;

354 
vœtu®
 
SŞve
(cÚ¡ 
G¿d›ÁProbËmSŞv”
::
O±iÚs
& 
İtiÚs
,

355 cÚ¡ 
G¿d›ÁProbËm
& 
´obËm
,

356 * 
·¿m‘”s
,

357 
G¿d›ÁProbËmSŞv”
::
Summ¬y
* 
summ¬y
);

361 
CERES_EXPORT
 
SŞve
(cÚ¡ 
G¿d›ÁProbËmSŞv”
::
O±iÚs
& 
İtiÚs
,

362 cÚ¡ 
G¿d›ÁProbËm
& 
´obËm
,

363 * 
·¿m‘”s
,

364 
G¿d›ÁProbËmSŞv”
::
Summ¬y
* 
summ¬y
);

368 
	~"û»s/š‹º®/»’abË_w¬nšgs.h
"

	@/usr/include/ceres/iteration_callback.h

35 #iâdeà
CERES_PUBLIC_ITERATION_CALLBACK_H_


36 
	#CERES_PUBLIC_ITERATION_CALLBACK_H_


	)

38 
	~"û»s/ty³s.h
"

39 
	~"û»s/š‹º®/di§bË_w¬nšgs.h
"

41 
Çme¥aû
 
	gû»s
 {

45 
CERES_EXPORT
 
	gI‹¿tiÚSumm¬y
 {

46 
I‹¿tiÚSumm¬y
()

47 : 
™”©iÚ
(0),

48 
¡•_is_v®id
(
çl£
),

49 
¡•_is_nÚmÚÙÚic
(
çl£
),

50 
¡•_is_sucûssful
(
çl£
),

51 
co¡
(0.0),

52 
co¡_chªge
(0.0),

53 
g¿d›Á_max_nÜm
(0.0),

54 
g¿d›Á_nÜm
(0.0),

55 
¡•_nÜm
(0.0),

56 
‘a
(0.0),

57 
¡•_size
(0.0),

58 
lše_£¬ch_funùiÚ_ev®u©iÚs
(0),

59 
lše_£¬ch_g¿d›Á_ev®u©iÚs
(0),

60 
lše_£¬ch_™”©iÚs
(0),

61 
lš—r_sŞv”_™”©iÚs
(0),

62 
™”©iÚ_time_š_£cÚds
(0.0),

63 
¡•_sŞv”_time_š_£cÚds
(0.0),

64 
cumuÏtive_time_š_£cÚds
(0.0) {}

67 
št32
 
	g™”©iÚ
;

73 
boŞ
 
	g¡•_is_v®id
;

81 
boŞ
 
	g¡•_is_nÚmÚÙÚic
;

93 
boŞ
 
	g¡•_is_sucûssful
;

96 
	gco¡
;

100 
	gco¡_chªge
;

103 
	gg¿d›Á_max_nÜm
;

106 
	gg¿d›Á_nÜm
;

110 
	g¡•_nÜm
;

114 
	g»Ïtive_deü—£
;

119 
	gŒu¡_»giÚ_¿dius
;

126 
	g‘a
;

129 
	g¡•_size
;

132 
	glše_£¬ch_funùiÚ_ev®u©iÚs
;

135 
	glše_£¬ch_g¿d›Á_ev®u©iÚs
;

138 
	glše_£¬ch_™”©iÚs
;

142 
	glš—r_sŞv”_™”©iÚs
;

148 
	g™”©iÚ_time_š_£cÚds
;

151 
	g¡•_sŞv”_time_š_£cÚds
;

154 
	gcumuÏtive_time_š_£cÚds
;

215 şas 
	cCERES_EXPORT
 
	gI‹¿tiÚC®lback
 {

216 
	gpublic
:

217 
vœtu®
 ~
I‹¿tiÚC®lback
() {}

218 
vœtu®
 
C®lbackR‘uºTy³
 
İ”©Ü
()(cÚ¡ 
I‹¿tiÚSumm¬y
& 
summ¬y
) = 0;

223 
	~"û»s/š‹º®/»’abË_w¬nšgs.h
"

	@/usr/include/ceres/jet.h

156 #iâdeà
CERES_PUBLIC_JET_H_


157 
	#CERES_PUBLIC_JET_H_


	)

159 
	~<cm©h
>

160 
	~<iosfwd
>

161 
	~<io¡»am
>

162 
	~<lim™s
>

163 
	~<¡ršg
>

165 
	~"Eig’/CÜe
"

166 
	~"û»s/åşassify.h
"

167 
	~"û»s/š‹º®/pÜt.h
"

169 
Çme¥aû
 
	gû»s
 {

171 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
>

172 
	sJ‘
 {

173 ’um { 
	gDIMENSION
 = 
N
 };

180 
J‘
(è: 
a
() {

181 
v
.
£tZ”o
();

185 
ex¶ic™
 
J‘
(cÚ¡ 
T
& 
v®ue
) {

186 
	ga
 = 
v®ue
;

187 
	gv
.
£tZ”o
();

191 
J‘
(cÚ¡ 
T
& 
v®ue
, 
k
) {

192 
	ga
 = 
v®ue
;

193 
	gv
.
£tZ”o
();

194 
	gv
[
k
] = 
T
(1.0);

201 
	g‹m¶©e
<
ty³Çme
 
	gD”ived
>

202 
EIGEN_STRONG_INLINE
 
J‘
(cÚ¡ 
T
& 
a
, cÚ¡ 
Eig’
::
D’£Ba£
<
D”ived
> &
v
)

203 : 
a
×), 
v
(v) {

207 
	gJ‘
<
	gT
, 
	gN
>& 
	gİ”©Ü
+=(cÚ¡ 
J‘
<
T
, N> &
	gy
) {

208 *
	gthis
 = *
this
 + 
y
;

209  *
	gthis
;

212 
	gJ‘
<
	gT
, 
	gN
>& 
	gİ”©Ü
-=(cÚ¡ 
J‘
<
T
, N> &
	gy
) {

213 *
	gthis
 = *
this
 - 
y
;

214  *
	gthis
;

217 
	gJ‘
<
	gT
, 
	gN
>& 
	gİ”©Ü
*=(cÚ¡ 
J‘
<
T
, N> &
	gy
) {

218 *
	gthis
 = *
this
 * 
y
;

219  *
	gthis
;

222 
	gJ‘
<
	gT
, 
	gN
>& 
	gİ”©Ü
/=(cÚ¡ 
J‘
<
T
, N> &
	gy
) {

223 *
	gthis
 = *
this
 / 
y
;

224  *
	gthis
;

228 
	gJ‘
<
	gT
, 
	gN
>& 
	gİ”©Ü
+=(cÚ¡ 
T
& 
s
) {

229 *
this
 = *thi + 
s
;

230  *
	gthis
;

233 
	gJ‘
<
	gT
, 
	gN
>& 
	gİ”©Ü
-=(cÚ¡ 
T
& 
s
) {

234 *
this
 = *thi - 
s
;

235  *
	gthis
;

238 
	gJ‘
<
	gT
, 
	gN
>& 
	gİ”©Ü
*=(cÚ¡ 
T
& 
s
) {

239 *
this
 = *thi * 
s
;

240  *
	gthis
;

243 
	gJ‘
<
	gT
, 
	gN
>& 
	gİ”©Ü
/=(cÚ¡ 
T
& 
s
) {

244 *
this
 = *thi / 
s
;

245  *
	gthis
;

249 
T
 
	ga
;

261 #iâdeà
CERES_USE_CXX11


264 
	gEig’
::
M©rix
<
T
, 
	gN
, 1, Eig’::
DÚtAlign
> 
v
;

273 
cÚ¡ex´
 
	gkAlignOrNÙ
 =

274 16 <ğ::
û»s
::
pÜt_cÚ¡ªts
::
kMaxAlignBy‹s


275 ? 
Eig’
::
AutoAlign
 : Eig’::
DÚtAlign
;

276 #ià
defšed
(
EIGEN_MAX_ALIGN_BYTES
)

285 
	#CERES_JET_ALIGN_BYTES
 
EIGEN_MAX_ALIGN_BYTES


	)

288 
	#CERES_JET_ALIGN_BYTES
 16

	)

293 
cÚ¡ex´
 
size_t
 
	gkAlignm’t
 = 
kAlignOrNÙ
 =ğ
Eig’
::
AutoAlign


294 ? 
CERES_JET_ALIGN_BYTES
 : 
®ignof
();

295 #undeà
CERES_JET_ALIGN_BYTES


296 
®igÇs
(
kAlignm’t
è
	gEig’
::
M©rix
<
T
, 
	gN
, 1, 
	gkAlignOrNÙ
> 
	gv
;

301 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


302 
	gJ‘
<
	gT
, 
	gN
> cÚ¡& 
	gİ”©Ü
+(cÚ¡ J‘<T, N>& 
	gf
) {

303  
	gf
;

310 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


311 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
-(cÚ¡ J‘<T, N>&
	gf
) {

312  
	gJ‘
<
	gT
, 
	gN
>(-
	gf
.
	ga
, -f.
	gv
);

316 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


317 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
+(cÚ¡ J‘<T, N>& 
	gf
,

318 cÚ¡ 
	gJ‘
<
	gT
, 
	gN
>& 
	gg
) {

319  
	gJ‘
<
	gT
, 
	gN
>(
	gf
.
	ga
 + 
	gg
.a, f.
	gv
 + g.v);

323 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


324 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
+(cÚ¡ J‘<T, N>& 
	gf
, 
T
 
	gs
) {

325  
	gJ‘
<
	gT
, 
	gN
>(
	gf
.
	ga
 + 
	gs
, f.
	gv
);

329 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


330 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
+(
T
 
	gs
, cÚ¡ J‘<T, N>& 
	gf
) {

331  
	gJ‘
<
	gT
, 
	gN
>(
	gf
.
	ga
 + 
	gs
, f.
	gv
);

335 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


336 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
-(cÚ¡ J‘<T, N>& 
	gf
,

337 cÚ¡ 
	gJ‘
<
	gT
, 
	gN
>& 
	gg
) {

338  
	gJ‘
<
	gT
, 
	gN
>(
	gf
.
	ga
 - 
	gg
.a, f.
	gv
 - g.v);

342 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


343 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
-(cÚ¡ J‘<T, N>& 
	gf
, 
T
 
	gs
) {

344  
	gJ‘
<
	gT
, 
	gN
>(
	gf
.
	ga
 - 
	gs
, f.
	gv
);

348 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


349 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
-(
T
 
	gs
, cÚ¡ J‘<T, N>& 
	gf
) {

350  
	gJ‘
<
	gT
, 
	gN
>(
	gs
 - 
	gf
.
	ga
, -f.
	gv
);

354 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


355 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
*(cÚ¡ J‘<T, N>& 
	gf
,

356 cÚ¡ 
	gJ‘
<
	gT
, 
	gN
>& 
	gg
) {

357  
	gJ‘
<
	gT
, 
	gN
>(
	gf
.
a
 * 
	gg
.
	ga
, f.¨* g.
	gv
 + f.
v
 * g.a);

361 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


362 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
*(cÚ¡ J‘<T, N>& 
	gf
, 
T
 
	gs
) {

363  
	gJ‘
<
	gT
, 
	gN
>(
	gf
.
a
 * 
	gs
, f.
v
 * s);

367 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


368 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
*(
T
 
	gs
, cÚ¡ J‘<T, N>& 
	gf
) {

369  
	gJ‘
<
	gT
, 
	gN
>(
	gf
.
a
 * 
	gs
, f.
v
 * s);

373 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


374 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
/(cÚ¡ J‘<T, N>& 
	gf
,

375 cÚ¡ 
	gJ‘
<
	gT
, 
	gN
>& 
	gg
) {

383 cÚ¡ 
T
 
	gg_a_šv”£
 = T(1.0è/ 
g
.
a
;

384 cÚ¡ 
T
 
	gf_a_by_g_a
 = 
f
.
a
 * 
g_a_šv”£
;

385  
	gJ‘
<
	gT
, 
	gN
>(
	gf
.
a
 * 
	gg_a_šv”£
, (f.
	gv
 - 
f_a_by_g_a
 * 
	gg
.v) * g_a_inverse);

389 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


390 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
/(
T
 
	gs
, cÚ¡ J‘<T, N>& 
	gg
) {

391 cÚ¡ 
T
 
	gmšus_s_g_a_šv”£2
 = -
s
 / (
g
.
a
 * g.a);

392  
	gJ‘
<
	gT
, 
	gN
>(
	gs
 / 
	gg
.
	ga
, g.
v
 * 
	gmšus_s_g_a_šv”£2
);

396 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše


397 
	gJ‘
<
	gT
, 
	gN
> 
	gİ”©Ü
/(cÚ¡ J‘<T, N>& 
	gf
, 
T
 
	gs
) {

398 cÚ¡ 
T
 
	gs_šv”£
 = T(1.0è/ 
s
;

399  
	gJ‘
<
	gT
, 
	gN
>(
	gf
.
a
 * 
	gs_šv”£
, f.
v
 * s_inverse);

403 
	#CERES_DEFINE_JET_COMPARISON_OPERATOR
(
İ
) \

404 
‹m¶©e
<
ty³Çme
 
T
, 
N
> 
šlše
 \

405 
boŞ
 
İ”©Ü
 
	`İ
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
, cÚ¡ J‘<T, N>& 
g
) { \

406  
f
.
a
 
İ
 
g
.a; \

408 
‹m¶©e
<
ty³Çme
 
T
, 
N
> 
šlše
 \

409 
boŞ
 
İ”©Ü
 
	`İ
(cÚ¡ 
T
& 
s
, cÚ¡ 
J‘
<T, 
N
>& 
g
) { \

410  
s
 
İ
 
g
.
a
; \

412 
‹m¶©e
<
ty³Çme
 
T
, 
N
> 
šlše
 \

413 
boŞ
 
İ”©Ü
 
	`İ
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
, cÚ¡ T& 
s
) { \

414  
f
.
a
 
İ
 
s
; \

415 }

	)

416 
CERES_DEFINE_JET_COMPARISON_OPERATOR
( < )

417 
CERES_DEFINE_JET_COMPARISON_OPERATOR
( <= )

418 
CERES_DEFINE_JET_COMPARISON_OPERATOR
( > )

419 
CERES_DEFINE_JET_COMPARISON_OPERATOR
( >= )

420 
CERES_DEFINE_JET_COMPARISON_OPERATOR
( == )

421 
CERES_DEFINE_JET_COMPARISON_OPERATOR
( != )

422 #undeà
CERES_DEFINE_JET_COMPARISON_OPERATOR


431 
šlše
 
abs
 (
x
è{  
¡d
::abs(x); }

432 
šlše
 
log
 (
x
è{  
	g¡d
::log(x); }

433 
šlše
 
exp
 (
x
è{  
	g¡d
::exp(x); }

434 
šlše
 
sq¹
 (
x
è{  
	g¡d
::sqrt(x); }

435 
šlše
 
cos
 (
x
è{  
	g¡d
::cos(x); }

436 
šlše
 
acos
 (
x
è{  
	g¡d
::acos(x); }

437 
šlše
 
sš
 (
x
è{  
	g¡d
::sin(x); }

438 
šlše
 
asš
 (
x
è{  
	g¡d
::asin(x); }

439 
šlše
 
n
 (
x
è{  
	g¡d
::tan(x); }

440 
šlše
 
©ª
 (
x
è{  
	g¡d
::atan(x); }

441 
šlše
 
sšh
 (
x
è{  
	g¡d
::sinh(x); }

442 
šlše
 
cosh
 (
x
è{  
	g¡d
::cosh(x); }

443 
šlše
 
nh
 (
x
è{  
	g¡d
::tanh(x); }

444 
šlše
 
æoÜ
 (
x
è{  
	g¡d
::floor(x); }

445 
šlše
 
û
 (
x
è{  
	g¡d
::ceil(x); }

446 
šlše
 
pow
 (
x
, 
y
è{  
	g¡d
::pow(x, y); }

447 
šlše
 
©ª2
(
y
, 
x
è{  
	g¡d
::atan2(y, x); }

452 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


453 
	gJ‘
<
	gT
, 
	gN
> 
abs
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

454  
	gf
.
	ga
 < 
T
(0.0è? -à: 
f
;

458 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


459 
	gJ‘
<
	gT
, 
	gN
> 
log
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

460 cÚ¡ 
T
 
	ga_šv”£
 = T(1.0è/ 
f
.
a
;

461  
	gJ‘
<
	gT
, 
	gN
>(
log
(
f
.
a
), 
	gf
.
v
 * 
	ga_šv”£
);

465 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


466 
	gJ‘
<
	gT
, 
	gN
> 
exp
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

467 cÚ¡ 
T
 
	gtmp
 = 
exp
(
f
.
a
);

468  
	gJ‘
<
	gT
, 
	gN
>(
	gtmp
, 
tmp
 * 
	gf
.
	gv
);

472 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


473 
	gJ‘
<
	gT
, 
	gN
> 
sq¹
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

474 cÚ¡ 
T
 
	gtmp
 = 
sq¹
(
f
.
a
);

475 cÚ¡ 
T
 
	gtwo_a_šv”£
 = T(1.0è/ (T(2.0è* 
tmp
);

476  
	gJ‘
<
	gT
, 
	gN
>(
	gtmp
, 
	gf
.
v
 * 
	gtwo_a_šv”£
);

480 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


481 
	gJ‘
<
	gT
, 
	gN
> 
cos
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

482  
	gJ‘
<
	gT
, 
	gN
>(
cos
(
f
.
a
), - 
sš
(f.aè* 
	gf
.
	gv
);

486 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


487 
	gJ‘
<
	gT
, 
	gN
> 
acos
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

488 cÚ¡ 
T
 
	gtmp
 = - T(1.0è/ 
sq¹
(T(1.0è- 
f
.
a
 * f.a);

489  
	gJ‘
<
	gT
, 
	gN
>(
acos
(
f
.
a
), 
tmp
 * 
	gf
.
	gv
);

493 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


494 
	gJ‘
<
	gT
, 
	gN
> 
sš
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

495  
	gJ‘
<
	gT
, 
	gN
>(
sš
(
f
.
a
), 
cos
(f.aè* 
	gf
.
	gv
);

499 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


500 
	gJ‘
<
	gT
, 
	gN
> 
asš
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

501 cÚ¡ 
T
 
	gtmp
 = T(1.0è/ 
sq¹
(T(1.0è- 
f
.
a
 * f.a);

502  
	gJ‘
<
	gT
, 
	gN
>(
asš
(
f
.
a
), 
tmp
 * 
	gf
.
	gv
);

506 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


507 
	gJ‘
<
	gT
, 
	gN
> 
n
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

508 cÚ¡ 
T
 
	gn_a
 = 
n
(
f
.
a
);

509 cÚ¡ 
T
 
	gtmp
 = T(1.0è+ 
n_a
 *an_a;

510  
	gJ‘
<
	gT
, 
	gN
>(
	gn_a
, 
tmp
 * 
	gf
.
	gv
);

514 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


515 
	gJ‘
<
	gT
, 
	gN
> 
©ª
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

516 cÚ¡ 
T
 
	gtmp
 = T(1.0è/ (T(1.0è+ 
f
.
a
 * f.a);

517  
	gJ‘
<
	gT
, 
	gN
>(
©ª
(
f
.
a
), 
tmp
 * 
	gf
.
	gv
);

521 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


522 
	gJ‘
<
	gT
, 
	gN
> 
sšh
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

523  
	gJ‘
<
	gT
, 
	gN
>(
sšh
(
f
.
a
), 
cosh
(f.aè* 
	gf
.
	gv
);

527 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


528 
	gJ‘
<
	gT
, 
	gN
> 
cosh
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

529  
	gJ‘
<
	gT
, 
	gN
>(
cosh
(
f
.
a
), 
sšh
(f.aè* 
	gf
.
	gv
);

533 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


534 
	gJ‘
<
	gT
, 
	gN
> 
nh
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

535 cÚ¡ 
T
 
	gnh_a
 = 
nh
(
f
.
a
);

536 cÚ¡ 
T
 
	gtmp
 = T(1.0è- 
nh_a
 *anh_a;

537  
	gJ‘
<
	gT
, 
	gN
>(
	gnh_a
, 
tmp
 * 
	gf
.
	gv
);

544 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


545 
	gJ‘
<
	gT
, 
	gN
> 
æoÜ
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

546  
	gJ‘
<
	gT
, 
	gN
>(
æoÜ
(
f
.
a
));

553 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


554 
	gJ‘
<
	gT
, 
	gN
> 
û
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

555  
	gJ‘
<
	gT
, 
	gN
>(
û
(
f
.
a
));

564 
šlše
 
Bes£lJ0
(
x
) {

565 #ià
defšed
(
CERES_MSVC_USE_UNDERSCORE_PREFIXED_BESSEL_FUNCTIONS
)

566  
_j0
(
x
);

568  
j0
(
x
);

571 
šlše
 
Bes£lJ1
(
x
) {

572 #ià
defšed
(
CERES_MSVC_USE_UNDERSCORE_PREFIXED_BESSEL_FUNCTIONS
)

573  
_j1
(
x
);

575  
j1
(
x
);

578 
šlše
 
Bes£lJn
(
n
, 
x
) {

579 #ià
defšed
(
CERES_MSVC_USE_UNDERSCORE_PREFIXED_BESSEL_FUNCTIONS
)

580  
_jn
(
n
, 
x
);

582  
jn
(
n
, 
x
);

594 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


595 
	gJ‘
<
	gT
, 
	gN
> 
Bes£lJ0
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

596  
	gJ‘
<
	gT
, 
	gN
>(
Bes£lJ0
(
f
.
a
),

597 -
Bes£lJ1
(
f
.
a
è* 
	gf
.
	gv
);

602 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


603 
	gJ‘
<
	gT
, 
	gN
> 
Bes£lJ1
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

604  
	gJ‘
<
	gT
, 
	gN
>(
Bes£lJ1
(
f
.
a
),

605 
T
(0.5è* (
Bes£lJ0
(
f
.
a
è- 
Bes£lJn
(2, f.a)è* 
	gf
.
	gv
);

610 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


611 
	gJ‘
<
	gT
, 
	gN
> 
Bes£lJn
(
n
, cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

612  
	gJ‘
<
	gT
, 
	gN
>(
Bes£lJn
(
n
, 
f
.
a
),

613 
T
(0.5è* (
Bes£lJn
(
n
 - 1, 
f
.
a
è- Bes£lJnÒ + 1, f.a)è* 
	gf
.
	gv
);

627 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


628 
boŞ
 
IsFš™e
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

629 ià(!
IsFš™e
(
f
.
a
)) {

630  
	gçl£
;

632 
	gi
 = 0; i < 
	gN
; ++i) {

633 ià(!
IsFš™e
(
f
.
v
[
i
])) {

634  
	gçl£
;

637  
	gŒue
;

641 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


642 
boŞ
 
IsInfš™e
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

643 ià(
IsInfš™e
(
f
.
a
)) {

644  
	gŒue
;

646 
	gi
 = 0; i < 
	gN
; i++) {

647 ià(
IsInfš™e
(
f
.
v
[
i
])) {

648  
	gŒue
;

651  
	gçl£
;

655 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


656 
boŞ
 
IsNaN
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

657 ià(
IsNaN
(
f
.
a
)) {

658  
	gŒue
;

660 
	gi
 = 0; i < 
	gN
; ++i) {

661 ià(
IsNaN
(
f
.
v
[
i
])) {

662  
	gŒue
;

665  
	gçl£
;

669 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


670 
boŞ
 
IsNÜm®
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
) {

671 ià(!
IsNÜm®
(
f
.
a
)) {

672  
	gçl£
;

674 
	gi
 = 0; i < 
	gN
; ++i) {

675 ià(!
IsNÜm®
(
f
.
v
[
i
])) {

676  
	gçl£
;

679  
	gŒue
;

686 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


687 
	gJ‘
<
	gT
, 
	gN
> 
©ª2
(cÚ¡ 
J‘
<
T
, 
N
>& 
g
, cÚ¡ J‘<T, N>& 
f
) {

693 
T
 cÚ¡ 
	gtmp
 = T(1.0è/ (
f
.
a
 * f.¨+ 
g
.a * g.a);

694  
	gJ‘
<
	gT
, 
	gN
>(
©ª2
(
g
.
a
, 
f
.a), 
	gtmp
 * (- 
	gg
.¨* 
	gf
.
	gv
 + f.a * g.v));

700 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


701 
	gJ‘
<
	gT
, 
	gN
> 
pow
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
, 
g
) {

702 
T
 cÚ¡ 
	gtmp
 = 
g
 * 
pow
(
f
.
a
, g - T(1.0));

703  
	gJ‘
<
	gT
, 
	gN
>(
pow
(
f
.
a
, 
g
), 
tmp
 * 
	gf
.
	gv
);

717 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


718 
	gJ‘
<
	gT
, 
	gN
> 
pow
(
f
, cÚ¡ 
J‘
<
T
, 
N
>& 
g
) {

719 ià(
	gf
 =ğ0 && 
g
.
a
 > 0) {

721  
J‘
<
T
, 
N
>(T(0.0));

723 ià(
	gf
 < 0 && 
	gg
.
	ga
 =ğ
æoÜ
(
g
.
a
)) {

725 
J‘
<
T
, 
N
> 
»t
(
pow
(
f
, 
g
.
a
));

726 
	gi
 = 0; i < 
	gN
; i++) {

727 ià(
	gg
.
	gv
[
i
] !ğ
T
(0.0)) {

729 
»t
.
v
[
i
] = 
¡d
::
num”ic_lim™s
<
T
>::
qu›t_NaN
();

732  
	g»t
;

735 
T
 cÚ¡ 
	gtmp
 = 
pow
(
f
, 
g
.
a
);

736  
	gJ‘
<
	gT
, 
	gN
>(
	gtmp
, 
log
(
f
è* 
tmp
 * 
	gg
.
	gv
);

775 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
> 
šlše


776 
	gJ‘
<
	gT
, 
	gN
> 
pow
(cÚ¡ 
J‘
<
T
, 
N
>& 
f
, cÚ¡ J‘<T, N>& 
g
) {

777 ià(
	gf
.
	ga
 =ğ0 && 
g
.
a
 >= 1) {

779 ià(
g
.
a
 > 1) {

780  
J‘
<
T
, 
N
>(T(0.0));

782  
	gf
;

784 ià(
	gf
.
	ga
 < 0 && 
	gg
.¨=ğ
æoÜ
(
g
.
a
)) {

786 
T
 cÚ¡ 
tmp
 = 
g
.
a
 * 
pow
(
f
.a, g.a - T(1.0));

787 
	gJ‘
<
	gT
, 
	gN
> 
»t
(
pow
(
f
.
a
, 
g
.a), 
tmp
 * f.
v
);

788 
	gi
 = 0; i < 
	gN
; i++) {

789 ià(
	gg
.
	gv
[
i
] !ğ
T
(0.0)) {

791 
»t
.
v
[
i
] = 
¡d
::
num”ic_lim™s
<
T
>::
qu›t_NaN
();

794  
	g»t
;

799 
T
 cÚ¡ 
	gtmp1
 = 
pow
(
f
.
a
, 
g
.a);

800 
T
 cÚ¡ 
	gtmp2
 = 
g
.
a
 * 
pow
(
f
.a, g.a - T(1.0));

801 
T
 cÚ¡ 
	gtmp3
 = 
tmp1
 * 
log
(
f
.
a
);

802  
	gJ‘
<
	gT
, 
	gN
>(
	gtmp1
, 
tmp2
 * 
	gf
.
	gv
 + 
tmp3
 * 
	gg
.v);

820 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 cÚ¡ 
	gJ‘
<T, N>& 
ei_cÚj
(cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
	gx
; }

821 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 cÚ¡ 
	gJ‘
<T, N>& 
ei_»®
(cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
	gx
; }

822 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_imag
(cÚ¡ 
J‘
<
T
, 
N
>& ) {  Jet<T, N>(0.0); }

823 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_abs
 (cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
çbs
(x); }

824 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_abs2
(cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  x * 
	gx
; }

825 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_sq¹
(cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
sq¹
(x); }

826 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_exp
 (cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
exp
(x); }

827 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_log
 (cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
log
(x); }

828 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_sš
 (cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
sš
(x); }

829 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_cos
 (cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
cos
(x); }

830 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_n
 (cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
n
(x); }

831 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_©ª
(cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
©ª
(x); }

832 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_sšh
(cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
sšh
(x); }

833 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_cosh
(cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
cosh
(x); }

834 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_nh
(cÚ¡ 
J‘
<
T
, 
N
>& 
x
è{  
nh
(x); }

835 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
> 
šlše
 
	gJ‘
<T, N> 
ei_pow
 (cÚ¡ 
J‘
<
T
, 
N
>& 
x
, J‘<T, N> 
y
è{  
pow
(x, y); }

840 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
	gN
>

841 
šlše
 
	g¡d
::
o¡»am
 &
İ”©Ü
<<(
¡d
::o¡»am &
s
, cÚ¡ 
	gJ‘
<
	gT
, 
	gN
>& 
	gz
) {

842 
	gs
 << "[" << 
	gz
.
	ga
 << " ; ";

843 
	gi
 = 0; i < 
	gN
; ++i) {

844 
	gs
 << 
	gz
.
	gv
[
i
];

845 ià(
	gi
 !ğ
N
 - 1) {

846 
s
 << ", ";

849 
	gs
 << "]";

850  
	gs
;

855 
Çme¥aû
 
	gEig’
 {

859 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
	gN
>

860 
	gNumT¿™s
<
	gû»s
::
J‘
<
T
, 
	gN
> > {

861 
	gû»s
::
	tJ‘
<
	tT
, 
	tN
> 
	tR—l
;

862 
	gû»s
::
	tJ‘
<
	tT
, 
	tN
> 
	tNÚIÁeg”
;

863 
	gû»s
::
	tJ‘
<
	tT
, 
	tN
> 
	tNe¡ed
;

864 
	gû»s
::
	tJ‘
<
	tT
, 
	tN
> 
	tL™”®
;

866 
ty³Çme
 
	gû»s
::
J‘
<
T
, 
	gN
> 
dummy_´ecisiÚ
() {

867  
	gû»s
::
J‘
<
T
, 
	gN
>(1e-12);

870 
šlše
 
R—l
 
•sÚ
() {

871  
R—l
(
¡d
::
num”ic_lim™s
<
T
>::
•sÚ
());

874 
šlše
 
dig™s10
(è{  
	gNumT¿™s
<
	gT
>::digits10(); }

877 
	gIsCom¶ex
 = 0,

878 
	gIsIÁeg”
 = 0,

879 
	gIsSigÃd
,

880 
	gR—dCo¡
 = 1,

881 
	gAddCo¡
 = 1,

883 
	gMulCo¡
 = 3,

884 
	gHasFlßtšgPošt
 = 1,

885 
	gRequœeIn™Ÿliz©iÚ
 = 1

888 
	g‹m¶©e
<
boŞ
 
	gVeùÜized
>

889 
	sDiv
 {

891 #ià
defšed
(
EIGEN_VECTORIZE_AVX
)

892 
	gAVX
 = 
Œue
,

894 
	gAVX
 = 
çl£
,

899 
	gCo¡
 = 3

904 #ià
EIGEN_VERSION_AT_LEAST
(3, 3, 0)

911 
	g‹m¶©e
 <
ty³Çme
 
	gBš¬yOp
,y³Çm
	gT
, 
	gN
>

912 
	gSÿÏrBš¬yOpT¿™s
<
	gû»s
::
J‘
<
T
, 
	gN
>, 
	gT
, 
	gBš¬yOp
> {

913 
	gû»s
::
	tJ‘
<
	tT
, 
	tN
> 
	tR‘uºTy³
;

915 
	g‹m¶©e
 <
ty³Çme
 
	gBš¬yOp
,y³Çm
	gT
, 
	gN
>

916 
	gSÿÏrBš¬yOpT¿™s
<
	gT
, 
	gû»s
::
J‘
<
T
, 
	gN
>, 
	gBš¬yOp
> {

917 
	gû»s
::
	tJ‘
<
	tT
, 
	tN
> 
	tR‘uºTy³
;

	@/usr/include/ceres/local_parameterization.h

32 #iâdeà
CERES_PUBLIC_LOCAL_PARAMETERIZATION_H_


33 
	#CERES_PUBLIC_LOCAL_PARAMETERIZATION_H_


	)

35 
	~<veùÜ
>

36 
	~"û»s/š‹º®/pÜt.h
"

37 
	~"û»s/š‹º®/scİed_±r.h
"

38 
	~"û»s/š‹º®/di§bË_w¬nšgs.h
"

40 
Çme¥aû
 
	gû»s
 {

112 şas 
	cCERES_EXPORT
 
	gLoÿlP¬am‘”iz©iÚ
 {

113 
	gpublic
:

114 
vœtu®
 ~
LoÿlP¬am‘”iz©iÚ
();

121 
vœtu®
 
boŞ
 
Plus
(cÚ¡ * 
x
,

122 cÚ¡ * 
d–
,

123 * 
x_¶us_d–
) const = 0;

128 
vœtu®
 
boŞ
 
Compu‹JacobŸn
(cÚ¡ * 
x
, * 
jacobŸn
) const = 0;

138 
vœtu®
 
boŞ
 
MuÉlyByJacobŸn
(cÚ¡ * 
x
,

139 cÚ¡ 
num_rows
,

140 cÚ¡ * 
glob®_m©rix
,

141 * 
loÿl_m©rix
) const;

144 
vœtu®
 
Glob®Size
() const = 0;

147 
vœtu®
 
LoÿlSize
() const = 0;

153 şas 
	cCERES_EXPORT
 
	gId’t™yP¬am‘”iz©iÚ
 : 
public
 
LoÿlP¬am‘”iz©iÚ
 {

154 
public
:

155 
ex¶ic™
 
Id’t™yP¬am‘”iz©iÚ
(
size
);

156 
	gvœtu®
 ~
Id’t™yP¬am‘”iz©iÚ
() {}

157 
vœtu®
 
boŞ
 
Plus
(cÚ¡ * 
x
,

158 cÚ¡ * 
d–
,

159 * 
x_¶us_d–
) const;

160 
vœtu®
 
boŞ
 
Compu‹JacobŸn
(cÚ¡ * 
x
,

161 * 
jacobŸn
) const;

162 
vœtu®
 
boŞ
 
MuÉlyByJacobŸn
(cÚ¡ * 
x
,

163 cÚ¡ 
num_cŞs
,

164 cÚ¡ * 
glob®_m©rix
,

165 * 
loÿl_m©rix
) const;

166 
vœtu®
 
Glob®Size
(ècÚ¡ {  
	gsize_
; }

167 
vœtu®
 
LoÿlSize
(ècÚ¡ {  
	gsize_
; }

169 
	g´iv©e
:

170 cÚ¡ 
size_
;

174 şas 
	cCERES_EXPORT
 
	gSub£tP¬am‘”iz©iÚ
 : 
public
 
LoÿlP¬am‘”iz©iÚ
 {

175 
public
:

176 
ex¶ic™
 
Sub£tP¬am‘”iz©iÚ
(
size
,

177 cÚ¡ 
¡d
::
veùÜ
<>& 
cÚ¡ªt_·¿m‘”s
);

178 
	gvœtu®
 ~
Sub£tP¬am‘”iz©iÚ
() {}

179 
vœtu®
 
boŞ
 
Plus
(cÚ¡ * 
x
,

180 cÚ¡ * 
d–
,

181 * 
x_¶us_d–
) const;

182 
vœtu®
 
boŞ
 
Compu‹JacobŸn
(cÚ¡ * 
x
,

183 * 
jacobŸn
) const;

184 
vœtu®
 
boŞ
 
MuÉlyByJacobŸn
(cÚ¡ * 
x
,

185 cÚ¡ 
num_cŞs
,

186 cÚ¡ * 
glob®_m©rix
,

187 * 
loÿl_m©rix
) const;

188 
vœtu®
 
Glob®Size
() const {

189  
	g¡©ic_ÿ¡
<>(
	gcÚ¡ªcy_mask_
.
size
());

191 
vœtu®
 
LoÿlSize
(ècÚ¡ {  
	gloÿl_size_
; }

193 
	g´iv©e
:

194 cÚ¡ 
loÿl_size_
;

195 
	g¡d
::
veùÜ
<> 
cÚ¡ªcy_mask_
;

202 şas 
	cCERES_EXPORT
 
	gQu©”niÚP¬am‘”iz©iÚ
 : 
public
 
LoÿlP¬am‘”iz©iÚ
 {

203 
public
:

204 
vœtu®
 ~
Qu©”niÚP¬am‘”iz©iÚ
() {}

205 
vœtu®
 
boŞ
 
Plus
(cÚ¡ * 
x
,

206 cÚ¡ * 
d–
,

207 * 
x_¶us_d–
) const;

208 
vœtu®
 
boŞ
 
Compu‹JacobŸn
(cÚ¡ * 
x
,

209 * 
jacobŸn
) const;

210 
vœtu®
 
Glob®Size
() const {  4; }

211 
vœtu®
 
LoÿlSize
() const {  3; }

225 şas 
	cCERES_EXPORT
 
	gEig’Qu©”niÚP¬am‘”iz©iÚ


226 : 
public
 
û»s
::
LoÿlP¬am‘”iz©iÚ
 {

227 
public
:

228 
vœtu®
 ~
Eig’Qu©”niÚP¬am‘”iz©iÚ
() {}

229 
vœtu®
 
boŞ
 
Plus
(cÚ¡ * 
x
,

230 cÚ¡ * 
d–
,

231 * 
x_¶us_d–
) const;

232 
vœtu®
 
boŞ
 
Compu‹JacobŸn
(cÚ¡ * 
x
, * 
jacobŸn
) const;

233 
vœtu®
 
Glob®Size
() const {  4; }

234 
vœtu®
 
LoÿlSize
() const {  3; }

250 şas 
	cCERES_EXPORT
 
	gHomog’eousVeùÜP¬am‘”iz©iÚ
 :

251 
public
 
LoÿlP¬am‘”iz©iÚ
 {

252 
public
:

253 
ex¶ic™
 
Homog’eousVeùÜP¬am‘”iz©iÚ
(
size
);

254 
	gvœtu®
 ~
Homog’eousVeùÜP¬am‘”iz©iÚ
() {}

255 
vœtu®
 
boŞ
 
Plus
(cÚ¡ * 
x
,

256 cÚ¡ * 
d–
,

257 * 
x_¶us_d–
) const;

258 
vœtu®
 
boŞ
 
Compu‹JacobŸn
(cÚ¡ * 
x
,

259 * 
jacobŸn
) const;

260 
vœtu®
 
Glob®Size
(ècÚ¡ {  
	gsize_
; }

261 
vœtu®
 
LoÿlSize
(ècÚ¡ {  
	gsize_
 - 1; }

263 
	g´iv©e
:

264 cÚ¡ 
size_
;

283 şas 
	cCERES_EXPORT
 
	gProduùP¬am‘”iz©iÚ
 : 
public
 
LoÿlP¬am‘”iz©iÚ
 {

284 
public
:

289 
ProduùP¬am‘”iz©iÚ
(
LoÿlP¬am‘”iz©iÚ
* 
loÿl_·¿m1
,

290 
LoÿlP¬am‘”iz©iÚ
* 
loÿl_·¿m2
);

292 
ProduùP¬am‘”iz©iÚ
(
LoÿlP¬am‘”iz©iÚ
* 
loÿl_·¿m1
,

293 
LoÿlP¬am‘”iz©iÚ
* 
loÿl_·¿m2
,

294 
LoÿlP¬am‘”iz©iÚ
* 
loÿl_·¿m3
);

296 
ProduùP¬am‘”iz©iÚ
(
LoÿlP¬am‘”iz©iÚ
* 
loÿl_·¿m1
,

297 
LoÿlP¬am‘”iz©iÚ
* 
loÿl_·¿m2
,

298 
LoÿlP¬am‘”iz©iÚ
* 
loÿl_·¿m3
,

299 
LoÿlP¬am‘”iz©iÚ
* 
loÿl_·¿m4
);

301 
	gvœtu®
 ~
ProduùP¬am‘”iz©iÚ
();

302 
vœtu®
 
boŞ
 
Plus
(cÚ¡ * 
x
,

303 cÚ¡ * 
d–
,

304 * 
x_¶us_d–
) const;

305 
vœtu®
 
boŞ
 
Compu‹JacobŸn
(cÚ¡ * 
x
,

306 * 
jacobŸn
) const;

307 
vœtu®
 
Glob®Size
(ècÚ¡ {  
	gglob®_size_
; }

308 
vœtu®
 
LoÿlSize
(ècÚ¡ {  
	gloÿl_size_
; }

310 
	g´iv©e
:

311 
In™
();

313 
	g¡d
::
veùÜ
<
LoÿlP¬am‘”iz©iÚ
*> 
loÿl_·¿ms_
;

314 
	gloÿl_size_
;

315 
	gglob®_size_
;

316 
	gbufãr_size_
;

321 
	~"û»s/š‹º®/»’abË_w¬nšgs.h
"

	@/usr/include/ceres/loss_function.h

75 #iâdeà
CERES_PUBLIC_LOSS_FUNCTION_H_


76 
	#CERES_PUBLIC_LOSS_FUNCTION_H_


	)

78 
	~"glog/loggšg.h
"

79 
	~"û»s/š‹º®/maüos.h
"

80 
	~"û»s/š‹º®/scİed_±r.h
"

81 
	~"û»s/ty³s.h
"

82 
	~"û»s/š‹º®/di§bË_w¬nšgs.h
"

84 
Çme¥aû
 
	gû»s
 {

86 şas 
	cCERES_EXPORT
 
	gLossFunùiÚ
 {

87 
	gpublic
:

88 
vœtu®
 ~
LossFunùiÚ
() {}

114 
vœtu®
 
Ev®u©e
(
sq_nÜm
, 
out
[3]) const = 0;

132 şas 
	cCERES_EXPORT
 
	gTrivŸlLoss
 : 
public
 
LossFunùiÚ
 {

133 
public
:

134 
vœtu®
 
Ev®u©e
(, *) const;

175 şas 
	cCERES_EXPORT
 
	gHub”Loss
 : 
public
 
LossFunùiÚ
 {

176 
public
:

177 
ex¶ic™
 
Hub”Loss
(
a
è: 
a_
×), 
b_
(a *‡) { }

178 
vœtu®
 
Ev®u©e
(, *) const;

180 
	g´iv©e
:

181 cÚ¡ 
a_
;

183 cÚ¡ 
	gb_
;

191 şas 
	cCERES_EXPORT
 
	gSoáLOÃLoss
 : 
public
 
LossFunùiÚ
 {

192 
public
:

193 
ex¶ic™
 
SoáLOÃLoss
(
a
è: 
b_
× *‡), 
c_
(1 / b_) { }

194 
vœtu®
 
Ev®u©e
(, *) const;

196 
	g´iv©e
:

198 cÚ¡ 
b_
;

200 cÚ¡ 
	gc_
;

208 şas 
	cCERES_EXPORT
 
	gCauchyLoss
 : 
public
 
LossFunùiÚ
 {

209 
public
:

210 
ex¶ic™
 
CauchyLoss
(
a
è: 
b_
× *‡), 
c_
(1 / b_) { }

211 
vœtu®
 
Ev®u©e
(, *) const;

213 
	g´iv©e
:

215 cÚ¡ 
b_
;

217 cÚ¡ 
	gc_
;

229 şas 
	cCERES_EXPORT
 
	gArùªLoss
 : 
public
 
LossFunùiÚ
 {

230 
public
:

231 
ex¶ic™
 
ArùªLoss
(
a
è: 
a_
×), 
b_
(1 / (a *‡)) { }

232 
vœtu®
 
Ev®u©e
(, *) const;

234 
	g´iv©e
:

235 cÚ¡ 
a_
;

237 cÚ¡ 
	gb_
;

268 şas 
	cCERES_EXPORT
 
	gTŞ”ªtLoss
 : 
public
 
LossFunùiÚ
 {

269 
public
:

270 
ex¶ic™
 
TŞ”ªtLoss
(
a
, 
b
);

271 
vœtu®
 
Ev®u©e
(, *) const;

273 
	g´iv©e
:

274 cÚ¡ 
a_
, 
	gb_
, 
	gc_
;

286 şas 
	cCERES_EXPORT
 
	gTukeyLoss
 : 
public
 
û»s
::
LossFunùiÚ
 {

287 
public
:

288 
ex¶ic™
 
TukeyLoss
(
a
è: 
a_squ¬ed_
(a *‡) { }

289 
vœtu®
 
Ev®u©e
(, *) const;

291 
	g´iv©e
:

292 cÚ¡ 
a_squ¬ed_
;

298 şas 
	cCERES_EXPORT
 
	gCompo£dLoss
 : 
public
 
LossFunùiÚ
 {

299 
public
:

300 
ex¶ic™
 
Compo£dLoss
(cÚ¡ 
LossFunùiÚ
* 
f
, 
OwÃrsh
 
owÃrsh_f
,

301 cÚ¡ 
LossFunùiÚ
* 
g
, 
OwÃrsh
 
owÃrsh_g
);

302 
	gvœtu®
 ~
Compo£dLoss
();

303 
vœtu®
 
Ev®u©e
(, *) const;

305 
	g´iv©e
:

306 
š‹º®
::
scİed_±r
<cÚ¡ 
LossFunùiÚ
> 
f_
, 
	gg_
;

307 cÚ¡ 
OwÃrsh
 
	gowÃrsh_f_
, 
	gowÃrsh_g_
;

327 şas 
	cCERES_EXPORT
 
	gSÿËdLoss
 : 
public
 
LossFunùiÚ
 {

328 
public
:

332 
SÿËdLoss
(cÚ¡ 
LossFunùiÚ
* 
rho
, 
a
, 
OwÃrsh
 
owÃrsh
) :

333 
rho_
(
rho
), 
a_
(
a
), 
owÃrsh_
(
owÃrsh
) { }

335 
	gvœtu®
 ~
SÿËdLoss
() {

336 ià(
	gowÃrsh_
 =ğ
DO_NOT_TAKE_OWNERSHIP
) {

337 
rho_
.
»Ëa£
();

340 
vœtu®
 
Ev®u©e
(, *) const;

342 
	g´iv©e
:

343 
š‹º®
::
scİed_±r
<cÚ¡ 
LossFunùiÚ
> 
rho_
;

344 cÚ¡ 
	ga_
;

345 cÚ¡ 
OwÃrsh
 
	gowÃrsh_
;

346 
CERES_DISALLOW_COPY_AND_ASSIGN
(
SÿËdLoss
);

387 şas 
	cCERES_EXPORT
 
	gLossFunùiÚW¿µ”
 : 
public
 
LossFunùiÚ
 {

388 
public
:

389 
LossFunùiÚW¿µ”
(
LossFunùiÚ
* 
rho
, 
OwÃrsh
 
owÃrsh
)

390 : 
rho_
(
rho
), 
owÃrsh_
(
owÃrsh
) {

393 
	gvœtu®
 ~
LossFunùiÚW¿µ”
() {

394 ià(
	gowÃrsh_
 =ğ
DO_NOT_TAKE_OWNERSHIP
) {

395 
rho_
.
»Ëa£
();

399 
vœtu®
 
Ev®u©e
(
sq_nÜm
, 
out
[3]) const {

400 ià(
	grho_
.
g‘
(è=ğ
NULL
) {

401 
out
[0] = 
sq_nÜm
;

402 
	gout
[1] = 1.0;

403 
	gout
[2] = 0.0;

406 
	grho_
->
Ev®u©e
(
sq_nÜm
, 
out
);

410 
Re£t
(
LossFunùiÚ
* 
rho
, 
OwÃrsh
 
owÃrsh
) {

411 ià(
	gowÃrsh_
 =ğ
DO_NOT_TAKE_OWNERSHIP
) {

412 
rho_
.
»Ëa£
();

414 
	grho_
.
»£t
(
rho
);

415 
	gowÃrsh_
 = 
owÃrsh
;

418 
	g´iv©e
:

419 
š‹º®
::
scİed_±r
<cÚ¡ 
LossFunùiÚ
> 
rho_
;

420 
OwÃrsh
 
	gowÃrsh_
;

421 
CERES_DISALLOW_COPY_AND_ASSIGN
(
LossFunùiÚW¿µ”
);

426 
	~"û»s/š‹º®/»’abË_w¬nšgs.h
"

	@/usr/include/ceres/numeric_diff_cost_function.h

161 #iâdeà
CERES_PUBLIC_NUMERIC_DIFF_COST_FUNCTION_H_


162 
	#CERES_PUBLIC_NUMERIC_DIFF_COST_FUNCTION_H_


	)

164 
	~"Eig’/D’£
"

165 
	~"û»s/co¡_funùiÚ.h
"

166 
	~"û»s/š‹º®/num”ic_diff.h
"

167 
	~"û»s/š‹º®/scİed_±r.h
"

168 
	~"û»s/num”ic_diff_İtiÚs.h
"

169 
	~"û»s/sized_co¡_funùiÚ.h
"

170 
	~"û»s/ty³s.h
"

171 
	~"glog/loggšg.h
"

173 
Çme¥aû
 
	gû»s
 {

175 
	g‹m¶©e
 <
ty³Çme
 
	gCo¡FunùÜ
,

176 
Num”icDiffM‘hodTy³
 
	gm‘hod
 = 
CENTRAL
,

177 
	gkNumResidu®s
 = 0,

178 
	gN0
 = 0,

179 
	gN1
 = 0,

180 
	gN2
 = 0,

181 
	gN3
 = 0,

182 
	gN4
 = 0,

183 
	gN5
 = 0,

184 
	gN6
 = 0,

185 
	gN7
 = 0,

186 
	gN8
 = 0,

187 
	gN9
 = 0>

188 
şass
 
Num”icDiffCo¡FunùiÚ


189 : 
public
 
SizedCo¡FunùiÚ
<
kNumResidu®s
,

190 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
,

191 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
> {

192 
	gpublic
:

193 
Num”icDiffCo¡FunùiÚ
(

194 
Co¡FunùÜ
* 
funùÜ
,

195 
OwÃrsh
 
owÃrsh
 = 
TAKE_OWNERSHIP
,

196 
num_»sidu®s
 = 
kNumResidu®s
,

197 cÚ¡ 
Num”icDiffO±iÚs
& 
İtiÚs
 = NumericDiffOptions())

198 : 
funùÜ_
(
funùÜ
),

199 
owÃrsh_
(
owÃrsh
),

200 
İtiÚs_
(
İtiÚs
) {

201 ià(
	gkNumResidu®s
 =ğ
DYNAMIC
) {

202 
SizedCo¡FunùiÚ
<
kNumResidu®s
,

203 
N0
, 
N1
, 
N2
, 
N3
, 
N4
,

204 
N5
, 
N6
, 
N7
, 
N8
, 
N9
>

205 ::
£t_num_»sidu®s
(
num_»sidu®s
);

209 ~
Num”icDiffCo¡FunùiÚ
() {

210 ià(
	gowÃrsh_
 !ğ
TAKE_OWNERSHIP
) {

211 
funùÜ_
.
»Ëa£
();

215 
vœtu®
 
boŞ
 
Ev®u©e
(cÚ¡* cÚ¡* 
·¿m‘”s
,

216 * 
»sidu®s
,

217 ** 
jacobŸns
) const {

218 
usšg
 
	gš‹º®
::
FixedA¼ay
;

219 
usšg
 
	gš‹º®
::
Num”icDiff
;

221 cÚ¡ 
	gkNumP¬am‘”s
 = 
N0
 + 
N1
 + 
N2
 + 
N3
 + 
N4
 + 
N5
 + 
N6
 + 
N7
 + 
N8
 + 
N9
;

222 cÚ¡ 
	gkNumP¬am‘”Blocks
 =

223 (
N0
 > 0è+ (
N1
 > 0è+ (
N2
 > 0è+ (
N3
 > 0è+ (
N4
 > 0) +

224 (
N5
 > 0è+ (
N6
 > 0è+ (
N7
 > 0è+ (
N8
 > 0è+ (
N9
 > 0);

227 ià(!
	gš‹º®
::
Ev®u©eIm¶
<
Co¡FunùÜ
,

228 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
>(

229 
	gfunùÜ_
.
g‘
(),

230 
	g·¿m‘”s
,

231 
	g»sidu®s
,

232 
	gfunùÜ_
.
g‘
())) {

233  
	gçl£
;

236 ià(
	gjacobŸns
 =ğ
NULL
) {

237  
Œue
;

241 
	gFixedA¼ay
<> 
·¿m‘”s_cİy
(
kNumP¬am‘”s
);

242 
	gFixedA¼ay
<*> 
·¿m‘”s_»ã»nû_cİy
(
kNumP¬am‘”Blocks
);

244 
	g·¿m‘”s_»ã»nû_cİy
[0] = 
·¿m‘”s_cİy
.
g‘
();

245 ià(
	gN1
è
	g·¿m‘”s_»ã»nû_cİy
[1] = 
·¿m‘”s_»ã»nû_cİy
[0] + 
N0
;

246 ià(
	gN2
è
	g·¿m‘”s_»ã»nû_cİy
[2] = 
·¿m‘”s_»ã»nû_cİy
[1] + 
N1
;

247 ià(
	gN3
è
	g·¿m‘”s_»ã»nû_cİy
[3] = 
·¿m‘”s_»ã»nû_cİy
[2] + 
N2
;

248 ià(
	gN4
è
	g·¿m‘”s_»ã»nû_cİy
[4] = 
·¿m‘”s_»ã»nû_cİy
[3] + 
N3
;

249 ià(
	gN5
è
	g·¿m‘”s_»ã»nû_cİy
[5] = 
·¿m‘”s_»ã»nû_cİy
[4] + 
N4
;

250 ià(
	gN6
è
	g·¿m‘”s_»ã»nû_cİy
[6] = 
·¿m‘”s_»ã»nû_cİy
[5] + 
N5
;

251 ià(
	gN7
è
	g·¿m‘”s_»ã»nû_cİy
[7] = 
·¿m‘”s_»ã»nû_cİy
[6] + 
N6
;

252 ià(
	gN8
è
	g·¿m‘”s_»ã»nû_cİy
[8] = 
·¿m‘”s_»ã»nû_cİy
[7] + 
N7
;

253 ià(
	gN9
è
	g·¿m‘”s_»ã»nû_cİy
[9] = 
·¿m‘”s_»ã»nû_cİy
[8] + 
N8
;

255 
	#CERES_COPY_PARAMETER_BLOCK
(
block
) \

256 ià(
N
 ## 
block
è
	`memıy
(
·¿m‘”s_»ã»nû_cİy
[block], \

257 
·¿m‘”s
[
block
], \

258 (è* 
N
 ## 
block
);

259 

	)

260 
CERES_COPY_PARAMETER_BLOCK
(0);

261 
CERES_COPY_PARAMETER_BLOCK
(1);

262 
CERES_COPY_PARAMETER_BLOCK
(2);

263 
CERES_COPY_PARAMETER_BLOCK
(3);

264 
CERES_COPY_PARAMETER_BLOCK
(4);

265 
CERES_COPY_PARAMETER_BLOCK
(5);

266 
CERES_COPY_PARAMETER_BLOCK
(6);

267 
CERES_COPY_PARAMETER_BLOCK
(7);

268 
CERES_COPY_PARAMETER_BLOCK
(8);

269 
CERES_COPY_PARAMETER_BLOCK
(9);

271 #undeà
CERES_COPY_PARAMETER_BLOCK


273 
	#CERES_EVALUATE_JACOBIAN_FOR_BLOCK
(
block
) \

274 ià(
N
 ## 
block
 && 
jacobŸns
[block] !ğ
NULL
) { \

275 ià(!
Num”icDiff
<
Co¡FunùÜ
, \

276 
m‘hod
, \

277 
kNumResidu®s
, \

278 
N0
, 
N1
, 
N2
, 
N3
, 
N4
, 
N5
, 
N6
, 
N7
, 
N8
, 
N9
, \

279 
block
, \

280 
N
 ## 
block
 >::
	`Ev®u©eJacobŸnFÜP¬am‘”Block
( \

281 
funùÜ_
.
	`g‘
(), \

282 
»sidu®s
, \

283 
İtiÚs_
, \

284 
SizedCo¡FunùiÚ
<
kNumResidu®s
, \

285 
N0
, 
N1
, 
N2
, 
N3
, 
N4
, \

286 
N5
, 
N6
, 
N7
, 
N8
, 
N9
>::
	`num_»sidu®s
(), \

287 
block
, \

288 
N
 ## 
block
, \

289 
·¿m‘”s_»ã»nû_cİy
.
	`g‘
(), \

290 
jacobŸns
[
block
])) { \

291  
çl£
; \

293 }

	)

295 
CERES_EVALUATE_JACOBIAN_FOR_BLOCK
(0);

296 
CERES_EVALUATE_JACOBIAN_FOR_BLOCK
(1);

297 
CERES_EVALUATE_JACOBIAN_FOR_BLOCK
(2);

298 
CERES_EVALUATE_JACOBIAN_FOR_BLOCK
(3);

299 
CERES_EVALUATE_JACOBIAN_FOR_BLOCK
(4);

300 
CERES_EVALUATE_JACOBIAN_FOR_BLOCK
(5);

301 
CERES_EVALUATE_JACOBIAN_FOR_BLOCK
(6);

302 
CERES_EVALUATE_JACOBIAN_FOR_BLOCK
(7);

303 
CERES_EVALUATE_JACOBIAN_FOR_BLOCK
(8);

304 
CERES_EVALUATE_JACOBIAN_FOR_BLOCK
(9);

306 #undeà
CERES_EVALUATE_JACOBIAN_FOR_BLOCK


308  
	gŒue
;

311 
	g´iv©e
:

312 
š‹º®
::
scİed_±r
<
Co¡FunùÜ
> 
funùÜ_
;

313 
OwÃrsh
 
	gowÃrsh_
;

314 
Num”icDiffO±iÚs
 
	gİtiÚs_
;

	@/usr/include/ceres/ordered_groups.h

31 #iâdeà
CERES_PUBLIC_ORDERED_GROUPS_H_


32 
	#CERES_PUBLIC_ORDERED_GROUPS_H_


	)

34 
	~<m­
>

35 
	~<£t
>

36 
	~<veùÜ
>

37 
	~"û»s/š‹º®/pÜt.h
"

38 
	~"glog/loggšg.h
"

40 
Çme¥aû
 
	gû»s
 {

52 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

53 şas 
	cOrd”edGroups
 {

54 
	gpublic
:

61 
boŞ
 
AddEËm’tToGroup
(cÚ¡ 
T
 
–em’t
, cÚ¡ 
group
) {

62 ià(
	ggroup
 < 0) {

63  
	gçl£
;

66 
ty³Çme
 
	g¡d
::
m­
<
T
, >::
cÚ¡_™”©Ü
 
™
 =

67 
–em’t_to_group_
.
fšd
(
–em’t
);

68 ià(
	g™
 !ğ
–em’t_to_group_
.
’d
()) {

69 ià(
™
->
£cÚd
 =ğ
group
) {

71  
Œue
;

74 
	ggroup_to_–em’ts_
[
™
->
£cÚd
].
”a£
(
–em’t
);

75 ià(
	ggroup_to_–em’ts_
[
™
->
£cÚd
].
size
() == 0) {

76 
group_to_–em’ts_
.
”a£
(
™
->
£cÚd
);

80 
	g–em’t_to_group_
[
–em’t
] = 
group
;

81 
	ggroup_to_–em’ts_
[
group
].
š£¹
(
–em’t
);

82  
	gŒue
;

85 
CË¬
() {

86 
	ggroup_to_–em’ts_
.
ş—r
();

87 
	g–em’t_to_group_
.
ş—r
();

92 
boŞ
 
Remove
(cÚ¡ 
T
 
–em’t
) {

93 cÚ¡ 
	gcu¼’t_group
 = 
GroupId
(
–em’t
);

94 ià(
	gcu¼’t_group
 < 0) {

95  
	gçl£
;

98 
	ggroup_to_–em’ts_
[
cu¼’t_group
].
”a£
(
–em’t
);

100 ià(
	ggroup_to_–em’ts_
[
cu¼’t_group
].
size
() == 0) {

102 
group_to_–em’ts_
.
”a£
(
cu¼’t_group
);

105 
	g–em’t_to_group_
.
”a£
(
–em’t
);

106  
	gŒue
;

111 
Remove
(cÚ¡ 
¡d
::
veùÜ
<
T
>& 
–em’ts
) {

112 ià(
NumEËm’ts
(è=ğ0 || 
–em’ts
.
size
() == 0) {

116 
	gnum_»moved
 = 0;

117 
	gi
 = 0; i < 
	g–em’ts
.
size
(); ++i) {

118 
	gnum_»moved
 +ğ
Remove
(
–em’ts
[
i
]);

120  
	gnum_»moved
;

124 
Rev”£
() {

125 ià(
NumGroups
() == 0) {

129 
ty³Çme
 
	g¡d
::
m­
<, std::
£t
<
T
> >::
»v”£_™”©Ü
 
™
 =

130 
group_to_–em’ts_
.
rbegš
();

131 
	g¡d
::
m­
<, std::
£t
<
T
> > 
Ãw_group_to_–em’ts
;

132 
	gÃw_group_to_–em’ts
[
™
->
fœ¡
] = it->
£cÚd
;

134 
	gÃw_group_id
 = 
™
->
fœ¡
 + 1;

135 ++
	g™
; iˆ!ğ
group_to_–em’ts_
.
»nd
(); ++it) {

136 
ty³Çme
 
	g¡d
::
£t
<
T
>::
cÚ¡_™”©Ü
 
–em’t_™
 = 
™
->
£cÚd
.
begš
();

137 
	g–em’t_™
 !ğ
™
->
£cÚd
.
’d
();

138 ++
	g–em’t_™
) {

139 
	g–em’t_to_group_
[*
–em’t_™
] = 
Ãw_group_id
;

141 
	gÃw_group_to_–em’ts
[
Ãw_group_id
] = 
™
->
£cÚd
;

142 
	gÃw_group_id
++;

145 
	ggroup_to_–em’ts_
.
sw­
(
Ãw_group_to_–em’ts
);

150 
GroupId
(cÚ¡ 
T
 
–em’t
) const {

151 
ty³Çme
 
	g¡d
::
m­
<
T
, >::
cÚ¡_™”©Ü
 
™
 =

152 
–em’t_to_group_
.
fšd
(
–em’t
);

153 ià(
	g™
 =ğ
–em’t_to_group_
.
’d
()) {

156  
	g™
->
	g£cÚd
;

159 
boŞ
 
IsMemb”
(cÚ¡ 
T
 
–em’t
) const {

160 
ty³Çme
 
	g¡d
::
m­
<
T
, >::
cÚ¡_™”©Ü
 
™
 =

161 
–em’t_to_group_
.
fšd
(
–em’t
);

162  (
	g™
 !ğ
–em’t_to_group_
.
’d
());

167 
GroupSize
(cÚ¡ 
group
) const {

168 
ty³Çme
 
	g¡d
::
m­
<, std::
£t
<
T
> >::
cÚ¡_™”©Ü
 
™
 =

169 
group_to_–em’ts_
.
fšd
(
group
);

170  (
	g™
 =ğ
group_to_–em’ts_
.
’d
()è? 0 : 
™
->
£cÚd
.
size
();

173 
NumEËm’ts
() const {

174  
	g–em’t_to_group_
.
size
();

178 
NumGroups
() const {

179  
	ggroup_to_–em’ts_
.
size
();

185 
MšNÚZ”oGroup
() const {

186 
CHECK_NE
(
NumGroups
(), 0);

187  
	ggroup_to_–em’ts_
.
begš
()->
	gfœ¡
;

190 cÚ¡ 
	g¡d
::
m­
<, std::
£t
<
T
> >& 
group_to_–em’ts
() const {

191  
group_to_–em’ts_
;

194 cÚ¡ 
	g¡d
::
m­
<
T
, >& 
–em’t_to_group
() const {

195  
	g–em’t_to_group_
;

198 
	g´iv©e
:

199 
¡d
::
m­
<, 
	g¡d
::
£t
<
T
> > 
group_to_–em’ts_
;

200 
	g¡d
::
m­
<
T
, > 
	g–em’t_to_group_
;

204 
	gOrd”edGroups
<*> 
	tP¬am‘”BlockOrd”šg
;

	@/usr/include/ceres/problem.h

34 #iâdeà
CERES_PUBLIC_PROBLEM_H_


35 
	#CERES_PUBLIC_PROBLEM_H_


	)

37 
	~<c¡ddef
>

38 
	~<m­
>

39 
	~<£t
>

40 
	~<veùÜ
>

42 
	~"glog/loggšg.h
"

43 
	~"û»s/š‹º®/maüos.h
"

44 
	~"û»s/š‹º®/pÜt.h
"

45 
	~"û»s/š‹º®/scİed_±r.h
"

46 
	~"û»s/ty³s.h
"

47 
	~"û»s/š‹º®/di§bË_w¬nšgs.h
"

50 
Çme¥aû
 
	gû»s
 {

52 
şass
 
	gCo¡FunùiÚ
;

53 
şass
 
	gLossFunùiÚ
;

54 
şass
 
	gLoÿlP¬am‘”iz©iÚ
;

55 
şass
 
	gSŞv”
;

56 
	gCRSM©rix
;

58 
Çme¥aû
 
	gš‹º®
 {

59 
şass
 
	gP»´oûssÜ
;

60 
şass
 
	gProbËmIm¶
;

61 
şass
 
	gP¬am‘”Block
;

62 
şass
 
	gResidu®Block
;

67 
	gš‹º®
::
	tResidu®Block
* 
	tResidu®BlockId
;

121 şas 
	cCERES_EXPORT
 
	gProbËm
 {

122 
	gpublic
:

123 
CERES_EXPORT
 
O±iÚs
 {

124 
O±iÚs
()

125 : 
co¡_funùiÚ_owÃrsh
(
TAKE_OWNERSHIP
),

126 
loss_funùiÚ_owÃrsh
(
TAKE_OWNERSHIP
),

127 
loÿl_·¿m‘”iz©iÚ_owÃrsh
(
TAKE_OWNERSHIP
),

128 
’abË_ç¡_»mov®
(
çl£
),

129 
di§bË_®l_§ãty_checks
(
çl£
) {}

138 
OwÃrsh
 
	gco¡_funùiÚ_owÃrsh
;

139 
OwÃrsh
 
	gloss_funùiÚ_owÃrsh
;

140 
OwÃrsh
 
	gloÿl_·¿m‘”iz©iÚ_owÃrsh
;

156 
boŞ
 
	g’abË_ç¡_»mov®
;

167 
boŞ
 
	gdi§bË_®l_§ãty_checks
;

172 
ProbËm
();

173 
ex¶ic™
 
ProbËm
(cÚ¡ 
O±iÚs
& 
İtiÚs
);

175 ~
ProbËm
();

214 
Residu®BlockId
 
AddResidu®Block
(

215 
Co¡FunùiÚ
* 
co¡_funùiÚ
,

216 
LossFunùiÚ
* 
loss_funùiÚ
,

217 cÚ¡ 
¡d
::
veùÜ
<*>& 
·¿m‘”_blocks
);

222 
Residu®BlockId
 
AddResidu®Block
(
Co¡FunùiÚ
* 
co¡_funùiÚ
,

223 
LossFunùiÚ
* 
loss_funùiÚ
,

224 * 
x0
);

225 
Residu®BlockId
 
AddResidu®Block
(
Co¡FunùiÚ
* 
co¡_funùiÚ
,

226 
LossFunùiÚ
* 
loss_funùiÚ
,

227 * 
x0
, * 
x1
);

228 
Residu®BlockId
 
AddResidu®Block
(
Co¡FunùiÚ
* 
co¡_funùiÚ
,

229 
LossFunùiÚ
* 
loss_funùiÚ
,

230 * 
x0
, * 
x1
, * 
x2
);

231 
Residu®BlockId
 
AddResidu®Block
(
Co¡FunùiÚ
* 
co¡_funùiÚ
,

232 
LossFunùiÚ
* 
loss_funùiÚ
,

233 * 
x0
, * 
x1
, * 
x2
,

234 * 
x3
);

235 
Residu®BlockId
 
AddResidu®Block
(
Co¡FunùiÚ
* 
co¡_funùiÚ
,

236 
LossFunùiÚ
* 
loss_funùiÚ
,

237 * 
x0
, * 
x1
, * 
x2
,

238 * 
x3
, * 
x4
);

239 
Residu®BlockId
 
AddResidu®Block
(
Co¡FunùiÚ
* 
co¡_funùiÚ
,

240 
LossFunùiÚ
* 
loss_funùiÚ
,

241 * 
x0
, * 
x1
, * 
x2
,

242 * 
x3
, * 
x4
, * 
x5
);

243 
Residu®BlockId
 
AddResidu®Block
(
Co¡FunùiÚ
* 
co¡_funùiÚ
,

244 
LossFunùiÚ
* 
loss_funùiÚ
,

245 * 
x0
, * 
x1
, * 
x2
,

246 * 
x3
, * 
x4
, * 
x5
,

247 * 
x6
);

248 
Residu®BlockId
 
AddResidu®Block
(
Co¡FunùiÚ
* 
co¡_funùiÚ
,

249 
LossFunùiÚ
* 
loss_funùiÚ
,

250 * 
x0
, * 
x1
, * 
x2
,

251 * 
x3
, * 
x4
, * 
x5
,

252 * 
x6
, * 
x7
);

253 
Residu®BlockId
 
AddResidu®Block
(
Co¡FunùiÚ
* 
co¡_funùiÚ
,

254 
LossFunùiÚ
* 
loss_funùiÚ
,

255 * 
x0
, * 
x1
, * 
x2
,

256 * 
x3
, * 
x4
, * 
x5
,

257 * 
x6
, * 
x7
, * 
x8
);

258 
Residu®BlockId
 
AddResidu®Block
(
Co¡FunùiÚ
* 
co¡_funùiÚ
,

259 
LossFunùiÚ
* 
loss_funùiÚ
,

260 * 
x0
, * 
x1
, * 
x2
,

261 * 
x3
, * 
x4
, * 
x5
,

262 * 
x6
, * 
x7
, * 
x8
,

263 * 
x9
);

269 
AddP¬am‘”Block
(* 
v®ues
, 
size
);

275 
AddP¬am‘”Block
(* 
v®ues
,

276 
size
,

277 
LoÿlP¬am‘”iz©iÚ
* 
loÿl_·¿m‘”iz©iÚ
);

293 
RemoveP¬am‘”Block
(* 
v®ues
);

304 
RemoveResidu®Block
(
Residu®BlockId
 
»sidu®_block
);

307 
S‘P¬am‘”BlockCÚ¡ªt
(* 
v®ues
);

310 
S‘P¬am‘”BlockV¬ŸbË
(* 
v®ues
);

313 
boŞ
 
IsP¬am‘”BlockCÚ¡ªt
(* 
v®ues
) const;

321 
S‘P¬am‘”iz©iÚ
(* 
v®ues
,

322 
LoÿlP¬am‘”iz©iÚ
* 
loÿl_·¿m‘”iz©iÚ
);

327 cÚ¡ 
LoÿlP¬am‘”iz©iÚ
* 
G‘P¬am‘”iz©iÚ
(* 
v®ues
) const;

330 
S‘P¬am‘”Low”Bound
(* 
v®ues
, 
šdex
, 
low”_bound
);

331 
S‘P¬am‘”Uµ”Bound
(* 
v®ues
, 
šdex
, 
uµ”_bound
);

335 
NumP¬am‘”Blocks
() const;

339 
NumP¬am‘”s
() const;

343 
NumResidu®Blocks
() const;

347 
NumResidu®s
() const;

350 
P¬am‘”BlockSize
(cÚ¡ * 
v®ues
) const;

355 
P¬am‘”BlockLoÿlSize
(cÚ¡ * 
v®ues
) const;

358 
boŞ
 
HasP¬am‘”Block
(cÚ¡ * 
v®ues
) const;

363 
G‘P¬am‘”Blocks
(
¡d
::
veùÜ
<*>* 
·¿m‘”_blocks
) const;

368 
G‘Residu®Blocks
(
¡d
::
veùÜ
<
Residu®BlockId
>* 
»sidu®_blocks
) const;

371 
G‘P¬am‘”BlocksFÜResidu®Block
(

372 cÚ¡ 
Residu®BlockId
 
»sidu®_block
,

373 
¡d
::
veùÜ
<*>* 
·¿m‘”_blocks
) const;

376 cÚ¡ 
Co¡FunùiÚ
* 
G‘Co¡FunùiÚFÜResidu®Block
(

377 cÚ¡ 
Residu®BlockId
 
»sidu®_block
) const;

381 cÚ¡ 
LossFunùiÚ
* 
G‘LossFunùiÚFÜResidu®Block
(

382 cÚ¡ 
Residu®BlockId
 
»sidu®_block
) const;

390 
G‘Residu®BlocksFÜP¬am‘”Block
(

391 cÚ¡ * 
v®ues
,

392 
¡d
::
veùÜ
<
Residu®BlockId
>* 
»sidu®_blocks
) const;

395 
	sEv®u©eO±iÚs
 {

396 
Ev®u©eO±iÚs
()

397 : 
­¶y_loss_funùiÚ
(
Œue
),

398 
num_th»ads
(1) {

415 
	g¡d
::
veùÜ
<*> 
·¿m‘”_blocks
;

425 
	g¡d
::
veùÜ
<
Residu®BlockId
> 
»sidu®_blocks
;

433 
boŞ
 
	g­¶y_loss_funùiÚ
;

435 
	gnum_th»ads
;

471 
boŞ
 
Ev®u©e
(cÚ¡ 
Ev®u©eO±iÚs
& 
İtiÚs
,

472 * 
co¡
,

473 
¡d
::
veùÜ
<>* 
»sidu®s
,

474 
¡d
::
veùÜ
<>* 
g¿d›Á
,

475 
CRSM©rix
* 
jacobŸn
);

477 
	g´iv©e
:

478 
ä›nd
 
şass
 
SŞv”
;

479 
ä›nd
 
şass
 
	gCov¬Ÿnû
;

480 
	gš‹º®
::
scİed_±r
<
š‹º®
::
ProbËmIm¶
> 
´obËm_im¶_
;

481 
CERES_DISALLOW_COPY_AND_ASSIGN
(
ProbËm
);

486 
	~"û»s/š‹º®/»’abË_w¬nšgs.h
"

	@/usr/include/ceres/sized_cost_function.h

38 #iâdeà
CERES_PUBLIC_SIZED_COST_FUNCTION_H_


39 
	#CERES_PUBLIC_SIZED_COST_FUNCTION_H_


	)

41 
	~"û»s/ty³s.h
"

42 
	~"û»s/co¡_funùiÚ.h
"

43 
	~"glog/loggšg.h
"

45 
Çme¥aû
 
	gû»s
 {

47 
	g‹m¶©e
<
	gkNumResidu®s
,

48 
	gN0
 = 0, 
	gN1
 = 0, 
	gN2
 = 0, 
	gN3
 = 0, 
	gN4
 = 0,

49 
	gN5
 = 0, 
	gN6
 = 0, 
	gN7
 = 0, 
	gN8
 = 0, 
	gN9
 = 0>

50 şas 
	cSizedCo¡FunùiÚ
 : 
public
 
Co¡FunùiÚ
 {

51 
public
:

52 
SizedCo¡FunùiÚ
() {

53 
CHECK
(
kNumResidu®s
 > 0 || kNumResidu® =ğ
DYNAMIC
)

57 
CHECK
((!
N1
 && !
N2
 && !
N3
 && !
N4
 && !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

58 ((
N1
 > 0è&& !
N2
 && !
N3
 && !
N4
 && !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

59 ((
N1
 > 0è&& (
N2
 > 0è&& !
N3
 && !
N4
 && !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

60 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& !
N4
 && !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

61 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

62 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

63 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& (
N6
 > 0è&& !
N7
 && !
N8
 && !
N9
) ||

64 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& (
N6
 > 0è&& (
N7
 > 0è&& !
N8
 && !
N9
) ||

65 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& (
N6
 > 0è&& (
N7
 > 0è&& (
N8
 > 0è&& !
N9
) ||

66 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& (
N6
 > 0è&& (
N7
 > 0è&& (
N8
 > 0è&& (
N9
 > 0)))

68 << "(ignÜŒašg 0s): " << 
	gN0
 << ", " << 
	gN1
 << ", " << 
	gN2
 << ", "

69 << 
	gN3
 << ", " << 
	gN4
 << ", " << 
	gN5
 << ", " << 
	gN6
 << ", " << 
	gN7
 << ", "

70 << 
	gN8
 << ", " << 
	gN9
;

72 
£t_num_»sidu®s
(
kNumResidu®s
);

74 
	#CERES_ADD_PARAMETER_BLOCK
(
N
) \

75 ià(
N
è
	`mubË_·¿m‘”_block_sizes
()->
	`push_back
(N);

	)

76 
CERES_ADD_PARAMETER_BLOCK
(
N0
);

77 
CERES_ADD_PARAMETER_BLOCK
(
N1
);

78 
CERES_ADD_PARAMETER_BLOCK
(
N2
);

79 
CERES_ADD_PARAMETER_BLOCK
(
N3
);

80 
CERES_ADD_PARAMETER_BLOCK
(
N4
);

81 
CERES_ADD_PARAMETER_BLOCK
(
N5
);

82 
CERES_ADD_PARAMETER_BLOCK
(
N6
);

83 
CERES_ADD_PARAMETER_BLOCK
(
N7
);

84 
CERES_ADD_PARAMETER_BLOCK
(
N8
);

85 
CERES_ADD_PARAMETER_BLOCK
(
N9
);

86 #undeà
CERES_ADD_PARAMETER_BLOCK


89 
	gvœtu®
 ~
SizedCo¡FunùiÚ
() { }

	@/usr/include/ceres/solver.h

31 #iâdeà
CERES_PUBLIC_SOLVER_H_


32 
	#CERES_PUBLIC_SOLVER_H_


	)

34 
	~<cm©h
>

35 
	~<¡ršg
>

36 
	~<veùÜ
>

37 
	~"û»s/üs_m©rix.h
"

38 
	~"û»s/š‹º®/maüos.h
"

39 
	~"û»s/š‹º®/pÜt.h
"

40 
	~"û»s/™”©iÚ_ÿÎback.h
"

41 
	~"û»s/Üd”ed_groups.h
"

42 
	~"û»s/ty³s.h
"

43 
	~"û»s/š‹º®/di§bË_w¬nšgs.h
"

45 
Çme¥aû
 
	gû»s
 {

47 
şass
 
	gProbËm
;

50 şas 
	cCERES_EXPORT
 
	gSŞv”
 {

51 
	gpublic
:

52 
vœtu®
 ~
SŞv”
();

59 
CERES_EXPORT
 
	gO±iÚs
 {

61 
O±iÚs
() {

62 
	gmšimiz”_ty³
 = 
TRUST_REGION
;

63 
	glše_£¬ch_dœeùiÚ_ty³
 = 
LBFGS
;

64 
	glše_£¬ch_ty³
 = 
WOLFE
;

65 
	gnÚlš—r_cÚjug©e_g¿d›Á_ty³
 = 
FLETCHER_REEVES
;

66 
	gmax_lbfgs_¿nk
 = 20;

67 
	gu£_­´oxim©e_eig’v®ue_bfgs_sÿlšg
 = 
çl£
;

68 
	glše_£¬ch_š‹½Ş©iÚ_ty³
 = 
CUBIC
;

69 
	gmš_lše_£¬ch_¡•_size
 = 1e-9;

70 
	glše_£¬ch_suffic›Á_funùiÚ_deü—£
 = 1e-4;

71 
	gmax_lše_£¬ch_¡•_cÚŒaùiÚ
 = 1e-3;

72 
	gmš_lše_£¬ch_¡•_cÚŒaùiÚ
 = 0.6;

73 
	gmax_num_lše_£¬ch_¡•_size_™”©iÚs
 = 20;

74 
	gmax_num_lše_£¬ch_dœeùiÚ_»¡¬ts
 = 5;

75 
	glše_£¬ch_suffic›Á_curv©u»_deü—£
 = 0.9;

76 
	gmax_lše_£¬ch_¡•_ex·nsiÚ
 = 10.0;

77 
	gŒu¡_»giÚ_¡¿‹gy_ty³
 = 
LEVENBERG_MARQUARDT
;

78 
	gdogËg_ty³
 = 
TRADITIONAL_DOGLEG
;

79 
	gu£_nÚmÚÙÚic_¡•s
 = 
çl£
;

80 
	gmax_cÚ£cutive_nÚmÚÙÚic_¡•s
 = 5;

81 
	gmax_num_™”©iÚs
 = 50;

82 
	gmax_sŞv”_time_š_£cÚds
 = 1e9;

83 
	gnum_th»ads
 = 1;

84 
	gš™Ÿl_Œu¡_»giÚ_¿dius
 = 1e4;

85 
	gmax_Œu¡_»giÚ_¿dius
 = 1e16;

86 
	gmš_Œu¡_»giÚ_¿dius
 = 1e-32;

87 
	gmš_»Ïtive_deü—£
 = 1e-3;

88 
	gmš_lm_dŸgÚ®
 = 1e-6;

89 
	gmax_lm_dŸgÚ®
 = 1e32;

90 
	gmax_num_cÚ£cutive_šv®id_¡•s
 = 5;

91 
	gfunùiÚ_tŞ”ªû
 = 1e-6;

92 
	gg¿d›Á_tŞ”ªû
 = 1e-10;

93 
	g·¿m‘”_tŞ”ªû
 = 1e-8;

95 #ià
defšed
(
CERES_NO_SUITESPARSE
è&& defšed(
CERES_NO_CXSPARSE
è&& !defšed(
CERES_ENABLE_LGPL_CODE
)

96 
	glš—r_sŞv”_ty³
 = 
DENSE_QR
;

98 
	glš—r_sŞv”_ty³
 = 
SPARSE_NORMAL_CHOLESKY
;

101 
	g´ecÚd™iÚ”_ty³
 = 
JACOBI
;

102 
	gvisib™y_şu¡”šg_ty³
 = 
CANONICAL_VIEWS
;

103 
	gd’£_lš—r_®geb¿_lib¿ry_ty³
 = 
EIGEN
;

108 
	g¥¬£_lš—r_®geb¿_lib¿ry_ty³
 = 
NO_SPARSE
;

109 #ià!
defšed
(
CERES_NO_SUITESPARSE
)

110 
	g¥¬£_lš—r_®geb¿_lib¿ry_ty³
 = 
SUITE_SPARSE
;

112 #ià!
defšed
(
CERES_NO_CXSPARSE
)

113 
	g¥¬£_lš—r_®geb¿_lib¿ry_ty³
 = 
CX_SPARSE
;

115 #ià
defšed
(
CERES_USE_EIGEN_SPARSE
)

116 
	g¥¬£_lš—r_®geb¿_lib¿ry_ty³
 = 
EIGEN_SPARSE
;

121 
	gnum_lš—r_sŞv”_th»ads
 = 1;

122 
	gu£_ex¶ic™_schur_com¶em’t
 = 
çl£
;

123 
	gu£_po¡Üd”šg
 = 
çl£
;

124 
	gdyÇmic_¥¬s™y
 = 
çl£
;

125 
	gmš_lš—r_sŞv”_™”©iÚs
 = 0;

126 
	gmax_lš—r_sŞv”_™”©iÚs
 = 500;

127 
	g‘a
 = 1e-1;

128 
	gjacobi_sÿlšg
 = 
Œue
;

129 
	gu£_šÃr_™”©iÚs
 = 
çl£
;

130 
	gšÃr_™”©iÚ_tŞ”ªû
 = 1e-3;

131 
	gloggšg_ty³
 = 
PER_MINIMIZER_ITERATION
;

132 
	gmšimiz”_´og»ss_to_¡dout
 = 
çl£
;

133 
	gŒu¡_»giÚ_´obËm_dump_dœeùÜy
 = "/tmp";

134 
	gŒu¡_»giÚ_´obËm_dump_fÜm©_ty³
 = 
TEXTFILE
;

135 
	gcheck_g¿d›Ás
 = 
çl£
;

136 
	gg¿d›Á_check_»Ïtive_´ecisiÚ
 = 1e-8;

137 
	gg¿d›Á_check_num”ic_d”iv©ive_»Ïtive_¡•_size
 = 1e-6;

138 
	gupd©e_¡©e_ev”y_™”©iÚ
 = 
çl£
;

144 
boŞ
 
IsV®id
(
¡d
::
¡ršg
* 
”rÜ
) const;

171 
Mšimiz”Ty³
 
	gmšimiz”_ty³
;

173 
LšeS—rchDœeùiÚTy³
 
	glše_£¬ch_dœeùiÚ_ty³
;

174 
LšeS—rchTy³
 
	glše_£¬ch_ty³
;

175 
NÚlš—rCÚjug©eG¿d›ÁTy³
 
	gnÚlš—r_cÚjug©e_g¿d›Á_ty³
;

201 
	gmax_lbfgs_¿nk
;

223 
boŞ
 
	gu£_­´oxim©e_eig’v®ue_bfgs_sÿlšg
;

230 
LšeS—rchIÁ”pŞ©iÚTy³
 
	glše_£¬ch_š‹½Ş©iÚ_ty³
;

234 
	gmš_lše_£¬ch_¡•_size
;

248 
	glše_£¬ch_suffic›Á_funùiÚ_deü—£
;

258 
	gmax_lše_£¬ch_¡•_cÚŒaùiÚ
;

268 
	gmš_lše_£¬ch_¡•_cÚŒaùiÚ
;

273 
	gmax_num_lše_£¬ch_¡•_size_™”©iÚs
;

280 
	gmax_num_lše_£¬ch_dœeùiÚ_»¡¬ts
;

293 
	glše_£¬ch_suffic›Á_curv©u»_deü—£
;

304 
	gmax_lše_£¬ch_¡•_ex·nsiÚ
;

306 
Tru¡RegiÚSŒ©egyTy³
 
	gŒu¡_»giÚ_¡¿‹gy_ty³
;

309 
DogËgTy³
 
	gdogËg_ty³
;

336 
boŞ
 
	gu£_nÚmÚÙÚic_¡•s
;

337 
	gmax_cÚ£cutive_nÚmÚÙÚic_¡•s
;

340 
	gmax_num_™”©iÚs
;

343 
	gmax_sŞv”_time_š_£cÚds
;

347 
	gnum_th»ads
;

350 
	gš™Ÿl_Œu¡_»giÚ_¿dius
;

351 
	gmax_Œu¡_»giÚ_¿dius
;

355 
	gmš_Œu¡_»giÚ_¿dius
;

359 
	gmš_»Ïtive_deü—£
;

368 
	gmš_lm_dŸgÚ®
;

369 
	gmax_lm_dŸgÚ®
;

376 
	gmax_num_cÚ£cutive_šv®id_¡•s
;

382 
	gfunùiÚ_tŞ”ªû
;

389 
	gg¿d›Á_tŞ”ªû
;

395 
	g·¿m‘”_tŞ”ªû
;

399 
Lš—rSŞv”Ty³
 
	glš—r_sŞv”_ty³
;

402 
P»cÚd™iÚ”Ty³
 
	g´ecÚd™iÚ”_ty³
;

407 
Visib™yClu¡”šgTy³
 
	gvisib™y_şu¡”šg_ty³
;

420 
D’£Lš—rAlgeb¿Lib¿ryTy³
 
	gd’£_lš—r_®geb¿_lib¿ry_ty³
;

426 
S·r£Lš—rAlgeb¿Lib¿ryTy³
 
	g¥¬£_lš—r_®geb¿_lib¿ry_ty³
;

431 
	gnum_lš—r_sŞv”_th»ads
;

499 
	gsh¬ed_±r
<
	gP¬am‘”BlockOrd”šg
> 
	glš—r_sŞv”_Üd”šg
;

522 
boŞ
 
	gu£_ex¶ic™_schur_com¶em’t
;

543 
boŞ
 
	gu£_po¡Üd”šg
;

558 
boŞ
 
	gdyÇmic_¥¬s™y
;

618 
boŞ
 
	gu£_šÃr_™”©iÚs
;

630 
	gsh¬ed_±r
<
	gP¬am‘”BlockOrd”šg
> 
	gšÃr_™”©iÚ_Üd”šg
;

641 
	gšÃr_™”©iÚ_tŞ”ªû
;

645 
	gmš_lš—r_sŞv”_™”©iÚs
;

651 
	gmax_lš—r_sŞv”_™”©iÚs
;

661 
	g‘a
;

665 
boŞ
 
	gjacobi_sÿlšg
;

669 
LoggšgTy³
 
	gloggšg_ty³
;

675 
boŞ
 
	gmšimiz”_´og»ss_to_¡dout
;

680 
	g¡d
::
veùÜ
<> 
Œu¡_»giÚ_mšimiz”_™”©iÚs_to_dump
;

686 
	g¡d
::
¡ršg
 
Œu¡_»giÚ_´obËm_dump_dœeùÜy
;

687 
DumpFÜm©Ty³
 
	gŒu¡_»giÚ_´obËm_dump_fÜm©_ty³
;

697 
boŞ
 
	gcheck_g¿d›Ás
;

702 
	gg¿d›Á_check_»Ïtive_´ecisiÚ
;

736 
	gg¿d›Á_check_num”ic_d”iv©ive_»Ïtive_¡•_size
;

743 
boŞ
 
	gupd©e_¡©e_ev”y_™”©iÚ
;

760 
	g¡d
::
veùÜ
<
I‹¿tiÚC®lback
*> 
ÿÎbacks
;

763 
CERES_EXPORT
 
	gSumm¬y
 {

764 
Summ¬y
();

768 
	g¡d
::
¡ršg
 
Br›fR•Üt
() const;

772 
	g¡d
::
¡ršg
 
FuÎR•Üt
() const;

774 
boŞ
 
IsSŞutiÚU§bË
() const;

777 
Mšimiz”Ty³
 
	gmšimiz”_ty³
;

779 
T”mš©iÚTy³
 
	g‹rmš©iÚ_ty³
;

782 
	g¡d
::
¡ršg
 
mes§ge
;

786 
	gš™Ÿl_co¡
;

790 
	gfš®_co¡
;

795 
	gfixed_co¡
;

798 
	g¡d
::
veùÜ
<
I‹¿tiÚSumm¬y
> 
™”©iÚs
;

804 
	gnum_sucûssful_¡•s
;

809 
	gnum_unsucûssful_¡•s
;

812 
	gnum_šÃr_™”©iÚ_¡•s
;

819 
	gnum_lše_£¬ch_¡•s
;

827 
	g´•roûssÜ_time_š_£cÚds
;

830 
	gmšimiz”_time_š_£cÚds
;

835 
	gpo¡´oûssÜ_time_š_£cÚds
;

838 
	gtÙ®_time_š_£cÚds
;

842 
	glš—r_sŞv”_time_š_£cÚds
;

845 
	g»sidu®_ev®u©iÚ_time_š_£cÚds
;

848 
	gjacobŸn_ev®u©iÚ_time_š_£cÚds
;

851 
	gšÃr_™”©iÚ_time_š_£cÚds
;

860 
	glše_£¬ch_co¡_ev®u©iÚ_time_š_£cÚds
;

864 
	glše_£¬ch_g¿d›Á_ev®u©iÚ_time_š_£cÚds
;

868 
	glše_£¬ch_pŞynomŸl_mšimiz©iÚ_time_š_£cÚds
;

871 
	glše_£¬ch_tÙ®_time_š_£cÚds
;

874 
	gnum_·¿m‘”_blocks
;

877 
	gnum_·¿m‘”s
;

883 
	gnum_efãùive_·¿m‘”s
;

886 
	gnum_»sidu®_blocks
;

889 
	gnum_»sidu®s
;

894 
	gnum_·¿m‘”_blocks_»duûd
;

897 
	gnum_·¿m‘”s_»duûd
;

904 
	gnum_efãùive_·¿m‘”s_»duûd
;

907 
	gnum_»sidu®_blocks_»duûd
;

910 
	gnum_»sidu®s_»duûd
;

913 
boŞ
 
	gis_cÚ¡¿šed
;

917 
	gnum_th»ads_giv’
;

922 
	gnum_th»ads_u£d
;

926 
	gnum_lš—r_sŞv”_th»ads_giv’
;

931 
	gnum_lš—r_sŞv”_th»ads_u£d
;

934 
Lš—rSŞv”Ty³
 
	glš—r_sŞv”_ty³_giv’
;

942 
Lš—rSŞv”Ty³
 
	glš—r_sŞv”_ty³_u£d
;

946 
	g¡d
::
veùÜ
<> 
lš—r_sŞv”_Üd”šg_giv’
;

954 
	g¡d
::
veùÜ
<> 
lš—r_sŞv”_Üd”šg_u£d
;

959 
	g¡d
::
¡ršg
 
schur_¡ruùu»_giv’
;

968 
	g¡d
::
¡ršg
 
schur_¡ruùu»_u£d
;

972 
boŞ
 
	gšÃr_™”©iÚs_giv’
;

978 
boŞ
 
	gšÃr_™”©iÚs_u£d
;

982 
	g¡d
::
veùÜ
<> 
šÃr_™”©iÚ_Üd”šg_giv’
;

990 
	g¡d
::
veùÜ
<> 
šÃr_™”©iÚ_Üd”šg_u£d
;

993 
P»cÚd™iÚ”Ty³
 
	g´ecÚd™iÚ”_ty³_giv’
;

1000 
P»cÚd™iÚ”Ty³
 
	g´ecÚd™iÚ”_ty³_u£d
;

1005 
Visib™yClu¡”šgTy³
 
	gvisib™y_şu¡”šg_ty³
;

1008 
Tru¡RegiÚSŒ©egyTy³
 
	gŒu¡_»giÚ_¡¿‹gy_ty³
;

1012 
DogËgTy³
 
	gdogËg_ty³
;

1015 
D’£Lš—rAlgeb¿Lib¿ryTy³
 
	gd’£_lš—r_®geb¿_lib¿ry_ty³
;

1018 
S·r£Lš—rAlgeb¿Lib¿ryTy³
 
	g¥¬£_lš—r_®geb¿_lib¿ry_ty³
;

1021 
LšeS—rchDœeùiÚTy³
 
	glše_£¬ch_dœeùiÚ_ty³
;

1024 
LšeS—rchTy³
 
	glše_£¬ch_ty³
;

1028 
LšeS—rchIÁ”pŞ©iÚTy³
 
	glše_£¬ch_š‹½Ş©iÚ_ty³
;

1033 
NÚlš—rCÚjug©eG¿d›ÁTy³
 
	gnÚlš—r_cÚjug©e_g¿d›Á_ty³
;

1037 
	gmax_lbfgs_¿nk
;

1045 
vœtu®
 
SŞve
(cÚ¡ 
O±iÚs
& 
İtiÚs
,

1046 
ProbËm
* 
´obËm
,

1047 
SŞv”
::
Summ¬y
* 
summ¬y
);

1051 
CERES_EXPORT
 
SŞve
(cÚ¡ 
SŞv”
::
O±iÚs
& 
İtiÚs
,

1052 
ProbËm
* 
´obËm
,

1053 
SŞv”
::
Summ¬y
* 
summ¬y
);

1057 
	~"û»s/š‹º®/»’abË_w¬nšgs.h
"

	@/usr/include/ceres/types.h

37 #iâdeà
CERES_PUBLIC_TYPES_H_


38 
	#CERES_PUBLIC_TYPES_H_


	)

40 
	~<¡ršg
>

42 
	~"û»s/š‹º®/pÜt.h
"

43 
	~"û»s/š‹º®/di§bË_w¬nšgs.h
"

45 
Çme¥aû
 
	gû»s
 {

49 
	tšt32
;

55 
	eOwÃrsh
 {

56 
	gDO_NOT_TAKE_OWNERSHIP
,

57 
	gTAKE_OWNERSHIP


61 
	eLš—rSŞv”Ty³
 {

68 
	gDENSE_NORMAL_CHOLESKY
,

72 
	gDENSE_QR
,

76 
	gSPARSE_NORMAL_CHOLESKY
,

83 
	gDENSE_SCHUR
,

87 
	gSPARSE_SCHUR
,

92 
	gITERATIVE_SCHUR
,

95 
	gCGNR


98 
	eP»cÚd™iÚ”Ty³
 {

100 
	gIDENTITY
,

103 
	gJACOBI
,

111 
	gSCHUR_JACOBI
,

121 
	gCLUSTER_JACOBI
,

122 
	gCLUSTER_TRIDIAGONAL


125 
	eVisib™yClu¡”šgTy³
 {

134 
	gCANONICAL_VIEWS
,

145 
	gSINGLE_LINKAGE


148 
	eS·r£Lš—rAlgeb¿Lib¿ryTy³
 {

151 
	gSUITE_SPARSE
,

156 
	gCX_SPARSE
,

160 
	gEIGEN_SPARSE
,

165 
	gNO_SPARSE


168 
	eD’£Lš—rAlgeb¿Lib¿ryTy³
 {

169 
	gEIGEN
,

170 
	gLAPACK


175 
	eLoggšgTy³
 {

176 
	gSILENT
,

177 
	gPER_MINIMIZER_ITERATION


180 
	eMšimiz”Ty³
 {

181 
	gLINE_SEARCH
,

182 
	gTRUST_REGION


185 
	eLšeS—rchDœeùiÚTy³
 {

187 
	gSTEEPEST_DESCENT
,

194 
	gNONLINEAR_CONJUGATE_GRADIENT
,

249 
	gLBFGS
,

250 
	gBFGS
,

259 
	eNÚlš—rCÚjug©eG¿d›ÁTy³
 {

260 
	gFLETCHER_REEVES
,

261 
	gPOLAK_RIBIERE
,

262 
	gHESTENES_STIEFEL
,

265 
	eLšeS—rchTy³
 {

268 
	gARMIJO
,

269 
	gWOLFE
,

274 
	eTru¡RegiÚSŒ©egyTy³
 {

278 
	gLEVENBERG_MARQUARDT
,

294 
	gDOGLEG


304 
	eDogËgTy³
 {

308 
	gTRADITIONAL_DOGLEG
,

312 
	gSUBSPACE_DOGLEG


315 
	eT”mš©iÚTy³
 {

324 
	gCONVERGENCE
,

330 
	gNO_CONVERGENCE
,

334 
	gFAILURE
,

344 
	gUSER_SUCCESS
,

350 
	gUSER_FAILURE


357 
	eC®lbackR‘uºTy³
 {

359 
	gSOLVER_CONTINUE
,

366 
	gSOLVER_ABORT
,

370 
	gSOLVER_TERMINATE_SUCCESSFULLY


375 
	eDumpFÜm©Ty³
 {

380 
	gCONSOLE
,

390 
	gTEXTFILE


396 
	eDim’siÚTy³
 {

397 
	gDYNAMIC
 = -1

402 
	eNum”icDiffM‘hodTy³
 {

404 
	gCENTRAL
,

407 
	gFORWARD
,

412 
	gRIDDERS


415 
	eLšeS—rchIÁ”pŞ©iÚTy³
 {

416 
	gBISECTION
,

417 
	gQUADRATIC
,

418 
	gCUBIC


421 
	eCov¬ŸnûAlgÜ™hmTy³
 {

422 
	gDENSE_SVD
,

423 
	gSPARSE_QR
,

431 cÚ¡ 
	gkImpossibËV®ue
 = 1e302;

433 
CERES_EXPORT
 cÚ¡ * 
Lš—rSŞv”Ty³ToSŒšg
(

434 
Lš—rSŞv”Ty³
 
ty³
);

435 
CERES_EXPORT
 
boŞ
 
SŒšgToLš—rSŞv”Ty³
(
¡d
::
¡ršg
 
v®ue
,

436 
Lš—rSŞv”Ty³
* 
ty³
);

438 
CERES_EXPORT
 cÚ¡ * 
P»cÚd™iÚ”Ty³ToSŒšg
(
P»cÚd™iÚ”Ty³
 
ty³
);

439 
CERES_EXPORT
 
boŞ
 
SŒšgToP»cÚd™iÚ”Ty³
(
¡d
::
¡ršg
 
v®ue
,

440 
P»cÚd™iÚ”Ty³
* 
ty³
);

442 
CERES_EXPORT
 cÚ¡ * 
Visib™yClu¡”šgTy³ToSŒšg
(

443 
Visib™yClu¡”šgTy³
 
ty³
);

444 
CERES_EXPORT
 
boŞ
 
SŒšgToVisib™yClu¡”šgTy³
(
¡d
::
¡ršg
 
v®ue
,

445 
Visib™yClu¡”šgTy³
* 
ty³
);

447 
CERES_EXPORT
 cÚ¡ * 
S·r£Lš—rAlgeb¿Lib¿ryTy³ToSŒšg
(

448 
S·r£Lš—rAlgeb¿Lib¿ryTy³
 
ty³
);

449 
CERES_EXPORT
 
boŞ
 
SŒšgToS·r£Lš—rAlgeb¿Lib¿ryTy³
(

450 
¡d
::
¡ršg
 
v®ue
,

451 
S·r£Lš—rAlgeb¿Lib¿ryTy³
* 
ty³
);

453 
CERES_EXPORT
 cÚ¡ * 
D’£Lš—rAlgeb¿Lib¿ryTy³ToSŒšg
(

454 
D’£Lš—rAlgeb¿Lib¿ryTy³
 
ty³
);

455 
CERES_EXPORT
 
boŞ
 
SŒšgToD’£Lš—rAlgeb¿Lib¿ryTy³
(

456 
¡d
::
¡ršg
 
v®ue
,

457 
D’£Lš—rAlgeb¿Lib¿ryTy³
* 
ty³
);

459 
CERES_EXPORT
 cÚ¡ * 
Tru¡RegiÚSŒ©egyTy³ToSŒšg
(

460 
Tru¡RegiÚSŒ©egyTy³
 
ty³
);

461 
CERES_EXPORT
 
boŞ
 
SŒšgToTru¡RegiÚSŒ©egyTy³
(
¡d
::
¡ršg
 
v®ue
,

462 
Tru¡RegiÚSŒ©egyTy³
* 
ty³
);

464 
CERES_EXPORT
 cÚ¡ * 
DogËgTy³ToSŒšg
(
DogËgTy³
 
ty³
);

465 
CERES_EXPORT
 
boŞ
 
SŒšgToDogËgTy³
(
¡d
::
¡ršg
 
v®ue
, 
DogËgTy³
* 
ty³
);

467 
CERES_EXPORT
 cÚ¡ * 
Mšimiz”Ty³ToSŒšg
(
Mšimiz”Ty³
 
ty³
);

468 
CERES_EXPORT
 
boŞ
 
SŒšgToMšimiz”Ty³
(
¡d
::
¡ršg
 
v®ue
, 
Mšimiz”Ty³
* 
ty³
);

470 
CERES_EXPORT
 cÚ¡ * 
LšeS—rchDœeùiÚTy³ToSŒšg
(

471 
LšeS—rchDœeùiÚTy³
 
ty³
);

472 
CERES_EXPORT
 
boŞ
 
SŒšgToLšeS—rchDœeùiÚTy³
(
¡d
::
¡ršg
 
v®ue
,

473 
LšeS—rchDœeùiÚTy³
* 
ty³
);

475 
CERES_EXPORT
 cÚ¡ * 
LšeS—rchTy³ToSŒšg
(
LšeS—rchTy³
 
ty³
);

476 
CERES_EXPORT
 
boŞ
 
SŒšgToLšeS—rchTy³
(
¡d
::
¡ršg
 
v®ue
, 
LšeS—rchTy³
* 
ty³
);

478 
CERES_EXPORT
 cÚ¡ * 
NÚlš—rCÚjug©eG¿d›ÁTy³ToSŒšg
(

479 
NÚlš—rCÚjug©eG¿d›ÁTy³
 
ty³
);

480 
CERES_EXPORT
 
boŞ
 
SŒšgToNÚlš—rCÚjug©eG¿d›ÁTy³
(

481 
¡d
::
¡ršg
 
v®ue
,

482 
NÚlš—rCÚjug©eG¿d›ÁTy³
* 
ty³
);

484 
CERES_EXPORT
 cÚ¡ * 
LšeS—rchIÁ”pŞ©iÚTy³ToSŒšg
(

485 
LšeS—rchIÁ”pŞ©iÚTy³
 
ty³
);

486 
CERES_EXPORT
 
boŞ
 
SŒšgToLšeS—rchIÁ”pŞ©iÚTy³
(

487 
¡d
::
¡ršg
 
v®ue
,

488 
LšeS—rchIÁ”pŞ©iÚTy³
* 
ty³
);

490 
CERES_EXPORT
 cÚ¡ * 
Cov¬ŸnûAlgÜ™hmTy³ToSŒšg
(

491 
Cov¬ŸnûAlgÜ™hmTy³
 
ty³
);

492 
CERES_EXPORT
 
boŞ
 
SŒšgToCov¬ŸnûAlgÜ™hmTy³
(

493 
¡d
::
¡ršg
 
v®ue
,

494 
Cov¬ŸnûAlgÜ™hmTy³
* 
ty³
);

496 
CERES_EXPORT
 cÚ¡ * 
Num”icDiffM‘hodTy³ToSŒšg
(

497 
Num”icDiffM‘hodTy³
 
ty³
);

498 
CERES_EXPORT
 
boŞ
 
SŒšgToNum”icDiffM‘hodTy³
(

499 
¡d
::
¡ršg
 
v®ue
,

500 
Num”icDiffM‘hodTy³
* 
ty³
);

502 
CERES_EXPORT
 cÚ¡ * 
T”mš©iÚTy³ToSŒšg
(
T”mš©iÚTy³
 
ty³
);

504 
CERES_EXPORT
 
boŞ
 
IsSchurTy³
(
Lš—rSŞv”Ty³
 
ty³
);

505 
CERES_EXPORT
 
boŞ
 
IsS·r£Lš—rAlgeb¿Lib¿ryTy³AvaabË
(

506 
S·r£Lš—rAlgeb¿Lib¿ryTy³
 
ty³
);

507 
CERES_EXPORT
 
boŞ
 
IsD’£Lš—rAlgeb¿Lib¿ryTy³AvaabË
(

508 
D’£Lš—rAlgeb¿Lib¿ryTy³
 
ty³
);

512 
	~"û»s/š‹º®/»’abË_w¬nšgs.h
"

	@/usr/include/ceres/version.h

31 #iâdeà
CERES_PUBLIC_VERSION_H_


32 
	#CERES_PUBLIC_VERSION_H_


	)

34 
	#CERES_VERSION_MAJOR
 1

	)

35 
	#CERES_VERSION_MINOR
 13

	)

36 
	#CERES_VERSION_REVISION
 0

	)

40 
	#CERES_TO_STRING_HELPER
(
x
è#x

	)

41 
	#CERES_TO_STRING
(
x
è
	`CERES_TO_STRING_HELPER
(x)

	)

44 
	#CERES_VERSION_STRING
 
	`CERES_TO_STRING
(
CERES_VERSION_MAJOR
) "." \

45 
	`CERES_TO_STRING
(
CERES_VERSION_MINOR
) "." \

46 
	`CERES_TO_STRING
(
CERES_VERSION_REVISION
)

	)

	@/usr/include/ceres/dynamic_cost_function.h

31 #iâdeà
CERES_PUBLIC_DYNAMIC_COST_FUNCTION_H_


32 
	#CERES_PUBLIC_DYNAMIC_COST_FUNCTION_H_


	)

34 
	~"û»s/co¡_funùiÚ.h
"

36 
Çme¥aû
 
	gû»s
 {

41 şas 
	cCERES_EXPORT
 
	gDyÇmicCo¡FunùiÚ
 : 
public
 
Co¡FunùiÚ
 {

42 
public
:

43 ~
DyÇmicCo¡FunùiÚ
() {}

45 
vœtu®
 
AddP¬am‘”Block
(
size
) {

46 
mubË_·¿m‘”_block_sizes
()->
push_back
(
size
);

49 
vœtu®
 
S‘NumResidu®s
(
num_»sidu®s
) {

50 
£t_num_»sidu®s
(
num_»sidu®s
);

	@/usr/include/ceres/dynamic_cost_function_to_functor.h

32 #iâdeà
CERES_PUBLIC_DYNAMIC_COST_FUNCTION_TO_FUNCTOR_H_


33 
	#CERES_PUBLIC_DYNAMIC_COST_FUNCTION_TO_FUNCTOR_H_


	)

35 
	~<num”ic
>

36 
	~<veùÜ
>

38 
	~"û»s/dyÇmic_co¡_funùiÚ.h
"

39 
	~"û»s/š‹º®/fixed_¬¿y.h
"

40 
	~"û»s/š‹º®/pÜt.h
"

41 
	~"û»s/š‹º®/scİed_±r.h
"

43 
Çme¥aû
 
	gû»s
 {

103 şas 
	cDyÇmicCo¡FunùiÚToFunùÜ
 {

104 
	gpublic
:

106 
ex¶ic™
 
DyÇmicCo¡FunùiÚToFunùÜ
(
Co¡FunùiÚ
* 
co¡_funùiÚ
)

107 : 
co¡_funùiÚ_
(
co¡_funùiÚ
) {

108 
CHECK_NOTNULL
(
co¡_funùiÚ
);

111 
boŞ
 
İ”©Ü
()(cÚ¡* cÚ¡* 
	g·¿m‘”s
, * 
	g»sidu®s
) const {

112  
	gco¡_funùiÚ_
->
Ev®u©e
(
·¿m‘”s
, 
»sidu®s
, 
NULL
);

115 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
>

116 
boŞ
 
İ”©Ü
()(
J‘T
 cÚ¡* cÚ¡* 
	gšputs
, J‘T* 
	gouut
) const {

117 cÚ¡ 
	g¡d
::
veùÜ
<
št32
>& 
·¿m‘”_block_sizes
 =

118 
co¡_funùiÚ_
->
·¿m‘”_block_sizes
();

119 cÚ¡ 
	gnum_·¿m‘”_blocks
 =

120 
¡©ic_ÿ¡
<>(
·¿m‘”_block_sizes
.
size
());

121 cÚ¡ 
	gnum_»sidu®s
 = 
co¡_funùiÚ_
->
num_»sidu®s
();

122 cÚ¡ 
	gnum_·¿m‘”s
 = 
¡d
::
accumuÏ‹
(
·¿m‘”_block_sizes
.
begš
(),

123 
·¿m‘”_block_sizes
.
’d
(), 0);

125 
	gš‹º®
::
FixedA¼ay
<> 
·¿m‘”s
(
num_·¿m‘”s
);

126 
	gš‹º®
::
FixedA¼ay
<*> 
·¿m‘”_blocks
(
num_·¿m‘”_blocks
);

127 
	gš‹º®
::
FixedA¼ay
<> 
jacobŸns
(
num_»sidu®s
 * 
num_·¿m‘”s
);

128 
	gš‹º®
::
FixedA¼ay
<*> 
jacobŸn_blocks
(
num_·¿m‘”_blocks
);

129 
	gš‹º®
::
FixedA¼ay
<> 
»sidu®s
(
num_»sidu®s
);

133 * 
	g·¿m‘”_±r
 = 
·¿m‘”s
.
g‘
();

134 * 
	gjacobŸn_±r
 = 
jacobŸns
.
g‘
();

135 
	gi
 = 0; i < 
	gnum_·¿m‘”_blocks
; ++i) {

136 
	g·¿m‘”_blocks
[
i
] = 
·¿m‘”_±r
;

137 
	gjacobŸn_blocks
[
i
] = 
jacobŸn_±r
;

138 
	gj
 = 0; j < 
	g·¿m‘”_block_sizes
[
i
]; ++j) {

139 *
	g·¿m‘”_±r
++ = 
šputs
[
i
][
j
].
a
;

141 
	gjacobŸn_±r
 +ğ
num_»sidu®s
 * 
·¿m‘”_block_sizes
[
i
];

144 ià(!
	gco¡_funùiÚ_
->
Ev®u©e
(
·¿m‘”_blocks
.
g‘
(),

145 
»sidu®s
.
g‘
(),

146 
jacobŸn_blocks
.
g‘
())) {

147  
	gçl£
;

168 
	gi
 = 0; i < 
	gnum_»sidu®s
; ++i) {

169 
	gouut
[
i
].
	ga
 = 
»sidu®s
[i];

170 
	gouut
[
i
].
	gv
.
£tZ”o
();

172 
	gj
 = 0; j < 
	gnum_·¿m‘”_blocks
; ++j) {

173 cÚ¡ 
št32
 
	gblock_size
 = 
·¿m‘”_block_sizes
[
j
];

174 
	gk
 = 0; k < 
	g·¿m‘”_block_sizes
[
j
]; ++k) {

175 
	gouut
[
i
].
	gv
 +=

176 
jacobŸn_blocks
[
j
][
i
 * 
block_size
 + 
k
] * 
šputs
[j][k].
v
;

181  
	gŒue
;

184 
	g´iv©e
:

185 
š‹º®
::
scİed_±r
<
Co¡FunùiÚ
> 
co¡_funùiÚ_
;

	@/usr/include/ceres/fpclassify.h

37 #iâdeà
CERES_PUBLIC_FPCLASSIFY_H_


38 
	#CERES_PUBLIC_FPCLASSIFY_H_


	)

40 #ià
defšed
(
_MSC_VER
)

41 
	~<æßt.h
>

44 
	~<lim™s
>

46 
Çme¥aû
 
	gû»s
 {

48 #ià
defšed
(
_MSC_VER
)

50 
šlše
 
boŞ
 
IsFš™e
 (
x
è{  
_fš™e
(x) != 0; }

51 
šlše
 
boŞ
 
IsInfš™e
(
x
è{  
_fš™e
(xè=ğ0 && 
_i¢ª
(x) == 0; }

52 
šlše
 
boŞ
 
IsNaN
 (
x
è{  
_i¢ª
(x) != 0; }

53 
šlše
 
boŞ
 
IsNÜm®
 (
x
) {

54 cÚ¡ 
	gşassifiÿtiÚ
 = 
_åşass
(
x
);

55  (
	gşassifiÿtiÚ
 =ğ
_FPCLASS_NN
 || 
şassifiÿtiÚ
 =ğ
_FPCLASS_PN
);

61 
šlše
 
boŞ
 
IsFš™e
 (
x
è{  
	g¡d
::
isfš™e
(x); }

62 
šlše
 
boŞ
 
IsInfš™e
(
x
è{  
	g¡d
::
isšf
(x); }

63 
šlše
 
boŞ
 
IsNaN
 (
x
è{  
	g¡d
::
i¢ª
(x); }

64 
šlše
 
boŞ
 
IsNÜm®
 (
x
è{  
	g¡d
::
i¢Üm®
(x); }

	@/usr/include/ceres/internal/autodiff.h

140 #iâdeà
CERES_PUBLIC_INTERNAL_AUTODIFF_H_


141 
	#CERES_PUBLIC_INTERNAL_AUTODIFF_H_


	)

143 
	~<¡ddef.h
>

145 
	~"û»s/j‘.h
"

146 
	~"û»s/š‹º®/eig’.h
"

147 
	~"û»s/š‹º®/fixed_¬¿y.h
"

148 
	~"û»s/š‹º®/v¬Ÿdic_ev®u©e.h
"

149 
	~"glog/loggšg.h
"

151 
Çme¥aû
 
	gû»s
 {

152 
Çme¥aû
 
	gš‹º®
 {

168 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
,y³Çm
	gT
, 
	gN
>

169 
šlše
 
Make1¡Ord”P”turb©iÚ
(
off£t
, cÚ¡ 
T
* 
¤c
, 
J‘T
* 
d¡
) {

170 
DCHECK
(
¤c
);

171 
DCHECK
(
d¡
);

172 
	gj
 = 0; j < 
	gN
; ++j) {

173 
	gd¡
[
j
].
	ga
 = 
¤c
[j];

174 
	gd¡
[
j
].
	gv
.
£tZ”o
();

175 
	gd¡
[
j
].
	gv
[
off£t
 + j] = 
T
(1.0);

181 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
,y³Çm
	gT
>

182 
šlše
 
Take0thOrd”P¬t
(
M
, cÚ¡ 
J‘T
 *
¤c
, 
T
 
d¡
) {

183 
DCHECK
(
¤c
);

184 
	gi
 = 0; i < 
	gM
; ++i) {

185 
	gd¡
[
i
] = 
¤c
[i].
a
;

191 
	g‹m¶©e
 <
ty³Çme
 
	gJ‘T
,y³Çm
	gT
, 
	gN0
, 
	gN
>

192 
šlše
 
Take1¡Ord”P¬t
(cÚ¡ 
M
, cÚ¡ 
J‘T
 *
¤c
, 
T
 *
d¡
) {

193 
DCHECK
(
¤c
);

194 
DCHECK
(
d¡
);

195 
	gi
 = 0; i < 
	gM
; ++i) {

196 
	gEig’
::
M­
<
Eig’
::
M©rix
<
T
, 
	gN
, 1> >(
	gd¡
 + 
N
 * 
	gi
, N) =

197 
¤c
[
i
].
v
.
‹m¶©e
 
£gm’t
<
N
>(
N0
);

205 
	g‹m¶©e
 <
ty³Çme
 
	gFunùÜ
,y³Çm
	gT
,

206 
	gN0
 = 0, 
	gN1
 = 0, 
	gN2
 = 0, 
	gN3
 = 0, 
	gN4
 = 0,

207 
	gN5
 = 0, 
	gN6
 = 0, 
	gN7
 = 0, 
	gN8
 = 0, 
	gN9
 = 0>

208 
	sAutoDiff
 {

209 
boŞ
 
Difã»ÁŸ‹
(cÚ¡ 
FunùÜ
& 
funùÜ
,

210 
T
 cÚ¡ *cÚ¡ *
·¿m‘”s
,

211 
num_ouuts
,

212 
T
 *
funùiÚ_v®ue
,

213 
T
 **
jacobŸns
) {

215 
DCHECK_GT
(
num_ouuts
, 0);

216 
DCHECK
((!
N1
 && !
N2
 && !
N3
 && !
N4
 && !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

217 ((
N1
 > 0è&& !
N2
 && !
N3
 && !
N4
 && !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

218 ((
N1
 > 0è&& (
N2
 > 0è&& !
N3
 && !
N4
 && !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

219 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& !
N4
 && !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

220 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& !
N5
 && !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

221 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& !
N6
 && !
N7
 && !
N8
 && !
N9
) ||

222 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& (
N6
 > 0è&& !
N7
 && !
N8
 && !
N9
) ||

223 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& (
N6
 > 0è&& (
N7
 > 0è&& !
N8
 && !
N9
) ||

224 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& (
N6
 > 0è&& (
N7
 > 0è&& (
N8
 > 0è&& !
N9
) ||

225 ((
N1
 > 0è&& (
N2
 > 0è&& (
N3
 > 0è&& (
N4
 > 0è&& (
N5
 > 0è&& (
N6
 > 0è&& (
N7
 > 0è&& (
N8
 > 0è&& (
N9
 > 0)))

227 << "(ignÜŒašg 0s): " << 
	gN0
 << ", " << 
	gN1
 << ", " << 
	gN2
 << ", "

228 << 
	gN3
 << ", " << 
	gN4
 << ", " << 
	gN5
 << ", " << 
	gN6
 << ", " << 
	gN7
 << ", "

229 << 
	gN8
 << ", " << 
	gN9
;

231 
	gJ‘
<
	tT
, 
	tN0
 + 
	tN1
 + 
	tN2
 + 
	tN3
 + 
	tN4
 + 
	tN5
 + 
	tN6
 + 
	tN7
 + 
	tN8
 + 
	tN9
> 
	tJ‘T
;

232 
	gFixedA¼ay
<
	gJ‘T
, (256 * 7è/ (J‘T)> 
x
(

233 
N0
 + 
N1
 + 
N2
 + 
N3
 + 
N4
 + 
N5
 + 
N6
 + 
N7
 + 
N8
 + 
N9
 + 
num_ouuts
);

236 cÚ¡ 
	gj‘0
 = 0;

237 cÚ¡ 
	gj‘1
 = 
N0
;

238 cÚ¡ 
	gj‘2
 = 
N0
 + 
N1
;

239 cÚ¡ 
	gj‘3
 = 
N0
 + 
N1
 + 
N2
;

240 cÚ¡ 
	gj‘4
 = 
N0
 + 
N1
 + 
N2
 + 
N3
;

241 cÚ¡ 
	gj‘5
 = 
N0
 + 
N1
 + 
N2
 + 
N3
 + 
N4
;

242 cÚ¡ 
	gj‘6
 = 
N0
 + 
N1
 + 
N2
 + 
N3
 + 
N4
 + 
N5
;

243 cÚ¡ 
	gj‘7
 = 
N0
 + 
N1
 + 
N2
 + 
N3
 + 
N4
 + 
N5
 + 
N6
;

244 cÚ¡ 
	gj‘8
 = 
N0
 + 
N1
 + 
N2
 + 
N3
 + 
N4
 + 
N5
 + 
N6
 + 
N7
;

245 cÚ¡ 
	gj‘9
 = 
N0
 + 
N1
 + 
N2
 + 
N3
 + 
N4
 + 
N5
 + 
N6
 + 
N7
 + 
N8
;

247 cÚ¡ 
J‘T
 *
	guÅacked_·¿m‘”s
[10] = {

248 
x
.
g‘
(è+ 
j‘0
,

249 
x
.
g‘
(è+ 
j‘1
,

250 
x
.
g‘
(è+ 
j‘2
,

251 
x
.
g‘
(è+ 
j‘3
,

252 
x
.
g‘
(è+ 
j‘4
,

253 
x
.
g‘
(è+ 
j‘5
,

254 
x
.
g‘
(è+ 
j‘6
,

255 
x
.
g‘
(è+ 
j‘7
,

256 
x
.
g‘
(è+ 
j‘8
,

257 
x
.
g‘
(è+ 
j‘9
,

260 
J‘T
* 
	gouut
 = 
x
.
g‘
(è+ 
N0
 + 
N1
 + 
N2
 + 
N3
 + 
N4
 + 
N5
 + 
N6
 + 
N7
 + 
N8
 + 
N9
;

264 
	gi
 = 0; i < 
	gnum_ouuts
; ++i) {

265 
	gouut
[
i
].
	ga
 = 
kImpossibËV®ue
;

266 
	gouut
[
i
].
	gv
.
£tCÚ¡ªt
(
kImpossibËV®ue
);

269 
	#CERES_MAKE_1ST_ORDER_PERTURBATION
(
i
) \

270 ià(
N
 ## 
i
) { \

271 
š‹º®
::
Make1¡Ord”P”turb©iÚ
<
J‘T
, 
T
, 
N
 ## 
i
>( \

272 
j‘
 ## 
i
, \

273 
·¿m‘”s
[
i
], \

274 
x
.
	`g‘
(è+ 
j‘
 ## 
i
); \

275 }

	)

276 
CERES_MAKE_1ST_ORDER_PERTURBATION
(0);

277 
CERES_MAKE_1ST_ORDER_PERTURBATION
(1);

278 
CERES_MAKE_1ST_ORDER_PERTURBATION
(2);

279 
CERES_MAKE_1ST_ORDER_PERTURBATION
(3);

280 
CERES_MAKE_1ST_ORDER_PERTURBATION
(4);

281 
CERES_MAKE_1ST_ORDER_PERTURBATION
(5);

282 
CERES_MAKE_1ST_ORDER_PERTURBATION
(6);

283 
CERES_MAKE_1ST_ORDER_PERTURBATION
(7);

284 
CERES_MAKE_1ST_ORDER_PERTURBATION
(8);

285 
CERES_MAKE_1ST_ORDER_PERTURBATION
(9);

286 #undeà
CERES_MAKE_1ST_ORDER_PERTURBATION


288 ià(!
	gV¬ŸdicEv®u©e
<
	gFunùÜ
, 
	gJ‘T
,

289 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
>::
C®l
(

290 
funùÜ
, 
uÅacked_·¿m‘”s
, 
ouut
)) {

291  
	gçl£
;

294 
	gš‹º®
::
Take0thOrd”P¬t
(
num_ouuts
, 
ouut
, 
funùiÚ_v®ue
);

296 
	#CERES_TAKE_1ST_ORDER_PERTURBATION
(
i
) \

297 ià(
N
 ## 
i
) { \

298 ià(
jacobŸns
[
i
]) { \

299 
š‹º®
::
Take1¡Ord”P¬t
<
J‘T
, 
T
, \

300 
j‘
 ## 
i
, \

301 
N
 ## 
i
>(
num_ouuts
, \

302 
ouut
, \

303 
jacobŸns
[
i
]); \

305 }

	)

306 
CERES_TAKE_1ST_ORDER_PERTURBATION
(0);

307 
CERES_TAKE_1ST_ORDER_PERTURBATION
(1);

308 
CERES_TAKE_1ST_ORDER_PERTURBATION
(2);

309 
CERES_TAKE_1ST_ORDER_PERTURBATION
(3);

310 
CERES_TAKE_1ST_ORDER_PERTURBATION
(4);

311 
CERES_TAKE_1ST_ORDER_PERTURBATION
(5);

312 
CERES_TAKE_1ST_ORDER_PERTURBATION
(6);

313 
CERES_TAKE_1ST_ORDER_PERTURBATION
(7);

314 
CERES_TAKE_1ST_ORDER_PERTURBATION
(8);

315 
CERES_TAKE_1ST_ORDER_PERTURBATION
(9);

316 #undeà
CERES_TAKE_1ST_ORDER_PERTURBATION


317  
	gŒue
;

	@/usr/include/ceres/internal/disable_warnings.h

33 #iâdeà
CERES_WARNINGS_DISABLED


34 
	#CERES_WARNINGS_DISABLED


	)

36 #ifdeà
_MSC_VER


37 #´agm¨
w¬nšg
Ğ
push
 )

41 #´agm¨
w¬nšg
Ğ
di§bË
 : 4251 )

	@/usr/include/ceres/internal/eigen.h

31 #iâdeà
CERES_INTERNAL_EIGEN_H_


32 
	#CERES_INTERNAL_EIGEN_H_


	)

34 
	~"Eig’/CÜe
"

36 
Çme¥aû
 
	gû»s
 {

38 
	gEig’
::
	tM©rix
<, 
	tEig’
::
	tDyÇmic
, 1> 
	tVeùÜ
;

39 
	gEig’
::
	tM©rix
<,

40 
	tEig’
::
	tDyÇmic
,

41 
	tEig’
::
	tDyÇmic
,

42 
	tEig’
::
	tRowMajÜ
> 
	tM©rix
;

43 
	gEig’
::
	tM­
<
	tVeùÜ
> 
	tVeùÜRef
;

44 
	gEig’
::
	tM­
<
	tM©rix
> 
	tM©rixRef
;

45 
	gEig’
::
	tM­
<cÚ¡ 
	tVeùÜ
> 
	tCÚ¡VeùÜRef
;

46 
	gEig’
::
	tM­
<cÚ¡ 
	tM©rix
> 
	tCÚ¡M©rixRef
;

49 
	gEig’
::
	tM©rix
<,

50 
	tEig’
::
	tDyÇmic
,

51 
	tEig’
::
	tDyÇmic
,

52 
	tEig’
::
	tCŞMajÜ
> 
	tCŞMajÜM©rix
;

54 
	gEig’
::
	tM­
<
	tCŞMajÜM©rix
, 0,

55 
	tEig’
::
	tSŒide
<Eig’::
	tDyÇmic
, 1> > 
	tCŞMajÜM©rixRef
;

57 
	gEig’
::
	tM­
<cÚ¡ 
	tCŞMajÜM©rix
,

59 
	tEig’
::
	tSŒide
<Eig’::
	tDyÇmic
, 1> > 
	tCÚ¡CŞMajÜM©rixRef
;

65 
	g‹m¶©e
 <
	gnum_rows
 = 
Eig’
::
DyÇmic
, 
	gnum_cŞs
 = Eigen::Dynamic>

66 
	sEig’Ty³s
 {

67 
Eig’
::
	tM©rix
 <, 
	tnum_rows
, 
	tnum_cŞs
, 
	tEig’
::
	tRowMajÜ
>

68 
	tM©rix
;

70 
	gEig’
::
	tM­
<

71 
	tEig’
::
	tM©rix
<, 
	tnum_rows
, 
	tnum_cŞs
, Eig’::
	tRowMajÜ
> >

72 
	tM©rixRef
;

74 
	gEig’
::
	tM©rix
 <, 
	tnum_rows
, 1>

75 
	tVeùÜ
;

77 
	gEig’
::
	tM­
 <

78 
	tEig’
::
	tM©rix
<, 
	tnum_rows
, 1> >

79 
	tVeùÜRef
;

82 
	gEig’
::
	tM­
<

83 cÚ¡ 
	tEig’
::
	tM©rix
<, 
	tnum_rows
, 
	tnum_cŞs
, Eig’::
	tRowMajÜ
> >

84 
	tCÚ¡M©rixRef
;

86 
	gEig’
::
	tM­
 <

87 cÚ¡ 
	tEig’
::
	tM©rix
<, 
	tnum_rows
, 1> >

88 
	tCÚ¡VeùÜRef
;

	@/usr/include/ceres/internal/fixed_array.h

32 #iâdeà
CERES_PUBLIC_INTERNAL_FIXED_ARRAY_H_


33 
	#CERES_PUBLIC_INTERNAL_FIXED_ARRAY_H_


	)

35 
	~<c¡ddef
>

36 
	~"Eig’/CÜe
"

37 
	~"û»s/š‹º®/maüos.h
"

38 
	~"û»s/š‹º®/mªu®_cÚ¡ruùÜ.h
"

39 
	~"glog/loggšg.h
"

41 
Çme¥aû
 
	gû»s
 {

42 
Çme¥aû
 
	gš‹º®
 {

72 #ià
defšed
(
_WIN64
)

73 
__št64
 
	tssize_t
;

74 #–ià
defšed
(
_WIN32
)

75 
__št32
 
	tssize_t
;

78 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
ssize_t
 
	gšlše_–em’ts
 = -1>

79 şas 
	cFixedA¼ay
 {

80 
public
:

82 
T
 
	tv®ue_ty³
;

83 
T
* 
	t™”©Ü
;

84 
T
 cÚ¡* 
	tcÚ¡_™”©Ü
;

85 
	gT
& 
	t»ã»nû
;

86 
T
 cÚ¡& 
	tcÚ¡_»ã»nû
;

87 
T
* 
	tpoš‹r
;

88 
	g¡d
::
	t±rdiff_t
 
	tdifã»nû_ty³
;

89 
size_t
 
	tsize_ty³
;

98 
ex¶ic™
 
FixedA¼ay
(
size_ty³
 
n
);

101 ~
FixedA¼ay
();

104 
šlše
 
size_ty³
 
size
(ècÚ¡ {  
	gsize_
; }

107 
šlše
 
size_t
 
memsize
(ècÚ¡ {  
size_
 * (
	gT
); }

110 
šlše
 cÚ¡ 
T
* 
g‘
(ècÚ¡ {  &
	g¬¿y_
[0].
	g–em’t
; }

111 
šlše
 
T
* 
g‘
(è{  &
	g¬¿y_
[0].
	g–em’t
; }

115 
šlše
 
	gT
& 
	gİ”©Ü
[](
size_ty³
 
	gi
) {

116 
DCHECK_LT
(
i
, 
size_
);

117  
	g¬¿y_
[
i
].
	g–em’t
;

122 
šlše
 cÚ¡ 
	gT
& 
	gİ”©Ü
[](
size_ty³
 
	gi
) const {

123 
DCHECK_LT
(
i
, 
size_
);

124  
	g¬¿y_
[
i
].
	g–em’t
;

127 
šlše
 
™”©Ü
 
begš
(è{  &
	g¬¿y_
[0].
	g–em’t
; }

128 
šlše
 
™”©Ü
 
’d
(è{  &
	g¬¿y_
[
size_
].
	g–em’t
; }

130 
šlše
 
cÚ¡_™”©Ü
 
begš
(ècÚ¡ {  &
	g¬¿y_
[0].
	g–em’t
; }

131 
šlše
 
cÚ¡_™”©Ü
 
’d
(ècÚ¡ {  &
	g¬¿y_
[
size_
].
	g–em’t
; }

133 
	g´iv©e
:

138 
	sIÂ”CÚš”
 {

139 
T
 
–em’t
;

148 cÚ¡ 
size_ty³
 
	gS1
 = ((
šlše_–em’ts
 < 0)

149 ? (256/(
T
)è: 
šlše_–em’ts
);

150 cÚ¡ 
size_ty³
 
	gS2
 = (
S1
 <= 0) ? 1 : S1;

151 cÚ¡ 
size_ty³
 
	gkIÆšeEËm’ts
 = 
S2
;

153 
size_ty³
 cÚ¡ 
	gsize_
;

154 
IÂ”CÚš”
* cÚ¡ 
	g¬¿y_
;

158 
	gMªu®CÚ¡ruùÜ
<
	gIÂ”CÚš”
> 
	gšlše_¥aû_
[
kIÆšeEËm’ts
];

163 
	g‹m¶©e
 <
şass
 
	gT
, 
ssize_t
 
	gS
>

164 
šlše
 
	gFixedA¼ay
<
	gT
, 
	gS
>::
FixedA¼ay
(
ty³Çme
 FixedA¼ay<
T
, 
S
>::
size_ty³
 
n
)

165 : 
size_
(
n
),

166 
¬¿y_
((
n
 <ğ
kIÆšeEËm’ts


167 ? 
»š‹½»t_ÿ¡
<
IÂ”CÚš”
*>(
šlše_¥aû_
)

168 : 
Ãw
 
IÂ”CÚš”
[
n
])) {

170 ià(
¬¿y_
 =ğ
»š‹½»t_ÿ¡
<
IÂ”CÚš”
*>(
šlše_¥aû_
)) {

171 
size_t
 
i
 = 0; 
	gi
 !ğ
size_
; ++i) {

172 
	gšlše_¥aû_
[
i
].
In™
();

177 
	g‹m¶©e
 <
şass
 
	gT
, 
ssize_t
 
	gS
>

178 
šlše
 
	gFixedA¼ay
<
	gT
, 
	gS
>::~
FixedA¼ay
() {

179 ià(
¬¿y_
 !ğ
»š‹½»t_ÿ¡
<
IÂ”CÚš”
*>(
šlše_¥aû_
)) {

180 
d–‘e
[] 
¬¿y_
;

182 
size_t
 
	gi
 = 0; i !ğ
size_
; ++i) {

183 
	gšlše_¥aû_
[
i
].
De¡roy
();

	@/usr/include/ceres/internal/macros.h

36 #iâdeà
CERES_PUBLIC_INTERNAL_MACROS_H_


37 
	#CERES_PUBLIC_INTERNAL_MACROS_H_


	)

39 
	~<c¡ddef
>

52 
	#CERES_DISALLOW_COPY_AND_ASSIGN
(
Ty³Name
) \

53 
	`Ty³Name
(cÚ¡ 
Ty³Name
&); \

54 
İ”©Ü
=(cÚ¡ 
Ty³Name
&)

	)

62 
	#CERES_DISALLOW_IMPLICIT_CONSTRUCTORS
(
Ty³Name
) \

63 
	`Ty³Name
(); \

64 
	`CERES_DISALLOW_COPY_AND_ASSIGN
(
Ty³Name
)

	)

80 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

81 (&
A¼aySizeH–³r
(
T
 (&
¬¿y
)[
N
]))[N];

86 #iâdeà
_WIN32


87 
	g‹m¶©e
 <
ty³Çme
 
	gT
, 
size_t
 
	gN
>

88 (&
A¼aySizeH–³r
(cÚ¡ 
T
 (&
¬¿y
)[
N
]))[N];

91 
	#¬¿ysize
(
¬¿y
è((
	`A¼aySizeH–³r
×¼ay)))

	)

138 
	#CERES_ARRAYSIZE
(
a
) \

139 (((
a
) / (*(a))) / \

140 
¡©ic_ÿ¡
<
size_t
>(!((
a
è% (*×)))))

	)

148 #ià(
__GNUC__
 > 3 || (__GNUC__ =ğ3 && 
__GNUC_MINOR__
 >= 4)) \

149 && !
	$defšed
(
COMPILER_ICC
)

150 
	#CERES_MUST_USE_RESULT
 
	`__©Œibu‹__
 ((
w¬n_unu£d_»suÉ
))

	)

152 
	#CERES_MUST_USE_RESULT


	)

162 #ià
	`defšed
(
_MSC_VER
)

163 
	#CERES_ALIGN_ATTRIBUTE
(
n
è
	`__deş¥ec
(
	`®ign
Ò))

	)

164 
	#CERES_ALIGN_OF
(
T
è
	`__®ignof
(T)

	)

165 #–ià
	`defšed
(
__GNUC__
)

166 
	#CERES_ALIGN_ATTRIBUTE
(
n
è
	`__©Œibu‹__
((
	`®igÃd
Ò)))

	)

167 
	#CERES_ALIGN_OF
(
T
è
	`__®ignof
(T)

	)

	@/usr/include/ceres/internal/numeric_diff.h

35 #iâdeà
CERES_PUBLIC_INTERNAL_NUMERIC_DIFF_H_


36 
	#CERES_PUBLIC_INTERNAL_NUMERIC_DIFF_H_


	)

38 
	~<c¡ršg
>

40 
	~"Eig’/D’£
"

41 
	~"Eig’/StdVeùÜ
"

42 
	~"û»s/co¡_funùiÚ.h
"

43 
	~"û»s/š‹º®/fixed_¬¿y.h
"

44 
	~"û»s/š‹º®/scİed_±r.h
"

45 
	~"û»s/š‹º®/v¬Ÿdic_ev®u©e.h
"

46 
	~"û»s/num”ic_diff_İtiÚs.h
"

47 
	~"û»s/ty³s.h
"

48 
	~"glog/loggšg.h
"

51 
Çme¥aû
 
	gû»s
 {

52 
Çme¥aû
 
	gš‹º®
 {

56 
	g‹m¶©e
 <
ty³Çme
 
	gCo¡FunùÜ
,

57 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
,

58 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
 >

59 
boŞ
 
Ev®u©eIm¶
(cÚ¡ 
Co¡FunùÜ
* 
funùÜ
,

60 cÚ¡* cÚ¡* 
·¿m‘”s
,

61 * 
»sidu®s
,

63  
	gV¬ŸdicEv®u©e
<
	gCo¡FunùÜ
,

65 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
>::
C®l
(

66 *
funùÜ
,

67 
·¿m‘”s
,

68 
»sidu®s
);

71 
	g‹m¶©e
 <
ty³Çme
 
	gCo¡FunùÜ
,

72 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
,

73 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
 >

74 
boŞ
 
Ev®u©eIm¶
(cÚ¡ 
Co¡FunùÜ
* 
funùÜ
,

75 cÚ¡* cÚ¡* 
·¿m‘”s
,

76 * 
»sidu®s
,

77 cÚ¡ 
Co¡FunùiÚ
* ) {

78  
	gfunùÜ
->
Ev®u©e
(
·¿m‘”s
, 
»sidu®s
, 
NULL
);

84 
	g‹m¶©e
 <
ty³Çme
 
	gCo¡FunùÜ
,

85 
Num”icDiffM‘hodTy³
 
	gkM‘hod
,

86 
	gkNumResidu®s
,

87 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
,

88 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
,

89 
	gkP¬am‘”Block
,

90 
	gkP¬am‘”BlockSize
>

91 
	sNum”icDiff
 {

93 
boŞ
 
Ev®u©eJacobŸnFÜP¬am‘”Block
(

94 cÚ¡ 
Co¡FunùÜ
* 
funùÜ
,

95 cÚ¡ * 
»sidu®s_©_ev®_pošt
,

96 cÚ¡ 
Num”icDiffO±iÚs
& 
İtiÚs
,

97 
num_»sidu®s
,

98 
·¿m‘”_block_šdex
,

99 
·¿m‘”_block_size
,

100 **
·¿m‘”s
,

101 *
jacobŸn
) {

102 
usšg
 
	gEig’
::
M­
;

103 
usšg
 
	gEig’
::
M©rix
;

104 
usšg
 
	gEig’
::
RowMajÜ
;

105 
usšg
 
	gEig’
::
CŞMajÜ
;

107 cÚ¡ 
	gnum_»sidu®s_š‹º®
 =

108 (
kNumResidu®s
 !ğ
û»s
::
DYNAMIC
 ? kNumResidu® : 
num_»sidu®s
);

109 cÚ¡ 
	g·¿m‘”_block_šdex_š‹º®
 =

110 (
kP¬am‘”Block
 !ğ
û»s
::
DYNAMIC
 ? kParameterBlock :

111 
·¿m‘”_block_šdex
);

112 cÚ¡ 
	g·¿m‘”_block_size_š‹º®
 =

113 (
kP¬am‘”BlockSize
 !ğ
û»s
::
DYNAMIC
 ? kParameterBlockSize :

114 
·¿m‘”_block_size
);

116 
	gM©rix
<, 
	tkNumResidu®s
, 1> 
	tResidu®VeùÜ
;

117 
	gM©rix
<, 
	tkP¬am‘”BlockSize
, 1> 
	tP¬am‘”VeùÜ
;

123 
	gM©rix
<,

124 
	tkNumResidu®s
,

125 
	tkP¬am‘”BlockSize
,

126 (
	tkP¬am‘”BlockSize
 =ğ1è? 
	tCŞMajÜ
 : 
	tRowMajÜ
>

127 
	tJacobŸnM©rix
;

129 
	gM­
<
	gJacobŸnM©rix
> 
·¿m‘”_jacobŸn
(
jacobŸn
,

130 
num_»sidu®s_š‹º®
,

131 
·¿m‘”_block_size_š‹º®
);

133 
	gM­
<
	gP¬am‘”VeùÜ
> 
x_¶us_d–
(

134 
·¿m‘”s
[
·¿m‘”_block_šdex_š‹º®
],

135 
·¿m‘”_block_size_š‹º®
);

136 
P¬am‘”VeùÜ
 
x
(
x_¶us_d–
);

137 
P¬am‘”VeùÜ
 
	g¡•_size
 = 
x
.
¬¿y
().
abs
() *

138 ((
kM‘hod
 =ğ
RIDDERS
è? 
İtiÚs
.
ridd”s_»Ïtive_š™Ÿl_¡•_size
 :

139 
İtiÚs
.
»Ïtive_¡•_size
);

145 
	gmš_¡•_size
 = 
¡d
::
sq¹
(¡d::
num”ic_lim™s
<>::
•sÚ
());

149 ià(
	gkM‘hod
 =ğ
RIDDERS
) {

150 
mš_¡•_size
 = 
¡d
::
max
(min_step_size,

151 
İtiÚs
.
ridd”s_»Ïtive_š™Ÿl_¡•_size
);

156 
	gFixedA¼ay
<> 
‹mp_»sidu®_¬¿y
(
num_»sidu®s_š‹º®
);

157 
	gFixedA¼ay
<> 
»sidu®_¬¿y
(
num_»sidu®s_š‹º®
);

158 
	gM­
<
	gResidu®VeùÜ
> 
»sidu®s
(
»sidu®_¬¿y
.
g‘
(),

159 
num_»sidu®s_š‹º®
);

161 
	gj
 = 0; j < 
	g·¿m‘”_block_size_š‹º®
; ++j) {

162 cÚ¡ 
	gd–
 = 
¡d
::
max
(
mš_¡•_size
, 
¡•_size
(
j
));

164 ià(
	gkM‘hod
 =ğ
RIDDERS
) {

165 ià(!
Ev®u©eRidd”sJacobŸnCŞumn
(
funùÜ
, 
j
, 
d–
,

166 
İtiÚs
,

167 
num_»sidu®s_š‹º®
,

168 
·¿m‘”_block_size_š‹º®
,

169 
x
.
d©a
(),

170 
»sidu®s_©_ev®_pošt
,

171 
·¿m‘”s
,

172 
x_¶us_d–
.
d©a
(),

173 
‹mp_»sidu®_¬¿y
.
g‘
(),

174 
»sidu®_¬¿y
.
g‘
())) {

175  
çl£
;

178 ià(!
Ev®u©eJacobŸnCŞumn
(
funùÜ
, 
j
, 
d–
,

179 
num_»sidu®s_š‹º®
,

180 
·¿m‘”_block_size_š‹º®
,

181 
x
.
d©a
(),

182 
»sidu®s_©_ev®_pošt
,

183 
·¿m‘”s
,

184 
x_¶us_d–
.
d©a
(),

185 
‹mp_»sidu®_¬¿y
.
g‘
(),

186 
»sidu®_¬¿y
.
g‘
())) {

187  
	gçl£
;

191 
	g·¿m‘”_jacobŸn
.
cŞ
(
j
).
m©rix
(èğ
»sidu®s
;

193  
	gŒue
;

196 
boŞ
 
Ev®u©eJacobŸnCŞumn
(cÚ¡ 
Co¡FunùÜ
* 
funùÜ
,

197 
·¿m‘”_šdex
,

198 
d–
,

199 
num_»sidu®s
,

200 
·¿m‘”_block_size
,

201 cÚ¡ * 
x_±r
,

202 cÚ¡ * 
»sidu®s_©_ev®_pošt
,

203 ** 
·¿m‘”s
,

204 * 
x_¶us_d–_±r
,

205 * 
‹mp_»sidu®s_±r
,

206 * 
»sidu®s_±r
) {

207 
usšg
 
	gEig’
::
M­
;

208 
usšg
 
	gEig’
::
M©rix
;

210 
	gM©rix
<, 
	tkNumResidu®s
, 1> 
	tResidu®VeùÜ
;

211 
	gM©rix
<, 
	tkP¬am‘”BlockSize
, 1> 
	tP¬am‘”VeùÜ
;

213 
	gM­
<cÚ¡ 
	gP¬am‘”VeùÜ
> 
x
(
x_±r
, 
·¿m‘”_block_size
);

214 
	gM­
<
	gP¬am‘”VeùÜ
> 
x_¶us_d–
(
x_¶us_d–_±r
,

215 
·¿m‘”_block_size
);

217 
	gM­
<
	gResidu®VeùÜ
> 
»sidu®s
(
»sidu®s_±r
, 
num_»sidu®s
);

218 
	gM­
<
	gResidu®VeùÜ
> 
‹mp_»sidu®s
(
‹mp_»sidu®s_±r
, 
num_»sidu®s
);

221 
x_¶us_d–
(
·¿m‘”_šdex
èğ
x
Õ¬am‘”_šdexè+ 
d–
;

223 ià(!
	gEv®u©eIm¶
<
	gCo¡FunùÜ
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
>(

224 
	gfunùÜ
, 
	g·¿m‘”s
, 
	g»sidu®s
.
d©a
(), functor)) {

225  
	gçl£
;

232 
	gÚe_ov”_d–
 = 1.0 / 
d–
;

233 ià(
	gkM‘hod
 =ğ
CENTRAL
 || 
kM‘hod
 =ğ
RIDDERS
) {

235 
x_¶us_d–
(
·¿m‘”_šdex
èğ
x
Õ¬am‘”_šdexè- 
d–
;

237 ià(!
	gEv®u©eIm¶
<
	gCo¡FunùÜ
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
>(

238 
	gfunùÜ
, 
	g·¿m‘”s
, 
	g‹mp_»sidu®s
.
d©a
(), functor)) {

239  
	gçl£
;

242 
	g»sidu®s
 -ğ
‹mp_»sidu®s
;

243 
	gÚe_ov”_d–
 /= 2;

246 
	g»sidu®s
 -=

247 
M­
<cÚ¡ 
Residu®VeùÜ
>(
»sidu®s_©_ev®_pošt
,

248 
	gnum_»sidu®s
);

252 
x_¶us_d–
(
·¿m‘”_šdex
èğ
x
(parameter_index);

255 
	g»sidu®s
 *ğ
Úe_ov”_d–
;

257  
	gŒue
;

271 
boŞ
 
Ev®u©eRidd”sJacobŸnCŞumn
(

272 cÚ¡ 
Co¡FunùÜ
* 
funùÜ
,

273 
·¿m‘”_šdex
,

274 
d–
,

275 cÚ¡ 
Num”icDiffO±iÚs
& 
İtiÚs
,

276 
num_»sidu®s
,

277 
·¿m‘”_block_size
,

278 cÚ¡ * 
x_±r
,

279 cÚ¡ * 
»sidu®s_©_ev®_pošt
,

280 ** 
·¿m‘”s
,

281 * 
x_¶us_d–_±r
,

282 * 
‹mp_»sidu®s_±r
,

283 * 
»sidu®s_±r
) {

284 
usšg
 
	gEig’
::
M­
;

285 
usšg
 
	gEig’
::
M©rix
;

286 
usšg
 
	gEig’
::
®igÃd_®loÿtÜ
;

288 
	gM©rix
<, 
	tkNumResidu®s
, 1> 
	tResidu®VeùÜ
;

289 
	gM©rix
<, 
	tkNumResidu®s
, 
	tEig’
::
	tDyÇmic
> 
	tResidu®Cªdid©eM©rix
;

290 
	gM©rix
<, 
	tkP¬am‘”BlockSize
, 1> 
	tP¬am‘”VeùÜ
;

292 
	gM­
<cÚ¡ 
	gP¬am‘”VeùÜ
> 
x
(
x_±r
, 
·¿m‘”_block_size
);

293 
	gM­
<
	gP¬am‘”VeùÜ
> 
x_¶us_d–
(
x_¶us_d–_±r
,

294 
·¿m‘”_block_size
);

296 
	gM­
<
	gResidu®VeùÜ
> 
»sidu®s
(
»sidu®s_±r
, 
num_»sidu®s
);

297 
	gM­
<
	gResidu®VeùÜ
> 
‹mp_»sidu®s
(
‹mp_»sidu®s_±r
, 
num_»sidu®s
);

305 
	gcu¼’t_¡•_size
 = 
d–
 *

306 
pow
(
İtiÚs
.
ridd”s_¡•_shršk_çùÜ
,

307 
İtiÚs
.
max_num_ridd”s_exŒ­Ş©iÚs
 / 2);

311 
Residu®Cªdid©eM©rix
 
¡•size_ÿndid©es_a
(

312 
num_»sidu®s
,

313 
İtiÚs
.
max_num_ridd”s_exŒ­Ş©iÚs
);

314 
Residu®Cªdid©eM©rix
 
¡•size_ÿndid©es_b
(

315 
num_»sidu®s
,

316 
İtiÚs
.
max_num_ridd”s_exŒ­Ş©iÚs
);

317 
Residu®Cªdid©eM©rix
* 
	gcu¼’t_ÿndid©es
 = &
¡•size_ÿndid©es_a
;

318 
Residu®Cªdid©eM©rix
* 
	g´evious_ÿndid©es
 = &
¡•size_ÿndid©es_b
;

326 
	gnÜm_”rÜ
 = 
¡d
::
num”ic_lim™s
<>::
max
();

332 
	gi
 = 0; i < 
	gİtiÚs
.
	gmax_num_ridd”s_exŒ­Ş©iÚs
; ++i) {

334 ià(!
Ev®u©eJacobŸnCŞumn
(
funùÜ
, 
·¿m‘”_šdex
, 
cu¼’t_¡•_size
,

335 
num_»sidu®s
,

336 
·¿m‘”_block_size
,

337 
x
.
d©a
(),

338 
»sidu®s_©_ev®_pošt
,

339 
·¿m‘”s
,

340 
x_¶us_d–
.
d©a
(),

341 
‹mp_»sidu®s
.
d©a
(),

342 
cu¼’t_ÿndid©es
->
cŞ
(0).
d©a
())) {

344  
	gçl£
;

348 ià(
	gi
 == 0) {

349 
»sidu®s
 = 
cu¼’t_ÿndid©es
->
cŞ
(0);

353 
	gcu¼’t_¡•_size
 /ğ
İtiÚs
.
ridd”s_¡•_shršk_çùÜ
;

356 
	grich¬dsÚ_çùÜ
 = 
İtiÚs
.
ridd”s_¡•_shršk_çùÜ
 *

357 
İtiÚs
.
ridd”s_¡•_shršk_çùÜ
;

358 
	gk
 = 1; k <ğ
i
; ++k) {

361 
	gcu¼’t_ÿndid©es
->
cŞ
(
k
) =

362 (
rich¬dsÚ_çùÜ
 * 
cu¼’t_ÿndid©es
->
cŞ
(
k
 - 1) -

363 
´evious_ÿndid©es
->
cŞ
(
k
 - 1)è/ (
rich¬dsÚ_çùÜ
 - 1.0);

365 
	grich¬dsÚ_çùÜ
 *ğ
İtiÚs
.
ridd”s_¡•_shršk_çùÜ
 *

366 
İtiÚs
.
ridd”s_¡•_shršk_çùÜ
;

369 
	gÿndid©e_”rÜ
 = 
¡d
::
max
(

370 (
cu¼’t_ÿndid©es
->
cŞ
(
k
) -

371 
cu¼’t_ÿndid©es
->
cŞ
(
k
 - 1)).
nÜm
(),

372 (
cu¼’t_ÿndid©es
->
cŞ
(
k
) -

373 
´evious_ÿndid©es
->
cŞ
(
k
 - 1)).
nÜm
());

376 ià(
	gÿndid©e_”rÜ
 <ğ
nÜm_”rÜ
) {

377 
nÜm_”rÜ
 = 
ÿndid©e_”rÜ
;

378 
	g»sidu®s
 = 
cu¼’t_ÿndid©es
->
cŞ
(
k
);

381 ià(
	gnÜm_”rÜ
 < 
	gİtiÚs
.
	gridd”s_•sÚ
) {

388 ià(
	gnÜm_”rÜ
 < 
	gİtiÚs
.
	gridd”s_•sÚ
) {

394 ià(
	gi
 > 0) {

395 
	gbËau_”rÜ
 = (
cu¼’t_ÿndid©es
->
cŞ
(
i
) -

396 
´evious_ÿndid©es
->
cŞ
(
i
 - 1)).
nÜm
();

399 ià(
	gbËau_”rÜ
 >ğ2 * 
nÜm_”rÜ
) {

404 
	g¡d
::
sw­
(
cu¼’t_ÿndid©es
, 
´evious_ÿndid©es
);

406  
	gŒue
;

410 
	g‹m¶©e
 <
ty³Çme
 
	gCo¡FunùÜ
,

411 
Num”icDiffM‘hodTy³
 
	gkM‘hod
,

412 
	gkNumResidu®s
,

413 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
,

414 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
,

415 
	gkP¬am‘”Block
>

416 
	gNum”icDiff
<
	gCo¡FunùÜ
, 
	gkM‘hod
, 
	gkNumResidu®s
,

417 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
,

418 
	gkP¬am‘”Block
, 0> {

420 
boŞ
 
Ev®u©eJacobŸnFÜP¬am‘”Block
(

421 cÚ¡ 
Co¡FunùÜ
* 
funùÜ
,

422 cÚ¡ * 
»sidu®s_©_ev®_pošt
,

423 cÚ¡ 
Num”icDiffO±iÚs
& 
İtiÚs
,

424 cÚ¡ 
num_»sidu®s
,

425 cÚ¡ 
·¿m‘”_block_šdex
,

426 cÚ¡ 
·¿m‘”_block_size
,

427 **
·¿m‘”s
,

428 *
jacobŸn
) {

430 ()
	gfunùÜ
;

431 ()
	g»sidu®s_©_ev®_pošt
;

432 ()
	gİtiÚs
;

433 ()
	gnum_»sidu®s
;

434 ()
	g·¿m‘”_block_šdex
;

435 ()
	g·¿m‘”_block_size
;

436 ()
	g·¿m‘”s
;

437 ()
	gjacobŸn
;

438 
LOG
(
FATAL
) << "Control should‚ever„each here.";

439  
	gŒue
;

	@/usr/include/ceres/internal/port.h

31 #iâdeà
CERES_PUBLIC_INTERNAL_PORT_H_


32 
	#CERES_PUBLIC_INTERNAL_PORT_H_


	)

35 #ifdeà
__ılu¥lus


36 
	~<c¡ddef
>

37 
	~"û»s/š‹º®/cÚfig.h
"

38 #ià
defšed
(
CERES_TR1_MEMORY_HEADER
)

39 
	~<Œ1/memÜy
>

41 
	~<memÜy
>

44 
Çme¥aû
 
	gû»s
 {

46 #ià
defšed
(
CERES_TR1_SHARED_PTR
)

47 
usšg
 
	g¡d
::
Œ1
::
sh¬ed_±r
;

49 
usšg
 
	g¡d
::
sh¬ed_±r
;

61 #ifdeà
CERES_USE_CXX11


62 
Çme¥aû
 
	gpÜt_cÚ¡ªts
 {

63 
cÚ¡ex´
 
size_t
 
	gkMaxAlignBy‹s
 =

67 #ià
defšed
 (
__GNUC__
è&& __GNUC__ =ğ4 && 
__GNUC_MINOR__
 == 8

68 
®ignof
(::
max_®ign_t
);

70 
®ignof
(
¡d
::
max_®ign_t
);

90 #ià
defšed
(
_MSC_VER
è&& defšed(
CERES_BUILDING_SHARED_LIBRARY
)

91 
	#CERES_EXPORT
 
	`__deş¥ec
(
dÎexpÜt
)

	)

92 #–ià
defšed
(
_MSC_VER
è&& defšed(
CERES_USING_SHARED_LIBRARY
)

93 
	#CERES_EXPORT
 
	`__deş¥ec
(
dÎimpÜt
)

	)

95 
	#CERES_EXPORT


	)

	@/usr/include/ceres/internal/reenable_warnings.h

31 #ifdeà
CERES_WARNINGS_DISABLED


32 #undeà
CERES_WARNINGS_DISABLED


34 #ifdeà
_MSC_VER


35 #´agm¨
w¬nšg
Ğ
pİ
 )

	@/usr/include/ceres/internal/scoped_ptr.h

35 #iâdeà
CERES_PUBLIC_INTERNAL_SCOPED_PTR_H_


36 
	#CERES_PUBLIC_INTERNAL_SCOPED_PTR_H_


	)

38 
	~<as£¹.h
>

39 
	~<¡dlib.h
>

40 
	~<c¡ddef
>

41 
	~<®gÜ™hm
>

43 
Çme¥aû
 
	gû»s
 {

44 
Çme¥aû
 
	gš‹º®
 {

46 
	g‹m¶©e
 <
şass
 
	gC
> cÏs 
	gscİed_±r
;

47 
	g‹m¶©e
 <
şass
 
	gC
, cÏs 
	gF»e
> cÏs 
	gscİed_±r_m®loc
;

48 
	g‹m¶©e
 <
şass
 
	gC
> cÏs 
	gscİed_¬¿y
;

50 
	g‹m¶©e
 <
şass
 
	gC
>

51 
	gscİed_±r
<
	gC
> 
make_scİed_±r
(
C
 *);

61 
	g‹m¶©e
 <
şass
 
	gC
>

62 şas 
	cscİed_±r
 {

63 
	gpublic
:

65 
C
 
	t–em’t_ty³
;

70 
ex¶ic™
 
scİed_±r
(
C
* 
p
 = 
NULL
è: 
±r_
(p) { }

74 ~
scİed_±r
() {

75 ’um { 
ty³_mu¡_be_com¶‘e
 = (
C
) };

76 
d–‘e
 
	g±r_
;

82 
»£t
(
C
* 
p
 = 
NULL
) {

83 ià(
p
 !ğ
±r_
) {

84 ’um { 
ty³_mu¡_be_com¶‘e
 = (
C
) };

85 
d–‘e
 
	g±r_
;

86 
	g±r_
 = 
p
;

92 
	gC
& 
	gİ”©Ü
*() const {

93 
as£¹
(
±r_
 !ğ
NULL
);

94  *
	g±r_
;

96 
C
* 
	gİ”©Ü
->() const {

97 
as£¹
(
±r_
 !ğ
NULL
);

98  
	g±r_
;

100 
C
* 
g‘
(ècÚ¡ {  
	g±r_
; }

105 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
C
* 
p
ècÚ¡ {  
±r_
 ==…; }

106 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
C
* 
p
ècÚ¡ {  
±r_
 !=…; }

109 
sw­
(
scİed_±r
& 
p2
) {

110 
C
* 
	gtmp
 = 
±r_
;

111 
	g±r_
 = 
p2
.
±r_
;

112 
	gp2
.
	g±r_
 = 
tmp
;

120 
C
* 
»Ëa£
() {

121 
C
* 
	g»tV®
 = 
±r_
;

122 
	g±r_
 = 
NULL
;

123  
	g»tV®
;

126 
	g´iv©e
:

127 
C
* 
±r_
;

131 
ä›nd
 
	gscİed_±r
<
	gC
> 
	gmake_scİed_±r
<C>(
C
 *
	gp
);

136 
	g‹m¶©e
 <
şass
 
	gC2
> 
boŞ
 
	gİ”©Ü
==(
scİed_±r
<
C2
> cÚ¡& 
p2
) const;

137 
	g‹m¶©e
 <
şass
 
	gC2
> 
boŞ
 
	gİ”©Ü
!=(
scİed_±r
<
C2
> cÚ¡& 
p2
) const;

140 
scİed_±r
(const scoped_ptr&);

141 
	gİ”©Ü
=(cÚ¡ 
scİed_±r
&);

145 
	g‹m¶©e
 <
şass
 
	gC
>

146 
šlše
 
sw­
(
scİed_±r
<
C
>& 
p1
, scİed_±r<C>& 
p2
) {

147 
	gp1
.
sw­
(
p2
);

150 
	g‹m¶©e
 <
şass
 
	gC
>

151 
šlše
 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
C
* 
p1
, cÚ¡ 
	gscİed_±r
<
	gC
>& 
	gp2
) {

152  
	gp1
 =ğ
p2
.
g‘
();

155 
	g‹m¶©e
 <
şass
 
	gC
>

156 
šlše
 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
C
* 
p1
, cÚ¡ 
	gscİed_±r
<cÚ¡ 
	gC
>& 
	gp2
) {

157  
	gp1
 =ğ
p2
.
g‘
();

160 
	g‹m¶©e
 <
şass
 
	gC
>

161 
šlše
 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
C
* 
p1
, cÚ¡ 
	gscİed_±r
<
	gC
>& 
	gp2
) {

162  
	gp1
 !ğ
p2
.
g‘
();

165 
	g‹m¶©e
 <
şass
 
	gC
>

166 
šlše
 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
C
* 
p1
, cÚ¡ 
	gscİed_±r
<cÚ¡ 
	gC
>& 
	gp2
) {

167  
	gp1
 !ğ
p2
.
g‘
();

170 
	g‹m¶©e
 <
şass
 
	gC
>

171 
	gscİed_±r
<
	gC
> 
make_scİed_±r
(
C
 *
p
) {

181  
	gscİed_±r
<
	gC
>(
	gp
);

193 
	g‹m¶©e
 <
şass
 
	gC
>

194 şas 
	cscİed_¬¿y
 {

195 
	gpublic
:

197 
C
 
	t–em’t_ty³
;

202 
ex¶ic™
 
scİed_¬¿y
(
C
* 
p
 = 
NULL
è: 
¬¿y_
(p) { }

206 ~
scİed_¬¿y
() {

207 ’um { 
ty³_mu¡_be_com¶‘e
 = (
C
) };

208 
	gd–‘e
[] 
	g¬¿y_
;

214 
»£t
(
C
* 
p
 = 
NULL
) {

215 ià(
p
 !ğ
¬¿y_
) {

216 ’um { 
ty³_mu¡_be_com¶‘e
 = (
C
) };

217 
	gd–‘e
[] 
	g¬¿y_
;

218 
	g¬¿y_
 = 
p
;

224 
	gC
& 
	gİ”©Ü
[](
	g¡d
::
±rdiff_t
 
i
) const {

225 
as£¹
(
i
 >= 0);

226 
as£¹
(
¬¿y_
 !ğ
NULL
);

227  
	g¬¿y_
[
i
];

232 
C
* 
g‘
() const {

233  
	g¬¿y_
;

239 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
C
* 
p
ècÚ¡ {  
¬¿y_
 ==…; }

240 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
C
* 
p
ècÚ¡ {  
¬¿y_
 !=…; }

243 
sw­
(
scİed_¬¿y
& 
p2
) {

244 
C
* 
	gtmp
 = 
¬¿y_
;

245 
	g¬¿y_
 = 
p2
.
¬¿y_
;

246 
	gp2
.
	g¬¿y_
 = 
tmp
;

254 
C
* 
»Ëa£
() {

255 
C
* 
	g»tV®
 = 
¬¿y_
;

256 
	g¬¿y_
 = 
NULL
;

257  
	g»tV®
;

260 
	g´iv©e
:

261 
C
* 
¬¿y_
;

264 
	g‹m¶©e
 <
şass
 
	gC2
> 
boŞ
 
	gİ”©Ü
==(
scİed_¬¿y
<
C2
> cÚ¡& 
p2
) const;

265 
	g‹m¶©e
 <
şass
 
	gC2
> 
boŞ
 
	gİ”©Ü
!=(
scİed_¬¿y
<
C2
> cÚ¡& 
p2
) const;

268 
scİed_¬¿y
(const scoped_array&);

269 
	gİ”©Ü
=(cÚ¡ 
scİed_¬¿y
&);

273 
	g‹m¶©e
 <
şass
 
	gC
>

274 
šlše
 
sw­
(
scİed_¬¿y
<
C
>& 
p1
, scİed_¬¿y<C>& 
p2
) {

275 
	gp1
.
sw­
(
p2
);

278 
	g‹m¶©e
 <
şass
 
	gC
>

279 
šlše
 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
C
* 
p1
, cÚ¡ 
	gscİed_¬¿y
<
	gC
>& 
	gp2
) {

280  
	gp1
 =ğ
p2
.
g‘
();

283 
	g‹m¶©e
 <
şass
 
	gC
>

284 
šlše
 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
C
* 
p1
, cÚ¡ 
	gscİed_¬¿y
<cÚ¡ 
	gC
>& 
	gp2
) {

285  
	gp1
 =ğ
p2
.
g‘
();

288 
	g‹m¶©e
 <
şass
 
	gC
>

289 
šlše
 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
C
* 
p1
, cÚ¡ 
	gscİed_¬¿y
<
	gC
>& 
	gp2
) {

290  
	gp1
 !ğ
p2
.
g‘
();

293 
	g‹m¶©e
 <
şass
 
	gC
>

294 
šlše
 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
C
* 
p1
, cÚ¡ 
	gscİed_¬¿y
<cÚ¡ 
	gC
>& 
	gp2
) {

295  
	gp1
 !ğ
p2
.
g‘
();

300 şas 
	cScİedPŒM®locF»e
 {

301 
	gpublic
:

302 
šlše
 
İ”©Ü
()(* 
x
) const {

303 
ä“
(
x
);

	@/usr/include/ceres/numeric_diff_options.h

32 #iâdeà
CERES_PUBLIC_NUMERIC_DIFF_OPTIONS_H_


33 
	#CERES_PUBLIC_NUMERIC_DIFF_OPTIONS_H_


	)

35 
Çme¥aû
 
	gû»s
 {

39 
CERES_EXPORT
 
	gNum”icDiffO±iÚs
 {

40 
Num”icDiffO±iÚs
() {

41 
	g»Ïtive_¡•_size
 = 1e-6;

42 
	gridd”s_»Ïtive_š™Ÿl_¡•_size
 = 1e-2;

43 
	gmax_num_ridd”s_exŒ­Ş©iÚs
 = 10;

44 
	gridd”s_•sÚ
 = 1e-12;

45 
	gridd”s_¡•_shršk_çùÜ
 = 2.0;

51 
	g»Ïtive_¡•_size
;

62 
	gridd”s_»Ïtive_š™Ÿl_¡•_size
;

65 
	gmax_num_ridd”s_exŒ­Ş©iÚs
;

70 
	gridd”s_•sÚ
;

74 
	gridd”s_¡•_shršk_çùÜ
;

	@/usr/include/glog/logging.h

36 #iâdeà
_LOGGING_H_


37 
	#_LOGGING_H_


	)

39 
	~<”ºo.h
>

40 
	~<¡ršg.h
>

41 
	~<time.h
>

42 
	~<iosfwd
>

43 
	~<o¡»am
>

44 
	~<s¡»am
>

45 
	~<¡ršg
>

47 
	~<uni¡d.h
>

49 
	~<veùÜ
>

51 #ià
defšed
(
_MSC_VER
)

52 
	#GLOG_MSVC_PUSH_DISABLE_WARNING
(
n
è
	`__´agma
(
	`w¬nšg
(
push
)) \

53 
	`__´agma
(
	`w¬nšg
(
di§bË
:
n
))

	)

54 
	#GLOG_MSVC_POP_WARNING
(è
	`__´agma
(
	`w¬nšg
(
pİ
))

	)

56 
	#GLOG_MSVC_PUSH_DISABLE_WARNING
(
n
)

	)

57 
	#GLOG_MSVC_POP_WARNING
()

	)

61 #iâdeà
GOOGLE_GLOG_DLL_DECL


62 #ià
defšed
(
_WIN32
è&& !defšed(
__CYGWIN__
)

63 
	#GOOGLE_GLOG_DLL_DECL
 
	`__deş¥ec
(
dÎimpÜt
)

	)

65 
	#GOOGLE_GLOG_DLL_DECL


	)

76 
	~<¡dšt.h
>

79 
	~<sys/ty³s.h
>

82 
	~<š‰y³s.h
>

86 
	~<gæags/gæags.h
>

89 
Çme¥aû
 
	ggoogË
 {

92 
št32_t
 
	tšt32
;

93 
ušt32_t
 
	tušt32
;

94 
št64_t
 
	tšt64
;

95 
ušt64_t
 
	tušt64
;

97 
št32_t
 
	tšt32
;

98 
u_št32_t
 
	tušt32
;

99 
št64_t
 
	tšt64
;

100 
u_št64_t
 
	tušt64
;

102 
__št32
 
	tšt32
;

103 
	t__št32
 
	tušt32
;

104 
__št64
 
	tšt64
;

105 
	t__št64
 
	tušt64
;

107 #”rÜ 
Do
 
nÙ
 
know
 
how
 
to
 
defše
 
a
 32-
b™
 
š‹g”
 
quªt™y
 
Ú
 
your
 
sy¡em


121 #iâdeà
GOOGLE_STRIP_LOG


122 
	#GOOGLE_STRIP_LOG
 0

	)

130 #iâdeà
GOOGLE_PREDICT_BRANCH_NOT_TAKEN


132 
	#GOOGLE_PREDICT_BRANCH_NOT_TAKEN
(
x
è(
	`__butš_ex³ù
(x, 0))

	)

134 
	#GOOGLE_PREDICT_BRANCH_NOT_TAKEN
(
x
è
	)
x

138 #iâdeà
GOOGLE_PREDICT_FALSE


140 
	#GOOGLE_PREDICT_FALSE
(
x
è(
	`__butš_ex³ù
(x, 0))

	)

142 
	#GOOGLE_PREDICT_FALSE
(
x
è
	)
x

146 #iâdeà
GOOGLE_PREDICT_TRUE


148 
	#GOOGLE_PREDICT_TRUE
(
x
è(
	`__butš_ex³ù
(!!(x), 1))

	)

150 
	#GOOGLE_PREDICT_TRUE
(
x
è
	)
x

308 #iâdeà
DECLARE_VARIABLE


309 
	#MUST_UNDEF_GFLAGS_DECLARE_MACROS


	)

310 
	#DECLARE_VARIABLE
(
ty³
, 
shÜ‰y³
, 
Çme
, 
Š
) \

311 
Çme¥aû
 
fL
##
shÜ‰y³
 { \

312 
GOOGLE_GLOG_DLL_DECL
 
ty³
 
FLAGS_
##
Çme
; \

314 
usšg
 
fL
##
shÜ‰y³
::
FLAGS_
##
Çme


	)

317 
	#DECLARE_boŞ
(
Çme
) \

318 
	`DECLARE_VARIABLE
(
boŞ
, 
B
, 
Çme
, boŞ)

	)

321 
	#DECLARE_št32
(
Çme
) \

322 
	`DECLARE_VARIABLE
(
googË
::
št32
, 
I
, 
Çme
, iÁ32)

	)

326 
	#DECLARE_¡ršg
(
Çme
) \

327 
Çme¥aû
 
fLS
 { \

328 
GOOGLE_GLOG_DLL_DECL
 
¡d
::
¡ršg
& 
FLAGS_
##
Çme
; \

330 
usšg
 
fLS
::
FLAGS_
##
Çme


	)

334 
DECLARE_boŞ
(
logto¡d”r
);

337 
DECLARE_boŞ
(
®sŞogto¡d”r
);

340 
DECLARE_boŞ
(
cŞÜlogto¡d”r
);

344 
DECLARE_št32
(
¡d”¹h»shŞd
);

347 
DECLARE_boŞ
(
log_´efix
);

351 
DECLARE_št32
(
logbuæev–
);

354 
DECLARE_št32
(
logbuf£cs
);

358 
DECLARE_št32
(
mšlogËv–
);

362 
DECLARE_¡ršg
(
log_dœ
);

365 
DECLARE_št32
(
logfe_mode
);

369 
DECLARE_¡ršg
(
log_lšk
);

371 
DECLARE_št32
(
v
);

374 
DECLARE_št32
(
max_log_size
);

377 
DECLARE_boŞ
(
¡İ_loggšg_if_fuÎ_disk
);

379 #ifdeà
MUST_UNDEF_GFLAGS_DECLARE_MACROS


380 #undeà
MUST_UNDEF_GFLAGS_DECLARE_MACROS


381 #undeà
DECLARE_VARIABLE


382 #undeà
DECLARE_boŞ


383 #undeà
DECLARE_št32


384 #undeà
DECLARE_¡ršg


394 #ià
GOOGLE_STRIP_LOG
 == 0

395 
	#COMPACT_GOOGLE_LOG_INFO
 
googË
::
	`LogMes§ge
( \

396 
__FILE__
, 
__LINE__
)

	)

397 
	#LOG_TO_STRING_INFO
(
mes§ge
è
googË
::
	`LogMes§ge
( \

398 
__FILE__
, 
__LINE__
, 
googË
::
GLOG_INFO
, 
mes§ge
)

	)

400 
	#COMPACT_GOOGLE_LOG_INFO
 
googË
::
	`NuÎSŒ—m
()

	)

401 
	#LOG_TO_STRING_INFO
(
mes§ge
è
googË
::
	`NuÎSŒ—m
()

	)

404 #ià
GOOGLE_STRIP_LOG
 <= 1

405 
	#COMPACT_GOOGLE_LOG_WARNING
 
googË
::
	`LogMes§ge
( \

406 
__FILE__
, 
__LINE__
, 
googË
::
GLOG_WARNING
)

	)

407 
	#LOG_TO_STRING_WARNING
(
mes§ge
è
googË
::
	`LogMes§ge
( \

408 
__FILE__
, 
__LINE__
, 
googË
::
GLOG_WARNING
, 
mes§ge
)

	)

410 
	#COMPACT_GOOGLE_LOG_WARNING
 
googË
::
	`NuÎSŒ—m
()

	)

411 
	#LOG_TO_STRING_WARNING
(
mes§ge
è
googË
::
	`NuÎSŒ—m
()

	)

414 #ià
GOOGLE_STRIP_LOG
 <= 2

415 
	#COMPACT_GOOGLE_LOG_ERROR
 
googË
::
	`LogMes§ge
( \

416 
__FILE__
, 
__LINE__
, 
googË
::
GLOG_ERROR
)

	)

417 
	#LOG_TO_STRING_ERROR
(
mes§ge
è
googË
::
	`LogMes§ge
( \

418 
__FILE__
, 
__LINE__
, 
googË
::
GLOG_ERROR
, 
mes§ge
)

	)

420 
	#COMPACT_GOOGLE_LOG_ERROR
 
googË
::
	`NuÎSŒ—m
()

	)

421 
	#LOG_TO_STRING_ERROR
(
mes§ge
è
googË
::
	`NuÎSŒ—m
()

	)

424 #ià
GOOGLE_STRIP_LOG
 <= 3

425 
	#COMPACT_GOOGLE_LOG_FATAL
 
googË
::
	`LogMes§geF©®
( \

426 
__FILE__
, 
__LINE__
)

	)

427 
	#LOG_TO_STRING_FATAL
(
mes§ge
è
googË
::
	`LogMes§ge
( \

428 
__FILE__
, 
__LINE__
, 
googË
::
GLOG_FATAL
, 
mes§ge
)

	)

430 
	#COMPACT_GOOGLE_LOG_FATAL
 
googË
::
	`NuÎSŒ—mF©®
()

	)

431 
	#LOG_TO_STRING_FATAL
(
mes§ge
è
googË
::
	`NuÎSŒ—mF©®
()

	)

434 #ià
defšed
(
NDEBUG
è&& !defšed(
DCHECK_ALWAYS_ON
)

435 
	#DCHECK_IS_ON
(è0

	)

437 
	#DCHECK_IS_ON
(è1

	)

442 #ià!
DCHECK_IS_ON
()

443 
	#COMPACT_GOOGLE_LOG_DFATAL
 
COMPACT_GOOGLE_LOG_ERROR


	)

444 #–ià
GOOGLE_STRIP_LOG
 <= 3

445 
	#COMPACT_GOOGLE_LOG_DFATAL
 
googË
::
	`LogMes§ge
( \

446 
__FILE__
, 
__LINE__
, 
googË
::
GLOG_FATAL
)

	)

448 
	#COMPACT_GOOGLE_LOG_DFATAL
 
googË
::
	`NuÎSŒ—mF©®
()

	)

451 
	#GOOGLE_LOG_INFO
(
couÁ”
è
googË
::
	`LogMes§ge
(
__FILE__
, 
__LINE__
, googË::
GLOG_INFO
, couÁ”, &googË::
LogMes§ge
::
S’dToLog
)

	)

452 
	#SYSLOG_INFO
(
couÁ”
) \

453 
googË
::
	`LogMes§ge
(
__FILE__
, 
__LINE__
, googË::
GLOG_INFO
, 
couÁ”
, \

454 &
googË
::
LogMes§ge
::
S’dToSy¦ogAndLog
)

	)

455 
	#GOOGLE_LOG_WARNING
(
couÁ”
) \

456 
googË
::
	`LogMes§ge
(
__FILE__
, 
__LINE__
, googË::
GLOG_WARNING
, 
couÁ”
, \

457 &
googË
::
LogMes§ge
::
S’dToLog
)

	)

458 
	#SYSLOG_WARNING
(
couÁ”
) \

459 
googË
::
	`LogMes§ge
(
__FILE__
, 
__LINE__
, googË::
GLOG_WARNING
, 
couÁ”
, \

460 &
googË
::
LogMes§ge
::
S’dToSy¦ogAndLog
)

	)

461 
	#GOOGLE_LOG_ERROR
(
couÁ”
) \

462 
googË
::
	`LogMes§ge
(
__FILE__
, 
__LINE__
, googË::
GLOG_ERROR
, 
couÁ”
, \

463 &
googË
::
LogMes§ge
::
S’dToLog
)

	)

464 
	#SYSLOG_ERROR
(
couÁ”
) \

465 
googË
::
	`LogMes§ge
(
__FILE__
, 
__LINE__
, googË::
GLOG_ERROR
, 
couÁ”
, \

466 &
googË
::
LogMes§ge
::
S’dToSy¦ogAndLog
)

	)

467 
	#GOOGLE_LOG_FATAL
(
couÁ”
) \

468 
googË
::
	`LogMes§ge
(
__FILE__
, 
__LINE__
, googË::
GLOG_FATAL
, 
couÁ”
, \

469 &
googË
::
LogMes§ge
::
S’dToLog
)

	)

470 
	#SYSLOG_FATAL
(
couÁ”
) \

471 
googË
::
	`LogMes§ge
(
__FILE__
, 
__LINE__
, googË::
GLOG_FATAL
, 
couÁ”
, \

472 &
googË
::
LogMes§ge
::
S’dToSy¦ogAndLog
)

	)

473 
	#GOOGLE_LOG_DFATAL
(
couÁ”
) \

474 
googË
::
	`LogMes§ge
(
__FILE__
, 
__LINE__
, googË::
DFATAL_LEVEL
, 
couÁ”
, \

475 &
googË
::
LogMes§ge
::
S’dToLog
)

	)

476 
	#SYSLOG_DFATAL
(
couÁ”
) \

477 
googË
::
	`LogMes§ge
(
__FILE__
, 
__LINE__
, googË::
DFATAL_LEVEL
, 
couÁ”
, \

478 &
googË
::
LogMes§ge
::
S’dToSy¦ogAndLog
)

	)

480 #ià
defšed
(
WIN32
è|| defšed(
_WIN32
è|| defšed(
__WIN32__
è|| defšed(
__CYGWIN__
è|| defšed(
__CYGWIN32__
)

482 
	#LOG_SYSRESULT
(
»suÉ
) \

483 ià(
	`FAILED
(
	`HRESULT_FROM_WIN32
(
»suÉ
))) { \

484 
LPSTR
 
mes§ge
 = 
NULL
; \

485 
LPSTR
 
msg
 = 
»š‹½»t_ÿ¡
<LPSTR>(&
mes§ge
); \

486 
DWORD
 
mes§ge_Ëngth
 = 
	`FÜm©Mes§geA
(
FORMAT_MESSAGE_ALLOCATE_BUFFER
 | \

487 
FORMAT_MESSAGE_FROM_SYSTEM
, \

488 0, 
»suÉ
, 0, 
msg
, 100, 
NULL
); \

489 ià(
mes§ge_Ëngth
 > 0) { \

490 
googË
::
	`LogMes§ge
(
__FILE__
, 
__LINE__
, googË::
GLOG_ERROR
, 0, \

491 &
googË
::
LogMes§ge
::
S’dToLog
).
	`¡»am
() \

492 << 
»š‹½»t_ÿ¡
<cÚ¡ *>(
mes§ge
); \

493 
	`LoÿlF»e
(
mes§ge
); \

495 }

	)

506 
	#LOG
(
£v”™y
è
COMPACT_GOOGLE_LOG_
 ## sev”™y.
	`¡»am
()

	)

507 
	#SYSLOG
(
£v”™y
è
SYSLOG_
 ## 
	`£v”™y
(0).
	`¡»am
()

	)

509 
Çme¥aû
 
	ggoogË
 {

512 
	~"glog/log_£v”™y.h
"

513 
	~"glog/vlog_is_Ú.h
"

517 
GOOGLE_GLOG_DLL_DECL
 
In™GoogËLoggšg
(cÚ¡ * 
¬gv0
);

520 
GOOGLE_GLOG_DLL_DECL
 
ShutdownGoogËLoggšg
();

523 
GOOGLE_GLOG_DLL_DECL
 
In¡®lFau»FunùiÚ
((*
ç_func
)());

525 
şass
 
	gLogSšk
;

535 
	#LOG_TO_SINK
(
sšk
, 
£v”™y
) \

536 
googË
::
	`LogMes§ge
( \

537 
__FILE__
, 
__LINE__
, \

538 
googË
::
GLOG_
 ## 
£v”™y
, \

539 
¡©ic_ÿ¡
<
googË
::
LogSšk
*>(
sšk
), 
Œue
).
	`¡»am
()

	)

540 
	#LOG_TO_SINK_BUT_NOT_TO_LOGFILE
(
sšk
, 
£v”™y
) \

541 
googË
::
	`LogMes§ge
( \

542 
__FILE__
, 
__LINE__
, \

543 
googË
::
GLOG_
 ## 
£v”™y
, \

544 
¡©ic_ÿ¡
<
googË
::
LogSšk
*>(
sšk
), 
çl£
).
	`¡»am
()

	)

556 
	#LOG_TO_STRING
(
£v”™y
, 
mes§ge
) \

557 
LOG_TO_STRING_
##
	`£v”™y
(
¡©ic_ÿ¡
<
¡ršg
*>(
mes§ge
)).
	`¡»am
()

	)

567 
	#LOG_STRING
(
£v”™y
, 
outvec
) \

568 
LOG_TO_STRING_
##
	`£v”™y
(
¡©ic_ÿ¡
<
¡d
::
veùÜ
<¡d::
¡ršg
>*>(
outvec
)).
	`¡»am
()

	)

570 
	#LOG_IF
(
£v”™y
, 
cÚd™iÚ
) \

571 !(
cÚd™iÚ
è? (è0 : 
googË
::
	`LogMes§geVoidify
(è& 
	`LOG
(
£v”™y
)

	)

572 
	#SYSLOG_IF
(
£v”™y
, 
cÚd™iÚ
) \

573 !(
cÚd™iÚ
è? (è0 : 
googË
::
	`LogMes§geVoidify
(è& 
	`SYSLOG
(
£v”™y
)

	)

575 
	#LOG_ASSERT
(
cÚd™iÚ
) \

576 
	`LOG_IF
(
FATAL
, !(
cÚd™iÚ
)è<< "As£¹ faed: " #cÚd™iÚ

	)

577 
	#SYSLOG_ASSERT
(
cÚd™iÚ
) \

578 
	`SYSLOG_IF
(
FATAL
, !(
cÚd™iÚ
)è<< "As£¹ faed: " #cÚd™iÚ

	)

584 
	#CHECK
(
cÚd™iÚ
) \

585 
	`LOG_IF
(
FATAL
, 
	`GOOGLE_PREDICT_BRANCH_NOT_TAKEN
(!(
cÚd™iÚ
))) \

586 << "Check faed: " #cÚd™iÚ " "

	)

590 
	sCheckOpSŒšg
 {

591 
CheckOpSŒšg
(
¡d
::
¡ršg
* 
¡r
è: 
¡r_
(str) { }

594 
İ”©Ü
 
boŞ
() const {

595  
GOOGLE_PREDICT_BRANCH_NOT_TAKEN
(
¡r_
 !ğ
NULL
);

597 
	g¡d
::
¡ršg
* 
¡r_
;

603 
	g‹m¶©e
 <
şass
 
	gT
>

604 
šlše
 cÚ¡ 
	gT
& 
G‘Reã»nûabËV®ue
(cÚ¡ 
T
& 
t
è{  
	gt
; }

605 
šlše
 
G‘Reã»nûabËV®ue
(
t
è{  
	gt
; }

606 
šlše
 
G‘Reã»nûabËV®ue
(
t
è{  
	gt
; }

607 
šlše
 sigÃd 
G‘Reã»nûabËV®ue
(sigÃd 
t
è{  
	gt
; }

608 
šlše
 
G‘Reã»nûabËV®ue
(
t
è{  
	gt
; }

609 
šlše
 
G‘Reã»nûabËV®ue
(
t
è{  
	gt
; }

610 
šlše
 
G‘Reã»nûabËV®ue
(
t
è{  
	gt
; }

611 
šlše
 
G‘Reã»nûabËV®ue
(
t
è{  
	gt
; }

612 
šlše
 
G‘Reã»nûabËV®ue
(
t
è{  
	gt
; }

613 
šlše
 
G‘Reã»nûabËV®ue
(
t
è{  
	gt
; }

614 
šlše
 
G‘Reã»nûabËV®ue
(
t
è{  
	gt
; }

615 
šlše
 
G‘Reã»nûabËV®ue
(
t
) {

616  
	gt
;

620 
	sDummyCÏssToDefšeO³¿tÜ
 {};

627 
šlše
 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(

628 
¡d
::
o¡»am
& 
out
, cÚ¡ 
	ggoogË
::
DummyCÏssToDefšeO³¿tÜ
&) {

629  
out
;

632 
Çme¥aû
 
	ggoogË
 {

636 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

637 
šlše
 
MakeCheckOpV®ueSŒšg
(
¡d
::
o¡»am
* 
os
, cÚ¡ 
T
& 
v
) {

638 (*
	gos
è<< 
	gv
;

643 
	g‹m¶©e
 <> 
GOOGLE_GLOG_DLL_DECL


644 
MakeCheckOpV®ueSŒšg
(
¡d
::
o¡»am
* 
os
, cÚ¡ & 
v
);

645 
	g‹m¶©e
 <> 
GOOGLE_GLOG_DLL_DECL


646 
MakeCheckOpV®ueSŒšg
(
¡d
::
o¡»am
* 
os
, cÚ¡ sigÃd & 
v
);

647 
	g‹m¶©e
 <> 
GOOGLE_GLOG_DLL_DECL


648 
MakeCheckOpV®ueSŒšg
(
¡d
::
o¡»am
* 
os
, cÚ¡ & 
v
);

651 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

652 
	g¡d
::
¡ršg
* 
MakeCheckOpSŒšg
(cÚ¡ 
T1
& 
v1
, cÚ¡ 
T2
& 
v2
, cÚ¡ * 
ex´‹xt
)

653 
__©Œibu‹__
 ((
nošlše
));

655 
Çme¥aû
 
	gba£
 {

656 
Çme¥aû
 
	gš‹º®
 {

661 
LogSev”™y
 
NÜm®izeSev”™y
(LogSev”™y 
s
);

671 şas 
	cGOOGLE_GLOG_DLL_DECL
 
	gCheckOpMes§geBud”
 {

672 
	gpublic
:

674 
ex¶ic™
 
CheckOpMes§geBud”
(cÚ¡ *
ex´‹xt
);

676 ~
CheckOpMes§geBud”
();

678 
	g¡d
::
o¡»am
* 
FÜV¬1
(è{  
¡»am_
; }

680 
	g¡d
::
o¡»am
* 
FÜV¬2
();

682 
	g¡d
::
¡ršg
* 
NewSŒšg
();

684 
	g´iv©e
:

685 
¡d
::
o¡ršg¡»am
 *
¡»am_
;

690 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

691 
	g¡d
::
¡ršg
* 
	$MakeCheckOpSŒšg
(cÚ¡ 
T1
& 
v1
, cÚ¡ 
T2
& 
v2
, cÚ¡ * 
ex´‹xt
) {

692 
ba£
::
CheckOpMes§geBud”
 
	`comb
(
ex´‹xt
);

693 
	`MakeCheckOpV®ueSŒšg
(
comb
.
	`FÜV¬1
(), 
v1
);

694 
	`MakeCheckOpV®ueSŒšg
(
comb
.
	`FÜV¬2
(), 
v2
);

695  
comb
.
	`NewSŒšg
();

696 
	}
}

702 
	#DEFINE_CHECK_OP_IMPL
(
Çme
, 
İ
) \

703 
‹m¶©e
 <
ty³Çme
 
T1
,y³Çm
T2
> \

704 
šlše
 
¡d
::
¡ršg
* 
Çme
##
	`Im¶
(cÚ¡ 
T1
& 
v1
, cÚ¡ 
T2
& 
v2
, \

705 cÚ¡ * 
ex´‹xt
) { \

706 ià(
	`GOOGLE_PREDICT_TRUE
(
v1
 
İ
 
v2
)è 
NULL
; \

707  
	`MakeCheckOpSŒšg
(
v1
, 
v2
, 
ex´‹xt
); \

709 
šlše
 
¡d
::
¡ršg
* 
Çme
##
	$Im¶
(
v1
, 
v2
, cÚ¡ * 
ex´‹xt
) { \

710  
Çme
##
Im¶
<, >(
v1
, 
v2
, 
ex´‹xt
); \

711 
	}

	)
}

717 
	$DEFINE_CHECK_OP_IMPL
(
Check_EQ
, ==)

718 
	`DEFINE_CHECK_OP_IMPL
(
Check_NE
, !=)

719 
	`DEFINE_CHECK_OP_IMPL
(
Check_LE
, <=)

720 
	`DEFINE_CHECK_OP_IMPL
(
Check_LT
, < )

721 
	`DEFINE_CHECK_OP_IMPL
(
Check_GE
, >=)

722 
	`DEFINE_CHECK_OP_IMPL
(
Check_GT
, > )

723 #undeà
DEFINE_CHECK_OP_IMPL


728 #ià
	$defšed
(
STATIC_ANALYSIS
)

730 
	#CHECK_OP_LOG
(
Çme
, 
İ
, 
v®1
, 
v®2
, 
log
è
	`CHECK
((v®1è
	$İ
 (
v®2
))

	)

731 #–ià
	$DCHECK_IS_ON
()

741 
¡d
::
	t¡ršg
 
	t_Check_¡ršg
;

742 
	#CHECK_OP_LOG
(
Çme
, 
İ
, 
v®1
, 
v®2
, 
log
) \

743 
googË
::
_Check_¡ršg
* 
_»suÉ
 = \

744 
googË
::
Check
##
Çme
##
	`Im¶
( \

745 
googË
::
	`G‘Reã»nûabËV®ue
(
v®1
), \

746 
googË
::
	`G‘Reã»nûabËV®ue
(
v®2
), \

748 
	`log
(
__FILE__
, 
__LINE__
, \

749 
googË
::
	`CheckOpSŒšg
(
_»suÉ
)).
	$¡»am
()

	)

753 
	#CHECK_OP_LOG
(
Çme
, 
İ
, 
v®1
, 
v®2
, 
log
) \

754 
googË
::
CheckOpSŒšg
 
_»suÉ
 = \

755 
googË
::
Check
##
Çme
##
	`Im¶
( \

756 
googË
::
	`G‘Reã»nûabËV®ue
(
v®1
), \

757 
googË
::
	`G‘Reã»nûabËV®ue
(
v®2
), \

759 
	`log
(
__FILE__
, 
__LINE__
, 
_»suÉ
).
	$¡»am
()

	)

762 #ià
GOOGLE_STRIP_LOG
 <= 3

763 
	#CHECK_OP
(
Çme
, 
İ
, 
v®1
, 
v®2
) \

764 
	$CHECK_OP_LOG
(
Çme
, 
İ
, 
v®1
, 
v®2
, 
googË
::
LogMes§geF©®
)

	)

766 
	#CHECK_OP
(
Çme
, 
İ
, 
v®1
, 
v®2
) \

767 
	$CHECK_OP_LOG
(
Çme
, 
İ
, 
v®1
, 
v®2
, 
googË
::
NuÎSŒ—mF©®
)

	)

788 
	#CHECK_EQ
(
v®1
, 
v®2
è
	$CHECK_OP
(
_EQ
, ==, 
v®1
, 
v®2
)

	)

789 
	#CHECK_NE
(
v®1
, 
v®2
è
	`CHECK_OP
(
_NE
, !=, v®1, v®2)

	)

790 
	#CHECK_LE
(
v®1
, 
v®2
è
	`CHECK_OP
(
_LE
, <=, v®1, v®2)

	)

791 
	#CHECK_LT
(
v®1
, 
v®2
è
	`CHECK_OP
(
_LT
, < , v®1, v®2)

	)

792 
	#CHECK_GE
(
v®1
, 
v®2
è
	`CHECK_OP
(
_GE
, >=, v®1, v®2)

	)

793 
	#CHECK_GT
(
v®1
, 
v®2
è
	`CHECK_OP
(
_GT
, > , v®1, v®2)

	)

798 
	#CHECK_NOTNULL
(
v®
) \

799 
googË
::
	`CheckNÙNuÎ
(
__FILE__
, 
__LINE__
, "'" #v® "' Mu¡ bnÚ NULL", (
v®
))

	)

803 
	#DECLARE_CHECK_STROP_IMPL
(
func
, 
ex³ùed
) \

804 
GOOGLE_GLOG_DLL_DECL
 
¡d
::
¡ršg
* 
Check
##
func
##
ex³ùed
##
	`Im¶
( \

805 cÚ¡ * 
s1
, cÚ¡ * 
s2
, cÚ¡ * 
Çmes
);

	)

806 
	$DECLARE_CHECK_STROP_IMPL
(
¡rcmp
, 
Œue
)

807 
	$DECLARE_CHECK_STROP_IMPL
(
¡rcmp
, 
çl£
)

808 
	$DECLARE_CHECK_STROP_IMPL
(
¡rÿ£cmp
, 
Œue
)

809 
	$DECLARE_CHECK_STROP_IMPL
(
¡rÿ£cmp
, 
çl£
)

810 #undeà
DECLARE_CHECK_STROP_IMPL


814 
	#CHECK_STROP
(
func
, 
İ
, 
ex³ùed
, 
s1
, 
s2
) \

815 
googË
::
CheckOpSŒšg
 
_»suÉ
 = \

816 
googË
::
Check
##
func
##
ex³ùed
##
	`Im¶
((
s1
), (
s2
), \

818 
	`LOG
(
FATAL
è<< *
_»suÉ
.
¡r_


	)

828 
	#CHECK_STREQ
(
s1
, 
s2
è
	$CHECK_STROP
(
¡rcmp
, ==, 
Œue
, 
s1
, 
s2
)

	)

829 
	#CHECK_STRNE
(
s1
, 
s2
è
	`CHECK_STROP
(
¡rcmp
, !=, 
çl£
, s1, s2)

	)

830 
	#CHECK_STRCASEEQ
(
s1
, 
s2
è
	$CHECK_STROP
(
¡rÿ£cmp
, ==, 
Œue
, 
s1
, 
s2
)

	)

831 
	#CHECK_STRCASENE
(
s1
, 
s2
è
	`CHECK_STROP
(
¡rÿ£cmp
, !=, 
çl£
, s1, s2)

	)

833 
	#CHECK_INDEX
(
I
,
A
è
	`CHECK
(I < ((A)/(A[0])))

	)

834 
	#CHECK_BOUND
(
B
,
A
è
	`CHECK
(B <ğ((A)/(A[0])))

	)

836 
	#CHECK_DOUBLE_EQ
(
v®1
, 
v®2
) \

838 
	`CHECK_LE
((
v®1
), (
v®2
)+0.000000000000001L); \

839 
	`CHECK_GE
((
v®1
), (
v®2
)-0.000000000000001L); \

840 
	}
} 0)

	)

842 
	#CHECK_NEAR
(
v®1
, 
v®2
, 
m¬gš
) \

844 
	`CHECK_LE
((
v®1
), (
v®2
)+(
m¬gš
)); \

845 
	`CHECK_GE
((
v®1
), (
v®2
)-(
m¬gš
)); \

846 
	}
} 0)

	)

854 
	#PLOG
(
£v”™y
è
	`GOOGLE_PLOG
(£v”™y, 0).
	$¡»am
()

	)

856 
	#GOOGLE_PLOG
(
£v”™y
, 
couÁ”
) \

857 
googË
::
	`E¼noLogMes§ge
( \

858 
__FILE__
, 
__LINE__
, 
googË
::
GLOG_
 ## 
£v”™y
, 
couÁ”
, \

859 &
googË
::
LogMes§ge
::
S’dToLog
)

	)

861 
	#PLOG_IF
(
£v”™y
, 
cÚd™iÚ
) \

862 !(
cÚd™iÚ
è? (è0 : 
googË
::
	`LogMes§geVoidify
(è& 
	$PLOG
(
£v”™y
)

	)

867 
	#PCHECK
(
cÚd™iÚ
) \

868 
	`PLOG_IF
(
FATAL
, 
	`GOOGLE_PREDICT_BRANCH_NOT_TAKEN
(!(
cÚd™iÚ
))) \

869 << "Check faed: " #cÚd™iÚ " "

	)

879 
	#CHECK_ERR
(
švoÿtiÚ
) \

880 
	`PLOG_IF
(
FATAL
, 
	`GOOGLE_PREDICT_BRANCH_NOT_TAKEN
((
švoÿtiÚ
) == -1)) \

881 << #švoÿtiÚ

	)

885 
	#LOG_EVERY_N_VARNAME
(
ba£
, 
lše
è
	$LOG_EVERY_N_VARNAME_CONCAT
(
ba£
, 
lše
)

	)

886 
	#LOG_EVERY_N_VARNAME_CONCAT
(
ba£
, 
lše
èba£ ## 
	)
line

888 
	#LOG_OCCURRENCES
 
	$LOG_EVERY_N_VARNAME
(
occu¼’ûs_
, 
__LINE__
)

	)

889 
	#LOG_OCCURRENCES_MOD_N
 
	$LOG_EVERY_N_VARNAME
(
occu¼’ûs_mod_n_
, 
__LINE__
)

	)

891 
	#SOME_KIND_OF_LOG_EVERY_N
(
£v”™y
, 
n
, 
wh©_to_do
) \

892 
LOG_OCCURRENCES
 = 0, 
LOG_OCCURRENCES_MOD_N
 = 0; \

893 ++
LOG_OCCURRENCES
; \

894 ià(++
LOG_OCCURRENCES_MOD_N
 > 
n
) LOG_OCCURRENCES_MOD_N -=‚; \

895 ià(
LOG_OCCURRENCES_MOD_N
 == 1) \

896 
googË
::
	`LogMes§ge
( \

897 
__FILE__
, 
__LINE__
, 
googË
::
GLOG_
 ## 
£v”™y
, 
LOG_OCCURRENCES
, \

898 &
wh©_to_do
).
	$¡»am
()

	)

900 
	#SOME_KIND_OF_LOG_IF_EVERY_N
(
£v”™y
, 
cÚd™iÚ
, 
n
, 
wh©_to_do
) \

901 
LOG_OCCURRENCES
 = 0, 
LOG_OCCURRENCES_MOD_N
 = 0; \

902 ++
LOG_OCCURRENCES
; \

903 ià(
cÚd™iÚ
 && \

904 ((
LOG_OCCURRENCES_MOD_N
=(LOG_OCCURRENCES_MOD_N + 1è% 
n
) == (1 %‚))) \

905 
googË
::
	`LogMes§ge
( \

906 
__FILE__
, 
__LINE__
, 
googË
::
GLOG_
 ## 
£v”™y
, 
LOG_OCCURRENCES
, \

907 &
wh©_to_do
).
	$¡»am
()

	)

909 
	#SOME_KIND_OF_PLOG_EVERY_N
(
£v”™y
, 
n
, 
wh©_to_do
) \

910 
LOG_OCCURRENCES
 = 0, 
LOG_OCCURRENCES_MOD_N
 = 0; \

911 ++
LOG_OCCURRENCES
; \

912 ià(++
LOG_OCCURRENCES_MOD_N
 > 
n
) LOG_OCCURRENCES_MOD_N -=‚; \

913 ià(
LOG_OCCURRENCES_MOD_N
 == 1) \

914 
googË
::
	`E¼noLogMes§ge
( \

915 
__FILE__
, 
__LINE__
, 
googË
::
GLOG_
 ## 
£v”™y
, 
LOG_OCCURRENCES
, \

916 &
wh©_to_do
).
	$¡»am
()

	)

918 
	#SOME_KIND_OF_LOG_FIRST_N
(
£v”™y
, 
n
, 
wh©_to_do
) \

919 
LOG_OCCURRENCES
 = 0; \

920 ià(
LOG_OCCURRENCES
 <ğ
n
) \

921 ++
LOG_OCCURRENCES
; \

922 ià(
LOG_OCCURRENCES
 <ğ
n
) \

923 
googË
::
	`LogMes§ge
( \

924 
__FILE__
, 
__LINE__
, 
googË
::
GLOG_
 ## 
£v”™y
, 
LOG_OCCURRENCES
, \

925 &
wh©_to_do
).
	$¡»am
()

	)

927 
Çme¥aû
 
glog_š‹º®_Çme¥aû_
 {

928 
‹m¶©e
 <
boŞ
>

929 
	sCompeAs£¹
 {

931 
C¿shR—sÚ
;

934 
boŞ
 
	`IsFau»SigÇlHªdËrIn¡®Ëd
();

935 
	}
}

937 
	#GOOGLE_GLOG_COMPILE_ASSERT
(
ex´
, 
msg
) \

938 
googË
::
	tglog_š‹º®_Çme¥aû_
::
	tCompeAs£¹
<(
	tboŞ
(
	tex´
))> 
	tmsg
[
	`boŞ
(
ex´
è? 1 : -1]

	)

940 
	tLOG_EVERY_N
(
	t£v”™y
, 
	tn
) \

941 
	tGOOGLE_GLOG_COMPILE_ASSERT
(
	tgoogË
::
	tGLOG_
 ## 
	t£v”™y
 < \

942 
	tgoogË
::
	tNUM_SEVERITIES
, \

943 
	tINVALID_REQUESTED_LOG_SEVERITY
); \

944 
	`SOME_KIND_OF_LOG_EVERY_N
(
£v”™y
, (
n
), 
googË
::
LogMes§ge
::
S’dToLog
)

	)

946 
	#SYSLOG_EVERY_N
(
£v”™y
, 
n
) \

947 
	`SOME_KIND_OF_LOG_EVERY_N
(
£v”™y
, (
n
), 
googË
::
LogMes§ge
::
S’dToSy¦ogAndLog
)

	)

949 
	#PLOG_EVERY_N
(
£v”™y
, 
n
) \

950 
	`SOME_KIND_OF_PLOG_EVERY_N
(
£v”™y
, (
n
), 
googË
::
LogMes§ge
::
S’dToLog
)

	)

952 
	#LOG_FIRST_N
(
£v”™y
, 
n
) \

953 
	`SOME_KIND_OF_LOG_FIRST_N
(
£v”™y
, (
n
), 
googË
::
LogMes§ge
::
S’dToLog
)

	)

955 
	#LOG_IF_EVERY_N
(
£v”™y
, 
cÚd™iÚ
, 
n
) \

956 
	`SOME_KIND_OF_LOG_IF_EVERY_N
(
£v”™y
, (
cÚd™iÚ
), (
n
), 
googË
::
LogMes§ge
::
S’dToLog
)

	)

959 
	ePRIVATE_CouÁ”
 {
	gCOUNTER
};

961 #ifdeà
GLOG_NO_ABBREVIATED_SEVERITIES


966 
	#COMPACT_GOOGLE_LOG_0
 
COMPACT_GOOGLE_LOG_ERROR


	)

967 
	#SYSLOG_0
 
SYSLOG_ERROR


	)

968 
	#LOG_TO_STRING_0
 
LOG_TO_STRING_ERROR


	)

970 cÚ¡ 
LogSev”™y
 
	gGLOG_0
 = 
GLOG_ERROR
;

976 
	#GLOG_ERROR_MSG
 
ERROR_maüo_is_defšed_Defše_GLOG_NO_ABBREVIATED_SEVERITIES_befÜe_šşudšg_loggšg_h_S“_the_docum’t_fÜ_d‘a


	)

977 
	#COMPACT_GOOGLE_LOG_0
 
GLOG_ERROR_MSG


	)

978 
	#SYSLOG_0
 
GLOG_ERROR_MSG


	)

979 
	#LOG_TO_STRING_0
 
GLOG_ERROR_MSG


	)

980 
	#GLOG_0
 
GLOG_ERROR_MSG


	)

985 #ià
	$DCHECK_IS_ON
()

987 
	#DLOG
(
£v”™y
è
	$LOG
(
£v”™y
)

	)

988 
	#DVLOG
(
v”bo£Ëv–
è
	$VLOG
(
v”bo£Ëv–
)

	)

989 
	#DLOG_IF
(
£v”™y
, 
cÚd™iÚ
è
	$LOG_IF
(
£v”™y
, 
cÚd™iÚ
)

	)

990 
	#DLOG_EVERY_N
(
£v”™y
, 
n
è
	$LOG_EVERY_N
(
£v”™y
, 
n
)

	)

991 
	#DLOG_IF_EVERY_N
(
£v”™y
, 
cÚd™iÚ
, 
n
) \

992 
	$LOG_IF_EVERY_N
(
£v”™y
, 
cÚd™iÚ
, 
n
)

	)

993 
	#DLOG_ASSERT
(
cÚd™iÚ
è
	$LOG_ASSERT
(
cÚd™iÚ
)

	)

996 
	#DCHECK
(
cÚd™iÚ
è
	$CHECK
(
cÚd™iÚ
)

	)

997 
	#DCHECK_EQ
(
v®1
, 
v®2
è
	$CHECK_EQ
(
v®1
, 
v®2
)

	)

998 
	#DCHECK_NE
(
v®1
, 
v®2
è
	$CHECK_NE
(
v®1
, 
v®2
)

	)

999 
	#DCHECK_LE
(
v®1
, 
v®2
è
	$CHECK_LE
(
v®1
, 
v®2
)

	)

1000 
	#DCHECK_LT
(
v®1
, 
v®2
è
	$CHECK_LT
(
v®1
, 
v®2
)

	)

1001 
	#DCHECK_GE
(
v®1
, 
v®2
è
	$CHECK_GE
(
v®1
, 
v®2
)

	)

1002 
	#DCHECK_GT
(
v®1
, 
v®2
è
	$CHECK_GT
(
v®1
, 
v®2
)

	)

1003 
	#DCHECK_NOTNULL
(
v®
è
	$CHECK_NOTNULL
(
v®
)

	)

1004 
	#DCHECK_STREQ
(
¡r1
, 
¡r2
è
	$CHECK_STREQ
(
¡r1
, 
¡r2
)

	)

1005 
	#DCHECK_STRCASEEQ
(
¡r1
, 
¡r2
è
	$CHECK_STRCASEEQ
(
¡r1
, 
¡r2
)

	)

1006 
	#DCHECK_STRNE
(
¡r1
, 
¡r2
è
	$CHECK_STRNE
(
¡r1
, 
¡r2
)

	)

1007 
	#DCHECK_STRCASENE
(
¡r1
, 
¡r2
è
	$CHECK_STRCASENE
(
¡r1
, 
¡r2
)

	)

1011 
	#DLOG
(
£v”™y
) \

1012 
Œue
 ? (è0 : 
googË
::
	`LogMes§geVoidify
(è& 
	$LOG
(
£v”™y
)

	)

1014 
	#DVLOG
(
v”bo£Ëv–
) \

1015 (
Œue
 || !
	`VLOG_IS_ON
(
v”bo£Ëv–
)) ?\

1016 (è0 : 
googË
::
	`LogMes§geVoidify
(è& 
	$LOG
(
INFO
)

	)

1018 
	#DLOG_IF
(
£v”™y
, 
cÚd™iÚ
) \

1019 (
Œue
 || !(
cÚd™iÚ
)è? (è0 : 
googË
::
	`LogMes§geVoidify
(è& 
	$LOG
(
£v”™y
)

	)

1021 
	#DLOG_EVERY_N
(
£v”™y
, 
n
) \

1022 
Œue
 ? (è0 : 
googË
::
	`LogMes§geVoidify
(è& 
	$LOG
(
£v”™y
)

	)

1024 
	#DLOG_IF_EVERY_N
(
£v”™y
, 
cÚd™iÚ
, 
n
) \

1025 (
Œue
 || !(
cÚd™iÚ
))? (è0 : 
googË
::
	`LogMes§geVoidify
(è& 
	$LOG
(
£v”™y
)

	)

1027 
	#DLOG_ASSERT
(
cÚd™iÚ
) \

1028 
Œue
 ? (è0 : 
	$LOG_ASSERT
(
cÚd™iÚ
)

	)

1031 
	#DCHECK
(
cÚd™iÚ
) \

1032 
	`GLOG_MSVC_PUSH_DISABLE_WARNING
(4127) \

1033 
çl£
) \

1034 
	$GLOG_MSVC_POP_WARNING
(è
	$CHECK
(
cÚd™iÚ
)

	)

1036 
	#DCHECK_EQ
(
v®1
, 
v®2
) \

1037 
	`GLOG_MSVC_PUSH_DISABLE_WARNING
(4127) \

1038 
çl£
) \

1039 
	$GLOG_MSVC_POP_WARNING
(è
	$CHECK_EQ
(
v®1
, 
v®2
)

	)

1041 
	#DCHECK_NE
(
v®1
, 
v®2
) \

1042 
	`GLOG_MSVC_PUSH_DISABLE_WARNING
(4127) \

1043 
çl£
) \

1044 
	$GLOG_MSVC_POP_WARNING
(è
	$CHECK_NE
(
v®1
, 
v®2
)

	)

1046 
	#DCHECK_LE
(
v®1
, 
v®2
) \

1047 
	`GLOG_MSVC_PUSH_DISABLE_WARNING
(4127) \

1048 
çl£
) \

1049 
	$GLOG_MSVC_POP_WARNING
(è
	$CHECK_LE
(
v®1
, 
v®2
)

	)

1051 
	#DCHECK_LT
(
v®1
, 
v®2
) \

1052 
	`GLOG_MSVC_PUSH_DISABLE_WARNING
(4127) \

1053 
çl£
) \

1054 
	$GLOG_MSVC_POP_WARNING
(è
	$CHECK_LT
(
v®1
, 
v®2
)

	)

1056 
	#DCHECK_GE
(
v®1
, 
v®2
) \

1057 
	`GLOG_MSVC_PUSH_DISABLE_WARNING
(4127) \

1058 
çl£
) \

1059 
	$GLOG_MSVC_POP_WARNING
(è
	$CHECK_GE
(
v®1
, 
v®2
)

	)

1061 
	#DCHECK_GT
(
v®1
, 
v®2
) \

1062 
	`GLOG_MSVC_PUSH_DISABLE_WARNING
(4127) \

1063 
çl£
) \

1064 
	$GLOG_MSVC_POP_WARNING
(è
	$CHECK_GT
(
v®1
, 
v®2
)

	)

1068 
	#DCHECK_NOTNULL
(
v®
è(v®)

	)

1070 
	#DCHECK_STREQ
(
¡r1
, 
¡r2
) \

1071 
	`GLOG_MSVC_PUSH_DISABLE_WARNING
(4127) \

1072 
çl£
) \

1073 
	$GLOG_MSVC_POP_WARNING
(è
	$CHECK_STREQ
(
¡r1
, 
¡r2
)

	)

1075 
	#DCHECK_STRCASEEQ
(
¡r1
, 
¡r2
) \

1076 
	`GLOG_MSVC_PUSH_DISABLE_WARNING
(4127) \

1077 
çl£
) \

1078 
	$GLOG_MSVC_POP_WARNING
(è
	$CHECK_STRCASEEQ
(
¡r1
, 
¡r2
)

	)

1080 
	#DCHECK_STRNE
(
¡r1
, 
¡r2
) \

1081 
	`GLOG_MSVC_PUSH_DISABLE_WARNING
(4127) \

1082 
çl£
) \

1083 
	$GLOG_MSVC_POP_WARNING
(è
	$CHECK_STRNE
(
¡r1
, 
¡r2
)

	)

1085 
	#DCHECK_STRCASENE
(
¡r1
, 
¡r2
) \

1086 
	`GLOG_MSVC_PUSH_DISABLE_WARNING
(4127) \

1087 
çl£
) \

1088 
	$GLOG_MSVC_POP_WARNING
(è
	$CHECK_STRCASENE
(
¡r1
, 
¡r2
)

	)

1094 
	#VLOG
(
v”bo£Ëv–
è
	`LOG_IF
(
INFO
, 
	$VLOG_IS_ON
(
v”bo£Ëv–
))

	)

1096 
	#VLOG_IF
(
v”bo£Ëv–
, 
cÚd™iÚ
) \

1097 
	`LOG_IF
(
INFO
, (
cÚd™iÚ
è&& 
	$VLOG_IS_ON
(
v”bo£Ëv–
))

	)

1099 
	#VLOG_EVERY_N
(
v”bo£Ëv–
, 
n
) \

1100 
	`LOG_IF_EVERY_N
(
INFO
, 
	`VLOG_IS_ON
(
v”bo£Ëv–
), 
n
)

	)

1102 
	#VLOG_IF_EVERY_N
(
v”bo£Ëv–
, 
cÚd™iÚ
, 
n
) \

1103 
	`LOG_IF_EVERY_N
(
INFO
, (
cÚd™iÚ
è&& 
	`VLOG_IS_ON
(
v”bo£Ëv–
), 
n
)

	)

1105 
Çme¥aû
 
ba£_loggšg
 {

1110 şas 
	cGOOGLE_GLOG_DLL_DECL
 
LogSŒ—mBuf
 : 
public
 
¡d
::
¡»ambuf
 {

1111 
public
:

1113 
	`LogSŒ—mBuf
(*
buf
, 
Ën
) {

1114 
	`£
(
buf
, buà+ 
Ën
 - 2);

1117 
vœtu®
 
št_ty³
 
	`ov”æow
(št_ty³ 
ch
) {

1118  
ch
;

1122 
size_t
 
	`pcouÁ
(ècÚ¡ {  
	`µŒ
(è- 
	`pba£
(); }

1123 * 
	`pba£
(ècÚ¡ {  
¡d
::
¡»ambuf
::pbase(); }

1126 
	}
}

1137 şas 
	cGOOGLE_GLOG_DLL_DECL
 
	gLogMes§ge
 {

1138 
	gpublic
:

1145 
kNoLogP»fix
 = -1

1154 #ifdeà
_MSC_VER


1155 #´agm¨
w¬nšg
(
di§bË
: 4275)

1157 şas 
	cGOOGLE_GLOG_DLL_DECL
 
	gLogSŒ—m
 : 
public
 
¡d
::
o¡»am
 {

1158 #ifdeà
_MSC_VER


1159 #´agm¨
w¬nšg
(: 4275)

1161 
public
:

1162 
LogSŒ—m
(*
buf
, 
Ën
, 
ùr
)

1163 : 
¡d
::
o¡»am
(
NULL
),

1164 
¡»ambuf_
(
buf
, 
Ën
),

1165 
ùr_
(
ùr
),

1166 
£lf_
(
this
) {

1167 
rdbuf
(&
¡»ambuf_
);

1170 
ùr
(ècÚ¡ {  
	gùr_
; }

1171 
£t_ùr
(
ùr
è{ 
	gùr_
 = ctr; }

1172 
LogSŒ—m
* 
£lf
(ècÚ¡ {  
	g£lf_
; }

1175 
size_t
 
pcouÁ
(ècÚ¡ {  
	g¡»ambuf_
.pcount(); }

1176 * 
pba£
(ècÚ¡ {  
	g¡»ambuf_
.pbase(); }

1177 * 
¡r
(ècÚ¡ {  
pba£
(); }

1179 
	g´iv©e
:

1180 
LogSŒ—m
(const LogStream&);

1181 
	gLogSŒ—m
& 
	gİ”©Ü
=(cÚ¡ 
LogSŒ—m
&);

1182 
	gba£_loggšg
::
LogSŒ—mBuf
 
¡»ambuf_
;

1183 
	gùr_
;

1184 
LogSŒ—m
 *
	g£lf_
;

1187 
	gpublic
:

1189 (
LogMes§ge
::*
	tS’dM‘hod
)();

1191 
LogMes§ge
(cÚ¡ * 
fe
, 
lše
, 
LogSev”™y
 
£v”™y
, 
ùr
,

1192 
S’dM‘hod
 
£nd_m‘hod
);

1202 
LogMes§ge
(cÚ¡ * 
fe
, 
lše
);

1209 
LogMes§ge
(cÚ¡ * 
fe
, 
lše
, 
LogSev”™y
 
£v”™y
);

1214 
LogMes§ge
(cÚ¡ * 
fe
, 
lše
, 
LogSev”™y
 
£v”™y
, 
LogSšk
* 
sšk
,

1215 
boŞ
 
®so_£nd_to_log
);

1220 
LogMes§ge
(cÚ¡ * 
fe
, 
lše
, 
LogSev”™y
 
£v”™y
,

1221 
¡d
::
veùÜ
<¡d::
¡ršg
>* 
outvec
);

1226 
LogMes§ge
(cÚ¡ * 
fe
, 
lše
, 
LogSev”™y
 
£v”™y
,

1227 
¡d
::
¡ršg
* 
mes§ge
);

1230 
LogMes§ge
(cÚ¡ * 
fe
, 
lše
, cÚ¡ 
CheckOpSŒšg
& 
»suÉ
);

1232 ~
LogMes§ge
();

1237 
Flush
();

1241 cÚ¡ 
size_t
 
	gkMaxLogMes§geL’
;

1245 
S’dToLog
();

1246 
S’dToSy¦ogAndLog
();

1249 
__©Œibu‹__
 ((
nÜ‘uº
)è
Fa
();

1251 
	g¡d
::
o¡»am
& 
¡»am
();

1253 
´e£rved_”ºo
() const;

1256 
št64
 
num_mes§ges
(
£v”™y
);

1258 
	gLogMes§geD©a
;

1260 
	g´iv©e
:

1262 
S’dToSškAndLog
();

1263 
S’dToSšk
();

1266 
Wr™eToSŒšgAndLog
();

1268 
SaveOrS’dToLog
();

1270 
In™
(cÚ¡ * 
fe
, 
lše
, 
LogSev”™y
 
£v”™y
,

1271 (
LogMes§ge
::*
£nd_m‘hod
)());

1274 
RecÜdC¿shR—sÚ
(
glog_š‹º®_Çme¥aû_
::
C¿shR—sÚ
* 
»asÚ
);

1277 
št64
 
	gnum_mes§ges_
[
NUM_SEVERITIES
];

1281 
LogMes§geD©a
* 
	g®loÿ‹d_
;

1282 
LogMes§geD©a
* 
	gd©a_
;

1284 
ä›nd
 
şass
 
	gLogDe¡š©iÚ
;

1286 
LogMes§ge
(const LogMessage&);

1287 
	gİ”©Ü
=(cÚ¡ 
LogMes§ge
&);

1293 şas 
	cGOOGLE_GLOG_DLL_DECL
 
	gLogMes§geF©®
 : 
public
 
LogMes§ge
 {

1294 
public
:

1295 
LogMes§geF©®
(cÚ¡ * 
fe
, 
lše
);

1296 
LogMes§geF©®
(cÚ¡ * 
fe
, 
lše
, cÚ¡ 
CheckOpSŒšg
& 
»suÉ
);

1297 
__©Œibu‹__
 ((
nÜ‘uº
)è~
LogMes§geF©®
();

1302 
šlše
 
	$LogAtLev–
(cÚ¡ 
£v”™y
, 
¡d
::
¡ršg
 cÚ¡ &
msg
) {

1303 
	`LogMes§ge
(
__FILE__
, 
__LINE__
, 
£v”™y
).
	`¡»am
(è<< 
msg
;

1304 
	}
}

1310 
	#LOG_AT_LEVEL
(
£v”™y
è
googË
::
	`LogMes§ge
(
__FILE__
, 
__LINE__
, sev”™y).
	$¡»am
()

	)

1321 #ià(
	`defšed
(
__GXX_EXPERIMENTAL_CXX0X__
è|| 
__ılu¥lus
 >= 201103L || \

1322 (
	`defšed
(
_MSC_VER
) && _MSC_VER >= 1900))

1331 
‹m¶©e
 <
ty³Çme
 
T
>

1332 
T
 
	$CheckNÙNuÎ
(cÚ¡ * 
fe
, 
lše
, cÚ¡ * 
Çmes
, 
T
&& 
t
) {

1333 ià(
t
 =ğ
nuÎ±r
) {

1334 
	`LogMes§geF©®
(
fe
, 
lše
, 
Ãw
 
¡d
::
	`¡ršg
(
Çmes
));

1336  
¡d
::
fÜw¬d
<
T
>(
t
);

1337 
	}
}

1342 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

1343 
T
* 
	$CheckNÙNuÎ
(cÚ¡ *
fe
, 
lše
, cÚ¡ *
Çmes
, 
T
* 
t
) {

1344 ià(
t
 =ğ
NULL
) {

1345 
	`LogMes§geF©®
(
fe
, 
lše
, 
Ãw
 
¡d
::
	`¡ršg
(
Çmes
));

1347  
t
;

1348 
	}
}

1354 
GOOGLE_GLOG_DLL_DECL
 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am &
os
,

1355 cÚ¡ 
	gPRIVATE_CouÁ”
&);

1359 şas 
	cGOOGLE_GLOG_DLL_DECL
 
	gE¼noLogMes§ge
 : 
public
 
LogMes§ge
 {

1360 
public
:

1362 
E¼noLogMes§ge
(cÚ¡ * 
fe
, 
lše
, 
LogSev”™y
 
£v”™y
, 
ùr
,

1363 (
LogMes§ge
::*
£nd_m‘hod
)());

1366 ~
E¼noLogMes§ge
();

1368 
	g´iv©e
:

1369 
E¼noLogMes§ge
(const ErrnoLogMessage&);

1370 
	gİ”©Ü
=(cÚ¡ 
E¼noLogMes§ge
&);

1378 şas 
	cGOOGLE_GLOG_DLL_DECL
 
	gLogMes§geVoidify
 {

1379 
	gpublic
:

1380 
LogMes§geVoidify
() { }

1383 
İ”©Ü
&(
¡d
::
o¡»am
&) { }

1389 
GOOGLE_GLOG_DLL_DECL
 
FlushLogFes
(
LogSev”™y
 
mš_£v”™y
);

1394 
GOOGLE_GLOG_DLL_DECL
 
FlushLogFesUn§ã
(
LogSev”™y
 
mš_£v”™y
);

1401 
GOOGLE_GLOG_DLL_DECL
 
S‘LogDe¡š©iÚ
(
LogSev”™y
 
£v”™y
,

1402 cÚ¡ * 
ba£_f’ame
);

1410 
GOOGLE_GLOG_DLL_DECL
 
S‘LogSymlšk
(
LogSev”™y
 
£v”™y
,

1411 cÚ¡ * 
symlšk_ba£Çme
);

1418 şas 
	cGOOGLE_GLOG_DLL_DECL
 
	gLogSšk
 {

1419 
	gpublic
:

1420 
vœtu®
 ~
LogSšk
();

1425 
vœtu®
 
£nd
(
LogSev”™y
 
£v”™y
, cÚ¡ * 
fuÎ_f’ame
,

1426 cÚ¡ * 
ba£_f’ame
, 
lše
,

1427 cÚ¡ ::
tm
* 
tm_time
,

1428 cÚ¡ * 
mes§ge
, 
size_t
 
mes§ge_Ën
) = 0;

1443 
vœtu®
 
Wa™TlS’t
();

1447 
	g¡d
::
¡ršg
 
ToSŒšg
(
LogSev”™y
 
£v”™y
, cÚ¡ * 
fe
, 
lše
,

1448 cÚ¡ ::
tm
* 
tm_time
,

1449 cÚ¡ * 
mes§ge
, 
size_t
 
mes§ge_Ën
);

1453 
GOOGLE_GLOG_DLL_DECL
 
AddLogSšk
(
LogSšk
 *
de¡š©iÚ
);

1454 
GOOGLE_GLOG_DLL_DECL
 
RemoveLogSšk
(
LogSšk
 *
de¡š©iÚ
);

1462 
GOOGLE_GLOG_DLL_DECL
 
S‘LogF’ameEx‹nsiÚ
(

1463 cÚ¡ * 
f’ame_ex‹nsiÚ
);

1470 
GOOGLE_GLOG_DLL_DECL
 
S‘Std”rLoggšg
(
LogSev”™y
 
mš_£v”™y
);

1475 
GOOGLE_GLOG_DLL_DECL
 
LogToStd”r
();

1483 
GOOGLE_GLOG_DLL_DECL
 
S‘EmaLoggšg
(
LogSev”™y
 
mš_£v”™y
,

1484 cÚ¡ * 
add»s£s
);

1488 
GOOGLE_GLOG_DLL_DECL
 
boŞ
 
S’dEma
(cÚ¡ *
de¡
,

1489 cÚ¡ *
subjeù
, cÚ¡ *
body
);

1491 
GOOGLE_GLOG_DLL_DECL
 cÚ¡ 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
>& 
G‘LoggšgDœeùÜ›s
();

1496 
Te¡OÆy_CË¬LoggšgDœeùÜ›sLi¡
();

1501 
GOOGLE_GLOG_DLL_DECL
 
G‘Exi¡šgTempDœeùÜ›s
(

1502 
¡d
::
veùÜ
<¡d::
¡ršg
>* 
li¡
);

1507 
GOOGLE_GLOG_DLL_DECL
 
R•rštF©®Mes§ge
();

1516 
GOOGLE_GLOG_DLL_DECL
 
Trunÿ‹LogFe
(cÚ¡ *
·th
,

1517 
št64
 
lim™
, iÁ64 
k“p
);

1522 
GOOGLE_GLOG_DLL_DECL
 
Trunÿ‹StdoutStd”r
();

1526 
GOOGLE_GLOG_DLL_DECL
 cÚ¡ * 
G‘LogSev”™yName
(
LogSev”™y
 
£v”™y
);

1539 
Çme¥aû
 
	gba£
 {

1541 şas 
	cGOOGLE_GLOG_DLL_DECL
 
	gLogg”
 {

1542 
	gpublic
:

1543 
vœtu®
 ~
Logg”
();

1553 
vœtu®
 
Wr™e
(
boŞ
 
fÜû_æush
,

1554 
time_t
 
time¡amp
,

1555 cÚ¡ * 
mes§ge
,

1556 
mes§ge_Ën
) = 0;

1559 
vœtu®
 
Flush
() = 0;

1564 
vœtu®
 
ušt32
 
LogSize
() = 0;

1570 
GOOGLE_GLOG_DLL_DECL
 
Logg”
* 
G‘Logg”
(
LogSev”™y
 
Ëv–
);

1575 
GOOGLE_GLOG_DLL_DECL
 
S‘Logg”
(
LogSev”™y
 
Ëv–
, 
Logg”
* 
logg”
);

1590 
GOOGLE_GLOG_DLL_DECL
 
posix_¡»¼Ü_r
(
”r
, *
buf
, 
size_t
 
Ën
);

1594 
GOOGLE_GLOG_DLL_DECL
 
	g¡d
::
¡ršg
 
SŒE¼Ü
(
”r
);

1597 şas 
	cGOOGLE_GLOG_DLL_DECL
 
	gNuÎSŒ—m
 : 
public
 
LogMes§ge
::
LogSŒ—m
 {

1598 
public
:

1603 
NuÎSŒ—m
(è: 
LogMes§ge
::
LogSŒ—m
(
mes§ge_bufãr_
, 1, 0) { }

1604 
NuÎSŒ—m
(const * , ,

1605 cÚ¡ 
CheckOpSŒšg
& ) :

1606 
LogMes§ge
::
LogSŒ—m
(
mes§ge_bufãr_
, 1, 0) { }

1607 
	gNuÎSŒ—m
 &
¡»am
(è{  *
	gthis
; }

1608 
	g´iv©e
:

1612 
mes§ge_bufãr_
[2];

1621 
	g‹m¶©e
<
şass
 
	gT
>

1622 
šlše
 
	gNuÎSŒ—m
& 
	gİ”©Ü
<<(NuÎSŒ—m &
	g¡r
, cÚ¡ 
	gT
 &) {  str; }

1626 şas 
	cGOOGLE_GLOG_DLL_DECL
 
	gNuÎSŒ—mF©®
 : 
public
 
NuÎSŒ—m
 {

1627 
public
:

1628 
NuÎSŒ—mF©®
() { }

1629 
NuÎSŒ—mF©®
(cÚ¡ * 
fe
, 
lše
, cÚ¡ 
CheckOpSŒšg
& 
»suÉ
) :

1630 
NuÎSŒ—m
(
fe
, 
lše
, 
»suÉ
) { }

1631 
__©Œibu‹__
 ((
nÜ‘uº
)è~
NuÎSŒ—mF©®
(è
throw
 (è{ 
_ex™
(1); }

1650 
GOOGLE_GLOG_DLL_DECL
 
In¡®lFau»SigÇlHªdËr
();

1656 
GOOGLE_GLOG_DLL_DECL
 
In¡®lFau»Wr™”
(

1657 (*
wr™”
)(cÚ¡ * 
d©a
, 
size
));

1659 
	}
}

	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #undeà
_ASSERT_H


25 #undeà
as£¹


26 #undeà
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #undeà
as£¹_³¼Ü


34 
	#_ASSERT_H
 1

	)

35 
	~<ã©u»s.h
>

37 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

64 #iâdeà
_ASSERT_H_DECLS


65 
	#_ASSERT_H_DECLS


	)

66 
__BEGIN_DECLS


69 
	$__as£¹_ç
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
,

70 
__lše
, cÚ¡ *
__funùiÚ
)

71 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

74 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, cÚ¡ *
__fe
,

75 
__lše
, cÚ¡ *
__funùiÚ
)

76 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

81 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

82 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

85 
__END_DECLS


91 #ià
defšed
 
__ılu¥lus


92 
	#as£¹
(
ex´
) \

93 (
¡©ic_ÿ¡
 <
boŞ
> (
ex´
) \

95 : 
	`__as£¹_ç
 (#ex´, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

96 #–ià!
defšed
 
__GNUC__
 || defšed 
__STRICT_ANSI__


97 
	#as£¹
(
ex´
) \

98 ((
ex´
) \

99 ? 
	`__ASSERT_VOID_CAST
 (0) \

100 : 
	`__as£¹_ç
 (#ex´, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

107 
	#as£¹
(
ex´
) \

108 ((è ((
ex´
è? 1 : 0), 
	`__ex‹nsiÚ__
 ({ \

109 ià(
ex´
) \

112 
	`__as£¹_ç
 (#ex´, 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
); \

113 
	}
}))

	)

116 #ifdef 
__USE_GNU


117 
	#as£¹_³¼Ü
(
”ºum
) \

118 (!(
”ºum
) \

119 ? 
	`__ASSERT_VOID_CAST
 (0) \

120 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

128 #ià
defšed
 
__ılu¥lus
 ? 
__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

129 
	#__ASSERT_FUNCTION
 
__ex‹nsiÚ__
 
__PRETTY_FUNCTION__


	)

131 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

132 
	#__ASSERT_FUNCTION
 
__func__


	)

134 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

141 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ılu¥lus


142 #undeà
¡©ic_as£¹


143 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/ceres/internal/config.h

41 #iâdeà
CERES_PUBLIC_INTERNAL_CONFIG_H_


42 
	#CERES_PUBLIC_INTERNAL_CONFIG_H_


	)

69 
	#CERES_USE_OPENMP


	)

72 
	#CERES_HAVE_PTHREAD


	)

73 
	#CERES_HAVE_RWLOCK


	)

77 
	#CERES_STD_UNORDERED_MAP


	)

89 
	#CERES_USING_SHARED_LIBRARY


	)

	@/usr/include/ceres/internal/manual_constructor.h

40 #iâdeà
CERES_PUBLIC_INTERNAL_MANUAL_CONSTRUCTOR_H_


41 
	#CERES_PUBLIC_INTERNAL_MANUAL_CONSTRUCTOR_H_


	)

43 
	~<Ãw
>

45 
Çme¥aû
 
	gû»s
 {

46 
Çme¥aû
 
	gš‹º®
 {

50 #iâdeà
CERES_ALIGNED_CHAR_ARRAY


55 
	g‹m¶©e
<
	g®ignm’t
, 
	gsize
> 
	sAlignTy³
 { };

56 
	g‹m¶©e
<
	gsize
> 
	gAlignTy³
<0, size> { 
	t»suÉ
[
size
]; };

58 #ià!
defšed
(
CERES_ALIGN_ATTRIBUTE
)

59 
	#CERES_ALIGNED_CHAR_ARRAY
 
you_mu¡_defše_CERES_ALIGNED_CHAR_ARRAY_fÜ_your_comp”


	)

62 
	#CERES_ALIGN_TYPE_TEMPLATE
(
X
) \

63 
‹m¶©e
<
size
> 
AlignTy³
<
X
, size> { \

64 
	`CERES_ALIGN_ATTRIBUTE
(
	tX
è
	t»suÉ
[
size
]; \

65 }

	)

67 
CERES_ALIGN_TYPE_TEMPLATE
(1);

68 
CERES_ALIGN_TYPE_TEMPLATE
(2);

69 
CERES_ALIGN_TYPE_TEMPLATE
(4);

70 
CERES_ALIGN_TYPE_TEMPLATE
(8);

71 
CERES_ALIGN_TYPE_TEMPLATE
(16);

72 
CERES_ALIGN_TYPE_TEMPLATE
(32);

73 
CERES_ALIGN_TYPE_TEMPLATE
(64);

74 
CERES_ALIGN_TYPE_TEMPLATE
(128);

75 
CERES_ALIGN_TYPE_TEMPLATE
(256);

76 
CERES_ALIGN_TYPE_TEMPLATE
(512);

77 
CERES_ALIGN_TYPE_TEMPLATE
(1024);

78 
CERES_ALIGN_TYPE_TEMPLATE
(2048);

79 
CERES_ALIGN_TYPE_TEMPLATE
(4096);

80 
CERES_ALIGN_TYPE_TEMPLATE
(8192);

83 #undeà
CERES_ALIGN_TYPE_TEMPLATE


85 
	#CERES_ALIGNED_CHAR_ARRAY
(
T
, 
Size
) \

86 
ty³Çme
 
AlignTy³
<
	`CERES_ALIGN_OF
(
T
), (Tè* 
Size
>::
»suÉ


	)

92 
	g‹m¶©e
 <
ty³Çme
 
	gTy³
>

93 şas 
	cMªu®CÚ¡ruùÜ
 {

94 
	gpublic
:

100 
šlše
 
Ty³
* 
g‘
() {

101  
»š‹½»t_ÿ¡
<
Ty³
*>(
¥aû_
);

103 
šlše
 cÚ¡ 
Ty³
* 
g‘
() const {

104  
	g»š‹½»t_ÿ¡
<cÚ¡ 
	gTy³
*>(
	g¥aû_
);

107 
šlše
 
Ty³
* 
	gİ”©Ü
->(è{  
g‘
(); }

108 
šlše
 cÚ¡ 
Ty³
* 
	gİ”©Ü
->(ècÚ¡ {  
g‘
(); }

110 
šlše
 
	gTy³
& 
	gİ”©Ü
*(è{  *
g‘
(); }

111 
šlše
 cÚ¡ 
	gTy³
& 
	gİ”©Ü
*(ècÚ¡ {  *
g‘
(); }

114 
šlše
 * 
¥aû
() {

115  
	g»š‹½»t_ÿ¡
<*>(
	g¥aû_
);

119 
šlše
 
In™
() {

120 
Ãw
(
¥aû
()è
	gTy³
;

123 
	g‹m¶©e
 <
ty³Çme
 
	gT1
>

124 
šlše
 
In™
(cÚ¡ 
T1
& 
p1
) {

125 
Ãw
(
¥aû
()è
Ty³
(
p1
);

128 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

129 
šlše
 
In™
(cÚ¡ 
T1
& 
p1
, cÚ¡ 
T2
& 
p2
) {

130 
Ãw
(
¥aû
()è
Ty³
(
p1
, 
p2
);

133 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
>

134 
šlše
 
In™
(cÚ¡ 
T1
& 
p1
, cÚ¡ 
T2
& 
p2
, cÚ¡ 
T3
& 
p3
) {

135 
Ãw
(
¥aû
()è
Ty³
(
p1
, 
p2
, 
p3
);

138 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
,y³Çm
	gT4
>

139 
šlše
 
In™
(cÚ¡ 
T1
& 
p1
, cÚ¡ 
T2
& 
p2
, cÚ¡ 
T3
& 
p3
, cÚ¡ 
T4
& 
p4
) {

140 
Ãw
(
¥aû
()è
Ty³
(
p1
, 
p2
, 
p3
, 
p4
);

143 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
,y³Çm
	gT4
,y³Çm
	gT5
>

144 
šlše
 
In™
(cÚ¡ 
T1
& 
p1
, cÚ¡ 
T2
& 
p2
, cÚ¡ 
T3
& 
p3
, cÚ¡ 
T4
& 
p4
,

145 cÚ¡ 
T5
& 
p5
) {

146 
Ãw
(
¥aû
()è
Ty³
(
p1
, 
p2
, 
p3
, 
p4
, 
p5
);

149 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
,y³Çm
	gT4
,y³Çm
	gT5
,

150 
ty³Çme
 
	gT6
>

151 
šlše
 
In™
(cÚ¡ 
T1
& 
p1
, cÚ¡ 
T2
& 
p2
, cÚ¡ 
T3
& 
p3
, cÚ¡ 
T4
& 
p4
,

152 cÚ¡ 
T5
& 
p5
, cÚ¡ 
T6
& 
p6
) {

153 
Ãw
(
¥aû
()è
Ty³
(
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
);

156 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
,y³Çm
	gT4
,y³Çm
	gT5
,

157 
ty³Çme
 
	gT6
,y³Çm
	gT7
>

158 
šlše
 
In™
(cÚ¡ 
T1
& 
p1
, cÚ¡ 
T2
& 
p2
, cÚ¡ 
T3
& 
p3
, cÚ¡ 
T4
& 
p4
,

159 cÚ¡ 
T5
& 
p5
, cÚ¡ 
T6
& 
p6
, cÚ¡ 
T7
& 
p7
) {

160 
Ãw
(
¥aû
()è
Ty³
(
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
);

163 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
,y³Çm
	gT4
,y³Çm
	gT5
,

164 
ty³Çme
 
	gT6
,y³Çm
	gT7
,y³Çm
	gT8
>

165 
šlše
 
In™
(cÚ¡ 
T1
& 
p1
, cÚ¡ 
T2
& 
p2
, cÚ¡ 
T3
& 
p3
, cÚ¡ 
T4
& 
p4
,

166 cÚ¡ 
T5
& 
p5
, cÚ¡ 
T6
& 
p6
, cÚ¡ 
T7
& 
p7
, cÚ¡ 
T8
& 
p8
) {

167 
Ãw
(
¥aû
()è
Ty³
(
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
, 
p8
);

170 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
,y³Çm
	gT4
,y³Çm
	gT5
,

171 
ty³Çme
 
	gT6
,y³Çm
	gT7
,y³Çm
	gT8
,y³Çm
	gT9
>

172 
šlše
 
In™
(cÚ¡ 
T1
& 
p1
, cÚ¡ 
T2
& 
p2
, cÚ¡ 
T3
& 
p3
, cÚ¡ 
T4
& 
p4
,

173 cÚ¡ 
T5
& 
p5
, cÚ¡ 
T6
& 
p6
, cÚ¡ 
T7
& 
p7
, cÚ¡ 
T8
& 
p8
,

174 cÚ¡ 
T9
& 
p9
) {

175 
Ãw
(
¥aû
()è
Ty³
(
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
, 
p8
, 
p9
);

178 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
,y³Çm
	gT4
,y³Çm
	gT5
,

179 
ty³Çme
 
	gT6
,y³Çm
	gT7
,y³Çm
	gT8
,y³Çm
	gT9
,y³Çm
	gT10
>

180 
šlše
 
In™
(cÚ¡ 
T1
& 
p1
, cÚ¡ 
T2
& 
p2
, cÚ¡ 
T3
& 
p3
, cÚ¡ 
T4
& 
p4
,

181 cÚ¡ 
T5
& 
p5
, cÚ¡ 
T6
& 
p6
, cÚ¡ 
T7
& 
p7
, cÚ¡ 
T8
& 
p8
,

182 cÚ¡ 
T9
& 
p9
, cÚ¡ 
T10
& 
p10
) {

183 
Ãw
(
¥aû
()è
Ty³
(
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
, 
p8
, 
p9
, 
p10
);

186 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
,y³Çm
	gT3
,y³Çm
	gT4
,y³Çm
	gT5
,

187 
ty³Çme
 
	gT6
,y³Çm
	gT7
,y³Çm
	gT8
,y³Çm
	gT9
,y³Çm
	gT10
,

188 
ty³Çme
 
	gT11
>

189 
šlše
 
In™
(cÚ¡ 
T1
& 
p1
, cÚ¡ 
T2
& 
p2
, cÚ¡ 
T3
& 
p3
, cÚ¡ 
T4
& 
p4
,

190 cÚ¡ 
T5
& 
p5
, cÚ¡ 
T6
& 
p6
, cÚ¡ 
T7
& 
p7
, cÚ¡ 
T8
& 
p8
,

191 cÚ¡ 
T9
& 
p9
, cÚ¡ 
T10
& 
p10
, cÚ¡ 
T11
& 
p11
) {

192 
Ãw
(
¥aû
()è
Ty³
(
p1
, 
p2
, 
p3
, 
p4
, 
p5
, 
p6
, 
p7
, 
p8
, 
p9
, 
p10
, 
p11
);

195 
šlše
 
De¡roy
() {

196 
g‘
()->~
Ty³
();

199 
	g´iv©e
:

200 
CERES_ALIGNED_CHAR_ARRAY
(
Ty³
, 1è
	g¥aû_
;

203 #undeà
CERES_ALIGNED_CHAR_ARRAY


	@/usr/include/ceres/internal/variadic_evaluate.h

32 #iâdeà
CERES_PUBLIC_INTERNAL_VARIADIC_EVALUATE_H_


33 
	#CERES_PUBLIC_INTERNAL_VARIADIC_EVALUATE_H_


	)

35 
	~<¡ddef.h
>

37 
	~"û»s/j‘.h
"

38 
	~"û»s/ty³s.h
"

39 
	~"û»s/š‹º®/eig’.h
"

40 
	~"û»s/š‹º®/fixed_¬¿y.h
"

41 
	~"glog/loggšg.h
"

43 
Çme¥aû
 
	gû»s
 {

44 
Çme¥aû
 
	gš‹º®
 {

50 
	g‹m¶©e
<
ty³Çme
 
	gFunùÜ
,y³Çm
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
,

51 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 
	gN9
>

52 
	sV¬ŸdicEv®u©e
 {

53 
boŞ
 
C®l
(cÚ¡ 
FunùÜ
& 
funùÜ
, 
T
 cÚ¡ *cÚ¡ *
šput
, T* 
ouut
) {

54  
funùÜ
(
šput
[0],

55 
šput
[1],

56 
šput
[2],

57 
šput
[3],

58 
šput
[4],

59 
šput
[5],

60 
šput
[6],

61 
šput
[7],

62 
šput
[8],

63 
šput
[9],

64 
ouut
);

68 
	g‹m¶©e
<
ty³Çme
 
	gFunùÜ
,y³Çm
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
,

69 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
>

70 
	gV¬ŸdicEv®u©e
<
	gFunùÜ
, 
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 
	gN5
, 
	gN6
, 
	gN7
, 
	gN8
, 0> {

71 
boŞ
 
C®l
(cÚ¡ 
FunùÜ
& 
funùÜ
, 
T
 cÚ¡ *cÚ¡ *
šput
, T* 
ouut
) {

72  
funùÜ
(
šput
[0],

73 
šput
[1],

74 
šput
[2],

75 
šput
[3],

76 
šput
[4],

77 
šput
[5],

78 
šput
[6],

79 
šput
[7],

80 
šput
[8],

81 
ouut
);

85 
	g‹m¶©e
<
ty³Çme
 
	gFunùÜ
,y³Çm
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
,

86 
	gN5
, 
	gN6
, 
	gN7
>

87 
	gV¬ŸdicEv®u©e
<
	gFunùÜ
, 
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 
	gN5
, 
	gN6
, 
	gN7
, 0, 0> {

88 
boŞ
 
C®l
(cÚ¡ 
FunùÜ
& 
funùÜ
, 
T
 cÚ¡ *cÚ¡ *
šput
, T* 
ouut
) {

89  
funùÜ
(
šput
[0],

90 
šput
[1],

91 
šput
[2],

92 
šput
[3],

93 
šput
[4],

94 
šput
[5],

95 
šput
[6],

96 
šput
[7],

97 
ouut
);

101 
	g‹m¶©e
<
ty³Çme
 
	gFunùÜ
,y³Çm
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
,

102 
	gN5
, 
	gN6
>

103 
	gV¬ŸdicEv®u©e
<
	gFunùÜ
, 
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 
	gN5
, 
	gN6
, 0, 0, 0> {

104 
boŞ
 
C®l
(cÚ¡ 
FunùÜ
& 
funùÜ
, 
T
 cÚ¡ *cÚ¡ *
šput
, T* 
ouut
) {

105  
funùÜ
(
šput
[0],

106 
šput
[1],

107 
šput
[2],

108 
šput
[3],

109 
šput
[4],

110 
šput
[5],

111 
šput
[6],

112 
ouut
);

116 
	g‹m¶©e
<
ty³Çme
 
	gFunùÜ
,y³Çm
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
,

117 
	gN5
>

118 
	gV¬ŸdicEv®u©e
<
	gFunùÜ
, 
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 
	gN5
, 0, 0, 0, 0> {

119 
boŞ
 
C®l
(cÚ¡ 
FunùÜ
& 
funùÜ
, 
T
 cÚ¡ *cÚ¡ *
šput
, T* 
ouut
) {

120  
funùÜ
(
šput
[0],

121 
šput
[1],

122 
šput
[2],

123 
šput
[3],

124 
šput
[4],

125 
šput
[5],

126 
ouut
);

130 
	g‹m¶©e
<
ty³Çme
 
	gFunùÜ
,y³Çm
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
>

131 
	gV¬ŸdicEv®u©e
<
	gFunùÜ
, 
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 
	gN4
, 0, 0, 0, 0, 0> {

132 
boŞ
 
C®l
(cÚ¡ 
FunùÜ
& 
funùÜ
, 
T
 cÚ¡ *cÚ¡ *
šput
, T* 
ouut
) {

133  
funùÜ
(
šput
[0],

134 
šput
[1],

135 
šput
[2],

136 
šput
[3],

137 
šput
[4],

138 
ouut
);

142 
	g‹m¶©e
<
ty³Çme
 
	gFunùÜ
,y³Çm
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
>

143 
	gV¬ŸdicEv®u©e
<
	gFunùÜ
, 
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 
	gN3
, 0, 0, 0, 0, 0, 0> {

144 
boŞ
 
C®l
(cÚ¡ 
FunùÜ
& 
funùÜ
, 
T
 cÚ¡ *cÚ¡ *
šput
, T* 
ouut
) {

145  
funùÜ
(
šput
[0],

146 
šput
[1],

147 
šput
[2],

148 
šput
[3],

149 
ouut
);

153 
	g‹m¶©e
<
ty³Çme
 
	gFunùÜ
,y³Çm
	gT
, 
	gN0
, 
	gN1
, 
	gN2
>

154 
	gV¬ŸdicEv®u©e
<
	gFunùÜ
, 
	gT
, 
	gN0
, 
	gN1
, 
	gN2
, 0, 0, 0, 0, 0, 0, 0> {

155 
boŞ
 
C®l
(cÚ¡ 
FunùÜ
& 
funùÜ
, 
T
 cÚ¡ *cÚ¡ *
šput
, T* 
ouut
) {

156  
funùÜ
(
šput
[0],

157 
šput
[1],

158 
šput
[2],

159 
ouut
);

163 
	g‹m¶©e
<
ty³Çme
 
	gFunùÜ
,y³Çm
	gT
, 
	gN0
, 
	gN1
>

164 
	gV¬ŸdicEv®u©e
<
	gFunùÜ
, 
	gT
, 
	gN0
, 
	gN1
, 0, 0, 0, 0, 0, 0, 0, 0> {

165 
boŞ
 
C®l
(cÚ¡ 
FunùÜ
& 
funùÜ
, 
T
 cÚ¡ *cÚ¡ *
šput
, T* 
ouut
) {

166  
funùÜ
(
šput
[0],

167 
šput
[1],

168 
ouut
);

172 
	g‹m¶©e
<
ty³Çme
 
	gFunùÜ
,y³Çm
	gT
, 
	gN0
>

173 
	gV¬ŸdicEv®u©e
<
	gFunùÜ
, 
	gT
, 
	gN0
, 0, 0, 0, 0, 0, 0, 0, 0, 0> {

174 
boŞ
 
C®l
(cÚ¡ 
FunùÜ
& 
funùÜ
, 
T
 cÚ¡ *cÚ¡ *
šput
, T* 
ouut
) {

175  
funùÜ
(
šput
[0],

176 
ouut
);

181 
	g‹m¶©e
<
ty³Çme
 
	gFunùÜ
,y³Çm
	gT
>

182 
	gV¬ŸdicEv®u©e
<
	gFunùÜ
, 
	gT
, 
	gû»s
::
DYNAMIC
, ceres::DYNAMIC,

183 
	gû»s
::
DYNAMIC
, ceres::DYNAMIC, ceres::DYNAMIC,

184 
	gû»s
::
DYNAMIC
, ceres::DYNAMIC, ceres::DYNAMIC,

185 
	gû»s
::
DYNAMIC
, ceres::DYNAMIC> {

186 
boŞ
 
C®l
(cÚ¡ 
FunùÜ
& 
funùÜ
, 
T
 cÚ¡ *cÚ¡ *
šput
, T* 
ouut
) {

187  
funùÜ
(
šput
, 
ouut
);

	@/usr/include/errno.h

22 #iâdef 
_ERRNO_H


23 
	#_ERRNO_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	~<b™s/”ºo.h
>

32 #iâdeà
__ASSEMBLER__


34 
__BEGIN_DECLS


37 *
	$__”ºo_loÿtiÚ
 (è
__THROW
 
__©Œibu‹_cÚ¡__
;

38 
	#”ºo
 (*
	`__”ºo_loÿtiÚ
 ())

	)

40 #ifdeà
__USE_GNU


45 *
´og¿m_švoÿtiÚ_Çme
;

46 *
´og¿m_švoÿtiÚ_shÜt_Çme
;

50 #iâdeà
__”rÜ_t_defšed


51 
	#__”rÜ_t_defšed
 1

	)

52 
	t”rÜ_t
;

57 
__END_DECLS


	@/usr/include/gflags/gflags.h

78 #iâdeà
GFLAGS_GFLAGS_H_


79 
	#GFLAGS_GFLAGS_H_


	)

81 
	~<¡ršg
>

82 
	~<veùÜ
>

84 
	~"gæags/gæags_deş¬e.h
"

88 #iâdeà
GFLAGS_DLL_DEFINE_FLAG


89 #ià
GFLAGS_IS_A_DLL
 && 
defšed
(
_MSC_VER
)

90 
	#GFLAGS_DLL_DEFINE_FLAG
 
	`__deş¥ec
(
dÎexpÜt
)

	)

92 
	#GFLAGS_DLL_DEFINE_FLAG


	)

97 
Çme¥aû
 
	gGFLAGS_NAMESPACE
 {

129 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ boŞ* 
æag
, boŞ (*
v®id©e_â
)(const *, bool));

130 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ 
št32
* 
æag
, boŞ (*
v®id©e_â
)(const *, int32));

131 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ 
ušt32
* 
æag
, boŞ (*
v®id©e_â
)(const *, uint32));

132 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ 
št64
* 
æag
, boŞ (*
v®id©e_â
)(const *, int64));

133 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ 
ušt64
* 
æag
, boŞ (*
v®id©e_â
)(const *, uint64));

134 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ * 
æag
, boŞ (*
v®id©e_â
)(const *, ));

135 
GFLAGS_DLL_DECL
 
boŞ
 
Regi¡”FÏgV®id©Ü
(cÚ¡ 
¡d
::
¡ršg
* 
æag
, boŞ (*
v®id©e_â
)(const *, const std::string&));

138 
	#DEFINE_v®id©Ü
(
Çme
, 
v®id©Ü
) \

139 cÚ¡ 
boŞ
 
Çme
##
_v®id©Ü_»gi¡”ed
 = \

140 
GFLAGS_NAMESPACE
::
	`Regi¡”FÏgV®id©Ü
(&
FLAGS_
##
Çme
, 
v®id©Ü
)

	)

155 
	sCommªdLšeFÏgInfo
 {

156 
	g¡d
::
¡ršg
 
Çme
;

157 
	g¡d
::
¡ršg
 
ty³
;

158 
	g¡d
::
¡ršg
 
desütiÚ
;

159 
	g¡d
::
¡ršg
 
cu¼’t_v®ue
;

160 
	g¡d
::
¡ršg
 
deçuÉ_v®ue
;

161 
	g¡d
::
¡ršg
 
f’ame
;

162 
boŞ
 
	ghas_v®id©Ü_â
;

163 
boŞ
 
	gis_deçuÉ
;

166 cÚ¡ * 
	gæag_±r
;

174 
GFLAGS_DLL_DECL
 
G‘AÎFÏgs
(
¡d
::
veùÜ
<
CommªdLšeFÏgInfo
>* 
OUTPUT
);

176 
GFLAGS_DLL_DECL
 
ShowU§geW™hFÏgs
(cÚ¡ *
¬gv0
);

177 
GFLAGS_DLL_DECL
 
ShowU§geW™hFÏgsRe¡riù
(cÚ¡ *
¬gv0
, cÚ¡ *
»¡riù
);

181 
GFLAGS_DLL_DECL
 
¡d
::
¡ršg
 
DesüibeOÃFÏg
(cÚ¡ 
CommªdLšeFÏgInfo
& 
æag
);

184 
GFLAGS_DLL_DECL
 
S‘Argv
(
¬gc
, cÚ¡ ** 
¬gv
);

188 
GFLAGS_DLL_DECL
 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
G‘Argvs
();

189 
GFLAGS_DLL_DECL
 cÚ¡ * 
G‘Argv
();

190 
GFLAGS_DLL_DECL
 cÚ¡ * 
G‘Argv0
();

191 
GFLAGS_DLL_DECL
 
ušt32
 
G‘ArgvSum
();

192 
GFLAGS_DLL_DECL
 cÚ¡ * 
Prog¿mInvoÿtiÚName
();

193 
GFLAGS_DLL_DECL
 cÚ¡ * 
Prog¿mInvoÿtiÚShÜtName
();

197 
GFLAGS_DLL_DECL
 cÚ¡ * 
Prog¿mU§ge
();

201 
GFLAGS_DLL_DECL
 cÚ¡ * 
V”siÚSŒšg
();

215 
GFLAGS_DLL_DECL
 
boŞ
 
G‘CommªdLšeO±iÚ
(cÚ¡ * 
Çme
, 
¡d
::
¡ršg
* 
OUTPUT
);

219 
GFLAGS_DLL_DECL
 
boŞ
 
G‘CommªdLšeFÏgInfo
(cÚ¡ * 
Çme
, 
CommªdLšeFÏgInfo
* 
OUTPUT
);

224 
GFLAGS_DLL_DECL
 
CommªdLšeFÏgInfo
 
G‘CommªdLšeFÏgInfoOrD›
(cÚ¡ * 
Çme
);

226 
GFLAGS_DLL_DECL
 
	gFÏgS‘tšgMode
 {

228 
	gSET_FLAGS_VALUE
,

231 
	gSET_FLAG_IF_DEFAULT
,

235 
	gSET_FLAGS_DEFAULT


246 
GFLAGS_DLL_DECL
 
¡d
::
¡ršg
 
S‘CommªdLšeO±iÚ
 (cÚ¡ * 
Çme
, cÚ¡ * 
v®ue
);

247 
GFLAGS_DLL_DECL
 
¡d
::
¡ršg
 
S‘CommªdLšeO±iÚW™hMode
(cÚ¡ * 
Çme
, cÚ¡ * 
v®ue
, 
FÏgS‘tšgMode
 
£t_mode
);

278 şas 
	cGFLAGS_DLL_DECL
 
	gFÏgSav”
 {

279 
	gpublic
:

280 
FÏgSav”
();

281 ~
FÏgSav”
();

283 
	g´iv©e
:

284 
şass
 
FÏgSav”Im¶
* 
im¶_
;

286 
FÏgSav”
(const FlagSaver&);

287 
	gİ”©Ü
=(cÚ¡ 
FÏgSav”
&);

288 }
__©Œibu‹
((
unu£d
));

294 
GFLAGS_DLL_DECL
 
¡d
::
¡ršg
 
CommªdlšeFÏgsIÁoSŒšg
();

296 
GFLAGS_DLL_DECL


297 
boŞ
 
R—dFÏgsFromSŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
æagfecÚ‹Ás
,

298 cÚ¡ * 
´og_Çme
,

299 
boŞ
 
”rÜs_¬e_çl
);

303 
GFLAGS_DLL_DECL
 
boŞ
 
Aµ’dFÏgsIÁoFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, cÚ¡ * 
´og_Çme
);

304 
GFLAGS_DLL_DECL
 
boŞ
 
R—dFromFÏgsFe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, cÚ¡ * 
´og_Çme
, boŞ 
”rÜs_¬e_çl
);

315 
GFLAGS_DLL_DECL
 
boŞ
 
BoŞFromEnv
(cÚ¡ *
v¬Çme
, boŞ 
defv®
);

316 
GFLAGS_DLL_DECL
 
št32
 
IÁ32FromEnv
(cÚ¡ *
v¬Çme
, iÁ32 
defv®
);

317 
GFLAGS_DLL_DECL
 
ušt32
 
Ušt32FromEnv
(cÚ¡ *
v¬Çme
, ušt32 
defv®
);

318 
GFLAGS_DLL_DECL
 
št64
 
IÁ64FromEnv
(cÚ¡ *
v¬Çme
, iÁ64 
defv®
);

319 
GFLAGS_DLL_DECL
 
ušt64
 
Ušt64FromEnv
(cÚ¡ *
v¬Çme
, ušt64 
defv®
);

320 
GFLAGS_DLL_DECL
 
DoubËFromEnv
(cÚ¡ *
v¬Çme
, 
defv®
);

321 
GFLAGS_DLL_DECL
 cÚ¡ *
SŒšgFromEnv
(cÚ¡ *
v¬Çme
, cÚ¡ *
defv®
);

333 
GFLAGS_DLL_DECL
 
S‘U§geMes§ge
(cÚ¡ 
¡d
::
¡ršg
& 
u§ge
);

338 
GFLAGS_DLL_DECL
 
S‘V”siÚSŒšg
(cÚ¡ 
¡d
::
¡ršg
& 
v”siÚ
);

347 #iâdeà
SWIG


348 
GFLAGS_DLL_DECL
 
ušt32
 
P¬£CommªdLšeFÏgs
(*
¬gc
, *** 
¬gv
, 
boŞ
 
»move_æags
);

362 
GFLAGS_DLL_DECL
 
ušt32
 
P¬£CommªdLšeNÚH–pFÏgs
(*
¬gc
, *** 
¬gv
, 
boŞ
 
»move_æags
);

367 
GFLAGS_DLL_DECL
 
HªdËCommªdLšeH–pFÏgs
();

373 
GFLAGS_DLL_DECL
 
AÎowCommªdLšeR•¬sšg
();

381 
GFLAGS_DLL_DECL
 
R•¬£CommªdLšeNÚH–pFÏgs
();

392 
GFLAGS_DLL_DECL
 
ShutDownCommªdLšeFÏgs
();

432 şas 
	cGFLAGS_DLL_DECL
 
	gFÏgRegi¡””
 {

433 
	gpublic
:

438 
‹m¶©e
 <
ty³Çme
 
FÏgTy³
>

439 
FÏgRegi¡””
(cÚ¡ * 
Çme
,

440 cÚ¡ * 
h–p
, cÚ¡ * 
f’ame
,

441 
FÏgTy³
* 
cu¼’t_¡Üage
, FÏgTy³* 
defv®ue_¡Üage
);

449 
GFLAGS_DLL_DECL
 cÚ¡ 
kSŒ³dFÏgH–p
[];

455 #iâdeà
SWIG


457 #ià
defšed
(
STRIP_FLAG_HELP
) && STRIP_FLAG_HELP > 0

459 
	#MAYBE_STRIPPED_HELP
(
txt
) \

460 (
çl£
 ? (
txt
è: 
GFLAGS_NAMESPACE
::
kSŒ³dFÏgH–p
)

	)

462 
	#MAYBE_STRIPPED_HELP
(
txt
è
	)
txt

476 
	#DEFINE_VARIABLE
(
ty³
, 
shÜ‰y³
, 
Çme
, 
v®ue
, 
h–p
) \

477 
Çme¥aû
 
fL
##
shÜ‰y³
 { \

478 cÚ¡ 
ty³
 
FLAGS_nÚo
##
Çme
 = 
v®ue
; \

480 
GFLAGS_DLL_DEFINE_FLAG
 
ty³
 
FLAGS_
##
Çme
 = 
FLAGS_nÚo
##name; \

481 
ty³
 
FLAGS_no
##
Çme
 = 
FLAGS_nÚo
##name; \

482 
GFLAGS_NAMESPACE
::
FÏgRegi¡””
 
o_
##
	`Çme
( \

483 #Çme, 
	`MAYBE_STRIPPED_HELP
(
h–p
), 
__FILE__
, \

484 &
FLAGS_
##
Çme
, &
FLAGS_no
##name); \

486 
usšg
 
fL
##
shÜ‰y³
::
FLAGS_
##
Çme


	)

496 
Çme¥aû
 
	gfLB
 {

497 
	sCompeAs£¹
 {};

498 
CompeAs£¹
 
	tex³ùed_sizeof_doubË_Ãq_sizeof_boŞ
[

499 ((è!ğ(
boŞ
)) ? 1 : -1];

500 
	g‹m¶©e
<
ty³Çme
 
	gFrom
> 
GFLAGS_DLL_DECL
 
IsBoŞFÏg
(cÚ¡ 
From
& 
äom
);

501 
GFLAGS_DLL_DECL
 
boŞ
 
IsBoŞFÏg
(boŞ 
äom
);

507 
	#DEFINE_boŞ
(
Çme
, 
v®
, 
txt
) \

508 
Çme¥aû
 
fLB
 { \

509 ::
fLB
::
	tCompeAs£¹
 
	tFLAG_
##
	tÇme
##
	t_v®ue_is_nÙ_a_boŞ
[ \

510 ((::
fLB
::
	`IsBoŞFÏg
(
v®
)) != ())? 1: -1]; \

512 
	`DEFINE_VARIABLE
(
boŞ
, 
B
, 
Çme
, 
v®
, 
txt
)

	)

514 
	#DEFINE_št32
(
Çme
, 
v®
, 
txt
) \

515 
	`DEFINE_VARIABLE
(
GFLAGS_NAMESPACE
::
št32
, 
I
, \

516 
Çme
, 
v®
, 
txt
)

	)

518 
	#DEFINE_ušt32
(
Çme
,
v®
, 
txt
) \

519 
	`DEFINE_VARIABLE
(
GFLAGS_NAMESPACE
::
ušt32
, 
U
, \

520 
Çme
, 
v®
, 
txt
)

	)

522 
	#DEFINE_št64
(
Çme
, 
v®
, 
txt
) \

523 
	`DEFINE_VARIABLE
(
GFLAGS_NAMESPACE
::
št64
, 
I64
, \

524 
Çme
, 
v®
, 
txt
)

	)

526 
	#DEFINE_ušt64
(
Çme
,
v®
, 
txt
) \

527 
	`DEFINE_VARIABLE
(
GFLAGS_NAMESPACE
::
ušt64
, 
U64
, \

528 
Çme
, 
v®
, 
txt
)

	)

530 
	#DEFINE_doubË
(
Çme
, 
v®
, 
txt
) \

531 
	`DEFINE_VARIABLE
(, 
D
, 
Çme
, 
v®
, 
txt
)

	)

540 
Çme¥aû
 
	gfLS
 {

542 
šlše
 
ş¡ršg
* 
dÚt_·ss0toDEFINE_¡ršg
(*
¡ršg¥Ù
,

543 cÚ¡ *
v®ue
) {

544  
Ãw
(
¡ršg¥Ù
è
ş¡ršg
(
v®ue
);

546 
šlše
 
ş¡ršg
* 
dÚt_·ss0toDEFINE_¡ršg
(*
¡ršg¥Ù
,

547 cÚ¡ 
ş¡ršg
 &
v®ue
) {

548  
Ãw
(
¡ršg¥Ù
è
ş¡ršg
(
v®ue
);

550 
šlše
 
ş¡ršg
* 
dÚt_·ss0toDEFINE_¡ršg
(*
¡ršg¥Ù
,

551 
v®ue
);

557 şas 
	cSŒšgFÏgDe¡ruùÜ
 {

558 *
	gcu¼’t_¡Üage_
;

559 *
	gdefv®ue_¡Üage_
;

561 
	gpublic
:

563 
SŒšgFÏgDe¡ruùÜ
(*
cu¼’t
, *
defv®ue
)

564 : 
cu¼’t_¡Üage_
(
cu¼’t
), 
defv®ue_¡Üage_
(
defv®ue
) {}

566 ~
SŒšgFÏgDe¡ruùÜ
() {

567 
	g»š‹½»t_ÿ¡
<
	gş¡ršg
*>(
	gcu¼’t_¡Üage_
 )->~
ş¡ršg
();

568 
	g»š‹½»t_ÿ¡
<
	gş¡ršg
*>(
	gdefv®ue_¡Üage_
)->~
ş¡ršg
();

581 
	#DEFINE_¡ršg
(
Çme
, 
v®
, 
txt
) \

582 
Çme¥aû
 
fLS
 { \

583 
usšg
 ::
fLS
::
ş¡ršg
; \

584 
usšg
 ::
fLS
::
SŒšgFÏgDe¡ruùÜ
; \

585 uniÚ { * 
®ign
; 
s
[(
ş¡ršg
)]; } 
s_
##
Çme
[2]; \

586 
ş¡ršg
* cÚ¡ 
FLAGS_no
##
Çme
 = ::
fLS
:: \

587 
	`dÚt_·ss0toDEFINE_¡ršg
(
s_
##
Çme
[0].
s
, \

588 
v®
); \

589 
GFLAGS_NAMESPACE
::
FÏgRegi¡””
 
o_
##
	`Çme
( \

590 #Çme, 
	`MAYBE_STRIPPED_HELP
(
txt
), 
__FILE__
, \

591 
FLAGS_no
##
Çme
, 
	`Ãw
 (
s_
##Çme[1].
s
è
	`ş¡ršg
(*FLAGS_no##name)); \

592 
SŒšgFÏgDe¡ruùÜ
 
d_
##
	`Çme
(
s_
##
Çme
[0].
s
, s_##name[1].s); \

593 
GFLAGS_DLL_DEFINE_FLAG
 
ş¡ršg
& 
FLAGS_
##
Çme
; \

594 
usšg
 
fLS
::
FLAGS_
##
Çme
; \

595 
ş¡ršg
& 
FLAGS_
##
Çme
 = *
FLAGS_no
##name; \

597 
usšg
 
fLS
::
FLAGS_
##
Çme


	)

603 
	~"gæags_gæags.h
"

	@/usr/include/glog/log_severity.h

30 #iâdeà
BASE_LOG_SEVERITY_H__


31 
	#BASE_LOG_SEVERITY_H__


	)

34 #iâdeà
GOOGLE_GLOG_DLL_DECL


35 #ià
defšed
(
_WIN32
è&& !defšed(
__CYGWIN__
)

36 
	#GOOGLE_GLOG_DLL_DECL
 
	`__deş¥ec
(
dÎimpÜt
)

	)

38 
	#GOOGLE_GLOG_DLL_DECL


	)

45 
	tLogSev”™y
;

47 cÚ¡ 
	gGLOG_INFO
 = 0, 
	gGLOG_WARNING
 = 1, 
	gGLOG_ERROR
 = 2, 
	gGLOG_FATAL
 = 3,

48 
	gNUM_SEVERITIES
 = 4;

49 #iâdeà
GLOG_NO_ABBREVIATED_SEVERITIES


50 #ifdeà
ERROR


51 #”rÜ 
ERROR
 
maüo
 
is
 
defšed
. 
Defše
 
GLOG_NO_ABBREVIATED_SEVERITIES
 
befÜe
 
šşudšg
 
loggšg
.
h
. 
S“
 
the
 
docum’t
 
d‘a
.

53 cÚ¡ 
	gINFO
 = 
GLOG_INFO
, 
	gWARNING
 = 
GLOG_WARNING
,

54 
	gERROR
 = 
GLOG_ERROR
, 
	gFATAL
 = 
GLOG_FATAL
;

58 #ifdeà
NDEBUG


59 
	#DFATAL_LEVEL
 
ERROR


	)

61 
	#DFATAL_LEVEL
 
FATAL


	)

64 
GOOGLE_GLOG_DLL_DECL
 cÚ¡ * cÚ¡ 
LogSev”™yNames
[
NUM_SEVERITIES
];

84 #ifdeà
NDEBUG


85 ’um { 
	mDEBUG_MODE
 = 0 };

86 
	#IF_DEBUG_MODE
(
x
)

	)

88 ’um { 
	mDEBUG_MODE
 = 1 };

89 
	#IF_DEBUG_MODE
(
x
è
	)
x

	@/usr/include/glog/vlog_is_on.h

61 #iâdeà
BASE_VLOG_IS_ON_H_


62 
	#BASE_VLOG_IS_ON_H_


	)

64 
	~"glog/log_£v”™y.h
"

67 #iâdeà
GOOGLE_GLOG_DLL_DECL


68 #ià
defšed
(
_WIN32
è&& !defšed(
__CYGWIN__
)

69 
	#GOOGLE_GLOG_DLL_DECL
 
	`__deş¥ec
(
dÎimpÜt
)

	)

71 
	#GOOGLE_GLOG_DLL_DECL


	)

75 #ià
defšed
(
__GNUC__
)

82 
	#VLOG_IS_ON
(
v”bo£Ëv–
) \

83 
__ex‹nsiÚ__
 \

84 ({ 
googË
::
št32
* 
vloÿl__
 = &googË::
kLogS™eUnš™Ÿlized
; \

85 
googË
::
št32
 
v”bo£_Ëv–__
 = (
v”bo£Ëv–
); \

86 (*
vloÿl__
 >ğ
v”bo£_Ëv–__
) && \

87 ((
vloÿl__
 !ğ&
googË
::
kLogS™eUnš™Ÿlized
) || \

88 (
googË
::
	`In™VLOG3__
(&
vloÿl__
, &
FLAGS_v
, \

89 
__FILE__
, 
v”bo£_Ëv–__
))); })

	)

93 
	#VLOG_IS_ON
(
v”bo£Ëv–
è(
FLAGS_v
 >ğ(v”bo£Ëv–))

	)

104 
GOOGLE_GLOG_DLL_DECL
 
S‘VLOGLev–
(cÚ¡ * 
moduË_·‰”n
,

105 
log_Ëv–
);

113 
googË
::
št32
 
kLogS™eUnš™Ÿlized
;

123 
GOOGLE_GLOG_DLL_DECL
 
boŞ
 
In™VLOG3__
(

124 
googË
::
št32
** 
s™e_æag
,

125 
googË
::
št32
* 
s™e_deçuÉ
,

126 cÚ¡ * 
âame
,

127 
googË
::
št32
 
v”bo£_Ëv–
);

	@/usr/include/inttypes.h

22 #iâdeà
_INTTYPES_H


23 
	#_INTTYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	~<¡dšt.h
>

30 #iâdeà
____gwch¬_t_defšed


31 #ifdeà
__ılu¥lus


32 
	#__gwch¬_t
 
wch¬_t


	)

33 #–ià
defšed
 
__WCHAR_TYPE__


34 
__WCHAR_TYPE__
 
	t__gwch¬_t
;

36 
	#__Ãed_wch¬_t


	)

37 
	~<¡ddef.h
>

38 
wch¬_t
 
	t__gwch¬_t
;

40 
	#____gwch¬_t_defšed
 1

	)

43 #ià
__WORDSIZE
 == 64

44 
	#__PRI64_PREFIX
 "l"

	)

45 
	#__PRIPTR_PREFIX
 "l"

	)

47 
	#__PRI64_PREFIX
 "Î"

	)

48 
	#__PRIPTR_PREFIX


	)

54 
	#PRId8
 "d"

	)

55 
	#PRId16
 "d"

	)

56 
	#PRId32
 "d"

	)

57 
	#PRId64
 
__PRI64_PREFIX
 "d"

	)

59 
	#PRIdLEAST8
 "d"

	)

60 
	#PRIdLEAST16
 "d"

	)

61 
	#PRIdLEAST32
 "d"

	)

62 
	#PRIdLEAST64
 
__PRI64_PREFIX
 "d"

	)

64 
	#PRIdFAST8
 "d"

	)

65 
	#PRIdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

66 
	#PRIdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

67 
	#PRIdFAST64
 
__PRI64_PREFIX
 "d"

	)

70 
	#PRIi8
 "i"

	)

71 
	#PRIi16
 "i"

	)

72 
	#PRIi32
 "i"

	)

73 
	#PRIi64
 
__PRI64_PREFIX
 "i"

	)

75 
	#PRIiLEAST8
 "i"

	)

76 
	#PRIiLEAST16
 "i"

	)

77 
	#PRIiLEAST32
 "i"

	)

78 
	#PRIiLEAST64
 
__PRI64_PREFIX
 "i"

	)

80 
	#PRIiFAST8
 "i"

	)

81 
	#PRIiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

82 
	#PRIiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

83 
	#PRIiFAST64
 
__PRI64_PREFIX
 "i"

	)

86 
	#PRIo8
 "o"

	)

87 
	#PRIo16
 "o"

	)

88 
	#PRIo32
 "o"

	)

89 
	#PRIo64
 
__PRI64_PREFIX
 "o"

	)

91 
	#PRIoLEAST8
 "o"

	)

92 
	#PRIoLEAST16
 "o"

	)

93 
	#PRIoLEAST32
 "o"

	)

94 
	#PRIoLEAST64
 
__PRI64_PREFIX
 "o"

	)

96 
	#PRIoFAST8
 "o"

	)

97 
	#PRIoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

98 
	#PRIoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

99 
	#PRIoFAST64
 
__PRI64_PREFIX
 "o"

	)

102 
	#PRIu8
 "u"

	)

103 
	#PRIu16
 "u"

	)

104 
	#PRIu32
 "u"

	)

105 
	#PRIu64
 
__PRI64_PREFIX
 "u"

	)

107 
	#PRIuLEAST8
 "u"

	)

108 
	#PRIuLEAST16
 "u"

	)

109 
	#PRIuLEAST32
 "u"

	)

110 
	#PRIuLEAST64
 
__PRI64_PREFIX
 "u"

	)

112 
	#PRIuFAST8
 "u"

	)

113 
	#PRIuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

114 
	#PRIuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

115 
	#PRIuFAST64
 
__PRI64_PREFIX
 "u"

	)

118 
	#PRIx8
 "x"

	)

119 
	#PRIx16
 "x"

	)

120 
	#PRIx32
 "x"

	)

121 
	#PRIx64
 
__PRI64_PREFIX
 "x"

	)

123 
	#PRIxLEAST8
 "x"

	)

124 
	#PRIxLEAST16
 "x"

	)

125 
	#PRIxLEAST32
 "x"

	)

126 
	#PRIxLEAST64
 
__PRI64_PREFIX
 "x"

	)

128 
	#PRIxFAST8
 "x"

	)

129 
	#PRIxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

130 
	#PRIxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

131 
	#PRIxFAST64
 
__PRI64_PREFIX
 "x"

	)

134 
	#PRIX8
 "X"

	)

135 
	#PRIX16
 "X"

	)

136 
	#PRIX32
 "X"

	)

137 
	#PRIX64
 
__PRI64_PREFIX
 "X"

	)

139 
	#PRIXLEAST8
 "X"

	)

140 
	#PRIXLEAST16
 "X"

	)

141 
	#PRIXLEAST32
 "X"

	)

142 
	#PRIXLEAST64
 
__PRI64_PREFIX
 "X"

	)

144 
	#PRIXFAST8
 "X"

	)

145 
	#PRIXFAST16
 
__PRIPTR_PREFIX
 "X"

	)

146 
	#PRIXFAST32
 
__PRIPTR_PREFIX
 "X"

	)

147 
	#PRIXFAST64
 
__PRI64_PREFIX
 "X"

	)

151 
	#PRIdMAX
 
__PRI64_PREFIX
 "d"

	)

152 
	#PRIiMAX
 
__PRI64_PREFIX
 "i"

	)

153 
	#PRIoMAX
 
__PRI64_PREFIX
 "o"

	)

154 
	#PRIuMAX
 
__PRI64_PREFIX
 "u"

	)

155 
	#PRIxMAX
 
__PRI64_PREFIX
 "x"

	)

156 
	#PRIXMAX
 
__PRI64_PREFIX
 "X"

	)

160 
	#PRIdPTR
 
__PRIPTR_PREFIX
 "d"

	)

161 
	#PRIiPTR
 
__PRIPTR_PREFIX
 "i"

	)

162 
	#PRIoPTR
 
__PRIPTR_PREFIX
 "o"

	)

163 
	#PRIuPTR
 
__PRIPTR_PREFIX
 "u"

	)

164 
	#PRIxPTR
 
__PRIPTR_PREFIX
 "x"

	)

165 
	#PRIXPTR
 
__PRIPTR_PREFIX
 "X"

	)

171 
	#SCNd8
 "hhd"

	)

172 
	#SCNd16
 "hd"

	)

173 
	#SCNd32
 "d"

	)

174 
	#SCNd64
 
__PRI64_PREFIX
 "d"

	)

176 
	#SCNdLEAST8
 "hhd"

	)

177 
	#SCNdLEAST16
 "hd"

	)

178 
	#SCNdLEAST32
 "d"

	)

179 
	#SCNdLEAST64
 
__PRI64_PREFIX
 "d"

	)

181 
	#SCNdFAST8
 "hhd"

	)

182 
	#SCNdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

183 
	#SCNdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

184 
	#SCNdFAST64
 
__PRI64_PREFIX
 "d"

	)

187 
	#SCNi8
 "hhi"

	)

188 
	#SCNi16
 "hi"

	)

189 
	#SCNi32
 "i"

	)

190 
	#SCNi64
 
__PRI64_PREFIX
 "i"

	)

192 
	#SCNiLEAST8
 "hhi"

	)

193 
	#SCNiLEAST16
 "hi"

	)

194 
	#SCNiLEAST32
 "i"

	)

195 
	#SCNiLEAST64
 
__PRI64_PREFIX
 "i"

	)

197 
	#SCNiFAST8
 "hhi"

	)

198 
	#SCNiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

199 
	#SCNiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

200 
	#SCNiFAST64
 
__PRI64_PREFIX
 "i"

	)

203 
	#SCNu8
 "hhu"

	)

204 
	#SCNu16
 "hu"

	)

205 
	#SCNu32
 "u"

	)

206 
	#SCNu64
 
__PRI64_PREFIX
 "u"

	)

208 
	#SCNuLEAST8
 "hhu"

	)

209 
	#SCNuLEAST16
 "hu"

	)

210 
	#SCNuLEAST32
 "u"

	)

211 
	#SCNuLEAST64
 
__PRI64_PREFIX
 "u"

	)

213 
	#SCNuFAST8
 "hhu"

	)

214 
	#SCNuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

215 
	#SCNuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

216 
	#SCNuFAST64
 
__PRI64_PREFIX
 "u"

	)

219 
	#SCNo8
 "hho"

	)

220 
	#SCNo16
 "ho"

	)

221 
	#SCNo32
 "o"

	)

222 
	#SCNo64
 
__PRI64_PREFIX
 "o"

	)

224 
	#SCNoLEAST8
 "hho"

	)

225 
	#SCNoLEAST16
 "ho"

	)

226 
	#SCNoLEAST32
 "o"

	)

227 
	#SCNoLEAST64
 
__PRI64_PREFIX
 "o"

	)

229 
	#SCNoFAST8
 "hho"

	)

230 
	#SCNoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

231 
	#SCNoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

232 
	#SCNoFAST64
 
__PRI64_PREFIX
 "o"

	)

235 
	#SCNx8
 "hhx"

	)

236 
	#SCNx16
 "hx"

	)

237 
	#SCNx32
 "x"

	)

238 
	#SCNx64
 
__PRI64_PREFIX
 "x"

	)

240 
	#SCNxLEAST8
 "hhx"

	)

241 
	#SCNxLEAST16
 "hx"

	)

242 
	#SCNxLEAST32
 "x"

	)

243 
	#SCNxLEAST64
 
__PRI64_PREFIX
 "x"

	)

245 
	#SCNxFAST8
 "hhx"

	)

246 
	#SCNxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

247 
	#SCNxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

248 
	#SCNxFAST64
 
__PRI64_PREFIX
 "x"

	)

252 
	#SCNdMAX
 
__PRI64_PREFIX
 "d"

	)

253 
	#SCNiMAX
 
__PRI64_PREFIX
 "i"

	)

254 
	#SCNoMAX
 
__PRI64_PREFIX
 "o"

	)

255 
	#SCNuMAX
 
__PRI64_PREFIX
 "u"

	)

256 
	#SCNxMAX
 
__PRI64_PREFIX
 "x"

	)

259 
	#SCNdPTR
 
__PRIPTR_PREFIX
 "d"

	)

260 
	#SCNiPTR
 
__PRIPTR_PREFIX
 "i"

	)

261 
	#SCNoPTR
 
__PRIPTR_PREFIX
 "o"

	)

262 
	#SCNuPTR
 
__PRIPTR_PREFIX
 "u"

	)

263 
	#SCNxPTR
 
__PRIPTR_PREFIX
 "x"

	)

266 
	g__BEGIN_DECLS


268 #ià
__WORDSIZE
 == 64

273 
	mquÙ
;

274 
	m»m
;

275 } 
	timaxdiv_t
;

282 
__ex‹nsiÚ__
 
	mquÙ
;

283 
__ex‹nsiÚ__
 
	m»m
;

284 } 
	timaxdiv_t
;

290 
štmax_t
 
	$imaxabs
 (
štmax_t
 
__n
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

293 
imaxdiv_t
 
	$imaxdiv
 (
štmax_t
 
__num”
, iÁmax_ˆ
__d’om
)

294 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

297 
štmax_t
 
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

298 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

301 
uštmax_t
 
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

302 ** 
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

305 
štmax_t
 
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

306 
__gwch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

307 
__THROW
;

310 
uštmax_t
 
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

311 
__gwch¬_t
 ** 
__»¡riù
 
__’d±r
, 
__ba£
)

312 
__THROW
;

314 #ifdeà
__USE_EXTERN_INLINES


316 #ià
__WORDSIZE
 == 64

318 
	$__¡¹Ş_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

319 **
__»¡riù
 
__’d±r
,

320 
__ba£
, 
__group
)

321 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

323 
__ex‹º_šlše
 
štmax_t


324 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

325 
ba£
))

327  
	`__¡¹Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

328 
	}
}

330 
	$__¡¹oul_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

331 ** 
__»¡riù
 
__’d±r
,

332 
__ba£
, 
__group
)

333 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

335 
__ex‹º_šlše
 
uštmax_t


336 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

337 
ba£
))

339  
	`__¡¹oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

340 
	}
}

342 
	$__wc¡Ş_š‹º®
 (cÚ¡ 
__gwch¬_t
 * 
__»¡riù
 
__ÅŒ
,

343 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

344 
__ba£
, 
__group
)

345 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

347 
__ex‹º_šlše
 
štmax_t


348 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

349 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

351  
	`__wc¡Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

352 
	}
}

354 
	$__wc¡oul_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

355 
__»¡riù
 
__ÅŒ
,

356 
__gwch¬_t
 **

357 
__»¡riù
 
__’d±r
,

358 
__ba£
, 
__group
)

359 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

361 
__ex‹º_šlše
 
uštmax_t


362 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

363 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

365  
	`__wc¡oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

366 
	}
}

370 
__ex‹nsiÚ__


371 
	$__¡¹Şl_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

372 **
__»¡riù
 
__’d±r
,

373 
__ba£
, 
__group
)

374 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

376 
__ex‹º_šlše
 
štmax_t


377 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

378 
ba£
))

380  
	`__¡¹Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

381 
	}
}

383 
__ex‹nsiÚ__


384 
	$__¡¹ouÎ_š‹º®
 (const *

385 
__»¡riù
 
__ÅŒ
,

387 
__»¡riù
 
__’d±r
,

388 
__ba£
,

389 
__group
)

390 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

392 
__ex‹º_šlše
 
uštmax_t


393 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

394 
ba£
))

396  
	`__¡¹ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

397 
	}
}

399 
__ex‹nsiÚ__


400 
	$__wc¡Şl_š‹º®
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

401 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

402 
__ba£
, 
__group
)

403 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

405 
__ex‹º_šlše
 
štmax_t


406 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

407 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

409  
	`__wc¡Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

410 
	}
}

413 
__ex‹nsiÚ__


414 
	$__wc¡ouÎ_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

415 
__»¡riù
 
__ÅŒ
,

416 
__gwch¬_t
 **

417 
__»¡riù
 
__’d±r
,

418 
__ba£
,

419 
__group
)

420 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

422 
__ex‹º_šlše
 
uštmax_t


423 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

424 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

426  
	`__wc¡ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

427 
	}
}

432 
	g__END_DECLS


	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

26 
	~<b™s/libc-h—d”-¡¬t.h
>

27 
	~<b™s/ty³s.h
>

28 
	~<b™s/wch¬.h
>

29 
	~<b™s/wÜdsize.h
>

34 
	~<b™s/¡dšt-šŠ.h
>

37 
	~<b™s/¡dšt-ušŠ.h
>

43 sigÃd 
	tšt_Ëa¡8_t
;

44 
	tšt_Ëa¡16_t
;

45 
	tšt_Ëa¡32_t
;

46 #ià
__WORDSIZE
 == 64

47 
	tšt_Ëa¡64_t
;

49 
__ex‹nsiÚ__


50 
	tšt_Ëa¡64_t
;

54 
	tušt_Ëa¡8_t
;

55 
	tušt_Ëa¡16_t
;

56 
	tušt_Ëa¡32_t
;

57 #ià
__WORDSIZE
 == 64

58 
	tušt_Ëa¡64_t
;

60 
__ex‹nsiÚ__


61 
	tušt_Ëa¡64_t
;

68 sigÃd 
	tšt_ç¡8_t
;

69 #ià
__WORDSIZE
 == 64

70 
	tšt_ç¡16_t
;

71 
	tšt_ç¡32_t
;

72 
	tšt_ç¡64_t
;

74 
	tšt_ç¡16_t
;

75 
	tšt_ç¡32_t
;

76 
__ex‹nsiÚ__


77 
	tšt_ç¡64_t
;

81 
	tušt_ç¡8_t
;

82 #ià
__WORDSIZE
 == 64

83 
	tušt_ç¡16_t
;

84 
	tušt_ç¡32_t
;

85 
	tušt_ç¡64_t
;

87 
	tušt_ç¡16_t
;

88 
	tušt_ç¡32_t
;

89 
__ex‹nsiÚ__


90 
	tušt_ç¡64_t
;

95 #ià
__WORDSIZE
 == 64

96 #iâdeà
__šŒ_t_defšed


97 
	tšŒ_t
;

98 
	#__šŒ_t_defšed


	)

100 
	tušŒ_t
;

102 #iâdeà
__šŒ_t_defšed


103 
	tšŒ_t
;

104 
	#__šŒ_t_defšed


	)

106 
	tušŒ_t
;

111 
__štmax_t
 
	tštmax_t
;

112 
__uštmax_t
 
	tuštmax_t
;

115 #ià
__WORDSIZE
 == 64

116 
	#__INT64_C
(
c
èø## 
L


	)

117 
	#__UINT64_C
(
c
èø## 
UL


	)

119 
	#__INT64_C
(
c
èø## 
LL


	)

120 
	#__UINT64_C
(
c
èø## 
ULL


	)

126 
	#INT8_MIN
 (-128)

	)

127 
	#INT16_MIN
 (-32767-1)

	)

128 
	#INT32_MIN
 (-2147483647-1)

	)

129 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

131 
	#INT8_MAX
 (127)

	)

132 
	#INT16_MAX
 (32767)

	)

133 
	#INT32_MAX
 (2147483647)

	)

134 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

137 
	#UINT8_MAX
 (255)

	)

138 
	#UINT16_MAX
 (65535)

	)

139 
	#UINT32_MAX
 (4294967295U)

	)

140 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

144 
	#INT_LEAST8_MIN
 (-128)

	)

145 
	#INT_LEAST16_MIN
 (-32767-1)

	)

146 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

147 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

149 
	#INT_LEAST8_MAX
 (127)

	)

150 
	#INT_LEAST16_MAX
 (32767)

	)

151 
	#INT_LEAST32_MAX
 (2147483647)

	)

152 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

155 
	#UINT_LEAST8_MAX
 (255)

	)

156 
	#UINT_LEAST16_MAX
 (65535)

	)

157 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

158 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

162 
	#INT_FAST8_MIN
 (-128)

	)

163 #ià
__WORDSIZE
 == 64

164 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

165 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

167 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

168 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

170 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

172 
	#INT_FAST8_MAX
 (127)

	)

173 #ià
__WORDSIZE
 == 64

174 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

175 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

177 
	#INT_FAST16_MAX
 (2147483647)

	)

178 
	#INT_FAST32_MAX
 (2147483647)

	)

180 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

183 
	#UINT_FAST8_MAX
 (255)

	)

184 #ià
__WORDSIZE
 == 64

185 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

186 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

188 
	#UINT_FAST16_MAX
 (4294967295U)

	)

189 
	#UINT_FAST32_MAX
 (4294967295U)

	)

191 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

195 #ià
__WORDSIZE
 == 64

196 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

197 
	#INTPTR_MAX
 (9223372036854775807L)

	)

198 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

200 
	#INTPTR_MIN
 (-2147483647-1)

	)

201 
	#INTPTR_MAX
 (2147483647)

	)

202 
	#UINTPTR_MAX
 (4294967295U)

	)

207 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

209 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

218 #ià
__WORDSIZE
 == 64

219 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

220 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

222 #ià
__WORDSIZE32_PTRDIFF_LONG


223 
	#PTRDIFF_MIN
 (-2147483647L-1)

	)

224 
	#PTRDIFF_MAX
 (2147483647L)

	)

226 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

227 
	#PTRDIFF_MAX
 (2147483647)

	)

232 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

233 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

236 #ià
__WORDSIZE
 == 64

237 
	#SIZE_MAX
 (18446744073709551615UL)

	)

239 #ià
__WORDSIZE32_SIZE_ULONG


240 
	#SIZE_MAX
 (4294967295UL)

	)

242 
	#SIZE_MAX
 (4294967295U)

	)

247 #iâdeà
WCHAR_MIN


249 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

250 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

254 
	#WINT_MIN
 (0u)

	)

255 
	#WINT_MAX
 (4294967295u)

	)

258 
	#INT8_C
(
c
è
	)
c

259 
	#INT16_C
(
c
è
	)
c

260 
	#INT32_C
(
c
è
	)
c

261 #ià
__WORDSIZE
 == 64

262 
	#INT64_C
(
c
èø## 
L


	)

264 
	#INT64_C
(
c
èø## 
LL


	)

268 
	#UINT8_C
(
c
è
	)
c

269 
	#UINT16_C
(
c
è
	)
c

270 
	#UINT32_C
(
c
èø## 
U


	)

271 #ià
__WORDSIZE
 == 64

272 
	#UINT64_C
(
c
èø## 
UL


	)

274 
	#UINT64_C
(
c
èø## 
ULL


	)

278 #ià
__WORDSIZE
 == 64

279 
	#INTMAX_C
(
c
èø## 
L


	)

280 
	#UINTMAX_C
(
c
èø## 
UL


	)

282 
	#INTMAX_C
(
c
èø## 
LL


	)

283 
	#UINTMAX_C
(
c
èø## 
ULL


	)

286 #ià
__GLIBC_USE
 (
IEC_60559_BFP_EXT
)

288 
	#INT8_WIDTH
 8

	)

289 
	#UINT8_WIDTH
 8

	)

290 
	#INT16_WIDTH
 16

	)

291 
	#UINT16_WIDTH
 16

	)

292 
	#INT32_WIDTH
 32

	)

293 
	#UINT32_WIDTH
 32

	)

294 
	#INT64_WIDTH
 64

	)

295 
	#UINT64_WIDTH
 64

	)

297 
	#INT_LEAST8_WIDTH
 8

	)

298 
	#UINT_LEAST8_WIDTH
 8

	)

299 
	#INT_LEAST16_WIDTH
 16

	)

300 
	#UINT_LEAST16_WIDTH
 16

	)

301 
	#INT_LEAST32_WIDTH
 32

	)

302 
	#UINT_LEAST32_WIDTH
 32

	)

303 
	#INT_LEAST64_WIDTH
 64

	)

304 
	#UINT_LEAST64_WIDTH
 64

	)

306 
	#INT_FAST8_WIDTH
 8

	)

307 
	#UINT_FAST8_WIDTH
 8

	)

308 
	#INT_FAST16_WIDTH
 
__WORDSIZE


	)

309 
	#UINT_FAST16_WIDTH
 
__WORDSIZE


	)

310 
	#INT_FAST32_WIDTH
 
__WORDSIZE


	)

311 
	#UINT_FAST32_WIDTH
 
__WORDSIZE


	)

312 
	#INT_FAST64_WIDTH
 64

	)

313 
	#UINT_FAST64_WIDTH
 64

	)

315 
	#INTPTR_WIDTH
 
__WORDSIZE


	)

316 
	#UINTPTR_WIDTH
 
__WORDSIZE


	)

318 
	#INTMAX_WIDTH
 64

	)

319 
	#UINTMAX_WIDTH
 64

	)

321 
	#PTRDIFF_WIDTH
 
__WORDSIZE


	)

322 
	#SIG_ATOMIC_WIDTH
 32

	)

323 
	#SIZE_WIDTH
 
__WORDSIZE


	)

324 
	#WCHAR_WIDTH
 32

	)

325 
	#WINT_WIDTH
 32

	)

	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

25 
	~<b™s/libc-h—d”-¡¬t.h
>

28 
	#__Ãed_size_t


	)

29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

31 
	~<¡ddef.h
>

33 
	g__BEGIN_DECLS


35 
	#_STDLIB_H
 1

	)

37 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


39 
	~<b™s/wa™æags.h
>

40 
	~<b™s/wa™¡©us.h
>

43 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (¡©us)

	)

44 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (¡©us)

	)

45 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (¡©us)

	)

46 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (¡©us)

	)

47 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (¡©us)

	)

48 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (¡©us)

	)

49 #ifdeà
__WIFCONTINUED


50 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (¡©us)

	)

55 
	~<b™s/æßŠ.h
>

60 
	mquÙ
;

61 
	m»m
;

62 } 
	tdiv_t
;

65 #iâdeà
__ldiv_t_defšed


68 
	mquÙ
;

69 
	m»m
;

70 } 
	tldiv_t
;

71 
	#__ldiv_t_defšed
 1

	)

74 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


76 
__ex‹nsiÚ__
 struct

78 
	mquÙ
;

79 
	m»m
;

80 } 
	tÎdiv_t
;

81 
	#__Îdiv_t_defšed
 1

	)

86 
	#RAND_MAX
 2147483647

	)

91 
	#EXIT_FAILURE
 1

	)

92 
	#EXIT_SUCCESS
 0

	)

96 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

97 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

101 
	$©of
 (cÚ¡ *
__ÅŒ
)

102 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

104 
	$©oi
 (cÚ¡ *
__ÅŒ
)

105 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

107 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

108 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

110 #ifdeà
__USE_ISOC99


112 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

113 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

117 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

118 **
__»¡riù
 
__’d±r
)

119 
__THROW
 
	`__nÚnuÎ
 ((1));

121 #ifdef 
__USE_ISOC99


123 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

124 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

126 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

127 **
__»¡riù
 
__’d±r
)

128 
__THROW
 
	`__nÚnuÎ
 ((1));

133 #ià
__HAVE_FLOAT16
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

134 
_Flßt16
 
	$¡¹of16
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

135 **
__»¡riù
 
__’d±r
)

136 
__THROW
 
	`__nÚnuÎ
 ((1));

139 #ià
__HAVE_FLOAT32
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

140 
_Flßt32
 
	$¡¹of32
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

141 **
__»¡riù
 
__’d±r
)

142 
__THROW
 
	`__nÚnuÎ
 ((1));

145 #ià
__HAVE_FLOAT64
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

146 
_Flßt64
 
	$¡¹of64
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

147 **
__»¡riù
 
__’d±r
)

148 
__THROW
 
	`__nÚnuÎ
 ((1));

151 #ià
__HAVE_FLOAT128
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

152 
_Flßt128
 
	$¡¹of128
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

153 **
__»¡riù
 
__’d±r
)

154 
__THROW
 
	`__nÚnuÎ
 ((1));

157 #ià
__HAVE_FLOAT32X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

158 
_Flßt32x
 
	$¡¹of32x
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

159 **
__»¡riù
 
__’d±r
)

160 
__THROW
 
	`__nÚnuÎ
 ((1));

163 #ià
__HAVE_FLOAT64X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

164 
_Flßt64x
 
	$¡¹of64x
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

169 #ià
__HAVE_FLOAT128X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

170 
_Flßt128x
 
	$¡¹of128x
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

171 **
__»¡riù
 
__’d±r
)

172 
__THROW
 
	`__nÚnuÎ
 ((1));

176 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

177 **
__»¡riù
 
__’d±r
, 
__ba£
)

178 
__THROW
 
	`__nÚnuÎ
 ((1));

180 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

181 **
__»¡riù
 
__’d±r
, 
__ba£
)

182 
__THROW
 
	`__nÚnuÎ
 ((1));

184 #ifdeà
__USE_MISC


186 
__ex‹nsiÚ__


187 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

191 
__ex‹nsiÚ__


192 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

193 **
__»¡riù
 
__’d±r
, 
__ba£
)

194 
__THROW
 
	`__nÚnuÎ
 ((1));

197 #ifdeà
__USE_ISOC99


199 
__ex‹nsiÚ__


200 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

204 
__ex‹nsiÚ__


205 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

206 **
__»¡riù
 
__’d±r
, 
__ba£
)

207 
__THROW
 
	`__nÚnuÎ
 ((1));

211 #ià
	`__GLIBC_USE
 (
IEC_60559_BFP_EXT
)

212 
	$¡räomd
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ *
__fÜm©
,

213 
__f
)

214 
__THROW
 
	`__nÚnuÎ
 ((3));

216 
	$¡räomf
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ *
__fÜm©
,

217 
__f
)

218 
__THROW
 
	`__nÚnuÎ
 ((3));

220 
	$¡räoml
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ *
__fÜm©
,

221 
__f
)

222 
__THROW
 
	`__nÚnuÎ
 ((3));

225 #ià
__HAVE_FLOAT16
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

226 
	$¡räomf16
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

227 
_Flßt16
 
__f
)

228 
__THROW
 
	`__nÚnuÎ
 ((3));

231 #ià
__HAVE_FLOAT32
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

232 
	$¡räomf32
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

233 
_Flßt32
 
__f
)

234 
__THROW
 
	`__nÚnuÎ
 ((3));

237 #ià
__HAVE_FLOAT64
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

238 
	$¡räomf64
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

239 
_Flßt64
 
__f
)

240 
__THROW
 
	`__nÚnuÎ
 ((3));

243 #ià
__HAVE_FLOAT128
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

244 
	$¡räomf128
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

245 
_Flßt128
 
__f
)

246 
__THROW
 
	`__nÚnuÎ
 ((3));

249 #ià
__HAVE_FLOAT32X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

250 
	$¡räomf32x
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

251 
_Flßt32x
 
__f
)

252 
__THROW
 
	`__nÚnuÎ
 ((3));

255 #ià
__HAVE_FLOAT64X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

256 
	$¡räomf64x
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

257 
_Flßt64x
 
__f
)

258 
__THROW
 
	`__nÚnuÎ
 ((3));

261 #ià
__HAVE_FLOAT128X
 && 
	`__GLIBC_USE
 (
IEC_60559_TYPES_EXT
)

262 
	$¡räomf128x
 (*
__de¡
, 
size_t
 
__size
, cÚ¡ * 
__fÜm©
,

263 
_Flßt128x
 
__f
)

264 
__THROW
 
	`__nÚnuÎ
 ((3));

268 #ifdeà
__USE_GNU


272 
	~<b™s/ty³s/loÿË_t.h
>

274 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

275 **
__»¡riù
 
__’d±r
, 
__ba£
,

276 
loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

278 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

279 **
__»¡riù
 
__’d±r
,

280 
__ba£
, 
loÿË_t
 
__loc
)

281 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

283 
__ex‹nsiÚ__


284 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

285 **
__»¡riù
 
__’d±r
, 
__ba£
,

286 
loÿË_t
 
__loc
)

287 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

289 
__ex‹nsiÚ__


290 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

291 **
__»¡riù
 
__’d±r
,

292 
__ba£
, 
loÿË_t
 
__loc
)

293 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

295 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

296 **
__»¡riù
 
__’d±r
, 
loÿË_t
 
__loc
)

297 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

299 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

300 **
__»¡riù
 
__’d±r
, 
loÿË_t
 
__loc
)

301 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

303 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

304 **
__»¡riù
 
__’d±r
,

305 
loÿË_t
 
__loc
)

306 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

308 #ià
__HAVE_FLOAT16


309 
_Flßt16
 
	$¡¹of16_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

310 **
__»¡riù
 
__’d±r
,

311 
loÿË_t
 
__loc
)

312 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

315 #ià
__HAVE_FLOAT32


316 
_Flßt32
 
	$¡¹of32_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

317 **
__»¡riù
 
__’d±r
,

318 
loÿË_t
 
__loc
)

319 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

322 #ià
__HAVE_FLOAT64


323 
_Flßt64
 
	$¡¹of64_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

324 **
__»¡riù
 
__’d±r
,

325 
loÿË_t
 
__loc
)

326 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

329 #ià
__HAVE_FLOAT128


330 
_Flßt128
 
	$¡¹of128_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

331 **
__»¡riù
 
__’d±r
,

332 
loÿË_t
 
__loc
)

333 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

336 #ià
__HAVE_FLOAT32X


337 
_Flßt32x
 
	$¡¹of32x_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

338 **
__»¡riù
 
__’d±r
,

339 
loÿË_t
 
__loc
)

340 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

343 #ià
__HAVE_FLOAT64X


344 
_Flßt64x
 
	$¡¹of64x_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

345 **
__»¡riù
 
__’d±r
,

346 
loÿË_t
 
__loc
)

347 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

350 #ià
__HAVE_FLOAT128X


351 
_Flßt128x
 
	$¡¹of128x_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

352 **
__»¡riù
 
__’d±r
,

353 
loÿË_t
 
__loc
)

354 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

359 #ifdeà
__USE_EXTERN_INLINES


360 
__ex‹º_šlše
 

361 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

363  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

364 
	}
}

365 
__ex‹º_šlše
 

366 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

368  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

369 
	}
}

371 #ifdeà
__USE_ISOC99


372 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

373 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

375  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

376 
	}
}

381 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


385 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

388 
	$a64l
 (cÚ¡ *
__s
)

389 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

393 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


394 
	~<sys/ty³s.h
>

401 
	$¿ndom
 (è
__THROW
;

404 
	$¤ªdom
 (
__£ed
è
__THROW
;

410 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

411 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

415 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

418 #ifdeà
__USE_MISC


423 
	s¿ndom_d©a


425 
št32_t
 *
åŒ
;

426 
št32_t
 *
½Œ
;

427 
št32_t
 *
¡©e
;

428 
¿nd_ty³
;

429 
¿nd_deg
;

430 
¿nd_£p
;

431 
št32_t
 *
’d_±r
;

434 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

435 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

437 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

438 
__THROW
 
	`__nÚnuÎ
 ((2));

440 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

441 
size_t
 
__¡©–’
,

442 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

443 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

445 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

446 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

447 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

453 
	$¿nd
 (è
__THROW
;

455 
	$¤ªd
 (
__£ed
è
__THROW
;

457 #ifdeà
__USE_POSIX199506


459 
	$¿nd_r
 (*
__£ed
è
__THROW
;

463 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


467 
	$d¿nd48
 (è
__THROW
;

468 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

471 
	$Ìªd48
 (è
__THROW
;

472 
	$Äªd48
 (
__xsubi
[3])

473 
__THROW
 
	`__nÚnuÎ
 ((1));

476 
	$m¿nd48
 (è
__THROW
;

477 
	$j¿nd48
 (
__xsubi
[3])

478 
__THROW
 
	`__nÚnuÎ
 ((1));

481 
	$¤ªd48
 (
__£edv®
è
__THROW
;

482 *
	$£ed48
 (
__£ed16v
[3])

483 
__THROW
 
	`__nÚnuÎ
 ((1));

484 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

486 #ifdeà
__USE_MISC


490 
	sd¿nd48_d©a


492 
__x
[3];

493 
__Şd_x
[3];

494 
__c
;

495 
__š™
;

496 
__ex‹nsiÚ__
 
__a
;

501 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

502 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

503 
	$”ªd48_r
 (
__xsubi
[3],

504 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

505 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

508 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

509 *
__»¡riù
 
__»suÉ
)

510 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

511 
	$Äªd48_r
 (
__xsubi
[3],

512 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

513 *
__»¡riù
 
__»suÉ
)

514 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

517 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

518 *
__»¡riù
 
__»suÉ
)

519 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

520 
	$j¿nd48_r
 (
__xsubi
[3],

521 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

522 *
__»¡riù
 
__»suÉ
)

523 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

526 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

527 
__THROW
 
	`__nÚnuÎ
 ((2));

529 
	$£ed48_r
 (
__£ed16v
[3],

530 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

532 
	$lcÚg48_r
 (
__·¿m
[7],

533 
d¿nd48_d©a
 *
__bufãr
)

534 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

539 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

541 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

542 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

549 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

550 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

552 #ifdeà
__USE_GNU


558 *
	$»®loÿ¼ay
 (*
__±r
, 
size_t
 
__nmemb
, size_ˆ
__size
)

559 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

563 
	$ä“
 (*
__±r
è
__THROW
;

565 #ifdeà
__USE_MISC


566 
	~<®loÿ.h
>

569 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

570 || 
defšed
 
__USE_MISC


572 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

575 #ifdeà
__USE_XOPEN2K


577 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

578 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

581 #ifdeà
__USE_ISOC11


583 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

584 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

588 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

592 
	$©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

594 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


596 #ifdeà
__ılu¥lus


597 "C++" 
	$©_quick_ex™
 ((*
__func
) ())

598 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

600 
	$©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

604 #ifdef 
__USE_MISC


607 
	$Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

608 
__THROW
 
	`__nÚnuÎ
 ((1));

614 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

616 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


620 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

623 #ifdeà
__USE_ISOC99


626 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

631 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

633 #ifdeà
__USE_GNU


636 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

637 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

640 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


644 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

647 #ifdeà
__USE_XOPEN2K


650 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

651 
__THROW
 
	`__nÚnuÎ
 ((2));

654 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

657 #ifdef 
__USE_MISC


661 
	$ş—»nv
 (è
__THROW
;

665 #ià
defšed
 
__USE_MISC
 \

666 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

672 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

675 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


684 #iâdeà
__USE_FILE_OFFSET64


685 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

687 #ifdeà
__REDIRECT


688 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

689 
	`__nÚnuÎ
 ((1)è
__wur
;

691 
	#mk¡emp
 
mk¡emp64


	)

694 #ifdeà
__USE_LARGEFILE64


695 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

699 #ifdeà
__USE_MISC


706 #iâdeà
__USE_FILE_OFFSET64


707 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

709 #ifdeà
__REDIRECT


710 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

711 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

713 
	#mk¡emps
 
mk¡emps64


	)

716 #ifdeà
__USE_LARGEFILE64


717 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

718 
	`__nÚnuÎ
 ((1)è
__wur
;

722 #ifdeà
__USE_XOPEN2K8


728 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

731 #ifdeà
__USE_GNU


738 #iâdeà
__USE_FILE_OFFSET64


739 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

741 #ifdeà
__REDIRECT


742 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

743 
	`__nÚnuÎ
 ((1)è
__wur
;

745 
	#mko¡emp
 
mko¡emp64


	)

748 #ifdeà
__USE_LARGEFILE64


749 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

758 #iâdeà
__USE_FILE_OFFSET64


759 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

760 
	`__nÚnuÎ
 ((1)è
__wur
;

762 #ifdeà
__REDIRECT


763 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

764 
__æags
), 
mko¡emps64
)

765 
	`__nÚnuÎ
 ((1)è
__wur
;

767 
	#mko¡emps
 
mko¡emps64


	)

770 #ifdeà
__USE_LARGEFILE64


771 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

772 
	`__nÚnuÎ
 ((1)è
__wur
;

781 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

784 #ifdef 
__USE_GNU


787 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

788 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

791 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


797 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

798 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

803 #iâdeà
__COMPAR_FN_T


804 
	#__COMPAR_FN_T


	)

805 (*
	t__com·r_â_t
) (const *, const *);

807 #ifdef 
__USE_GNU


808 
__com·r_â_t
 
	tcom·risÚ_â_t
;

811 #ifdeà
__USE_GNU


812 (*
	t__com·r_d_â_t
) (const *, const *, *);

817 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

818 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

819 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

821 #ifdeà
__USE_EXTERN_INLINES


822 
	~<b™s/¡dlib-b£¬ch.h
>

827 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

828 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

829 #ifdeà
__USE_GNU


830 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

831 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

832 
	`__nÚnuÎ
 ((1, 4));

837 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

838 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

840 #ifdeà
__USE_ISOC99


841 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

842 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

849 
div_t
 
	$div
 (
__num”
, 
__d’om
)

850 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

851 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

852 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

854 #ifdeà
__USE_ISOC99


855 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

856 
__d’om
)

857 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

861 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

862 || 
defšed
 
__USE_MISC


869 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

870 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

875 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

876 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

881 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

882 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

885 #ifdeà
__USE_MISC


887 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

888 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

889 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

890 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

891 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

892 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

893 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

894 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

899 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

900 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

901 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

902 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

903 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

904 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

906 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

907 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

908 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

909 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

910 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

911 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

912 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

913 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

919 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

922 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

923 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

926 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

930 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

931 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

933 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

934 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

935 
__THROW
;

938 #ifdeà
__USE_MISC


943 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

947 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


954 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

955 *cÚ¡ *
__»¡riù
 
__tok’s
,

956 **
__»¡riù
 
__v®u•
)

957 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

961 #ifdeà
__USE_XOPEN


963 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

969 #ifdeà
__USE_XOPEN2KXSI


971 
	$posix_İ’±
 (
__oæag
è
__wur
;

974 #ifdeà
__USE_XOPEN_EXTENDED


979 
	$g¿Á±
 (
__fd
è
__THROW
;

983 
	$uÆock±
 (
__fd
è
__THROW
;

988 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

991 #ifdeà
__USE_GNU


995 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

996 
__THROW
 
	`__nÚnuÎ
 ((2));

999 
	`g‘±
 ();

1002 #ifdeà
__USE_MISC


1006 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

1007 
__THROW
 
	`__nÚnuÎ
 ((1));

1010 #ià
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K


1013 
	$‰y¦Ù
 (è
__THROW
;

1016 
	~<b™s/¡dlib-æßt.h
>

1019 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1020 
	~<b™s/¡dlib.h
>

1022 #ifdeà
__LDBL_COMPAT


1023 
	~<b™s/¡dlib-ldbl.h
>

1026 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

26 
	~<b™s/libc-h—d”-¡¬t.h
>

28 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

36 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

37 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

42 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

43 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

46 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

47 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

52 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


53 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

54 
__c
, 
size_t
 
__n
)

55 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

60 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

63 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

64 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

67 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


70 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

71 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

72 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

75 #ifdeà
__OPTIMIZE__


76 
__ex‹º_®ways_šlše
 *

77 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


79  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

82 
__ex‹º_®ways_šlše
 const *

83 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


85  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

88 
	}
}

90 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

91 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

94 #ifdeà
__USE_GNU


97 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


98 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

99 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

100 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

101 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

103 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

104 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

108 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


109 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

110 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

111 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

112 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

114 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

121 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

122 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

124 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

125 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

129 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

132 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

133 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

136 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

137 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

139 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

140 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

143 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

144 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

146 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

147 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

148 
__THROW
 
	`__nÚnuÎ
 ((2));

150 #ifdeà
__USE_XOPEN2K8


152 
	~<b™s/ty³s/loÿË_t.h
>

155 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
loÿË_t
 
__l
)

156 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

159 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

160 
loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

163 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8
 \

164 || 
	$__GLIBC_USE
 (
LIB_EXT2
))

166 *
	$¡rdup
 (cÚ¡ *
__s
)

167 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

173 #ià
defšed
 
__USE_XOPEN2K8
 || 
	`__GLIBC_USE
 (
LIB_EXT2
)

174 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

175 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

178 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


180 
	#¡rdu·
(
s
) \

181 (
__ex‹nsiÚ__
 \

183 cÚ¡ *
__Şd
 = (
s
); \

184 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

185 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

186 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

187 
	}
}))

	)

190 
	#¡ºdu·
(
s
, 
n
) \

191 (
__ex‹nsiÚ__
 \

193 cÚ¡ *
__Şd
 = (
s
); \

194 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

195 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

196 
__Ãw
[
__Ën
] = '\0'; \

197 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

198 }))

	)

202 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


205 *
¡rchr
 (*
__s
, 
__c
)

206 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

207 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

208 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

210 #ifdeà
__OPTIMIZE__


211 
__ex‹º_®ways_šlše
 *

212 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


214  
__butš_¡rchr
 (
__s
, 
__c
);

217 
__ex‹º_®ways_šlše
 const *

218 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


220  
__butš_¡rchr
 (
__s
, 
__c
);

225 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

226 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

229 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


232 *
	`¡¼chr
 (*
__s
, 
__c
)

233 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

234 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

235 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

237 #ifdeà
__OPTIMIZE__


238 
__ex‹º_®ways_šlše
 *

239 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


241  
	`__butš_¡¼chr
 (
__s
, 
__c
);

244 
__ex‹º_®ways_šlše
 const *

245 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


247  
	`__butš_¡¼chr
 (
__s
, 
__c
);

250 
	}
}

252 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

253 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

256 #ifdeà
__USE_GNU


259 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


260 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

261 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

262 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

263 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

265 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

266 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

272 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

273 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

276 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

277 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

279 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


282 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

283 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

284 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

285 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

287 #ifdeà
__OPTIMIZE__


288 
__ex‹º_®ways_šlše
 *

289 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


291  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

294 
__ex‹º_®ways_šlše
 const *

295 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


297  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

300 
	}
}

302 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

303 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

306 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


309 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

310 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

311 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

312 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

314 #ifdeà
__OPTIMIZE__


315 
__ex‹º_®ways_šlše
 *

316 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


318  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

321 
__ex‹º_®ways_šlše
 const *

322 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


324  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

327 
	}
}

329 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

330 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

335 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

336 
__THROW
 
	`__nÚnuÎ
 ((2));

340 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

341 cÚ¡ *
__»¡riù
 
__d–im
,

342 **
__»¡riù
 
__§ve_±r
)

343 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

344 #ifdeà
__USE_POSIX


345 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

346 **
__»¡riù
 
__§ve_±r
)

347 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

350 #ifdeà
__USE_GNU


352 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


353 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

354 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

355 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

356 cÚ¡ *
__ÃedË
)

357 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

359 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

360 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

364 #ifdeà
__USE_GNU


368 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

369 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

370 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

374 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

375 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

376 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

377 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

378 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

379 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

384 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

385 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

387 #ifdef 
__USE_XOPEN2K8


390 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

391 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

396 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

397 #ifdeà
__USE_XOPEN2K


405 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


408 #ifdeà
__REDIRECT_NTH


409 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

410 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

411 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

413 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

414 
__THROW
 
	`__nÚnuÎ
 ((2));

415 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

420 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

421 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

425 #ifdeà
__USE_XOPEN2K8


427 *
	$¡»¼Ü_l
 (
__”ºum
, 
loÿË_t
 
__l
è
__THROW
;

430 #ifdeà
__USE_MISC


431 
	~<¡ršgs.h
>

435 
	$ex¶ic™_bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

439 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

440 cÚ¡ *
__»¡riù
 
__d–im
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

444 #ifdef 
__USE_XOPEN2K8


446 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

449 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

450 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

451 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

452 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

456 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

457 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

458 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

460 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

461 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

464 #ifdef 
__USE_GNU


466 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

467 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

470 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

473 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

475 #iâdeà
ba£Çme


480 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


481 "C++" *
	$ba£Çme
 (*
__f’ame
)

482 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

483 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

484 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

486 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

491 #ià
	`__GNUC_PREREQ
 (3,4)

492 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


494 
	~<b™s/¡ršg_fÜtif›d.h
>

498 
__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


23 
	#_TIME_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 
	#__Ãed_NULL


	)

29 
	~<¡ddef.h
>

33 
	~<b™s/time.h
>

37 
	~<b™s/ty³s/şock_t.h
>

38 
	~<b™s/ty³s/time_t.h
>

39 
	~<b™s/ty³s/¡ruù_tm.h
>

41 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_ISOC11


42 
	~<b™s/ty³s/¡ruù_time¥ec.h
>

45 #ifdeà
__USE_POSIX199309


46 
	~<b™s/ty³s/şockid_t.h
>

47 
	~<b™s/ty³s/tim”_t.h
>

48 
	~<b™s/ty³s/¡ruù_™im”¥ec.h
>

49 
	gsigev’t
;

52 #ifdeà
__USE_XOPEN2K


53 #iâdeà
__pid_t_defšed


54 
__pid_t
 
	tpid_t
;

55 
	#__pid_t_defšed


	)

59 #ifdeà
__USE_XOPEN2K8


60 
	~<b™s/ty³s/loÿË_t.h
>

63 #ifdeà
__USE_ISOC11


65 
	#TIME_UTC
 1

	)

68 
__BEGIN_DECLS


72 
şock_t
 
	$şock
 (è
__THROW
;

75 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

78 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

79 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

82 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

88 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

89 cÚ¡ *
__»¡riù
 
__fÜm©
,

90 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

92 #ifdeà
__USE_XOPEN


95 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

96 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

97 
__THROW
;

100 #ifdeà
__USE_XOPEN2K8


104 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

105 cÚ¡ *
__»¡riù
 
__fÜm©
,

106 cÚ¡ 
tm
 *
__»¡riù
 
__
,

107 
loÿË_t
 
__loc
è
__THROW
;

110 #ifdeà
__USE_GNU


111 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

112 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

113 
loÿË_t
 
__loc
è
__THROW
;

119 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

123 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

125 #ifdeà
__USE_POSIX


128 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

129 
tm
 *
__»¡riù
 
__
è
__THROW
;

133 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

134 
tm
 *
__»¡riù
 
__
è
__THROW
;

139 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

142 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

144 #ifdeà
__USE_POSIX


149 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

150 *
__»¡riù
 
__buf
è
__THROW
;

153 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

154 *
__»¡riù
 
__buf
è
__THROW
;

159 *
__tzÇme
[2];

160 
__daylight
;

161 
__timezÚe
;

164 #ifdef 
__USE_POSIX


166 *
tzÇme
[2];

170 
	$tz£t
 (è
__THROW
;

173 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


174 
daylight
;

175 
timezÚe
;

178 #ifdeà
__USE_MISC


181 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

187 
	#__i¦—p
(
y—r
) \

188 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

191 #ifdeà
__USE_MISC


196 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

199 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

202 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

206 #ifdeà
__USE_POSIX199309


211 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

212 
time¥ec
 *
__»maššg
);

216 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

219 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

222 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

223 
__THROW
;

225 #ifdeà
__USE_XOPEN2K


230 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

231 cÚ¡ 
time¥ec
 *
__»q
,

232 
time¥ec
 *
__»m
);

235 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

240 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

241 
sigev’t
 *
__»¡riù
 
__evp
,

242 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

245 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

248 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

249 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

250 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

253 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

254 
__THROW
;

257 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

261 #ifdeà
__USE_ISOC11


263 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

264 
__THROW
 
	`__nÚnuÎ
 ((1));

268 #ifdeà
__USE_XOPEN_EXTENDED


280 
g‘d©e_”r
;

289 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

292 #ifdeà
__USE_GNU


303 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

304 
tm
 *
__»¡riù
 
__»sbuå
);

307 
__END_DECLS


	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

70 
	#_POSIX2_C_VERSION
 
__POSIX2_THIS_VERSION


	)

74 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

78 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

82 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

86 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

89 #ifdeà
__USE_XOPEN2K8


90 
	#_XOPEN_VERSION
 700

	)

91 #–ià
defšed
 
__USE_XOPEN2K


92 
	#_XOPEN_VERSION
 600

	)

93 #–ià
defšed
 
__USE_UNIX98


94 
	#_XOPEN_VERSION
 500

	)

96 
	#_XOPEN_VERSION
 4

	)

100 
	#_XOPEN_XCU_VERSION
 4

	)

103 
	#_XOPEN_XPG2
 1

	)

104 
	#_XOPEN_XPG3
 1

	)

105 
	#_XOPEN_XPG4
 1

	)

108 
	#_XOPEN_UNIX
 1

	)

111 
	#_XOPEN_CRYPT
 1

	)

115 
	#_XOPEN_ENH_I18N
 1

	)

118 
	#_XOPEN_LEGACY
 1

	)

205 
	~<b™s/posix_İt.h
>

208 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


209 
	~<b™s/’vœÚm’ts.h
>

213 
	#STDIN_FILENO
 0

	)

214 
	#STDOUT_FILENO
 1

	)

215 
	#STDERR_FILENO
 2

	)

220 
	~<b™s/ty³s.h
>

222 #iâdef 
__ssize_t_defšed


223 
__ssize_t
 
	tssize_t
;

224 
	#__ssize_t_defšed


	)

227 
	#__Ãed_size_t


	)

228 
	#__Ãed_NULL


	)

229 
	~<¡ddef.h
>

231 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


234 #iâdeà
__gid_t_defšed


235 
__gid_t
 
	tgid_t
;

236 
	#__gid_t_defšed


	)

239 #iâdeà
__uid_t_defšed


240 
__uid_t
 
	tuid_t
;

241 
	#__uid_t_defšed


	)

244 #iâdeà
__off_t_defšed


245 #iâdeà
__USE_FILE_OFFSET64


246 
__off_t
 
	toff_t
;

248 
__off64_t
 
	toff_t
;

250 
	#__off_t_defšed


	)

252 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


253 
__off64_t
 
	toff64_t
;

254 
	#__off64_t_defšed


	)

257 #iâdeà
__u£cÚds_t_defšed


258 
__u£cÚds_t
 
	tu£cÚds_t
;

259 
	#__u£cÚds_t_defšed


	)

262 #iâdeà
__pid_t_defšed


263 
__pid_t
 
	tpid_t
;

264 
	#__pid_t_defšed


	)

268 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


269 #iâdeà
__šŒ_t_defšed


270 
__šŒ_t
 
	tšŒ_t
;

271 
	#__šŒ_t_defšed


	)

275 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


276 #iâdeà
__sockËn_t_defšed


277 
__sockËn_t
 
	tsockËn_t
;

278 
	#__sockËn_t_defšed


	)

284 
	#R_OK
 4

	)

285 
	#W_OK
 2

	)

286 
	#X_OK
 1

	)

287 
	#F_OK
 0

	)

290 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

292 #ifdeà
__USE_GNU


295 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

296 
__THROW
 
	`__nÚnuÎ
 ((1));

299 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

300 
__THROW
 
	`__nÚnuÎ
 ((1));

303 #ifdeà
__USE_ATFILE


307 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

308 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

313 #iâdef 
_STDIO_H


314 
	#SEEK_SET
 0

	)

315 
	#SEEK_CUR
 1

	)

316 
	#SEEK_END
 2

	)

317 #ifdeà
__USE_GNU


318 
	#SEEK_DATA
 3

	)

319 
	#SEEK_HOLE
 4

	)

323 #ià
defšed
 
__USE_MISC
 && !defšed 
L_SET


325 
	#L_SET
 
SEEK_SET


	)

326 
	#L_INCR
 
SEEK_CUR


	)

327 
	#L_XTND
 
SEEK_END


	)

336 #iâdeà
__USE_FILE_OFFSET64


337 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

339 #ifdeà
__REDIRECT_NTH


340 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

341 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

342 
l£ek64
);

344 
	#l£ek
 
l£ek64


	)

347 #ifdeà
__USE_LARGEFILE64


348 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

349 
__THROW
;

356 
	`şo£
 (
__fd
);

363 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

369 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur
;

371 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


372 #iâdeà
__USE_FILE_OFFSET64


379 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

380 
__off_t
 
__off£t
è
__wur
;

387 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

388 
__off_t
 
__off£t
è
__wur
;

390 #ifdeà
__REDIRECT


391 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

392 
__off64_t
 
__off£t
),

393 
´—d64
è
__wur
;

394 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

395 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

396 
pwr™e64
è
__wur
;

398 
	#´—d
 
´—d64


	)

399 
	#pwr™e
 
pwr™e64


	)

403 #ifdeà
__USE_LARGEFILE64


407 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

408 
__off64_t
 
__off£t
è
__wur
;

411 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

412 
__off64_t
 
__off£t
è
__wur
;

420 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

422 #ifdeà
__USE_GNU


425 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

435 
	$®¬m
 (
__£cÚds
è
__THROW
;

447 
	`¦“p
 (
__£cÚds
);

449 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

450 || 
defšed
 
__USE_MISC


455 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

456 
__THROW
;

463 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

472 
	`·u£
 ();

476 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

477 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

479 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


481 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

486 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

487 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

491 #ifdeà
__USE_ATFILE


494 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

495 
__gid_t
 
__group
, 
__æag
)

496 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

500 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

502 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


504 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

514 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

516 #ifdef 
__USE_GNU


520 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

523 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

524 || 
defšed
 
__USE_MISC


528 *
	$g‘wd
 (*
__buf
)

529 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

534 
	$dup
 (
__fd
è
__THROW
 
__wur
;

537 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

539 #ifdeà
__USE_GNU


542 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

546 **
__’vœÚ
;

547 #ifdeà
__USE_GNU


548 **
’vœÚ
;

554 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

555 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

557 #ifdeà
__USE_XOPEN2K8


560 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

561 
__THROW
 
	`__nÚnuÎ
 ((2));

566 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

567 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

571 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

572 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

576 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

577 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

581 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

582 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

587 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

588 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

590 #ifdeà
__USE_GNU


593 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

594 *cÚ¡ 
__’vp
[])

595 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

599 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


601 
	$niû
 (
__šc
è
__THROW
 
__wur
;

606 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

612 
	~<b™s/cÚâame.h
>

615 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

616 
__THROW
 
	`__nÚnuÎ
 ((1));

619 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

622 
	$syscÚf
 (
__Çme
è
__THROW
;

624 #ifdef 
__USE_POSIX2


626 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

631 
__pid_t
 
	$g‘pid
 (è
__THROW
;

634 
__pid_t
 
	$g‘µid
 (è
__THROW
;

637 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

640 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

641 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


642 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

649 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

651 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


663 
	$£g½
 (è
__THROW
;

670 
__pid_t
 
	$£tsid
 (è
__THROW
;

672 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


674 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

678 
__uid_t
 
	$g‘uid
 (è
__THROW
;

681 
__uid_t
 
	$g‘euid
 (è
__THROW
;

684 
__gid_t
 
	$g‘gid
 (è
__THROW
;

687 
__gid_t
 
	$g‘egid
 (è
__THROW
;

692 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

694 #ifdef 
__USE_GNU


696 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

703 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

705 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


708 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

711 #ifdeà
__USE_XOPEN2K


713 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

720 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

722 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


725 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

728 #ifdeà
__USE_XOPEN2K


730 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

733 #ifdeà
__USE_GNU


736 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

737 
__THROW
;

741 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

742 
__THROW
;

746 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

747 
__THROW
 
__wur
;

751 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

752 
__THROW
 
__wur
;

759 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

761 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

762 || 
defšed
 
__USE_MISC


767 
__pid_t
 
	$vfÜk
 (è
__THROW
;

773 *
	$‰yÇme
 (
__fd
è
__THROW
;

777 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

778 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

782 
	$i§‰y
 (
__fd
è
__THROW
;

784 #ifdeà
__USE_MISC


787 
	$‰y¦Ù
 (è
__THROW
;

792 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

793 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

795 #ifdeà
__USE_ATFILE


798 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

799 cÚ¡ *
__to
, 
__æags
)

800 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

803 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


805 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

806 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

811 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

812 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

813 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

816 #ifdeà
__USE_ATFILE


818 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

819 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

822 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

823 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

824 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

828 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

830 #ifdeà
__USE_ATFILE


832 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

833 
__THROW
 
	`__nÚnuÎ
 ((2));

837 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

841 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

844 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

851 *
	`g‘logš
 ();

852 #ifdeà
__USE_POSIX199506


859 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

862 #ifdef 
__USE_MISC


864 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

868 #ifdef 
__USE_POSIX2


872 
	~<b™s/g‘İt_posix.h
>

876 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


880 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

884 #ià
defšed
 
__USE_MISC


887 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

888 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

892 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

898 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

899 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

900 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

901 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

907 
	$vhªgup
 (è
__THROW
;

910 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

918 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

919 
size_t
 
__off£t
, 
__sÿË
)

920 
__THROW
 
	`__nÚnuÎ
 ((1));

926 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

930 *
	$g‘u£rsh–l
 (è
__THROW
;

931 
	$’du£rsh–l
 (è
__THROW
;

932 
	$£tu£rsh–l
 (è
__THROW
;

938 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

942 #ià
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

945 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

949 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

957 
	`fsync
 (
__fd
);

960 #ifdeà
__USE_GNU


963 
	$syncfs
 (
__fd
è
__THROW
;

967 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


970 
	`g‘ho¡id
 ();

973 
	$sync
 (è
__THROW
;

976 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K


979 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

984 
	$g‘dbËsize
 (è
__THROW
;

990 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


993 #iâdeà
__USE_FILE_OFFSET64


994 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

995 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

997 #ifdeà
__REDIRECT_NTH


998 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

999 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

1000 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1002 
	#Œunÿ‹
 
Œunÿ‹64


	)

1005 #ifdeà
__USE_LARGEFILE64


1006 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1007 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1012 #ià
defšed
 
__USE_POSIX199309
 \

1013 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1016 #iâdeà
__USE_FILE_OFFSET64


1017 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1019 #ifdeà
__REDIRECT_NTH


1020 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1021 
árunÿ‹64
è
__wur
;

1023 
	#árunÿ‹
 
árunÿ‹64


	)

1026 #ifdeà
__USE_LARGEFILE64


1027 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1033 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1034 || 
defšed
 
__USE_MISC


1038 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1044 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1048 #ifdeà
__USE_MISC


1059 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1064 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1076 
	#F_ULOCK
 0

	)

1077 
	#F_LOCK
 1

	)

1078 
	#F_TLOCK
 2

	)

1079 
	#F_TEST
 3

	)

1081 #iâdeà
__USE_FILE_OFFSET64


1082 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1084 #ifdeà
__REDIRECT


1085 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1086 
lockf64
è
__wur
;

1088 
	#lockf
 
lockf64


	)

1091 #ifdeà
__USE_LARGEFILE64


1092 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1097 #ifdeà
__USE_GNU


1102 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1103 (
__ex‹nsiÚ__
 \

1104 ({ 
__»suÉ
; \

1105 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1106 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1107 
__»suÉ
; 
	}
}))

	)

1110 
ssize_t
 
cİy_fe_¿nge
 (
__šfd
, 
__off64_t
 *
__pšoff
,

1111 
__outfd
, 
__off64_t
 *
__poutoff
,

1112 
size_t
 
__Ëngth
, 
__æags
);

1115 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1118 
fd©async
 (
__fdes
);

1124 #ifdef 
__USE_XOPEN


1126 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1127 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1131 
	$’üy±
 (*
__glibc_block
, 
__edæag
)

1132 
__THROW
 
	`__nÚnuÎ
 ((1));

1139 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1140 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1147 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1149 *
	$ù”mid
 (*
__s
è
__THROW
;

1152 *
	`cu£rid
 (*
__s
);

1158 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_XOPEN2K


1159 
	$±h»ad_©fÜk
 ((*
__´•¬e
) (),

1160 (*
__·»Á
) (),

1161 (*
__chd
è()è
__THROW
;

1164 #ifdeà
__USE_MISC


1167 
	$g‘’Œİy
 (*
__bufãr
, 
size_t
 
__Ëngth
è
__wur
;

1171 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1172 
	~<b™s/uni¡d.h
>

1175 
__END_DECLS


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

119 #undeà
__USE_ISOC11


120 #undeà
__USE_ISOC99


121 #undeà
__USE_ISOC95


122 #undeà
__USE_ISOCXX11


123 #undeà
__USE_POSIX


124 #undeà
__USE_POSIX2


125 #undeà
__USE_POSIX199309


126 #undeà
__USE_POSIX199506


127 #undeà
__USE_XOPEN


128 #undeà
__USE_XOPEN_EXTENDED


129 #undeà
__USE_UNIX98


130 #undeà
__USE_XOPEN2K


131 #undeà
__USE_XOPEN2KXSI


132 #undeà
__USE_XOPEN2K8


133 #undeà
__USE_XOPEN2K8XSI


134 #undeà
__USE_LARGEFILE


135 #undeà
__USE_LARGEFILE64


136 #undeà
__USE_FILE_OFFSET64


137 #undeà
__USE_MISC


138 #undeà
__USE_ATFILE


139 #undeà
__USE_GNU


140 #undeà
__USE_FORTIFY_LEVEL


141 #undeà
__KERNEL_STRICT_NAMES


142 #undeà
__GLIBC_USE_DEPRECATED_GETS


146 #iâdeà
_LOOSE_KERNEL_NAMES


147 
	#__KERNEL_STRICT_NAMES


	)

157 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


158 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

159 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

161 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

168 #ià
defšed
 
__şªg_majÜ__
 && defšed 
__şªg_mšÜ__


169 
	#__glibc_şªg_´”eq
(
maj
, 
mš
) \

170 ((
__şªg_majÜ__
 << 16è+ 
__şªg_mšÜ__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

172 
	#__glibc_şªg_´”eq
(
maj
, 
mš
è0

	)

176 
	#__GLIBC_USE
(
F
è
__GLIBC_USE_
 ## 
	)
F

182 #ià(
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE
) \

183 && !
defšed
 
	g_DEFAULT_SOURCE


185 #undeà
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

190 #ifdeà
_GNU_SOURCE


191 #undeà
_ISOC95_SOURCE


192 
	#_ISOC95_SOURCE
 1

	)

193 #undeà
_ISOC99_SOURCE


194 
	#_ISOC99_SOURCE
 1

	)

195 #undeà
_ISOC11_SOURCE


196 
	#_ISOC11_SOURCE
 1

	)

197 #undeà
_POSIX_SOURCE


198 
	#_POSIX_SOURCE
 1

	)

199 #undeà
_POSIX_C_SOURCE


200 
	#_POSIX_C_SOURCE
 200809L

	)

201 #undeà
_XOPEN_SOURCE


202 
	#_XOPEN_SOURCE
 700

	)

203 #undeà
_XOPEN_SOURCE_EXTENDED


204 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

205 #undeà
_LARGEFILE64_SOURCE


206 
	#_LARGEFILE64_SOURCE
 1

	)

207 #undeà
_DEFAULT_SOURCE


208 
	#_DEFAULT_SOURCE
 1

	)

209 #undeà
_ATFILE_SOURCE


210 
	#_ATFILE_SOURCE
 1

	)

215 #ià(
defšed
 
_DEFAULT_SOURCE
 \

216 || (!
defšed
 
	g__STRICT_ANSI__
 \

217 && !
defšed
 
	g_ISOC99_SOURCE
 \

218 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

219 && !
defšed
 
	g_XOPEN_SOURCE
))

220 #undeà
_DEFAULT_SOURCE


221 
	#_DEFAULT_SOURCE
 1

	)

225 #ià(
defšed
 
_ISOC11_SOURCE
 \

226 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

227 
	#__USE_ISOC11
 1

	)

231 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

232 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

233 
	#__USE_ISOC99
 1

	)

237 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

238 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

239 
	#__USE_ISOC95
 1

	)

242 #ifdeà
__ılu¥lus


244 #ià
__ılu¥lus
 >= 201703L

245 
	#__USE_ISOC11
 1

	)

249 #ià
__ılu¥lus
 >ğ201103L || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__


250 
	#__USE_ISOCXX11
 1

	)

251 
	#__USE_ISOC99
 1

	)

258 #ifdeà
_DEFAULT_SOURCE


259 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


260 
	#__USE_POSIX_IMPLICITLY
 1

	)

262 #undeà
_POSIX_SOURCE


263 
	#_POSIX_SOURCE
 1

	)

264 #undeà
_POSIX_C_SOURCE


265 
	#_POSIX_C_SOURCE
 200809L

	)

268 #ià((!
defšed
 
__STRICT_ANSI__
 \

269 || (
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

270 && !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

271 
	#_POSIX_SOURCE
 1

	)

272 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

273 
	#_POSIX_C_SOURCE
 2

	)

274 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

275 
	#_POSIX_C_SOURCE
 199506L

	)

276 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

277 
	#_POSIX_C_SOURCE
 200112L

	)

279 
	#_POSIX_C_SOURCE
 200809L

	)

281 
	#__USE_POSIX_IMPLICITLY
 1

	)

290 #ià((!
defšed
 
_POSIX_C_SOURCE
 || (_POSIX_C_SOURCE - 0) < 199506L) \

291 && (
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE
))

292 
	#_POSIX_SOURCE
 1

	)

293 #undeà
_POSIX_C_SOURCE


294 
	#_POSIX_C_SOURCE
 199506L

	)

297 #ià(
defšed
 
_POSIX_SOURCE
 \

298 || (
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

299 || 
defšed
 
_XOPEN_SOURCE
)

300 
	#__USE_POSIX
 1

	)

303 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


304 
	#__USE_POSIX2
 1

	)

307 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

308 
	#__USE_POSIX199309
 1

	)

311 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

312 
	#__USE_POSIX199506
 1

	)

315 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

316 
	#__USE_XOPEN2K
 1

	)

317 #undeà
__USE_ISOC95


318 
	#__USE_ISOC95
 1

	)

319 #undeà
__USE_ISOC99


320 
	#__USE_ISOC99
 1

	)

323 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

324 
	#__USE_XOPEN2K8
 1

	)

325 #undeà
_ATFILE_SOURCE


326 
	#_ATFILE_SOURCE
 1

	)

329 #ifdef 
_XOPEN_SOURCE


330 
	#__USE_XOPEN
 1

	)

331 #ià(
_XOPEN_SOURCE
 - 0) >= 500

332 
	#__USE_XOPEN_EXTENDED
 1

	)

333 
	#__USE_UNIX98
 1

	)

334 #undeà
_LARGEFILE_SOURCE


335 
	#_LARGEFILE_SOURCE
 1

	)

336 #ià(
_XOPEN_SOURCE
 - 0) >= 600

337 #ià(
_XOPEN_SOURCE
 - 0) >= 700

338 
	#__USE_XOPEN2K8
 1

	)

339 
	#__USE_XOPEN2K8XSI
 1

	)

341 
	#__USE_XOPEN2K
 1

	)

342 
	#__USE_XOPEN2KXSI
 1

	)

343 #undeà
__USE_ISOC95


344 
	#__USE_ISOC95
 1

	)

345 #undeà
__USE_ISOC99


346 
	#__USE_ISOC99
 1

	)

349 #ifdeà
_XOPEN_SOURCE_EXTENDED


350 
	#__USE_XOPEN_EXTENDED
 1

	)

355 #ifdeà
_LARGEFILE_SOURCE


356 
	#__USE_LARGEFILE
 1

	)

359 #ifdeà
_LARGEFILE64_SOURCE


360 
	#__USE_LARGEFILE64
 1

	)

363 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

364 
	#__USE_FILE_OFFSET64
 1

	)

367 #ià
defšed
 
_DEFAULT_SOURCE


368 
	#__USE_MISC
 1

	)

371 #ifdef 
_ATFILE_SOURCE


372 
	#__USE_ATFILE
 1

	)

375 #ifdef 
_GNU_SOURCE


376 
	#__USE_GNU
 1

	)

379 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

380 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

381 #ià
_FORTIFY_SOURCE
 > 1

382 
	#__USE_FORTIFY_LEVEL
 2

	)

384 
	#__USE_FORTIFY_LEVEL
 1

	)

387 
	#__USE_FORTIFY_LEVEL
 0

	)

394 #ià
defšed
 
__ılu¥lus
 ? __ılu¥lu >ğ201402L : defšed 
__USE_ISOC11


395 
	#__GLIBC_USE_DEPRECATED_GETS
 0

	)

397 
	#__GLIBC_USE_DEPRECATED_GETS
 1

	)

402 
	~<¡dc-´edef.h
>

410 #undeà
__GNU_LIBRARY__


411 
	#__GNU_LIBRARY__
 6

	)

415 
	#__GLIBC__
 2

	)

416 
	#__GLIBC_MINOR__
 27

	)

418 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

419 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

422 #iâdeà
__ASSEMBLER__


423 #iâdeà
_SYS_CDEFS_H


424 
	~<sys/cdefs.h
>

429 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


430 
	#__USE_LARGEFILE
 1

	)

431 
	#__USE_LARGEFILE64
 1

	)

437 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

438 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

439 && 
defšed
 
	g__ex‹º_šlše


440 
	#__USE_EXTERN_INLINES
 1

	)

448 
	~<gnu/¡ubs.h
>

	@/usr/include/gflags/gflags_declare.h

37 #iâdeà
GFLAGS_DECLARE_H_


38 
	#GFLAGS_DECLARE_H_


	)

43 
	#GFLAGS_NAMESPACE
 
googË


	)

53 #iâdeà
GFLAGS_IS_A_DLL


54 
	#GFLAGS_IS_A_DLL
 1

	)

58 #iâdeà
GFLAGS_DLL_DECL


59 #ià
GFLAGS_IS_A_DLL
 && 
defšed
(
_MSC_VER
)

60 
	#GFLAGS_DLL_DECL
 
	`__deş¥ec
(
dÎimpÜt
)

	)

62 
	#GFLAGS_DLL_DECL


	)

67 #iâdeà
GFLAGS_DLL_DECLARE_FLAG


68 #ià
GFLAGS_IS_A_DLL
 && 
defšed
(
_MSC_VER
)

69 
	#GFLAGS_DLL_DECLARE_FLAG
 
	`__deş¥ec
(
dÎimpÜt
)

	)

71 
	#GFLAGS_DLL_DECLARE_FLAG


	)

77 
	~<¡ršg
>

79 
	~<¡dšt.h
>

81 
	~<sys/ty³s.h
>

83 
	~<š‰y³s.h
>

86 
Çme¥aû
 
	gGFLAGS_NAMESPACE
 {

89 
št32_t
 
	tšt32
;

90 
ušt32_t
 
	tušt32
;

91 
št64_t
 
	tšt64
;

92 
ušt64_t
 
	tušt64
;

94 
št32_t
 
	tšt32
;

95 
u_št32_t
 
	tušt32
;

96 
št64_t
 
	tšt64
;

97 
u_št64_t
 
	tušt64
;

99 
__št32
 
	tšt32
;

100 
	t__št32
 
	tušt32
;

101 
__št64
 
	tšt64
;

102 
	t__št64
 
	tušt64
;

104 #”rÜ 
Do
 
nÙ
 
know
 
how
 
to
 
defše
 
a
 32-
b™
 
š‹g”
 
quªt™y
 
Ú
 
your
 
sy¡em


110 
Çme¥aû
 
	gfLS
 {

116 
	g¡d
::
	t¡ršg
 
	tş¡ršg
;

121 
	#DECLARE_VARIABLE
(
ty³
, 
shÜ‰y³
, 
Çme
) \

123 
Çme¥aû
 
fL
##
shÜ‰y³
 { 
GFLAGS_DLL_DECLARE_FLAG
 
ty³
 
FLAGS_
##
Çme
; } \

124 
usšg
 
fL
##
shÜ‰y³
::
FLAGS_
##
Çme


	)

126 
	#DECLARE_boŞ
(
Çme
) \

127 
	`DECLARE_VARIABLE
(
boŞ
, 
B
, 
Çme
)

	)

129 
	#DECLARE_št32
(
Çme
) \

130 
	`DECLARE_VARIABLE
(::
GFLAGS_NAMESPACE
::
št32
, 
I
, 
Çme
)

	)

132 
	#DECLARE_ušt32
(
Çme
) \

133 
	`DECLARE_VARIABLE
(::
GFLAGS_NAMESPACE
::
ušt32
, 
U
, 
Çme
)

	)

135 
	#DECLARE_št64
(
Çme
) \

136 
	`DECLARE_VARIABLE
(::
GFLAGS_NAMESPACE
::
št64
, 
I64
, 
Çme
)

	)

138 
	#DECLARE_ušt64
(
Çme
) \

139 
	`DECLARE_VARIABLE
(::
GFLAGS_NAMESPACE
::
ušt64
, 
U64
, 
Çme
)

	)

141 
	#DECLARE_doubË
(
Çme
) \

142 
	`DECLARE_VARIABLE
(, 
D
, 
Çme
)

	)

144 
	#DECLARE_¡ršg
(
Çme
) \

146 
Çme¥aû
 
fLS
 { \

147 
usšg
 ::
fLS
::
ş¡ršg
; \

148 
GFLAGS_DLL_DECLARE_FLAG
 ::
fLS
::
ş¡ršg
& 
FLAGS_
##
Çme
; \

150 
usšg
 
fLS
::
FLAGS_
##
Çme


	)

	@/usr/include/strings.h

18 #iâdef 
_STRINGS_H


19 
	#_STRINGS_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	#__Ãed_size_t


	)

23 
	~<¡ddef.h
>

26 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

27 
	#__CORRECT_ISO_CPP_STRINGS_H_PROTO


	)

30 
	g__BEGIN_DECLS


32 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


34 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

35 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

38 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

39 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

42 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

45 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


48 *
	`šdex
 (*
__s
, 
__c
)

49 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

50 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

51 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

53 #ià
defšed
 
__OPTIMIZE__


54 
__ex‹º_®ways_šlše
 *

55 
	`šdex
 (*
__s
, 
__c
è
__THROW


57  
	`__butš_šdex
 (
__s
, 
__c
);

60 
__ex‹º_®ways_šlše
 const *

61 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


63  
	`__butš_šdex
 (
__s
, 
__c
);

66 
	}
}

68 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

69 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

73 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


76 *
	`ršdex
 (*
__s
, 
__c
)

77 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

79 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ià
defšed
 
__OPTIMIZE__


82 
__ex‹º_®ways_šlše
 *

83 
	`ršdex
 (*
__s
, 
__c
è
__THROW


85  
	`__butš_ršdex
 (
__s
, 
__c
);

88 
__ex‹º_®ways_šlše
 const *

89 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


91  
	`__butš_ršdex
 (
__s
, 
__c
);

94 
	}
}

96 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

97 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

101 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8
 || defšed 
__USE_XOPEN2K8XSI


104 
	$ffs
 (
__i
è
__THROW
 
__©Œibu‹_cÚ¡__
;

109 #ifdef 
__USE_MISC


110 
	$ff¦
 (
__l
è
__THROW
 
__©Œibu‹_cÚ¡__
;

111 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

112 
__THROW
 
__©Œibu‹_cÚ¡__
;

116 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

117 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

120 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

121 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

123 #ifdef 
__USE_XOPEN2K8


125 
	~<b™s/ty³s/loÿË_t.h
>

128 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
loÿË_t
 
__loc
)

129 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

133 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

134 
size_t
 
__n
, 
loÿË_t
 
__loc
)

135 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

138 
__END_DECLS


140 #ià
	`__GNUC_PREREQ
 (3,4è&& 
__USE_FORTIFY_LEVEL
 > 0 \

141 && 
defšed
 
__fÜtify_funùiÚ


143 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


144 
	~<b™s/¡ršgs_fÜtif›d.h
>

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

58 
	#__STDC_ISO_10646__
 201706L

	)

61 
	#__STDC_NO_THREADS__
 1

	)

	@
1
.
1
/usr/include
66
2189
include/alego/imageProjection.h
include/alego/laserMapping.h
include/alego/laserOdometry.h
include/alego/utility.h
src/IP.cpp
src/LM.cpp
src/LO.cpp
src/imageProjection.cpp
src/laserMapping.cpp
src/laserOdometry.cpp
/usr/include/ceres/ceres.h
/usr/include/ceres/rotation.h
/usr/include/ceres/autodiff_cost_function.h
/usr/include/ceres/autodiff_local_parameterization.h
/usr/include/ceres/cost_function.h
/usr/include/ceres/cost_function_to_functor.h
/usr/include/ceres/covariance.h
/usr/include/ceres/crs_matrix.h
/usr/include/ceres/dynamic_autodiff_cost_function.h
/usr/include/ceres/dynamic_numeric_diff_cost_function.h
/usr/include/ceres/gradient_problem.h
/usr/include/ceres/gradient_problem_solver.h
/usr/include/ceres/iteration_callback.h
/usr/include/ceres/jet.h
/usr/include/ceres/local_parameterization.h
/usr/include/ceres/loss_function.h
/usr/include/ceres/numeric_diff_cost_function.h
/usr/include/ceres/ordered_groups.h
/usr/include/ceres/problem.h
/usr/include/ceres/sized_cost_function.h
/usr/include/ceres/solver.h
/usr/include/ceres/types.h
/usr/include/ceres/version.h
/usr/include/ceres/dynamic_cost_function.h
/usr/include/ceres/dynamic_cost_function_to_functor.h
/usr/include/ceres/fpclassify.h
/usr/include/ceres/internal/autodiff.h
/usr/include/ceres/internal/disable_warnings.h
/usr/include/ceres/internal/eigen.h
/usr/include/ceres/internal/fixed_array.h
/usr/include/ceres/internal/macros.h
/usr/include/ceres/internal/numeric_diff.h
/usr/include/ceres/internal/port.h
/usr/include/ceres/internal/reenable_warnings.h
/usr/include/ceres/internal/scoped_ptr.h
/usr/include/ceres/numeric_diff_options.h
/usr/include/glog/logging.h
/usr/include/assert.h
/usr/include/ceres/internal/config.h
/usr/include/ceres/internal/manual_constructor.h
/usr/include/ceres/internal/variadic_evaluate.h
/usr/include/errno.h
/usr/include/gflags/gflags.h
/usr/include/glog/log_severity.h
/usr/include/glog/vlog_is_on.h
/usr/include/inttypes.h
/usr/include/stdint.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/features.h
/usr/include/gflags/gflags_declare.h
/usr/include/strings.h
/usr/include/stdc-predef.h
